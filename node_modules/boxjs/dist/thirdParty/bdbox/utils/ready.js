module.exports = function () {
  var $ = require('boxjs/dist/utils/_bdboxWrapper');
  /**
   * dom ready方法
   *
   * @memberOf Bdbox
   * @function
   * @name ready
   * @param  {Array} ready的回调函数队列
   * @example
   * Bdbox.utils.ready(function() {
   *     console.log('dom is ready');
   * });
   * @version $Id: ready.js 266107 2015-09-28 06:01:02Z wangyongqing01 $
   */


  var funList = [];
  var isReady = false;

  function onReady() {
    funList.forEach(function (fun) {
      fun();
    });
    funList.length = 0;
    isReady = true;
  }

  function ready(fun) {
    if (typeof fun !== 'function') {
      return;
    }

    if (isReady) {
      fun();
    } else {
      funList.push(fun);
    }
  }

  if ('complete,loaded,interactive'.indexOf(document.readyState) > -1 && document.body) {
    onReady();
  } else {
    document.addEventListener('DOMContentLoaded', onReady, false);
  }

  return ready;
}();