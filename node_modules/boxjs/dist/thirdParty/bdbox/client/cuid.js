module.exports = function () {
  var $ = require('boxjs/dist/utils/_bdboxWrapper');
  /* eslint-disable */

  /**
   * 获取cuid；
   * @memberOf Bdbox.client
   * @name cuid
   * 手百android6.5+才提供，低版本的安卓从cookie获取的加密的cuid，ios直接从userAgent获取
   */


  var getVersion = require('../utils/getVersion'),
      version_compare = require('../utils/version_compare'),
      A_NAMESPACE = 'Bdbox_android_utils',
      android_invokeApp = require('../android/invokeApp');

  var self = function () {
    if ($.$isIOS()) {
      var reg = /baiduboxapp\/.*\/(\w+)\/\d/,
          ua = navigator.userAgent;
      list = ua.match(reg);
      return list ? list[1] : '';
    }

    if (version_compare(getVersion(), '6.5') >= 0) {
      return android_invokeApp(A_NAMESPACE, 'getcuid').result;
    } else {
      var match = document.cookie.match(/BAIDUCUID=(.+?);/);
      return match ? match[1] : '';
    }
  };

  return self;
}();