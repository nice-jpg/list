{"remainingRequest":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js??ref--1-2!/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/src/pages/exampublish/containers/app.js","dependencies":[{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/src/pages/exampublish/containers/app.js","mtime":1695633995720},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/san-hot-loader/index.js","mtime":1696919525187},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/cache-loader/dist/cjs.js","mtime":1696919513896},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js","mtime":1696919524615}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVmbGVjdC5jb25zdHJ1Y3QiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCIpOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIikpOwoKdmFyIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2Fzc2VydFRoaXNJbml0aWFsaXplZCIpKTsKCnZhciBfaW5oZXJpdHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIikpOwoKdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIikpOwoKdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZ2V0UHJvdG90eXBlT2YiKSk7Cgp2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSIpKTsKCnJlcXVpcmUoIi4vYXBwLmxlc3MiKTsKCnZhciBfc2FuID0gcmVxdWlyZSgic2FuIik7Cgp2YXIgX1N0b3JlID0gcmVxdWlyZSgiQC9saWIvU3RvcmUiKTsKCnZhciBfbmFubyA9IHJlcXVpcmUoIkBiYWlkdS9uYW5vIik7Cgp2YXIgX2ZseWlvID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJmbHlpbyIpKTsKCnZhciBfYm94eCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQGJhaWR1L2JveHgiKSk7Cgp2YXIgX3plbm8gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4uL2NvbXBvbmVudHMvemVubyIpKTsKCnZhciBfcmFua2xpc3ROZXcgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4uL2NvbXBvbmVudHMvcmFua2xpc3ROZXciKSk7Cgp2YXIgX2NvbnN0ID0gcmVxdWlyZSgiLi4vY29uc3QiKTsKCnZhciBfc2VydmljZSA9IHJlcXVpcmUoIi4uL3NlcnZpY2UiKTsKCnZhciBfY29tbW9uID0gcmVxdWlyZSgiQC9saWIvdXRpbHMvY29tbW9uIik7Cgp2YXIgX2xvZyA9IHJlcXVpcmUoIi4uL2xvZyIpOwoKdmFyIF9lbnYgPSByZXF1aXJlKCJAYmFpZHUvYXVjLWJhc2UvZW52Iik7Cgp2YXIgX3ZlcnNpb25fY29tcGFyZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQGJhaWR1L3hib3gvdmVyc2lvbl9jb21wYXJlIikpOwoKdmFyIF9jb21tb24yID0gcmVxdWlyZSgiLi4vY29tbW9uIik7CgpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIuZGVmYXVsdCkodGhpcywgcmVzdWx0KTsgfTsgfQoKZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoRGF0ZSwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9Cgp2YXIgbG9naW5DYk5hbWUgPSAibG9naW5DYiIuY29uY2F0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwZTMpKTsKCnZhciBBcHAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICAoMCwgX2luaGVyaXRzMi5kZWZhdWx0KShBcHAsIF9Db21wb25lbnQpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEFwcCk7CgogIGZ1bmN0aW9uIEFwcChvcHQpIHsKICAgIHZhciBfdGhpczsKCiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMi5kZWZhdWx0KSh0aGlzLCBBcHApOwogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHQpOwogICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkoKDAsIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQyLmRlZmF1bHQpKF90aGlzKSwgIm9iSW5zIiwgbnVsbCk7CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KShBcHAsIFt7CiAgICBrZXk6ICJpbml0U2hhcmVEYXRhIiwKICAgIC8vIOWIneWni+WMluWIhuS6q+aVsOaNrgogICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRTaGFyZURhdGEoKSB7CiAgICAgIHdpbmRvdy5Cb3hTaGFyZURhdGEgPSB7CiAgICAgICAgb3B0aW9uczogewogICAgICAgICAgdHlwZTogJ3VybCcsCiAgICAgICAgICBtZWRpYVR5cGU6ICdhbGwnLAogICAgICAgICAgbGlua1VybDogX2NvbnN0LnBhZ2VVUkwuU0hBUkUsCiAgICAgICAgICB0aXRsZTogJ+eDreeCueaMkeaImOi1mycsCiAgICAgICAgICBjb250ZW50OiAn5p2l55m+5bqm5ouN6KeG6aKR6LWi5aSn5aWW77yB5pyA6auY5Y+v5b6XMTAwMOWFg++8gScsCiAgICAgICAgICBpY29uVXJsOiAnaHR0cHM6Ly9iLmJkc3RhdGljLmNvbS9zZWFyY2hib3gvaW1hZ2UvZ2NwLzIwMjMwODI1LzQxODQ3NjU1MzkuanBnJywKICAgICAgICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9iLmJkc3RhdGljLmNvbS9zZWFyY2hib3gvaW1hZ2UvZ2NwLzIwMjMwODI1LzQxODQ3NjU1MzkuanBnJwogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ0b0xvZ2luIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b0xvZ2luKGlzUmVsb2FkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgLy8gTkHnmbvpmYbpnaLmnb/nmoTlm57osIMKICAgICAgd2luZG93W2xvZ2luQ2JOYW1lXSA9IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgdmFyIF9wYXlsb2FkLCBfcGF5bG9hZDIsIF9wYXlsb2FkMiRkYXRhOwoKICAgICAgICB0cnkgewogICAgICAgICAgcGF5bG9hZCA9IEpTT04ucGFyc2UocGF5bG9hZCk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICBjb25zb2xlLmxvZygnbG9naW4gbmV4dENhbGxiYWNrIHBheWxvYWQgcGFzZSBlcnJvcicsIGVycm9yKTsKICAgICAgICB9IC8vIOeZu+mZhuaIkOWKnwoKCiAgICAgICAgaWYgKHBheWxvYWQgJiYgISsoKF9wYXlsb2FkID0gcGF5bG9hZCkgPT09IG51bGwgfHwgX3BheWxvYWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wYXlsb2FkLnN0YXR1cykgJiYgKChfcGF5bG9hZDIgPSBwYXlsb2FkKSA9PT0gbnVsbCB8fCBfcGF5bG9hZDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcGF5bG9hZDIkZGF0YSA9IF9wYXlsb2FkMi5kYXRhKSA9PT0gbnVsbCB8fCBfcGF5bG9hZDIkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BheWxvYWQyJGRhdGEuc3RhdHVzKSA9PT0gJzEnKSB7CiAgICAgICAgICBfdGhpczIuZGF0YS5zZXQoJ2lzTG9naW4nLCAxKTsKCiAgICAgICAgICBpZiAoaXNSZWxvYWQpIHsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgfQoKICAgICAgICAgIDsKICAgICAgICB9CiAgICAgIH07CgogICAgICB2YXIgc2NoZW1lID0gImJhaWR1Ym94YXBwOi8vdjI2L2FjY291bnQvbG9naW4/cGFyYW1zPSU3QiUyMmxvZ2luVHlwZSUyMiUzQSUyMnNtcyUyMiUyQyUyMnNob3dUaGlyZExvZ2luJTIyJTNBMSUyQyUyMmxvZ2luU291cmNlJTIyJTNBJTIyJTIyJTJDJTIybm9ybWFsaXplQWNjb3VudCUyMiUzQTAlMkMlMjJsb2dpbkNhbGxiYWNrJTIyJTNBJTIyIi5jb25jYXQobG9naW5DYk5hbWUsICIlMjIlN0QmY2FsbGJhY2s9Y29uc29sZS5sb2cmdXBncmFkZT0wIik7CiAgICAgICgwLCBfY29tbW9uLmludm9rZVNjaGVtZSkoc2NoZW1lKTsKICAgIH0gLy8gbWV0aG9k77ya6LCD6LW35Liq5Lq66KeG6aKRCiAgICAvLyBqdW1wVmlkZW8oKSB7CiAgICAvLyAgICAgc2VuZENsaWNrTG9nKHt2YWx1ZTogJ215X3B1Ymxpc2gnfSk7CiAgICAvLyAgICAgY29uc3Qge215X3ZpZGVvOiBteVZpZGVvfSA9IHRoaXMuZGF0YS5nZXQoJ3Jlc0RhdGEnKSB8fCB7fTsKICAgIC8vICAgICBjb25zdCBpc0xvZ2luID0gdGhpcy5kYXRhLmdldCgnaXNMb2dpbicpOwogICAgLy8gICAgIC8vIOWFnOW6le+8mui3s+S4quS6uuS4reW/g+WFiOeZu+mZhgogICAgLy8gICAgIGlmICghaXNMb2dpbikgewogICAgLy8gICAgICAgICB0aGlzLnRvTG9naW4odHJ1ZSk7CiAgICAvLyAgICAgICAgIHJldHVybjsKICAgIC8vICAgICB9OwogICAgLy8gICAgIGlmIChteVZpZGVvPy5jbWQpIHsKICAgIC8vICAgICAgICAgaW52b2tlU2NoZW1lKG15VmlkZW8uY21kKTsKICAgIC8vICAgICB9CiAgICAvLyB9CiAgICAvLyBtZXRob2TvvJrosIPotbflpZblk4HpobXvvIjmiJHnmoTop4bpopHvvIkKCiAgfSwgewogICAga2V5OiAianVtcEF3YXJkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBqdW1wQXdhcmQoKSB7CiAgICAgICgwLCBfbG9nLnNlbmRDbGlja0xvZykoewogICAgICAgIHZhbHVlOiAnbXlfcHVibGlzaCcKICAgICAgfSk7CgogICAgICB2YXIgX3JlZiA9IHRoaXMuZGF0YS5nZXQoJ3Jlc0RhdGEnKSB8fCB7fSwKICAgICAgICAgIG15QXNzZXRzID0gX3JlZi5teV9hc3NldHM7CgogICAgICB2YXIgaXNMb2dpbiA9IHRoaXMuZGF0YS5nZXQoJ2lzTG9naW4nKTsgLy8g5YWc5bqV77ya5YWI55m76ZmG5Zyo55yL6ZKx5YyFCgogICAgICBpZiAoIWlzTG9naW4pIHsKICAgICAgICB0aGlzLnRvTG9naW4odHJ1ZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICA7CgogICAgICBpZiAobXlBc3NldHMgPT09IG51bGwgfHwgbXlBc3NldHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG15QXNzZXRzLmNtZCkgewogICAgICAgICgwLCBfY29tbW9uLmludm9rZVNjaGVtZSkobXlBc3NldHMuY21kKTsKICAgICAgfQogICAgfSAvLyBtZXRob2TvvJrosIPotbfop4TliJnpobUKCiAgfSwgewogICAga2V5OiAianVtcFJ1bGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGp1bXBSdWxlKCkgewogICAgICAoMCwgX2xvZy5zZW5kQ2xpY2tMb2cpKHsKICAgICAgICB2YWx1ZTogJ3J1bGVfZW50cnknCiAgICAgIH0pOwogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IF9jb25zdC5wYWdlVVJMLlJVTEU7CiAgICB9IC8vIG1ldGhvZO+8muiwg+i1t+WIhuS6q+mdouadvwoKICB9LCB7CiAgICBrZXk6ICJqdW1wU2hhcmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGp1bXBTaGFyZSgpIHsKICAgICAgKDAsIF9sb2cuc2VuZENsaWNrTG9nKSh7CiAgICAgICAgdmFsdWU6ICdzaGFyZV9lbnRyeScKICAgICAgfSk7CgogICAgICB0cnkgewogICAgICAgIHdpbmRvdy5zdWNjZXNzY2FsbGJhY2sgPSBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB2YXIgX3Jlc3AkZGF0YTsKCiAgICAgICAgICB2YXIgcmVzcCA9IHR5cGVvZiByZXMgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShyZXMpIDogcmVzOwoKICAgICAgICAgIGlmICgocmVzcCA9PT0gbnVsbCB8fCByZXNwID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3Jlc3AkZGF0YSA9IHJlc3AuZGF0YSkgPT09IG51bGwgfHwgX3Jlc3AkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jlc3AkZGF0YS5zdGF0dXMpID09PSAnMCcpIHsKICAgICAgICAgICAgX2JveHguZGVmYXVsdC5jYWxsKCdjb21tb25VSS5zaG93VG9hc3QnLCB7CiAgICAgICAgICAgICAgdHlwZTogJzEnLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfliIbkuqvmiJDlip8nCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgICBzaGFyZURhdGE6IHdpbmRvdy5Cb3hTaGFyZURhdGEub3B0aW9ucywKICAgICAgICAgIHNoYXJlQ2FsbGJhY2s6ICdzdWNjZXNzY2FsbGJhY2snCiAgICAgICAgfTsKICAgICAgICAoMCwgX2NvbW1vbi5pbnZva2VTY2hlbWUpKCJiYWlkdWJveGFwcDovL3NoYXJlL2RvU2hhcmU/cGFyYW1zPSIuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShwYXJhbXMpKSkpOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9CiAgICB9IC8vIGhhbmRsZe+8muWHoOS4quWPkeW4g+eCueWHuwoKICB9LCB7CiAgICBrZXk6ICJoYW5kbGVQdWJCdG5DbGljayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlUHViQnRuQ2xpY2soYXJncykgewogICAgICB2YXIgZmlyc3RGaW5nZXJDbGljayA9IHRoaXMuZGF0YS5nZXQoJ2ZpcnN0RmluZ2VyQ2xpY2snKTsKICAgICAgZmlyc3RGaW5nZXJDbGljayAmJiB0aGlzLmRhdGEuc2V0KCdmaXJzdEZpbmdlckNsaWNrJywgZmFsc2UpOwoKICAgICAgdmFyIF9yZWYyID0gYXJncyB8fCB7fSwKICAgICAgICAgIF9yZWYyJGNtZCA9IF9yZWYyLmNtZCwKICAgICAgICAgIGNtZCA9IF9yZWYyJGNtZCA9PT0gdm9pZCAwID8gJycgOiBfcmVmMiRjbWQ7IC8vIGNvbnN0IGlzRmluaXNoSW5mbyA9IHRoaXMuZGF0YS5nZXQoJ2lzRmluaXNoSW5mbycpOwoKCiAgICAgIHZhciBpc0xvZ2luID0gdGhpcy5kYXRhLmdldCgnaXNMb2dpbicpOyAvLyDlhYjnmbvpmYYKCiAgICAgIGlmICghaXNMb2dpbikgewogICAgICAgIHRoaXMudG9Mb2dpbih0cnVlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIDsKICAgICAgKDAsIF9jb21tb24uaW52b2tlU2NoZW1lKShjbWQpOwogICAgfSAvLyDlj5HluIPlmajnirbmgIEKCiAgfSwgewogICAga2V5OiAicHJvZmlsZXVnY3N0YXR1cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvZmlsZXVnY3N0YXR1cygpIHsKICAgICAgKDAsIF9jb21tb24yLmdldFByb2Nlc3NJbmZvKSgpOwogICAgICAoMCwgX2NvbW1vbjIuZGF0YWNoYW5uZWxSZWdpc3RlcikoKTsKICAgIH0gLy8g5rS75Yqo54q25oCBCgogIH0sIHsKICAgIGtleTogInNldEFjdGl2aXR5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBY3Rpdml0eSgpIHsKICAgICAgdmFyIF9yZWYzID0gdGhpcy5kYXRhLmdldCgncmVzRGF0YScpIHx8IHt9LAogICAgICAgICAgYWN0aXZpdHlTdGF0dXMgPSBfcmVmMy5hY3Rpdml0eV9zdGF0dXM7CgogICAgICBpZiAoK2FjdGl2aXR5U3RhdHVzID09PSAyKSB7CiAgICAgICAgLy8g5bey57uP57uT5p2fCiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBfY29uc3QucGFnZVVSTC5FRE47CiAgICAgIH0gZWxzZSBpZiAoK2FjdGl2aXR5U3RhdHVzID09PSAzKSB7CiAgICAgICAgLy8g5bey57uP5LiL57q/CiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBfY29uc3QucGFnZVVSTC5PRkZMSU5FOwogICAgICB9CiAgICB9IC8vIOWPlua2iOWPkeW4g+WZqHRvYXN0CgogIH0sIHsKICAgIGtleTogInNldFB1YlRvYXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRQdWJUb2FzdCgpIHsKICAgICAgaWYgKCFfZW52LmVudi5pc0JveFNlcmllcykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgOwogICAgICB2YXIgcGFyYW1zID0gewogICAgICAgIGlzU2hvdzogMQogICAgICB9OyAvLyDlj5bmtoh0b2FzdCBodHRwczovL2t1LmJhaWR1LWludC5jb20va25vd2xlZGdlL0hGVnJDN2hxMVEvSDBqelh2ODhKYi9keW9nWVlWY1RZL29hdVRtLUlDazc0NGtXCgogICAgICAoMCwgX2NvbW1vbi5pbnZva2VTY2hlbWUpKCJiYWlkdWJveGFwcDovL3VnYy9pc1Nob3dQcm9ncmVzc1ZpZXc/dXBncmFkZT0xJnBhcmFtcz0iLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkocGFyYW1zKSkpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVJbnRlcnNlY3Rpb25PYnNlcnZlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMub2JJbnMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMub2JJbnMgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKGVudHJpZXMpIHsKICAgICAgICBlbnRyaWVzLmZvckVhY2goZnVuY3Rpb24gKGVudHJ5KSB7CiAgICAgICAgICAvLyDojrflj5bliLDlvZPliY1kb23lkoxjbGFzc05hbWUKICAgICAgICAgIHZhciBjdXJEb20gPSBlbnRyeS50YXJnZXQ7CiAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gY3VyRG9tLmNsYXNzTGlzdFswXTsKICAgICAgICAgIHZhciByYXRpbyA9IGVudHJ5LmludGVyc2VjdGlvblJhdGlvOwogICAgICAgICAgdmFyIHZhbHVlID0gJyc7CiAgICAgICAgICBjbGFzc05hbWUgPT09ICdwYXJ0TWV0aG9kJyAmJiAodmFsdWUgPSAncnVsZV9wdWJsaXNoJyk7CiAgICAgICAgICBjbGFzc05hbWUgPT09ICdhY3Rpdml0eVJld2FyZCcgJiYgKHZhbHVlID0gJ3J1bGVfYXdhcmQnKTsKICAgICAgICAgIGNsYXNzTmFtZSA9PT0gJ2xpc3RDYXJkJyAmJiAodmFsdWUgPSAnd2Vla2x5X2JvYXJkJyk7CgogICAgICAgICAgaWYgKHJhdGlvID4gMC41KSB7CiAgICAgICAgICAgIC8vIOaJk+eCuQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh2YWx1ZSk7CiAgICAgICAgICAgICgwLCBfbG9nLnNlbmRTaG93TG9nKSh7CiAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgX3RoaXMzLm9iSW5zLnVub2JzZXJ2ZShjdXJEb20pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9LCB7CiAgICAgICAgdGhyZXNob2xkOiBbMCwgMC41LCAxXQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbml0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRlZCgpIHsKICAgICAgLy8g5Y2H57qn6aG1LeaJi+eZve+9nOeJiOacrOWwj+S6jjEzLjI4CiAgICAgIGlmIChfZW52LmVudi5pc0JveFNlcmllcyAmJiAoMCwgX3ZlcnNpb25fY29tcGFyZS5kZWZhdWx0KShfZW52LmVudi5ib3hWZXJzaW9uLCAnMTMuMjgnKSA8IDApIHsKICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IF9jb25zdC5wYWdlVVJMLlVQREFURTsKICAgICAgfQoKICAgICAgOwogICAgfQogIH0sIHsKICAgIGtleTogImF0dGFjaGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhdHRhY2hlZCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICAvLyDmiZPngrkKICAgICAgdGhpcy5jcmVhdGVJbnRlcnNlY3Rpb25PYnNlcnZlcigpOwogICAgICB0aGlzLm9iSW5zLm9ic2VydmUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhcnRNZXRob2QnKSk7CiAgICAgIHRoaXMub2JJbnMub2JzZXJ2ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWN0aXZpdHlSZXdhcmQnKSk7CiAgICAgIHRoaXMub2JJbnMub2JzZXJ2ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdENhcmQnKSk7IC8vIOmmlumhteaVsOaNrgoKICAgICAgdGhpcy5nZXREYXRhKCk7IC8vIOebkeWQrOmhtemdoui/m+WFpQoKICAgICAgKDAsIF9jb21tb24yLndhdGNoUGFnZVN0YXRlKShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICgwLCBfc2VydmljZS5nZXREYXRhKSgpLnRoZW4oZnVuY3Rpb24gKF9yZWY0KSB7CiAgICAgICAgICB2YXIgZGF0YSA9IF9yZWY0LmRhdGE7CiAgICAgICAgICB2YXIgcmVzRGF0YSA9IChkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEuZGF0YSkgfHwge307IC8vIHRoaXMuZGF0YS5zZXQoJ3Jlc0RhdGEnLCByZXNEYXRhKTsKCiAgICAgICAgICBfdGhpczQuZGF0YS5zZXQoJ2lzTG9naW4nLCByZXNEYXRhLmlzX2xvZ2luKTsKCiAgICAgICAgICB2YXIgaXNTdWNQdWJsaXNoID0gX3RoaXM0LmRhdGEuZ2V0KCdpc1N1Y1B1Ymxpc2gnKTsKCiAgICAgICAgICBpZiAoaXNTdWNQdWJsaXNoKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF90aGlzNC5kYXRhLnNldCgnaXNTdWNQdWJsaXNoJywgZmFsc2UpOwogICAgICAgICAgICB9LCA3MDAwKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7IC8vIOmhtemdouaJk+eCuQoKICAgICAgKDAsIF9sb2cuc2VuZFNob3dMb2cpKHsKICAgICAgICB2YWx1ZTogJ2Vzc2F5X2FjdGl2aXR5JwogICAgICB9KTsgLy8g5Yid5aeL5YyW5YiG5LqrCgogICAgICB0aGlzLmluaXRTaGFyZURhdGEoKTsgLy8gdGhpcy5wcm9maWxldWdjc3RhdHVzKCk7CiAgICAgIC8vIOWPlua2iOWPkeW4g+aIkOWKn3RvYXN0CgogICAgICB0aGlzLnNldFB1YlRvYXN0KCk7IC8vIOWPkeW4g+WZqOa2iOaBr+mAmumBk++9nOWNs+aXtuW5v+aSrQoKICAgICAgd2luZG93LmdldENoYW5uZWwgPSBmdW5jdGlvbiAoX2FjdGlvbiwgcmVzKSB7CiAgICAgICAgdmFyIF9wdWJsaXNoUmVzdWx0JHBhcmFtczsKCiAgICAgICAgLy8g5raI5oGv6YCa6YGT6L+U5ZueCiAgICAgICAgdmFyIHJlc09iaiA9IEpTT04ucGFyc2UocmVzKSB8fCB7fTsgLy8g5piv5ZCm5bGV56S66L+HbG9hZGluZwogICAgICAgIC8vIGNvbnN0IGlzSGFzU2hvd0xvYWQgPSB0aGlzLmRhdGEuZ2V0KCdpc0hhc1Nob3dMb2FkJyk7CiAgICAgICAgLy8g5Y+R5biD6L+b5bqmCgogICAgICAgIF90aGlzNC5kYXRhLnNldCgncGVyY2VudGFnZScsIHJlc09iai5wZXJjZW50YWdlKTsgLy8gdGhpcy5kYXRhLnNldCgnbWVzc2FnZScsIHJlc09iaik7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzT2JqKTsKCgogICAgICAgIHZhciBpc1N1Y1B1Ymxpc2ggPSBfdGhpczQuZGF0YS5nZXQoJ2lzU3VjUHVibGlzaCcpOwoKICAgICAgICAhaXNTdWNQdWJsaXNoICYmIF90aGlzNC5kYXRhLnNldCgnaXNTdWNQdWJsaXNoJywgdHJ1ZSk7IC8vIOWmguaenOS4iumZkOS4jeWcqOi1sOWlluWKsemAu+i+kQogICAgICAgIC8vIGNvbnN0IHJlc0RhdGFBY3Rpdml0eSA9IHRoaXMuZGF0YS5nZXQoJ3Jlc0RhdGFBY3Rpdml0eScpIHx8IHt9OwogICAgICAgIC8vIGNvbnN0IHByb2dyZXNzQXJyID0gcmVzRGF0YUFjdGl2aXR5Py50YXNrPy5wcm9ncmVzcyB8fCBbXTsKICAgICAgICAvLyBpZiAocHJvZ3Jlc3NBcnJbcHJvZ3Jlc3NBcnIubGVuZ3RoIC0gMV0/LnN0YXR1cykgewogICAgICAgIC8vICAgICByZXR1cm47CiAgICAgICAgLy8gfTsKICAgICAgICAvLyAiMCI65aSx6LSl44CBIjEiOuetieW+heOAgSIyIjrov5DooYzjgIEiMyI65oiQ5Yqf44CBIjQiOuWIoOmZpAoKICAgICAgICBpZiAocmVzT2JqLnN0YXRlID09PSAiMCIpIHsKICAgICAgICAgIC8vIHRoaXMuZGF0YS5zZXQoJ2lzU2hvd0xvYWRQb3AnLCAwKTsKICAgICAgICAgIC8vIOWPkeW4g+Wksei0peaIluiAheW8guW4uAogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICgwLCBfbmFuby5Ub2FzdCkoJ+WPkeW4g+Wksei0pe+8jOivt+eojeWQjumHjeivlScpOwogICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICA7IC8vIOi/m+ihjOS4rQogICAgICAgIC8vIGlmICgrcmVzT2JqLnBlcmNlbnRhZ2UgPD0gMTAwICYmICFpc0hhc1Nob3dMb2FkKSB7CiAgICAgICAgLy8gICAgIC8vIHRoaXMuZGF0YS5zZXQoJ2lzU2hvd0xvYWRQb3AnLCAxKTsKICAgICAgICAvLyAgICAgLy8g6K6+572u5LiL6L+b5bqmCiAgICAgICAgLy8gICAgIGNvbnN0IGVsZW1CYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibXlCYXIiKTsKICAgICAgICAvLyAgICAgZWxlbUJhci5zdHlsZS53aWR0aCA9ICgrcmVzT2JqLnBlcmNlbnRhZ2UpICsgJyUnOwogICAgICAgIC8vIH07CiAgICAgICAgLy8g5oiQ5YqfJui/m+W6pjEwMCUKICAgICAgICAvLyBpZiAoK3Jlc09iai5wZXJjZW50YWdlID09PSAxMDAgJiYgK3Jlc09iai5zdGF0ZSA9PT0gMykgewogICAgICAgIC8vIHRoaXMuZGF0YS5zZXQoJ2lzU2hvd0xvYWRQb3AnLCAwKTsKICAgICAgICAvLyDlj5HluIPlrozmiJDlkI7lvLnlh7rljrvnnIvnnIvvvIzngrnlh7vot7PovazmiJHnmoTop4bpopHvvIjmiJHnmoTotYTkuqfvvIkKICAgICAgICAvLyB0b2FzdCh7CiAgICAgICAgLy8gICAgIGJ1dHRvbjogJ+WOu+eci+eciycsCiAgICAgICAgLy8gICAgIHRleHQ6J+aBreWWnOaCqOaIkOWKn+WPkeW4gyEnLAogICAgICAgIC8vICAgICBkdXJhdGlvbjogNywKICAgICAgICAvLyAgICAgb25DbGljaygpIHsKICAgICAgICAvLyAgICAgICAgIGludm9rZVNjaGVtZSgiYmFpZHVib3hhcHA6Ly92MS9lYXN5YnJvd3NlL29wZW4/YXBwZW5kPTEmYmFja2xvY2F0aW9uPTAmYmFubmVyc3dpdGNoPTEmZm9yYmlkYXV0b3JvdGF0ZT0xJm5ld2Jyb3dzZXI9MSZwYXJhbXM9JTdCJTIyc2hvd3Rvb2xiYXIlMjIlM0ElMjIxJTIyJTdEJnR5cGU9aW1tZXJzZSZ1cmw9aHR0cHMlM0ElMkYlMkZtYmQuYmFpZHUuY29tJTJGbmV3c3BhZ2UlMkZkYXRhJTJGZXhhbXB1Ymxpc2glM0ZhY3Rpb24lM0R3YWxsZXQmem9vbXN3aXRjaD0wIik7CiAgICAgICAgLy8gICAgIH0sCiAgICAgICAgLy8gfSk7CiAgICAgICAgLy8gfTsKICAgICAgICAvLyDlj5HluIPlrozmiJAKCiAgICAgICAgdmFyIHB1Ymxpc2hSZXN1bHQgPSAocmVzT2JqID09PSBudWxsIHx8IHJlc09iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzT2JqLnB1Ymxpc2hSZXN1bHQpIHx8IHt9OyAvLyAiMCLvvJrlpLHotKUgIjEi77ya562J5b6FICIyIu+8mui/kOihjCAiMyLvvJrmiJDlip8gIjQi77ya5Yig6ZmkCgogICAgICAgIGlmIChwdWJsaXNoUmVzdWx0ID09PSBudWxsIHx8IHB1Ymxpc2hSZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcHVibGlzaFJlc3VsdCRwYXJhbXMgPSBwdWJsaXNoUmVzdWx0LnBhcmFtcykgPT09IG51bGwgfHwgX3B1Ymxpc2hSZXN1bHQkcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHVibGlzaFJlc3VsdCRwYXJhbXMubmlkKSB7CiAgICAgICAgICB2YXIgX3B1Ymxpc2hSZXN1bHQkcGFyYW1zMjsKCiAgICAgICAgICAoMCwgX25hbm8uVG9hc3QpKHsKICAgICAgICAgICAgYnV0dG9uOiAn5Y6755yL55yLJywKICAgICAgICAgICAgdGV4dDogJ+aBreWWnOaCqOaIkOWKn+WPkeW4gyEnLAogICAgICAgICAgICBkdXJhdGlvbjogNywKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICAoMCwgX2NvbW1vbi5pbnZva2VTY2hlbWUpKCJiYWlkdWJveGFwcDovL3YxL2Vhc3licm93c2Uvb3Blbj9hcHBlbmQ9MSZiYWNrbG9jYXRpb249MCZiYW5uZXJzd2l0Y2g9MSZmb3JiaWRhdXRvcm90YXRlPTEmbmV3YnJvd3Nlcj0xJnBhcmFtcz0lN0IlMjJzaG93dG9vbGJhciUyMiUzQSUyMjElMjIlN0QmdHlwZT1pbW1lcnNlJnVybD1odHRwcyUzQSUyRiUyRm1iZC5iYWlkdS5jb20lMkZuZXdzcGFnZSUyRmRhdGElMkZleGFtcHVibGlzaCUzRmFjdGlvbiUzRHdhbGxldCZ6b29tc3dpdGNoPTAiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgcHVibGlzaE5pZCA9IHB1Ymxpc2hSZXN1bHQgPT09IG51bGwgfHwgcHVibGlzaFJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wdWJsaXNoUmVzdWx0JHBhcmFtczIgPSBwdWJsaXNoUmVzdWx0LnBhcmFtcykgPT09IG51bGwgfHwgX3B1Ymxpc2hSZXN1bHQkcGFyYW1zMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3B1Ymxpc2hSZXN1bHQkcGFyYW1zMi5uaWQ7CgogICAgICAgICAgdmFyIHJlcXVlc3RlZExpc3QgPSBfdGhpczQuZGF0YS5nZXQoJ3JlcXVlc3RlZExpc3QnKTsKCiAgICAgICAgICBpZiAoIXJlcXVlc3RlZExpc3QuaW5jbHVkZXMocHVibGlzaE5pZCkpIHsKICAgICAgICAgICAgdmFyIF9wdWJsaXNoUmVzdWx0JHBhcmFtczM7CgogICAgICAgICAgICAvLyDljrvph43vvIzor7fmsYLkuIDmrKEKICAgICAgICAgICAgX3RoaXM0LmRhdGEucHVzaCgncmVxdWVzdGVkTGlzdCcsIHB1Ymxpc2hOaWQpOyAvLyDor7fmsYLmiJDlip/lvLnnqpcKCgogICAgICAgICAgICBfZmx5aW8uZGVmYXVsdC5wb3N0KCIvbmV3c3BhZ2UvZGF0YS9leGFtcHVibGlzaCIsIHsKICAgICAgICAgICAgICBuaWQ6ICIiLmNvbmNhdChwdWJsaXNoUmVzdWx0ID09PSBudWxsIHx8IHB1Ymxpc2hSZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcHVibGlzaFJlc3VsdCRwYXJhbXMzID0gcHVibGlzaFJlc3VsdC5wYXJhbXMpID09PSBudWxsIHx8IF9wdWJsaXNoUmVzdWx0JHBhcmFtczMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wdWJsaXNoUmVzdWx0JHBhcmFtczMubmlkKQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmNSkgewogICAgICAgICAgICAgIHZhciBkYXRhID0gX3JlZjUuZGF0YTsKICAgICAgICAgICAgICB2YXIgcmVzcG9uc2VkYXRhID0gKGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS5kYXRhKSB8fCB7fTsKCiAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZWRhdGEpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIDsKCiAgICAgICAgICAgICAgX3RoaXM0LmRhdGEuc2V0KCdpc0xvZ2luJywgcmVzcG9uc2VkYXRhID09PSBudWxsIHx8IHJlc3BvbnNlZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzcG9uc2VkYXRhLmlzX2xvZ2luKTsgLy8gdGhpcy5kYXRhLnNldCgnc3VjcG9wUmVzRGF0YScsIHJlc3BvbnNlZGF0YSk7CgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICA7CiAgICAgICAgfQoKICAgICAgICA7CiAgICAgIH07IC8vIOWPkeW4g+WZqHNjaGVtZeWbnuiwgwoKCiAgICAgIHdpbmRvdy5na192aWRlb19jYWxsYmFjayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2RhdGEsIF9kYXRhMiwgX2RhdGEyJHBhcmFtczsKCiAgICAgICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpOyAvLyBzdGF0dXM6IDDmiJDlip/vvZwx5Y+W5raI44CBMuWksei0peOAgTPnmbvlvZXlpLHotKUKICAgICAgICAvLyBodHRwczovL2t1LmJhaWR1LWludC5jb20va25vd2xlZGdlL0hGVnJDN2hxMVEvcUNDUHVJcGJmbi95WlJUdkszM1hjL0lqZ01WWnU3bWlHbjZwCgogICAgICAgIGlmICgoKF9kYXRhID0gZGF0YSkgPT09IG51bGwgfHwgX2RhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXRhLnN0YXR1cykgPT09ICcwJyB8fCAoKF9kYXRhMiA9IGRhdGEpID09PSBudWxsIHx8IF9kYXRhMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXRhMiRwYXJhbXMgPSBfZGF0YTIucGFyYW1zKSA9PT0gbnVsbCB8fCBfZGF0YTIkcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF0YTIkcGFyYW1zLnRhc2tJZCkpIHsKICAgICAgICAgIF90aGlzNC5wcm9maWxldWdjc3RhdHVzKCk7IC8vIOS4iumZkHRvYXN05o+Q56S6CiAgICAgICAgICAvLyBjb25zdCByZXNEYXRhQWN0aXZpdHkgPSB0aGlzLmRhdGEuZ2V0KCdyZXNEYXRhQWN0aXZpdHknKSB8fCB7fTsKICAgICAgICAgIC8vIGNvbnN0IHByb2dyZXNzQXJyID0gcmVzRGF0YUFjdGl2aXR5Py50YXNrPy5wcm9ncmVzcyB8fCBbXTsKICAgICAgICAgIC8vIGlmIChwcm9ncmVzc0Fycltwcm9ncmVzc0Fyci5sZW5ndGggLSAxXT8uc3RhdHVzKSB7CiAgICAgICAgICAvLyAgICAgY29uc3QgaXNIYXNTaG93VGlwID0gdGhpcy5kYXRhLmdldCgnaXNIYXNTaG93VGlwJyk7CiAgICAgICAgICAvLyAgICAgaWYgKCFpc0hhc1Nob3dUaXApIHsKICAgICAgICAgIC8vICAgICAgICAgdGhpcy5kYXRhLnNldCgnaXNTaG93TG9hZFBvcCcsIDApOwogICAgICAgICAgLy8gICAgICAgICB0aGlzLmRhdGEuc2V0KCdpc0hhc1Nob3dUaXAnLCAxKTsKICAgICAgICAgIC8vICAgICAgICAgYm94eC5jYWxsKCdjb21tb25VSS5zaG93VG9hc3QnLCB7CiAgICAgICAgICAvLyAgICAgICAgICAgICB0eXBlOiAnMScsCiAgICAgICAgICAvLyAgICAgICAgICAgICBtZXNzYWdlOiAn5LuK5pel57qi5YyF5bey6aKG5a6M77yM6K+35piO5pel5YaN5p2lJwogICAgICAgICAgLy8gICAgICAgICB9KTsKICAgICAgICAgIC8vICAgICB9OwogICAgICAgICAgLy8gfTsKICAgICAgICAgIC8vIC8vIOmHjee9rnRvYXN054q25oCBCiAgICAgICAgICAvLyB0aGlzLmRhdGEuc2V0KCdpc0hhc1Nob3dUaXAnLCAwKTsKCiAgICAgICAgfQoKICAgICAgICA7CiAgICAgIH07IC8vIOWPkeW4g+WZqOi/m+W6puWbnuiwg++9nOWPquS4gOasoQoKCiAgICAgIHdpbmRvdy5nZXRPdXRib3hTaG93RGF0YUNCID0gZnVuY3Rpb24gKCkge307IC8vIOWIneWni+WMlua2iOaBr+mAmumBkwoKCiAgICAgIHRoaXMucHJvZmlsZXVnY3N0YXR1cygpOwogICAgfQogIH0sIHsKICAgIGtleTogImRldGFjaGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZXRhY2hlZCgpIHsKICAgICAgLy8g5rOo6ZSA5raI5oGv6YCa6YGTCiAgICAgICgwLCBfY29tbW9uMi5kYXRhY2hhbm5lbFVuUmVnaXN0ZXIpKCk7CgogICAgICBpZiAodGhpcy5vYklucy5sZW5ndGgpIHsKICAgICAgICB0aGlzLm9iSW5zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtLmRpc2Nvbm5lY3QoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdldERhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERhdGEoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgcmV0dXJuICgwLCBfc2VydmljZS5nZXREYXRhKSgpLnRoZW4oZnVuY3Rpb24gKF9yZWY2KSB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVmNi5kYXRhOwogICAgICAgIHZhciByZXNEYXRhID0gKGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS5kYXRhKSB8fCB7fTsKCiAgICAgICAgaWYgKCFyZXNEYXRhKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSAvLyDlsJ3or5XlpITnkIbpppbpobXmlbDmja4KCgogICAgICAgIHRyeSB7CiAgICAgICAgICBfdGhpczUuYWN0aW9ucy5zZXRQYWdlSW5pdCh0cnVlKTsKCiAgICAgICAgICBfdGhpczUuZGF0YS5zZXQoJ3Jlc0RhdGEnLCByZXNEYXRhKTsgLy8gY29uc29sZS5sb2cocmVzRGF0YSk7CgoKICAgICAgICAgIF90aGlzNS5kYXRhLnNldCgncmVzRGF0YUFjdGl2aXR5JywgcmVzRGF0YS5hY3Rpdml0eSk7CgogICAgICAgICAgX3RoaXM1LmRhdGEuc2V0KCdpc0xvZ2luJywgcmVzRGF0YS5pc19sb2dpbik7IC8vIHRoaXMuZGF0YS5zZXQoJ2lzRmluaXNoSW5mbycsIHJlc0RhdGEuaXNfZmluaXNoX2luZm8pOwogICAgICAgICAgLy8g5rS75Yqo54q25oCBCgoKICAgICAgICAgIF90aGlzNS5zZXRBY3Rpdml0eSgpOyAvLyByZXNEYXRhLmFjdGl2aXR5X3N0YXR1cyA9IDA7CgoKICAgICAgICAgIF90aGlzNS5kYXRhLnNldCgnaXNTaG93SG9tZScsICtyZXNEYXRhLmFjdGl2aXR5X3N0YXR1cyA9PT0gMCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgLy8g6aG16Z2i5Yid5aeL5YyW5aSx6LSlCiAgICAgICAgICBfdGhpczUuYWN0aW9ucy5zZXRQYWdlSW5pdChmYWxzZSk7CgogICAgICAgICAgX2JveHguZGVmYXVsdC5jYWxsKCdjb21tb25VSS5zaG93VG9hc3QnLCB7CiAgICAgICAgICAgIHR5cGU6ICcxJywKICAgICAgICAgICAgbWVzc2FnZTogJ+aVsOaNruW8guW4uO+8jOivt+eojeWQjumHjeivlScKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaW5pdERhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGluaXREYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIHJlc0RhdGE6IHt9LAogICAgICAgIHJlc0RhdGFBY3Rpdml0eToge30sCiAgICAgICAgaXNMb2dpbjogMCwKICAgICAgICBwZXJjZW50YWdlOiAwLAogICAgICAgIHJlcXVlc3RlZExpc3Q6IFtdLAogICAgICAgIGlzU2hvd0hvbWU6IDAsCiAgICAgICAgZmlyc3RGaW5nZXJDbGljazogdHJ1ZSwKICAgICAgICBpc1N1Y1B1Ymxpc2g6IGZhbHNlCiAgICAgIH07CiAgICB9CiAgfV0pOwogIHJldHVybiBBcHA7Cn0oX3Nhbi5Db21wb25lbnQpOwoKZXhwb3J0cy5kZWZhdWx0ID0gQXBwOwooMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KShBcHAsICJ0ZW1wbGF0ZSIsCi8qIGh0bWwgKi8KIlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPG5hbm8tZmxhc2ggcy1zaG93PVwiIXBhZ2VJbml0XCIgbGF5b3V0PVwiZnVsbFwiLz5cbiAgICAgICAgICAgIDwhLS0gc3RhdHVzIDAgXHU2RDNCXHU1MkE4XHU0RTJEIC0tPlxuICAgICAgICAgICAgPGRpdiBzLXNob3c9XCJpc1Nob3dIb21lXCIgY2xhc3M9XCJtYWluXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRDb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPCEtLSBcdTU5MzRcdTU2RkUgLS0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkV3JhcFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzLXNob3c9XCJpc1N1Y1B1Ymxpc2hcIiBjbGFzcz1cInBvcFB1Ymxpc2hcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkVmlkZW9cIiBvbi1jbGljaz1cImp1bXBBd2FyZFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRSdWxlIHNxdWFyZVdcIiBvbi1jbGljaz1cImp1bXBSdWxlXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZFNoYXJlIHNxdWFyZVdcIiBvbi1jbGljaz1cImp1bXBTaGFyZVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPCEtLSBcdTY4NDhcdTRGOEJcdTRFMTNcdTUzM0ExLDIsMyAtLT5cbiAgICAgICAgICAgICAgICAgICAgPHplbm8tY2FyZFxuICAgICAgICAgICAgICAgICAgICAgICAgb24tcHViQnRuQ2xpY2s9XCJoYW5kbGVQdWJCdG5DbGlja1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhPVwie3tyZXNEYXRhLm11bHRpX2NhbmRpZGF0ZV96b25lfX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RGaW5nZXJDbGljaz1cInt7Zmlyc3RGaW5nZXJDbGlja319XCJcbiAgICAgICAgICAgICAgICAgICAgPjwvemVuby1jYXJkPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwhLS0gXHU1M0MyXHU0RTBFXHU2NUI5XHU1RjBGIC0tPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYXJ0TWV0aG9kXCIgaWQ9XCJwYXJ0TWV0aG9kXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPCEtLSBcdTZEM0JcdTUyQThcdTU5NTZcdTUyQjEgLS0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFjdGl2aXR5UmV3YXJkXCIgaWQ9XCJhY3Rpdml0eVJld2FyZFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDwhLS0gXHU0RjE4XHU4RDI4XHU2MzkyXHU4ODRDIC0tPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0Q2FyZFwiIGlkPVwibGlzdENhcmRcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8bGlzdC1jYXJkXG4gICAgICAgICAgICAgICAgICAgIHMtaWY9XCJ7e3Jlc0RhdGEuYXdhcmRlZF91c2Vycy5saXN0Lmxlbmd0aCA+IDB9fVwiXG4gICAgICAgICAgICAgICAgICAgIHJlc0RhdGE9XCJ7e3Jlc0RhdGF9fVwiXG4gICAgICAgICAgICAgICAgPjwvbGlzdC1jYXJkPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsaW5lXCI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgIik7CigwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKEFwcCwgImNvbXBvbmVudHMiLCB7CiAgJ25hbm8tZmxhc2gnOiBfbmFuby5GbGFzaCwKICAnemVuby1jYXJkJzogX3plbm8uZGVmYXVsdCwKICAnbGlzdC1jYXJkJzogX3JhbmtsaXN0TmV3LmRlZmF1bHQKfSk7CigwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKEFwcCwgImNvbXB1dGVkIiwge30pOwoKX1N0b3JlLmNvbm5lY3Quc2FuKHsKICBwYWdlSW5pdDogJ3BhZ2VJbml0JywKICBzaGFyZUluZm86ICdzaGFyZUluZm8nCn0sIHsKICBzZXRQYWdlSW5pdDogJ3NldFBhZ2VJbml0JywKICBzZXRTaGFyZUluZm86ICdzZXRTaGFyZUluZm8nCn0pKEFwcCk7CgppZiAobW9kdWxlLmhvdCkgewogIHZhciBfX0hPVF9BUElfXyA9IHJlcXVpcmUoJy9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL3Nhbi1ob3QtbG9hZGVyL2xpYi9ydW50aW1lL2NvbXBvbmVudC1jbGllbnQtYXBpLmpzJyk7CgogIHZhciBfX0hPVF9VVElMU19fID0gcmVxdWlyZSgnL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvc2FuLWhvdC1sb2FkZXIvbGliL3J1bnRpbWUvdXRpbHMuanMnKTsKCiAgdmFyIF9fU0FOX0NPTVBPTkVOVF9fID0gX19IT1RfVVRJTFNfXy5nZXRFeHBvcnRzKG1vZHVsZSk7CgogIGlmIChfX1NBTl9DT01QT05FTlRfXy50ZW1wbGF0ZSB8fCBfX1NBTl9DT01QT05FTlRfXy5wcm90b3R5cGUudGVtcGxhdGUpIHsKICAgIG1vZHVsZS5ob3QuYWNjZXB0KCk7CgogICAgX19IT1RfQVBJX18uaW5zdGFsbChyZXF1aXJlKCdzYW4nKSk7CgogICAgdmFyIF9fSE1SX0lEX18gPSAnNDk1MTYzOWQnOwoKICAgIGlmICghbW9kdWxlLmhvdC5kYXRhKSB7CiAgICAgIF9fSE9UX0FQSV9fLmNyZWF0ZVJlY29yZChfX0hNUl9JRF9fLCBfX1NBTl9DT01QT05FTlRfXyk7CiAgICB9IGVsc2UgewogICAgICBfX0hPVF9BUElfXy5ob3RSZWxvYWQoX19ITVJfSURfXywgX19TQU5fQ09NUE9ORU5UX18pOwogICAgfQogIH0KfQ=="},{"version":3,"sources":["/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/src/pages/exampublish/containers/app.js"],"names":["loginCbName","Math","floor","random","App","opt","window","BoxShareData","options","type","mediaType","linkUrl","pageURL","SHARE","title","content","iconUrl","imageUrl","isReload","payload","JSON","parse","error","console","log","status","data","set","location","reload","scheme","value","get","myAssets","my_assets","isLogin","toLogin","cmd","href","RULE","successcallback","res","resp","boxx","call","message","params","shareData","shareCallback","encodeURIComponent","stringify","err","args","firstFingerClick","activityStatus","activity_status","EDN","OFFLINE","env","isBoxSeries","isShow","obIns","IntersectionObserver","entries","forEach","entry","curDom","target","className","classList","ratio","intersectionRatio","unobserve","threshold","boxVersion","UPDATE","createIntersectionObserver","observe","document","getElementById","getData","then","resData","is_login","isSucPublish","setTimeout","initShareData","setPubToast","getChannel","_action","resObj","percentage","state","publishResult","nid","button","text","duration","onClick","publishNid","requestedList","includes","push","fly","post","headers","responsedata","gk_video_callback","taskId","profileugcstatus","getOutboxShowDataCB","length","item","disconnect","actions","setPageInit","activity","setActivity","e","resDataActivity","isShowHome","Component","Flash","Zeno","RankList","connect","san","pageInit","shareInfo","setShareInfo","module","hot","__HOT_API__","require","__HOT_UTILS__","__SAN_COMPONENT__","getExports","template","prototype","accept","install","__HMR_ID__","createRecord","hotReload"],"mappings":"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","sourcesContent":["/**\n * @file 高考征文\n */\nimport './app.less';\nimport {Component} from 'san';\nimport {connect} from '@/lib/Store';\nimport {\n    Flash,\n    Toast as toast,\n} from '@baidu/nano';\nimport fly from 'flyio';\nimport boxx from '@baidu/boxx';\nimport Zeno from '../components/zeno';\nimport RankList from '../components/ranklistNew';\nimport {pageURL} from '../const';\n\nimport {getData} from '../service';\nimport {invokeScheme} from '@/lib/utils/common';\nimport {sendShowLog, sendClickLog} from '../log';\nimport {env} from '@baidu/auc-base/env';\nimport versionCompare from '@baidu/xbox/version_compare';\nimport {getProcessInfo, datachannelRegister, datachannelUnRegister, watchPageState} from '../common';\nconst loginCbName = `loginCb${Math.floor(Math.random() * 10e3)}`;\n\nexport default class App extends Component {\n    constructor(opt) {\n        super(opt);\n    }\n    static template = /* html */ `\n        <div>\n            <nano-flash s-show=\"!pageInit\" layout=\"full\"/>\n            <!-- status 0 活动中 -->\n            <div s-show=\"isShowHome\" class=\"main\">\n                <div class=\"headContainer\">\n                    <!-- 头图 -->\n                    <div class=\"headWrap\">\n                        <div s-show=\"isSucPublish\" class=\"popPublish\"></div>\n                        <div class=\"headVideo\" on-click=\"jumpAward\"></div>\n                        <div class=\"headRule squareW\" on-click=\"jumpRule\"></div>\n                        <div class=\"headShare squareW\" on-click=\"jumpShare\"></div>\n                    </div>\n                    <!-- 案例专区1,2,3 -->\n                    <zeno-card\n                        on-pubBtnClick=\"handlePubBtnClick\"\n                        data=\"{{resData.multi_candidate_zone}}\"\n                        firstFingerClick=\"{{firstFingerClick}}\"\n                    ></zeno-card>\n                </div>\n                <!-- 参与方式 -->\n                <div class=\"partMethod\" id=\"partMethod\"></div>\n                <!-- 活动奖励 -->\n                <div class=\"activityReward\" id=\"activityReward\"></div>\n                <!-- 优质排行 -->\n                <div class=\"listCard\" id=\"listCard\"></div>\n                <list-card\n                    s-if=\"{{resData.awarded_users.list.length > 0}}\"\n                    resData=\"{{resData}}\"\n                ></list-card>\n                <div class=\"line\"></div>\n            </div>\n        </div>\n    `;\n    static components = {\n        'nano-flash': Flash,\n        'zeno-card': Zeno,\n        'list-card': RankList,\n    };\n    static computed = {};\n\n    // 初始化分享数据\n    initShareData() {\n        window.BoxShareData = {\n            options: {\n                type: 'url',\n                mediaType: 'all',\n                linkUrl: pageURL.SHARE,\n                title: '热点挑战赛',\n                content: '来百度拍视频赢大奖！最高可得1000元！',\n                iconUrl: 'https://b.bdstatic.com/searchbox/image/gcp/20230825/4184765539.jpg',\n                imageUrl: 'https://b.bdstatic.com/searchbox/image/gcp/20230825/4184765539.jpg',\n            },\n        };\n    }\n\n    toLogin(isReload) {\n        // NA登陆面板的回调\n        window[loginCbName] = payload => {\n            try {\n                payload = JSON.parse(payload);\n            }\n            catch (error) {\n                // eslint-disable-next-line no-console\n                console.log('login nextCallback payload pase error', error);\n            }\n\n            // 登陆成功\n            if (payload && !+payload?.status && payload?.data?.status === '1') {\n                this.data.set('isLogin', 1);\n\n                if (isReload) {\n                    window.location.reload();\n                };\n            }\n        };\n\n        const scheme = `baiduboxapp://v26/account/login?params=%7B%22loginType%22%3A%22sms%22%2C%22showThirdLogin%22%3A1%2C%22loginSource%22%3A%22%22%2C%22normalizeAccount%22%3A0%2C%22loginCallback%22%3A%22${loginCbName}%22%7D&callback=console.log&upgrade=0`;\n        invokeScheme(scheme);\n    }\n\n    // method：调起个人视频\n    // jumpVideo() {\n    //     sendClickLog({value: 'my_publish'});\n    //     const {my_video: myVideo} = this.data.get('resData') || {};\n    //     const isLogin = this.data.get('isLogin');\n    //     // 兜底：跳个人中心先登陆\n    //     if (!isLogin) {\n    //         this.toLogin(true);\n    //         return;\n    //     };\n\n    //     if (myVideo?.cmd) {\n    //         invokeScheme(myVideo.cmd);\n    //     }\n    // }\n\n    // method：调起奖品页（我的视频）\n    jumpAward() {\n        sendClickLog({value: 'my_publish'});\n        const {my_assets: myAssets} = this.data.get('resData') || {};\n        const isLogin = this.data.get('isLogin');\n        // 兜底：先登陆在看钱包\n        if (!isLogin) {\n            this.toLogin(true);\n            return;\n        };\n\n        if (myAssets?.cmd) {\n            invokeScheme(myAssets.cmd);\n        }\n    }\n\n    // method：调起规则页\n    jumpRule() {\n        sendClickLog({value: 'rule_entry'});\n        window.location.href = pageURL.RULE;\n    }\n\n    // method：调起分享面板\n    jumpShare() {\n        sendClickLog({value: 'share_entry'});\n        try {\n            window.successcallback = res => {\n                const resp = typeof(res) === 'string' ? JSON.parse(res) : res;\n                if (resp?.data?.status === '0') {\n                    boxx.call('commonUI.showToast', {\n                        type: '1',\n                        message: '分享成功'\n                    });\n                    return;\n                }\n            };\n            const params = {\n                shareData: window.BoxShareData.options,\n                shareCallback: 'successcallback',\n            };\n            invokeScheme(`baiduboxapp://share/doShare?params=${encodeURIComponent(JSON.stringify(params))}`);\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    // handle：几个发布点击\n    handlePubBtnClick(args) {\n        const firstFingerClick = this.data.get('firstFingerClick');\n        firstFingerClick && this.data.set('firstFingerClick', false);\n        const {cmd = ''} = args || {};\n        // const isFinishInfo = this.data.get('isFinishInfo');\n        const isLogin = this.data.get('isLogin');\n\n        // 先登陆\n        if (!isLogin) {\n            this.toLogin(true);\n            return;\n        };\n        invokeScheme(cmd);\n    }\n\n    // 发布器状态\n    profileugcstatus() {\n        getProcessInfo();\n        datachannelRegister();\n    }\n\n    // 活动状态\n    setActivity() {\n        const {activity_status: activityStatus} = this.data.get('resData') || {};\n        if (+activityStatus === 2) {\n            // 已经结束\n            window.location.href = pageURL.EDN;\n        } else if (+activityStatus === 3) {\n            // 已经下线\n            window.location.href = pageURL.OFFLINE;\n        }\n    }\n\n    // 取消发布器toast\n    setPubToast() {\n        if (!env.isBoxSeries) {\n            return;\n        };\n        const params = {\n            isShow: 1,\n        };\n        // 取消toast https://ku.baidu-int.com/knowledge/HFVrC7hq1Q/H0jzXv88Jb/dyogYYVcTY/oauTm-ICk744kW\n        invokeScheme(`baiduboxapp://ugc/isShowProgressView?upgrade=1&params=${encodeURIComponent(JSON.stringify(params))}`);\n    }\n\n    obIns = null;\n    createIntersectionObserver() {\n        if (this.obIns) {\n            return;\n        }\n        this.obIns = new IntersectionObserver((entries) => {\n            entries.forEach(entry => {\n                // 获取到当前dom和className\n                const curDom = entry.target;\n                const className = curDom.classList[0];\n                const ratio = entry.intersectionRatio;\n                let value = '';\n                className === 'partMethod' && (value = 'rule_publish');\n                className === 'activityReward' && (value = 'rule_award');\n                className === 'listCard' && (value = 'weekly_board');\n                if (ratio > 0.5) {\n                    // 打点\n                    // console.log(value);\n                    sendShowLog({\n                        value,\n                    });\n                    this.obIns.unobserve(curDom);\n                }\n            })\n        }, {\n            threshold: [\n                0,\n                0.5,\n                1\n            ],\n        })\n    }\n\n    inited() {\n        // 升级页-手白｜版本小于13.28\n        if (env.isBoxSeries && versionCompare(env.boxVersion, '13.28') < 0) {\n            window.location.href = pageURL.UPDATE;\n        };\n    }\n    attached() {\n        // 打点\n        this.createIntersectionObserver();\n        this.obIns.observe(document.getElementById('partMethod'));\n        this.obIns.observe(document.getElementById('activityReward'));\n        this.obIns.observe(document.getElementById('listCard'));\n        // 首页数据\n        this.getData();\n        // 监听页面进入\n        watchPageState(() => {\n            return getData().then(({data}) => {\n                const resData = data?.data || {};\n                // this.data.set('resData', resData);\n                this.data.set('isLogin', resData.is_login);\n                const isSucPublish = this.data.get('isSucPublish');\n                if (isSucPublish) {\n                    setTimeout(() => {\n                        this.data.set('isSucPublish', false);\n                    }, 7000);\n                }\n            });\n        });\n        // 页面打点\n        sendShowLog({value: 'essay_activity'});\n        // 初始化分享\n        this.initShareData();\n        // this.profileugcstatus();\n        // 取消发布成功toast\n        this.setPubToast();\n\n        // 发布器消息通道｜即时广播\n        window.getChannel = (_action, res) => {\n            // 消息通道返回\n            const resObj = JSON.parse(res) || {};\n            // 是否展示过loading\n            // const isHasShowLoad = this.data.get('isHasShowLoad');\n            // 发布进度\n            this.data.set('percentage', resObj.percentage);\n            // this.data.set('message', resObj);\n            // console.log(resObj);\n            const isSucPublish = this.data.get('isSucPublish');\n            !isSucPublish && this.data.set('isSucPublish', true);\n            // 如果上限不在走奖励逻辑\n            // const resDataActivity = this.data.get('resDataActivity') || {};\n            // const progressArr = resDataActivity?.task?.progress || [];\n            // if (progressArr[progressArr.length - 1]?.status) {\n            //     return;\n            // };\n\n            // \"0\":失败、\"1\":等待、\"2\":运行、\"3\":成功、\"4\":删除\n            if (resObj.state === \"0\") {\n                // this.data.set('isShowLoadPop', 0);\n                // 发布失败或者异常\n                setTimeout(() => {\n                    toast('发布失败，请稍后重试');\n                }, 1000);\n                return;\n            };\n\n            // 进行中\n            // if (+resObj.percentage <= 100 && !isHasShowLoad) {\n            //     // this.data.set('isShowLoadPop', 1);\n            //     // 设置下进度\n            //     const elemBar = document.getElementById(\"myBar\");\n            //     elemBar.style.width = (+resObj.percentage) + '%';\n            // };\n\n            // 成功&进度100%\n            // if (+resObj.percentage === 100 && +resObj.state === 3) {\n                // this.data.set('isShowLoadPop', 0);\n                // 发布完成后弹出去看看，点击跳转我的视频（我的资产）\n                // toast({\n                //     button: '去看看',\n                //     text:'恭喜您成功发布!',\n                //     duration: 7,\n                //     onClick() {\n                //         invokeScheme(\"baiduboxapp://v1/easybrowse/open?append=1&backlocation=0&bannerswitch=1&forbidautorotate=1&newbrowser=1&params=%7B%22showtoolbar%22%3A%221%22%7D&type=immerse&url=https%3A%2F%2Fmbd.baidu.com%2Fnewspage%2Fdata%2Fexampublish%3Faction%3Dwallet&zoomswitch=0\");\n                //     },\n                // });\n            // };\n            // 发布完成\n            const publishResult = resObj?.publishResult || {};\n            // \"0\"：失败 \"1\"：等待 \"2\"：运行 \"3\"：成功 \"4\"：删除\n            if (publishResult?.params?.nid) {\n                toast({\n                    button: '去看看',\n                    text:'恭喜您成功发布!',\n                    duration: 7,\n                    onClick() {\n                        invokeScheme(\"baiduboxapp://v1/easybrowse/open?append=1&backlocation=0&bannerswitch=1&forbidautorotate=1&newbrowser=1&params=%7B%22showtoolbar%22%3A%221%22%7D&type=immerse&url=https%3A%2F%2Fmbd.baidu.com%2Fnewspage%2Fdata%2Fexampublish%3Faction%3Dwallet&zoomswitch=0\");\n                    },\n                });\n                const publishNid = publishResult?.params?.nid;\n                const requestedList = this.data.get('requestedList');\n                if (!requestedList.includes(publishNid)) {\n                    // 去重，请求一次\n                    this.data.push('requestedList', publishNid);\n                    // 请求成功弹窗\n                    fly.post(`/newspage/data/exampublish`, {\n                        nid: `${publishResult?.params?.nid}`\n                    }, {\n                        headers: {\n                            \"content-type\": \"application/x-www-form-urlencoded\"\n                        }\n                    }).then(({data}) => {\n                        const responsedata = data?.data || {};\n                        if (!responsedata) {\n                            return;\n                        };\n                        this.data.set('isLogin', responsedata?.is_login);\n                        // this.data.set('sucpopResData', responsedata);\n                    });\n                };\n            };\n        };\n\n        // 发布器scheme回调\n        window.gk_video_callback = (data = {}) => {\n            data = JSON.parse(data);\n            // status: 0成功｜1取消、2失败、3登录失败\n            // https://ku.baidu-int.com/knowledge/HFVrC7hq1Q/qCCPuIpbfn/yZRTvK33Xc/IjgMVZu7miGn6p\n            if (data?.status === '0' || data?.params?.taskId) {\n                this.profileugcstatus();\n                // 上限toast提示\n                // const resDataActivity = this.data.get('resDataActivity') || {};\n                // const progressArr = resDataActivity?.task?.progress || [];\n                // if (progressArr[progressArr.length - 1]?.status) {\n                //     const isHasShowTip = this.data.get('isHasShowTip');\n                //     if (!isHasShowTip) {\n                //         this.data.set('isShowLoadPop', 0);\n                //         this.data.set('isHasShowTip', 1);\n                //         boxx.call('commonUI.showToast', {\n                //             type: '1',\n                //             message: '今日红包已领完，请明日再来'\n                //         });\n                //     };\n                // };\n                // // 重置toast状态\n                // this.data.set('isHasShowTip', 0);\n            };\n        };\n        \n        // 发布器进度回调｜只一次\n        window.getOutboxShowDataCB = () => {};\n\n        // 初始化消息通道\n        this.profileugcstatus();\n    }\n\n    detached() {\n        // 注销消息通道\n        datachannelUnRegister();\n        if (this.obIns.length) {\n            this.obIns.forEach(item => item.disconnect());\n        }\n    }\n\n    getData() {\n        return getData().then(({data}) => {\n            const resData = data?.data || {};\n            if (!resData) {\n                return;\n            }\n\n            // 尝试处理首页数据\n            try {\n                this.actions.setPageInit(true);\n                this.data.set('resData', resData);\n                // console.log(resData);\n                this.data.set('resDataActivity', resData.activity);\n                this.data.set('isLogin', resData.is_login);\n                // this.data.set('isFinishInfo', resData.is_finish_info);\n                // 活动状态\n                this.setActivity();\n                // resData.activity_status = 0;\n                this.data.set('isShowHome', +resData.activity_status === 0);\n            }\n            catch (e) {\n                // 页面初始化失败\n                this.actions.setPageInit(false);\n                boxx.call('commonUI.showToast', {\n                    type: '1',\n                    message: '数据异常，请稍后重试'\n                });\n            }\n        });\n    }\n\n    initData() {\n        return {\n            resData: {},\n            resDataActivity: {},\n            isLogin: 0,\n            percentage: 0,\n            requestedList: [],\n            isShowHome: 0,\n            firstFingerClick: true,\n            isSucPublish: false,\n        };\n    }\n}\n\nconnect.san(\n    {\n        pageInit: 'pageInit',\n        shareInfo: 'shareInfo',\n    },\n    {\n        setPageInit: 'setPageInit',\n        setShareInfo: 'setShareInfo',\n    }\n)(App);\n"]}]}