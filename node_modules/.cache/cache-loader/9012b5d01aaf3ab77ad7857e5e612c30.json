{"remainingRequest":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js??ref--1-2!/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/auc-base/node_modules/@baidu/feed-baselog/dist/lib/thunder.h5.js","dependencies":[{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/auc-base/node_modules/@baidu/feed-baselog/dist/lib/thunder.h5.js","mtime":1696919504147},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/san-hot-loader/index.js","mtime":1696919525187},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/cache-loader/dist/cjs.js","mtime":1696919513896},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js","mtime":1696919524615}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIik7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKCi8qKgogKiBAZmlsZSB0aHVuZGVyIGg1IGltYWdlCiAqIEBhdXRob3Igb2theWNoZW4oY2hlbmdsb25nMTNAYmFpZHUuY29tKQogKi8KdmFyIFRodW5kZXJINSA9Ci8qKiBAY2xhc3MgKi8KZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFRodW5kZXJINShvcHQpIHsKICAgIHRoaXMuYmFzZVVSTCA9ICcnOwogICAgdGhpcy5iYXNlUGFyYW1zID0ge307CiAgICB0aGlzLm9wdCA9IG9wdCB8fCB7fTsKICAgIHRoaXMuYmFzZVBhcmFtcyA9IHRoaXMub3B0LmJhc2VQYXJhbXMgfHwge307CiAgICB0aGlzLmNvbmZpZyh0aGlzLm9wdCk7CiAgfSAvLyBzaW1wbGVNZXJnZQoKCiAgVGh1bmRlckg1LnByb3RvdHlwZS5zaW1wbGVNZXJnZSA9IGZ1bmN0aW9uIChvYmoxLCBvYmoyKSB7CiAgICBpZiAoIW9iajIgfHwgIW9iajEpIHsKICAgICAgcmV0dXJuIG9iajE7CiAgICB9CgogICAgZm9yICh2YXIgaSBpbiBvYmoyKSB7CiAgICAgIGlmIChvYmoyLmhhc093blByb3BlcnR5KGkpKSB7CiAgICAgICAgb2JqMVtpXSA9IG9iajJbaV07CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gb2JqMTsKICB9OyAvLyBhc3NlbWJsZVVybAoKCiAgVGh1bmRlckg1LnByb3RvdHlwZS5hc3NlbWJsZVVybCA9IGZ1bmN0aW9uICh1cmwsIGJhc2VQYXJhbXMsIGFzc1BhcmFtcykgewogICAgdmFyIHBhcmFtcyA9ICcnOwogICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCiAgICBhc3NQYXJhbXMgPSBhc3NQYXJhbXMgfHwge307CiAgICBhc3NQYXJhbXMuciA9ICdsJyArIERhdGUubm93KCk7CiAgICBhc3NQYXJhbXMgPSB0aGlzLnNpbXBsZU1lcmdlKHRoaXMuc2ltcGxlTWVyZ2Uoe30sIGJhc2VQYXJhbXMpLCBhc3NQYXJhbXMpOyAvLyDmi7zmjqXlrZfnrKbkuLIKCiAgICBmb3IgKHZhciBpIGluIGFzc1BhcmFtcykgewogICAgICBpZiAoYXNzUGFyYW1zLmhhc093blByb3BlcnR5KGkpKSB7CiAgICAgICAgcGFyYW1zICs9ICcmJyArIGkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoYXNzUGFyYW1zW2ldKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB1cmwgKyAnPycgKyBwYXJhbXMuc2xpY2UoMSk7CiAgfTsKCiAgVGh1bmRlckg1LnByb3RvdHlwZS5jb25maWcgPSBmdW5jdGlvbiAob3B0KSB7CiAgICB0aGlzLnNpbXBsZU1lcmdlKHRoaXMub3B0LCBvcHQpOyAvLyDml6Xlv5fmiZPljbDln7rnoYBVUkwKCiAgICB0aGlzLmJhc2VVUkwgPSB0aGlzLm9wdC5iYXNlVVJMIHx8ICdodHRwczovL2hwZC5iYWlkdS5jb20vdi5naWYnOyAvLyDpnIDopoHmt7flhaXml6Xlv5fmiZPljbDnmoTmiYDmnInln7rnoYDlrZfmrrUKCiAgICB0aGlzLmJhc2VQYXJhbXMgPSB0aGlzLnNpbXBsZU1lcmdlKHRoaXMuYmFzZVBhcmFtcywgb3B0LmJhc2VQYXJhbXMpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgVGh1bmRlckg1LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKHBvYmosIGNhbGxiYWNrLCB1cmwpIHsKICAgIHZhciByZXEgPSBuZXcgSW1hZ2UoKTsKICAgIHZhciB0aW1lciA9IG51bGw7CiAgICB1cmwgPSB1cmwgfHwgdGhpcy5iYXNlVVJMOwogICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCiAgICByZXEub25sb2FkID0gcmVxLm9uZXJyb3IgPSByZXEub25hYm9ydCA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRpbWVyKSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTsKICAgICAgICB0aW1lciA9IG51bGw7CiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKCiAgICByZXEuc3JjID0gdGhpcy5hc3NlbWJsZVVybCh1cmwsIHRoaXMuYmFzZVBhcmFtcywgcG9iaik7IC8vIOmYsuatouWbnuiwg+iiq2hvbGTkvY8KCiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgdGltZXIgPSBudWxsOwogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0sIDUwMCk7CiAgICB9CiAgfTsKCiAgcmV0dXJuIFRodW5kZXJINTsKfSgpOwoKdmFyIF9kZWZhdWx0ID0gVGh1bmRlckg1OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsKOw=="},{"version":3,"sources":["/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/auc-base/node_modules/@baidu/feed-baselog/dist/lib/thunder.h5.js"],"names":["ThunderH5","opt","baseURL","baseParams","config","prototype","simpleMerge","obj1","obj2","i","hasOwnProperty","assembleUrl","url","assParams","params","r","Date","now","encodeURIComponent","slice","send","pobj","callback","req","Image","timer","onload","onerror","onabort","clearTimeout","src","setTimeout"],"mappings":"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","sourcesContent":["/**\n * @file thunder h5 image\n * @author okaychen(chenglong13@baidu.com)\n */\nvar ThunderH5 = /** @class */ (function () {\n    function ThunderH5(opt) {\n        this.baseURL = '';\n        this.baseParams = {};\n        this.opt = opt || {};\n        this.baseParams = this.opt.baseParams || {};\n        this.config(this.opt);\n    }\n    // simpleMerge\n    ThunderH5.prototype.simpleMerge = function (obj1, obj2) {\n        if (!obj2 || !obj1) {\n            return obj1;\n        }\n        for (var i in obj2) {\n            if (obj2.hasOwnProperty(i)) {\n                obj1[i] = obj2[i];\n            }\n        }\n        return obj1;\n    };\n    // assembleUrl\n    ThunderH5.prototype.assembleUrl = function (url, baseParams, assParams) {\n        var params = '';\n        /* istanbul ignore next */\n        assParams = assParams || {};\n        assParams.r = 'l' + Date.now();\n        assParams = this.simpleMerge(this.simpleMerge({}, baseParams), assParams);\n        // 拼接字符串\n        for (var i in assParams) {\n            if (assParams.hasOwnProperty(i)) {\n                params += '&' + i + '=' + encodeURIComponent(assParams[i]);\n            }\n        }\n        return url + '?' + params.slice(1);\n    };\n    ThunderH5.prototype.config = function (opt) {\n        this.simpleMerge(this.opt, opt);\n        // 日志打印基础URL\n        this.baseURL = this.opt.baseURL || 'https://hpd.baidu.com/v.gif';\n        // 需要混入日志打印的所有基础字段\n        this.baseParams = this.simpleMerge(this.baseParams, opt.baseParams);\n        return this;\n    };\n    ThunderH5.prototype.send = function (pobj, callback, url) {\n        var req = new Image();\n        var timer = null;\n        url = url || this.baseURL;\n        /* istanbul ignore next */\n        req.onload = req.onerror = req.onabort = function () {\n            if (timer) {\n                clearTimeout(timer);\n                timer = null;\n                callback && callback();\n            }\n        };\n        req.src = this.assembleUrl(url, this.baseParams, pobj);\n        // 防止回调被hold住\n        if (typeof callback === 'function') {\n            /* istanbul ignore next */\n            timer = setTimeout(function () {\n                timer = null;\n                callback();\n            }, 500);\n        }\n    };\n    return ThunderH5;\n}());\nexport default ThunderH5;\n;\n"]}]}