{"remainingRequest":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js??ref--1-2!/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/ug-invoke-app/dist/index.js","dependencies":[{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/ug-invoke-app/dist/index.js","mtime":1696919508804},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/san-hot-loader/index.js","mtime":1696919525187},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/cache-loader/dist/cjs.js","mtime":1696919513896},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js","mtime":1696919524615}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXRlcmF0b3IiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvbWUiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5tYXAiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIik7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZ2V0SG9zdEluZm8gPSBnZXRIb3N0SW5mbzsKZXhwb3J0cy5pbnZva2VBcHAgPSBpbnZva2VBcHA7CmV4cG9ydHMuaW52b2tlTWFya2V0ID0gaW52b2tlTWFya2V0OwpleHBvcnRzLmludm9rZVRwQXBwID0gaW52b2tlVHBBcHA7CmV4cG9ydHMuYXBwQ29uZmlnTWFwID0gdm9pZCAwOwoKcmVxdWlyZSgicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIik7Cgp2YXIgX2FzeW5jVG9HZW5lcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IiKSk7Cgp2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSIpKTsKCnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIikpOwoKdmFyIF9zbGljZWRUb0FycmF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9zbGljZWRUb0FycmF5IikpOwoKdmFyIF91Z0Vycm9yTG9nID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAYmFpZHUvdWctZXJyb3ItbG9nIikpOwoKdmFyIF91cmxQYXJzZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgidXJsLXBhcnNlIikpOwoKdmFyIF9xdWVyeVN0cmluZyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicXVlcnktc3RyaW5nIikpOwoKdmFyIF9lb3BVdGlscyA9IHJlcXVpcmUoIkBiYWlkdS9lb3AtdXRpbHMiKTsKCnZhciBfY2xpcGJvYXJkQWN0aW9uID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJjbGlwYm9hcmQvc3JjL2NsaXBib2FyZC1hY3Rpb24iKSk7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJ1bmRlZmluZWQiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lKSB7IHRocm93IF9lOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9IHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lMikgeyBkaWRFcnIgPSB0cnVlOyBlcnIgPSBfZTI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCi8qKgogKiBAZmlsZSBicm93c2Vyc2xpc3QKICogQGF1dGhvciB6aGFuZ3NpeXVhbih6aGFuZ3NpeXVhbkBiYWlkdS5jb20pCiAqLwovLyBicm93c2Vy5bm25LiN5piv6LaK5aSa6LaK5aW977yM5aSf55So5Y2z5Y+vCi8vIOWIpOaWrWJyb3dzZXLmmK/lkKbmnInmhI/kuYnvvIzlnKjkuo7ku5bmmK/lkKbmmK/lr7nlkITnp43osIPotbdydWxlc+acieW9seWTjQovLyDlr7nkuo7msqHmnInmhI/kuYnnmoRicm93c2Vy77yM5q+U5aaC6YGo5ri45rWP6KeI5Zmo5ZKMb3BlcmHov5nnp43vvIzlubbmsqHmnInku4DkuYjljLrliKsKdmFyIGJyb3dzZXJNYXAgPSBuZXcgTWFwKFtbJ3dlY2hhdCcsIC9taWNyb21lc3Nlbmdlci9pXSwgWydxcWJyb3dzZXInLCAvXGJtP3FxYnJvd3NlclwvKFswLTkuXSspKD8hLiogcXEpL2ldLCBbJ3FxJywgL1xicXFcLyhbMC05Ll0rKS9pXSwgWyd3ZWlibycsIC93ZWlib19fL2ldLCBbJ3VjJywgLygoPzpbXHNcL10pdWM/XHM/YnJvd3NlcnwoPzpqdWMuKyl1Y3dlYilbXC9cc10/KFtcdy5dKykvaV0sIFsnMzYwJywgLyhxaWh1fHFoYnJvd3NlcnxxaWhvb2Jyb3dzZXJ8MzYwYnJvd3NlcikvaV0sIFsnYmFpZHVib3hsaXRlJywgLyhsaXRlfGluZm8pIGJhaWR1Ym94YXBwL2ldLCBbJ2ZvcnR1bmVjYXQnLCAvZmNhcHAvaV0sIFsnYmFpZHVib3htaXNzaW9uJywgL21pc3Npb24gYmFpZHVib3hhcHAvaV0sIFsnYmFpZHVib3h2aXNpb24nLCAvYmFpZHVib3h2aXNpb24vaV0sIFsnYmFpZHVib3hhcHAnLCAvYmFpZHVib3hhcHAvaV0sIFsndGllYmEnLCAvdGllYmEvaV0sIFsnYmFpZHVoYW9rYW4nLCAvaGFva2FuL2ldLCBbJ2JkbWluaXZpZGVvJywgL2JkbWluaXZpZGVvL2ldLCBbJ2JkbmV0ZGlzaycsIC9uZXRkaXNrL2ldLCBbJ2JhaWR1bWFwJywgL2JhaWR1bWFwL2ldLCBbJ2JhaWR1aGknLCAvYmFpZHVoaV9hbmRyb2lkL2ldLCBbJ2JkZHJhbWEnLCAvYmRkcmFtYS9pXSwgWydrbmV3cycsIC9rbmV3cy9pXSwgWydiYWlkdWJveHNlbmlvcicsIC9iYWlkdWJveHNlbmlvci9pXSwgWyd3ZW5rdScsIC9jb20uYmFpZHUud2Vua3UvaV0sIFsnbGVtb24nLCAvbGVtb25hcHAvaV0sIFsnYmFpZHVpbnB1dCcsIC9iYWlkdWlucHV0L2ldLCBbJ3dlaWJhYXBwJywgL3dlaWJhYXBwL2ldLCBbJ3lvdWppYScsIC95b3VqaWEvaV0sIFsneWlrZScsIC95b3VhL2ldLCBbJ2Jkd2tzdCcsIC8tSGFkZXNDb3JlLS4qc3R1ZGVudC9pXSwgWydhc2tteWJhYnknLCAvbXliYWJ5L2ldLCBbJ3RvbWFzJywgL3RvbWFzL2ldLCBbJ3lpanUnLCAvYmR5aWp1L2ldLCBbJ3JhcCcsIC9oaXBob3AvaV0sIFsnd2Vwb2QnLCAvd2Vwb2QvaV0sIFsnYmRoZWFsdGhhcHAnLCAvYmRoZWFsdGhhcHAvaV0sIFsneXltb2JpbGUnLCAvLip5eShbKF0pPyhjbGllbnR2ZXJzaW9uOik/KFswLTkuXSspLiovZ2ldLCBbJ2JhaWR1aGFueXUnLCAvZGljdGFwcC9pXSwgWydzb2dvdScsIC9zb2dvdW0ob2JpbGVicm93c2VyfHNlKS9pXSwgWydhbGlwYXknLCAvYWxpcGF5Y2xpZW50L2ldLCBbJ3Rhb2JhbycsIC9cYmFsaWFwcFwodGJcLyhbMC05Ll0rKVwpL2ldLCBbJ3RpYW5tYW8nLCAvXGJhbGlhcHBcKHRtXC8oWzAtOS5dKylcKS9pXSwgWyd0YW8nLCAvXGJ0YW9icm93c2VyXC8oWzAtOS5dKykvaV0sIFsncXVhcmsnLCAvXGJxdWFya1wvKFswLTkuXSspL2ldLCBbJ3hpYW9taScsIC9cYm1pdWlicm93c2VyXC8oWzAtOS5dKykvaV0sIFsnb3BwbycsIC9cYmhleXRhcGJyb3dzZXJcLyhbMC05Ll0rKS9pXSwgWyd2aXZvJywgL1xidml2b2Jyb3dzZXJcLyhbMC05Ll0rKS9pXSwgWydtZWl6dScsIC9cYm16YnJvd3NlclwvKFswLTkuXSspL2ldLCBbJ2h1YXdlaScsIC9odWF3ZWlicm93c2VyXC8oWzAtOS5dKykvaV0sIFsnc2Ftc3VuZycsIC9cYnNhbXN1bmdicm93c2VyXC8oWzAtOS5dKykvaV0sIFsnZWRnZScsIC9lZGdlXC8oWzAtOS5dKykvaV0sIFsnZmlyZWZveCcsIC9cYmZpcmVmb3hcLyhbMC05LmFiXSspL2ldLCBbJ2Nocm9tZScsIC8oPzpjaHJvbWV8Y3Jpb3N8Y3JtbylcLyhbMC05Ll0rKS9pXSwgWydzYWZhcmknLCAvXGJ2ZXJzaW9uXC8oWzAtOS5dKyg/OiBiZXRhKT8pKD86IG1vYmlsZSg/OlwvW2EtejAtOV0rKT8pPyBzYWZhcmlcLy9pXV0pOwovKioKICogQGZpbGUg5omL5py65Y6C5ZWGbGlzdAogKiBAYXV0aG9yIHpoYW5nc2l5dWFuKHpoYW5nc2l5dWFuQGJhaWR1LmNvbSkKICovCi8vIOato+WImeWMuemFjeS4jeWIsOeahO+8jOe7meS4qum7mOiupOWAvCAnLScKCnZhciBicmFuZE1hcCA9IHsKICBzYW1zdW5nOiAvLipBbmRyb2lkLiooU0FNU1VOR3xTTS0pLiovaSwKICB4aWFvbWk6IC8uKkFuZHJvaWQuKihNaXxNMjAxMUsyQykuKi9pLAogIG9wcG86IC8uKihPUFBPfGhleXRhcHxwW2Etel1bYS16XVthLXpdXGQwKS4qL2ksCiAgdml2bzogLy4qQW5kcm9pZC4qKHZpdm98dlxkXGRcZFxkW2Etel0/YT8pLiovaSwKICBodWF3ZWk6IC8uKmh1YXdlaS4qL2ksCiAgaG9ub3I6IC8uKmhvbm9yLiovaSwKICBhcHBsZTogLyhpUGhvbmV8aVBvZHxpUGFkfE1hY2ludG9zaCkvaQp9OwovKioKICogQGZpbGUg546v5aKD5Yik5patCiAqIEBhdXRob3Igemh1emhpYm8gPHpodXpoaWJvQGJhaWR1LmNvbT4KICovCgp2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50OwoKZnVuY3Rpb24gZGV0ZWN0SXBhZCgpIHsKICB2YXIgaXNNb2JpbGUgPSBSZWdFeHAoL2lQYWQvaSkudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsKCiAgaWYgKCFpc01vYmlsZSkgewogICAgdmFyIGlzTWFjID0gUmVnRXhwKC9NYWNpbnRvc2gvaSkudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsKCiAgICBpZiAoaXNNYWMgJiYgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzICYmIG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDIpIHsKICAgICAgaXNNb2JpbGUgPSB0cnVlOwogICAgfQogIH0KCiAgcmV0dXJuIGlzTW9iaWxlOwp9Cgp2YXIgSVNfSVBBRCA9IGRldGVjdElwYWQoKTsKdmFyIElTX0lPUyA9IC8oaVBob25lfGlQb2R8aVBhZHxNYWNpbnRvc2gpL2kudGVzdCh1YSkgfHwgSVNfSVBBRDsKdmFyIElTX0FORFJPSUQgPSAvKEFuZHJvaWQpL2kudGVzdCh1YSk7CgpmdW5jdGlvbiBnZXRJT1NWZXJzaW9uKCkgewogIHZhciByZWcgPSAvT1MgKChcZCtfPyl7MiwzfSlccy9pOwoKICBpZiAoSVNfSU9TKSB7CiAgICB2YXIgb3N2ID0gcmVnLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCk7IC8vIEB0cy1pZ25vcmUKCiAgICBpZiAoKG9zdiA9PT0gbnVsbCB8fCBvc3YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9zdi5sZW5ndGgpID4gMCkgewogICAgICAvLyBAdHMtaWdub3JlCiAgICAgIHJldHVybiBvc3ZbMF0ucmVwbGFjZSgnT1MnLCAnJykucmVwbGFjZSgnb3MnLCAnJykucmVwbGFjZSgvXHMrL2csICcnKS5yZXBsYWNlKC9fL2csICcuJyk7CiAgICB9CiAgfQoKICByZXR1cm4gJyc7Cn0KCnZhciBJT1NfVkVSU0lPTiA9IE51bWJlcihnZXRJT1NWZXJzaW9uKCkuc3BsaXQoJy4nKVswXSk7Ci8qKgogKiBAZmlsZSB1YSBwYXJzZXIKICogQGF1dGhvciB6aGFuZ3NpeXVhbih6aGFuZ3NpeXVhbkBiYWlkdS5jb20pCiAqLwoKZnVuY3Rpb24gZ2V0SG9zdEluZm8oKSB7CiAgdmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudDsKICB2YXIgb3MgPSBJU19JT1MgPyAnaW9zJyA6IElTX0FORFJPSUQgPyAnYW5kcm9pZCcgOiAnLSc7IC8vIOi/lOWbnuWAvOm7mOiupC0KCiAgdmFyIHJlcyA9IHsKICAgIGJyb3dzZXI6ICctJywKICAgIGJyYW5kOiAnLScsCiAgICBvczogb3MKICB9OyAvLyDmraPliJnljLnphY3kuIDkuIticm93c2VyIG5hbWUKCiAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGJyb3dzZXJNYXApLAogICAgICBfc3RlcDsKCiAgdHJ5IHsKICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgIHZhciBfc3RlcCR2YWx1ZSA9ICgwLCBfc2xpY2VkVG9BcnJheTIuZGVmYXVsdCkoX3N0ZXAudmFsdWUsIDIpLAogICAgICAgICAgYnJvd3NlciA9IF9zdGVwJHZhbHVlWzBdLAogICAgICAgICAgYnJvd3NlclJlZyA9IF9zdGVwJHZhbHVlWzFdOwoKICAgICAgaWYgKGJyb3dzZXJSZWcudGVzdCh1YSkpIHsKICAgICAgICByZXMuYnJvd3NlciA9IGJyb3dzZXI7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0gLy8g5q2j5YiZ5Yy56YWN5LiA5LiLYnJhbmQKCiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfaXRlcmF0b3IuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3IuZigpOwogIH0KCiAgZm9yICh2YXIgX2kgPSAwLCBfT2JqZWN0JGVudHJpZXMgPSBPYmplY3QuZW50cmllcyhicmFuZE1hcCk7IF9pIDwgX09iamVjdCRlbnRyaWVzLmxlbmd0aDsgX2krKykgewogICAgdmFyIF9PYmplY3QkZW50cmllcyRfaSA9ICgwLCBfc2xpY2VkVG9BcnJheTIuZGVmYXVsdCkoX09iamVjdCRlbnRyaWVzW19pXSwgMiksCiAgICAgICAgYnJhbmQgPSBfT2JqZWN0JGVudHJpZXMkX2lbMF0sCiAgICAgICAgYnJhbmRSZWcgPSBfT2JqZWN0JGVudHJpZXMkX2lbMV07CgogICAgaWYgKGJyYW5kUmVnLnRlc3QodWEpKSB7CiAgICAgIHJlcy5icmFuZCA9IGJyYW5kOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXM7Cn0KLyoqCiAqIEBmaWxlIOaJi+acuuWOguWVhm1hcmtldOWktOinhOWImQogKiBAYXV0aG9yIHpoYW5nc2l5dWFuKHpoYW5nc2l5dWFuQGJhaWR1LmNvbSkKICovCi8vIOi/memHjOeahOWMuemFjeinhOWImeS4gOWumuimgeS7juWktOWIsOWwvgovLyDlrZjlnKjkvJjlhYjnuqfnmoQKLy8gW2Jyb3dzZXIsIGJyYW5kLCBtYXJrZXRTY2hlbWVdCgoKdmFyIGFuZHJvaWRTdG9yZVJ1bGVzID0gWy8vIOS4ieaYn+S4jeaUr+aMgW1hcmtldOWNj+iurizkvJjlhYjnuqfmnIDpq5gKWycqJywgJ3NhbXN1bmcnLCAnc2Ftc3VuZ2FwcHMnXSwgLy8g5b6u5Y2a5piv55m95ZCN5Y2V5py65Yi277yM5omA5Lul5LyY5YWI57qn6KaB6auYLOmZpOS6huS4ieaYnwpbJ3dlaWJvJywgJyonLCAnbWFya2V0J10sIC8vIOaJi+eZvuaYr+eZveWQjeWNleacuuWItu+8jOaJgOS7peS8mOWFiOe6p+imgemrmApbJ2JhaWR1Ym94YXBwJywgJyonLCAnbWFya2V0J10sIFsnYmFpZHVib3hsaXRlJywgJyonLCAnbWFya2V0J10sIFsndG9tYXMnLCAnKicsICdtYXJrZXQnXSwgLy8g5bCP57GzIOe6ouexsyB1YyDmkJzni5fpnIDopoHotbBtaSDllYblupcKWyd4aWFvbWknLCAneGlhb21pJywgJ21pbWFya2V0J10sIFsndWMnLCAneGlhb21pJywgJ21pbWFya2V0J10sIFsnc29nb3UnLCAneGlhb21pJywgJ21pbWFya2V0J10sIC8vIHFx5rWP6KeI5Zmo5q+U6L6D54m55q6K77yM5Y2O5Li66I2j6ICA5Y+q6IO96LWwbWFya2V077yM5LiN54S25aSa6YeN6LCD6LW35a655piT5rKh5Y+N5bqUClsncXFicm93c2VyJywgJ2h1YXdlaScsICdtYXJrZXQnXSwgWydxcWJyb3dzZXInLCAnaG9ub3InLCAnbWFya2V0J10sIC8vIOWNjuS4uiDojaPogIDmnLrlnovpg73otbDoh6rlt7HnmoTlupTnlKjllYblupcKWycqJywgJ2h1YXdlaScsICdhcHBtYXJrZXQnXSwgWycqJywgJ2hvbm9yJywgJ2FwcG1hcmtldCddLCAvLyBvcHBvClsnb3BwbycsICdvcHBvJywgJ29wcG9tYXJrZXQnXSwgWyd1YycsICdvcHBvJywgJ29wcG9tYXJrZXQnXSwgWydzb2dvdScsICdvcHBvJywgJ29wcG9tYXJrZXQnXSwgWydxdWFyaycsICdvcHBvJywgJ29wcG9tYXJrZXQnXSwgLy8gdml2bwpbJ3VjJywgJ3Zpdm8nLCAndml2b21hcmtldCddLCBbJ3NvZ291JywgJ3Zpdm8nLCAndml2b21hcmtldCddXTsKLyoqCiAqIEBmaWxlIOWuieWNk+W6lOeUqOWVhuW6l+iwg+i1t+WNj+iurgogKiBAYXV0aG9yIHpoYW5nc2l5dWFuKHpoYW5nc2l5dWFuQGJhaWR1LmNvbSkKICovCgp2YXIgbWFya2V0TWFwID0gewogIG1pbWFya2V0OiBmdW5jdGlvbiBtaW1hcmtldChwa2dOYW1lKSB7CiAgICByZXR1cm4gIm1pbWFya2V0Oi8vZGV0YWlscz9pZD0iLmNvbmNhdChwa2dOYW1lLCAiJmJhY2s9dHJ1ZSIpOwogIH0sCiAgYXBwbWFya2V0OiBmdW5jdGlvbiBhcHBtYXJrZXQocGtnTmFtZSkgewogICAgcmV0dXJuICJhcHBtYXJrZXQ6Ly9kZXRhaWxzP2lkPSIuY29uY2F0KHBrZ05hbWUsICImYmFjaz10cnVlIik7CiAgfSwKICBvcHBvbWFya2V0OiBmdW5jdGlvbiBvcHBvbWFya2V0KHBrZ05hbWUpIHsKICAgIHJldHVybiAib3Bwb21hcmtldDovL2RldGFpbHM/cGFja2FnZW5hbWU9Ii5jb25jYXQocGtnTmFtZSk7CiAgfSwKICB2aXZvbWFya2V0OiBmdW5jdGlvbiB2aXZvbWFya2V0KHBrZ05hbWUpIHsKICAgIHJldHVybiAidml2b21hcmtldDovL2RldGFpbHM/aWQ9Ii5jb25jYXQocGtnTmFtZSk7CiAgfSwKICBzYW1zdW5nYXBwczogZnVuY3Rpb24gc2Ftc3VuZ2FwcHMocGtnTmFtZSkgewogICAgcmV0dXJuICJzYW1zdW5nYXBwczovL1Byb2R1Y3REZXRhaWwvIi5jb25jYXQocGtnTmFtZSwgIj9iYWNrPTEiKTsKICB9LAogIG1hcmtldDogZnVuY3Rpb24gbWFya2V0KHBrZ05hbWUpIHsKICAgIHJldHVybiAibWFya2V0Oi8vZGV0YWlscz9pZD0iLmNvbmNhdChwa2dOYW1lKTsKICB9Cn07Ci8qKgogKiDojrflvpflvZPliY3mnLrlnosg6LCD55So5a6J5Y2T5biC5Zy65Y2P6K6u55qEc2NoZW1lCiAqCiAqLwoKZnVuY3Rpb24gZ2V0TWFya2V0U2NoZW1lKHBrZ05hbWUpIHsKICB2YXIgX2dldEhvc3RJbmZvID0gZ2V0SG9zdEluZm8oKSwKICAgICAgYnJvd3NlciA9IF9nZXRIb3N0SW5mby5icm93c2VyLAogICAgICBicmFuZCA9IF9nZXRIb3N0SW5mby5icmFuZDsKCiAgdmFyIG1hcmtldFNjaGVtZSA9ICJtYXJrZXQ6Ly9kZXRhaWxzP2lkPSIuY29uY2F0KHBrZ05hbWUpOwoKICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGFuZHJvaWRTdG9yZVJ1bGVzKSwKICAgICAgX3N0ZXAyOwoKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgdmFyIF9zdGVwMiR2YWx1ZSA9ICgwLCBfc2xpY2VkVG9BcnJheTIuZGVmYXVsdCkoX3N0ZXAyLnZhbHVlLCAzKSwKICAgICAgICAgIGJyb3dzZXJSdWxlID0gX3N0ZXAyJHZhbHVlWzBdLAogICAgICAgICAgYnJhbmRSdWxlID0gX3N0ZXAyJHZhbHVlWzFdLAogICAgICAgICAgc2NoZW1lTmFtZSA9IF9zdGVwMiR2YWx1ZVsyXTsKCiAgICAgIGlmICgoYnJvd3NlclJ1bGUgPT09ICcqJyB8fCBicm93c2VyID09PSBicm93c2VyUnVsZSkgJiYgKGJyYW5kUnVsZSA9PT0gJyonIHx8IGJyYW5kID09PSBicmFuZFJ1bGUpKSB7CiAgICAgICAgbWFya2V0U2NoZW1lID0gbWFya2V0TWFwW3NjaGVtZU5hbWVdKHBrZ05hbWUpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9IC8vIOi0tOWQp+eJueauimNhc2UKICAgIC8vIOi0tOWQp+S4k+eUqOWNj+iurizotLTlkKfkuI3liqDlkI7pnaLlj4LmlbDnlJ/mlYjkuI3kuoYKCiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICB9IGZpbmFsbHkgewogICAgX2l0ZXJhdG9yMi5mKCk7CiAgfQoKICBpZiAoYnJvd3NlciA9PT0gJ3RpZWJhJykgewogICAgbWFya2V0U2NoZW1lICs9ICcmZW5hYmxlX3RpZWJhX25hdGl2ZV9vcGVuPTEnOwogIH0KCiAgcmV0dXJuIG1hcmtldFNjaGVtZTsKfQovKioKICogQGZpbGUgaW52b2tlVHlwZVJ1bGVzCiAqIEBhdXRob3IgemhhbmdzaXl1YW4oemhhbmdzaXl1YW5AYmFpZHUuY29tKQogKi8KCgp2YXIgbm90VWxpbmtSdWxlcyA9IFtbJ3dlaWJvJywgJ2JhaWR1Ym94YXBwJ10sIFsndWMnLCAnYmFpZHVib3hhcHAnXSwgWydxdWFyaycsICdiYWlkdWJveGFwcCddLCBbJ2Nocm9tZScsICcqJ11dOyAvLyBbYnJvd3NlcixhcHBOYW1lXVtdCgp2YXIgbm90SWZyYW1lUnVsZXMgPSBbWyd1YycsICcqJ10sIFsnY2hyb21lJywgJyonXSwgWydzYW1zdW5nJywgJyonXV07IC8vIOW3peWFt+WHveaVsO+8jOajgOa1i+aYr+WQpuWMuemFjeafkOS4quinhOWImQoKdmFyIG1hdGNoUnVsZXMgPSBmdW5jdGlvbiBtYXRjaFJ1bGVzKHJ1bGVzLCBicm93c2VyLCBhcHBOYW1lKSB7CiAgcmV0dXJuIHJ1bGVzLnNvbWUoZnVuY3Rpb24gKF9yZWYpIHsKICAgIHZhciBfcmVmMiA9ICgwLCBfc2xpY2VkVG9BcnJheTIuZGVmYXVsdCkoX3JlZiwgMiksCiAgICAgICAgYnJvd3NlclJ1bGUgPSBfcmVmMlswXSwKICAgICAgICBhcHBOYW1lUnVsZSA9IF9yZWYyWzFdOwoKICAgIHJldHVybiAoYnJvd3NlclJ1bGUgPT09ICcqJyB8fCBicm93c2VyUnVsZSA9PT0gYnJvd3NlcikgJiYgKGFwcE5hbWVSdWxlID09PSAnKicgfHwgYXBwTmFtZVJ1bGUgPT09IGFwcE5hbWUpOwogIH0pOwp9OyAvLyBpb3Pns7vnu5/vvIzkuJTniYjmnKzjgIs5LuaIluiAheaYr+S4qmlhcGQgIOaXoOaJgOiwk+eJiOacrOS6hgoKCnZhciBtYXRjaElvc1dpdGhWZXJzaW9uID0gSVNfSU9TICYmIElPU19WRVJTSU9OID4gOSB8fCBJU19JUEFEOwoKZnVuY3Rpb24gbWF0Y2hlZFVsaW5rKGJyb3dzZXIsIGFwcE5hbWUpIHsKICB2YXIgbm90VWxpbmsgPSBtYXRjaFJ1bGVzKG5vdFVsaW5rUnVsZXMsIGJyb3dzZXIsIGFwcE5hbWUpOyAvLyBpb3Pns7vnu5/mlK/mjIHvvIzkuJTkuI3lnKhub3RVbGlua+WQjeWNleS4rQoKICByZXR1cm4gbWF0Y2hJb3NXaXRoVmVyc2lvbiAmJiAhbm90VWxpbms7Cn0KCmZ1bmN0aW9uIG5vdE1hdGNoZWRJZnJhbWUoYnJvd3NlciwgYXBwTmFtZSkgewogIHJldHVybiBtYXRjaElvc1dpdGhWZXJzaW9uIHx8IG1hdGNoUnVsZXMobm90SWZyYW1lUnVsZXMsIGJyb3dzZXIsIGFwcE5hbWUpOwp9Ci8qKgogKiBAZmlsZSBzY2hlbWEg6LCD6LW3CiAqIEBhdXRob3Igemh1emhpYm8gPHpodXpoaWJvQGJhaWR1LmNvbT4KICogQGF1dGhvciB6c3kKICovCgovKioKICoKICogaW52b2tlQWN0aW9u5YyF5ZCr5LqGCiAqIOebtOaOpeS9v+eUqGxvY2F0aW9uID0gc2NoZW1lCiAqIOWSjGlmcmFtZeS4pOenjeaWueW8jwogKgogKi8KCgpmdW5jdGlvbiBpbnZva2VBY3Rpb24oc2NoZW1lLCBhcHBOYW1lKSB7CiAgdmFyIF9nZXRIb3N0SW5mbzIgPSBnZXRIb3N0SW5mbygpLAogICAgICBicm93c2VyID0gX2dldEhvc3RJbmZvMi5icm93c2VyOyAvLyDms6jmhI/ov5nph4znmoRhcHBOYW1l77yM5aaC5p6c5Lul5ZCO5pyJ6KeE5YiZ5Yy56YWNCiAgLy8g6KaB5Y6756Gu6K6k5LiLISEh5Lya5LiN5Lya5b2x5ZON5Y2V54us55qEYXBpICBpbnZva2VNYXJrZXQhISEKCgogIGlmIChub3RNYXRjaGVkSWZyYW1lKGJyb3dzZXIsIGFwcE5hbWUpKSB7CiAgICB3aW5kb3cudG9wLmxvY2F0aW9uLmhyZWYgPSBzY2hlbWU7CiAgICByZXR1cm47CiAgfSAvLyDlhbbkvZnkuIDlvovotbBpZnJhbWXosIPotbcKCgogIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7CiAgbm9kZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogIG5vZGUuc3JjID0gc2NoZW1lOwogIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTsKICBib2R5LmFwcGVuZENoaWxkKG5vZGUpOyAvLyDplIDmr4EgaWZyYW1lCgogIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgYm9keS5yZW1vdmVDaGlsZChub2RlKTsgLy8gQHRzLWlnbm9yZQoKICAgIG5vZGUgPSBudWxsOwogIH0sIDApOwp9Ci8qKgogKiBAZmlsZSDosIPotbfmg4XlhrXmo4DmtYsKICogQGF1dGhvciB6aHV6aGlibyh6aHV6aGlib0BiYWlkdS5jb20pCiAqIEBhdXRob3IgenN5CiAqLwoKLyoqCiAqIOiwg+i1t+aDheWGteajgOa1iwogKgogKi8KCgpmdW5jdGlvbiBjaGVja0ludm9rZSh0aW1lb3V0KSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHZhciB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAvLyDlpoLmnpx2aXNpYmlsaXR5Y2hhbmdl5LqL5Lu25LiN6Kem5Y+R77yM5L2G5pivc3RhdGXkvJrlj5jljJYKICAgICAgLy8g6L+Z6YeM5Y+v5Lul5YWc5bqV5Yik5pat5Zue6LCDCiAgICAgIC8vIOS9huaYr+i/meenjeamgueOh+i/mOaYr+aMuuWwj+eahAogICAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAnaGlkZGVuJykgewogICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgcmVqZWN0KCk7CiAgICB9LCB0aW1lb3V0KTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICdoaWRkZW4nKSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0KICAgIH0pOwogIH0pOwp9Ci8qKgogKiBAZmlsZSDov5Tlm57lgLzliJfooagKICogQGF1dGhvciB6aHV6aGlibyh6aHV6aGlib0BiYWlkdS5jb20pCiAqIEBhdXRob3IgenN5CiAqLwoKCnZhciBTdGF0dXMgPSB7CiAgVFJZX0pVTVA6IDkwMDAxLAogIElOVk9LRV9TVUNDRVNTOiAxMDAwMCwKICBBUFBTVE9SRV9TVUNDRVNTOiAxMDAwMSwKICBBUEtfU1VDQ0VTUzogMTAwMDIsCiAgWVlCX1NVQ0NFU1M6IDEwMDAzLAogIEZBSUxFRFVSTF9TVUNDRVNTOiAxMDAwNCwKICBDT1BZX0ZBSUxFRDogMjAwMDQsCiAgSU5WT0tFX0ZBSUw6IDIwMDA1LAogIE5PVF9TVVBQT1JUX1NZU1RFTTogMjAwMDYsCiAgSU5WT0tFX0FQUFNUT1JFX0ZBSUw6IDIwMDA3LAogIElOVk9LRV9VTElOS19GQUlMOiAyMDAwOCwKICBBUFBOQU1FX05PVF9TVVBQT1JUOiAyMDAxMSwKICBQQVJBTVNfRVJST1I6IDIxMDAwCn07Ci8qKgogKiBAZmlsZSDosIPotbfnsbvlnosKICogQGF1dGhvciB6aGFuZ3NpeXVhbih6aGFuZ3NpeXVhbkBiYWlkdS5jb20pCiAqLwovLyDlj6rmnInov5k156eN5oOF5Ya15Lya5Y675bCd6K+V6LCD6LW35bm25LiU5Y+v6IO95aSx6LSlCi8vIOmcgOimgeagh+W/l+S4jeWQjOeahHN0YXR1c0NvZGUKLy8g5omA5Lul6L+Z6YeM6KaB5Yy65YiG5LiA5LiLCi8vIOWDj3l5Yui/meenjeWwseS4jemcgOimgeS6hu+8jOebtOaOpeWwseehruWumuS6huWPquacieiwg+i1t3l5YuaIkOWKn+eahGNvZGXkuoYKCnZhciBJbnZva2VUeXBlID0gewogIERFRVBMSU5LOiAiZGVlcGxpbmsiLAogIFVMSU5LOiAidWxpbmsiLAogIFNDSEVNRTogInNjaGVtZSIsCiAgTk9UX1RSWTogIm5vdFRyeSIsCiAgQU5EUk9JRF9NQVJLRVQ6ICJtYXJrZXQiCn07Ci8qKgogKiBAZmlsZSBzZW5kIGVycm9yCiAqIEBhdXRob3IgemhhbmdzaXl1YW4oemhhbmdzaXl1YW5AYmFpZHUuY29tKQogKi8KCl91Z0Vycm9yTG9nLmRlZmF1bHQuaW5pdCh7CiAgdXJsOiAnaHR0cHM6Ly9hY3Rpdml0eS5iYWlkdS5jb20vYWN0aXZpdHkvZmVsb2cvbG9nJywKICBhcHA6ICd1Zy1pbnZva2UtYXBwX3Byb2QwMicsCiAgd2F0Y2g6IGZhbHNlCn0pOwoKZnVuY3Rpb24gZ2V0UmFuZG9tTnVtYmVyKCkgewogIHJldHVybiBNYXRoLmZsb29yKDEwMCAqIE1hdGgucmFuZG9tKCkpOwp9IC8vIOW9k+asoeiwg+i1tyAg5piv5ZCm5ZG95Lit5oq95qC3Ci8vIHF1ZXJ55LiKX3VpYV9oPTHlj4LmlbDkvJjlhYjnuqfmnIDpq5gKLy8g5oiW6ICF6K6h566X5oq95qC35q+U5L6LCgoKZnVuY3Rpb24gaXNIaXQoc3RhdFJhdGlvKSB7CiAgdmFyIHVybCA9IG5ldyBfdXJsUGFyc2UuZGVmYXVsdCh3aW5kb3cubG9jYXRpb24uaHJlZik7CiAgdmFyIHF1ZXJ5ID0gX3F1ZXJ5U3RyaW5nLmRlZmF1bHQucGFyc2UodXJsLnF1ZXJ5KSB8fCB7fTsKICByZXR1cm4gcXVlcnkuX3VpYV9oID09PSAnMScgfHwgZ2V0UmFuZG9tTnVtYmVyKCkgPCBzdGF0UmF0aW87Cn0KLyoqCiAqCiAqCiAqIHVnLWludm9rZS1hcHDooYzkuLrnu5/orqHmiZPngrkKICog5bCd6K+V6LCD6LW3CiAqIOW8guW4uOaKpemUmQogKiDosIPotbfmiJDlip/jgIHlpLHotKXjgIHlupTnlKjllYblupfnrYkKICogc3RhdHVz5b+F6aG75Lyg77yM5YW25LuW55qE5Lya5qC55o2uaW52b2tlYXBw56ys5LiA5qyh6L+b5YWl55qE5pe25YCZ55qE57yT5a2Y5Y+R5Ye6CiAqIOWmguaenOacieWNleasoeimhuebluWPguaVsO+8jOWPr+S7peWcqOi/meS4quaWueazlemHjOS8oO+8jOS4jeW9seWTjee8k+WtmAogKgogKgogKi8KCgpmdW5jdGlvbiBzZW5kSDVFcnJMb2cob3B0aW9ucywgc3RhdHVzKSB7CiAgdmFyIHVzZVNlbmRCZWFjb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHRydWU7CgogIGlmIChvcHRpb25zLmlzSGl0U3RhdCkgewogICAgLy8g5YmN6Z2i6L+Z5LiJ5Liq5LiN6ZyA6KaB5omT54K55LqGCiAgICB2YXIgbWFya2V0U2NoZW1lID0gb3B0aW9ucy5tYXJrZXRTY2hlbWUsCiAgICAgICAgaXNIaXRTdGF0ID0gb3B0aW9ucy5pc0hpdFN0YXQsCiAgICAgICAgcGtnTmFtZSA9IG9wdGlvbnMucGtnTmFtZSwKICAgICAgICByZXN0ID0gKDAsIF9vYmplY3RXaXRob3V0UHJvcGVydGllczIuZGVmYXVsdCkob3B0aW9ucywgWyJtYXJrZXRTY2hlbWUiLCAiaXNIaXRTdGF0IiwgInBrZ05hbWUiXSk7CiAgICB2YXIgdWlhVmVyID0gd2luZG93Ll9fVUlBX1ZFUlNJT05fXyB8fCAnLSc7CgogICAgX3VnRXJyb3JMb2cuZGVmYXVsdC5zZW5kKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcmVzdCksIHt9LCB7CiAgICAgIHVpYVZlcjogdWlhVmVyLAoKICAgICAgLyogZXNsaW50LWRpc2FibGUgKi8KICAgICAgX3VpYV9zdGF0dXM6IHN0YXR1cwogICAgICAvKiBlc2xpbnQtZW5hYmxlICovCgogICAgfSksIHVzZVNlbmRCZWFjb24pOwogIH0KfQovKioKICogQGZpbGUg5bCd6K+V6LCD6LW35aSx6LSl5aSE55CGCiAqIEBhdXRob3IgemhhbmdzaXl1YW4oemhhbmdzaXl1YW5AYmFpZHUuY29tKQogKi8KCgpmdW5jdGlvbiBoYW5kbGVJbnZva2VGYWlsZWQoX3gsIF94MikgewogIHJldHVybiBfaGFuZGxlSW52b2tlRmFpbGVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KLyoqCiAqIEBmaWxlIGludm9rZSDnsbvlnosKICogQGF1dGhvciB6aGFuZ3NpeXVhbih6aGFuZ3NpeXVhbkBiYWlkdS5jb20pCiAqLwoKCmZ1bmN0aW9uIF9oYW5kbGVJbnZva2VGYWlsZWQoKSB7CiAgX2hhbmRsZUludm9rZUZhaWxlZCA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKG9wdGlvbnMsIGludm9rZVR5cGUpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaWYgKCEoaW52b2tlVHlwZSA9PT0gSW52b2tlVHlwZS5VTElOSykpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2VuZEg1RXJyTG9nKG9wdGlvbnMsIFN0YXR1cy5JTlZPS0VfVUxJTktfRkFJTCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KFN0YXR1cy5JTlZPS0VfVUxJTktfRkFJTCkpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgaWYgKCFvcHRpb25zLnRvU3RvcmUpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghKElTX0FORFJPSUQgJiYgaW52b2tlVHlwZSAhPT0gSW52b2tlVHlwZS5BTkRST0lEX01BUktFVCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgaW52b2tlQW5kcm9pZE1hcmtldChvcHRpb25zKSk7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBpZiAoIShJU19JT1MgJiYgb3B0aW9ucy5pb3NTdG9yZVVybCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNlbmRINUVyckxvZyhvcHRpb25zLCBTdGF0dXMuQVBQU1RPUkVfU1VDQ0VTUyk7CiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSBvcHRpb25zLmlvc1N0b3JlVXJsOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBTdGF0dXMuQVBQU1RPUkVfU1VDQ0VTUyk7CgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgaWYgKCEoSVNfQU5EUk9JRCAmJiBvcHRpb25zLmFwa1VybCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNlbmRINUVyckxvZyhvcHRpb25zLCBTdGF0dXMuQVBLX1NVQ0NFU1MpOwogICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gb3B0aW9ucy5hcGtVcmw7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFN0YXR1cy5BUEtfU1VDQ0VTUyk7CgogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgaWYgKCFvcHRpb25zLmZhaWxlZFVybCkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2VuZEg1RXJyTG9nKG9wdGlvbnMsIFN0YXR1cy5GQUlMRURVUkxfU1VDQ0VTUyk7CiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSBvcHRpb25zLmZhaWxlZFVybDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgU3RhdHVzLkZBSUxFRFVSTF9TVUNDRVNTKTsKCiAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICBpZiAoIShvcHRpb25zLnRvU3RvcmUgJiYgSVNfQU5EUk9JRCAmJiBpbnZva2VUeXBlID09PSBJbnZva2VUeXBlLkFORFJPSURfTUFSS0VUKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2VuZEg1RXJyTG9nKG9wdGlvbnMsIFN0YXR1cy5JTlZPS0VfQVBQU1RPUkVfRkFJTCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KFN0YXR1cy5JTlZPS0VfQVBQU1RPUkVfRkFJTCkpOwoKICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgIHNlbmRINUVyckxvZyhvcHRpb25zLCBTdGF0dXMuSU5WT0tFX0ZBSUwpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChTdGF0dXMuSU5WT0tFX0ZBSUwpKTsKCiAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKICByZXR1cm4gX2hhbmRsZUludm9rZUZhaWxlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBpbnZva2VXaXRoVHlwZShfeDMsIF94NCkgewogIHJldHVybiBfaW52b2tlV2l0aFR5cGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQovKioKICogQGZpbGUg6LCD6LW35bqU55So5ZWG5bqXCiAqIEBhdXRob3Igemh1emhpYm8oemh1emhpYm9AYmFpZHUuY29tKQogKi8KCgpmdW5jdGlvbiBfaW52b2tlV2l0aFR5cGUoKSB7CiAgX2ludm9rZVdpdGhUeXBlID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KSggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKG9wdGlvbnMsIGludm9rZVR5cGUpIHsKICAgIHZhciBzdGF0dXM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoaW52b2tlVHlwZSA9PT0gSW52b2tlVHlwZS5VTElOSykgewogICAgICAgICAgICAgIHdpbmRvdy50b3AubG9jYXRpb24uaHJlZiA9IG9wdGlvbnMudWxpbms7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW52b2tlVHlwZSA9PT0gSW52b2tlVHlwZS5BTkRST0lEX01BUktFVCAmJiBvcHRpb25zLm1hcmtldFNjaGVtZSkgewogICAgICAgICAgICAgIGludm9rZUFjdGlvbihvcHRpb25zLm1hcmtldFNjaGVtZSwgb3B0aW9ucy5hcHBOYW1lKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChpbnZva2VUeXBlID09PSBJbnZva2VUeXBlLlNDSEVNRSkgewogICAgICAgICAgICAgIGludm9rZUFjdGlvbihvcHRpb25zLnNjaGVtZSwgb3B0aW9ucy5hcHBOYW1lKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBjaGVja0ludm9rZShvcHRpb25zLnRpbWVvdXQpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgc3RhdHVzID0gaW52b2tlVHlwZSA9PT0gSW52b2tlVHlwZS5BTkRST0lEX01BUktFVCA/IFN0YXR1cy5BUFBTVE9SRV9TVUNDRVNTIDogU3RhdHVzLklOVk9LRV9TVUNDRVNTOwogICAgICAgICAgICBzZW5kSDVFcnJMb2cob3B0aW9ucywgc3RhdHVzKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHN0YXR1cyk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDk7CiAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIGhhbmRsZUludm9rZUZhaWxlZChvcHRpb25zLCBpbnZva2VUeXBlKSk7CgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMSwgOV1dKTsKICB9KSk7CiAgcmV0dXJuIF9pbnZva2VXaXRoVHlwZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBpbnZva2VBbmRyb2lkTWFya2V0KF94NSkgewogIHJldHVybiBfaW52b2tlQW5kcm9pZE1hcmtldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9IC8vIOS4k+mXqOe7meWklui+ueS6uuWGmeeahOWNleeLrOeahGFwaQoKCmZ1bmN0aW9uIF9pbnZva2VBbmRyb2lkTWFya2V0KCkgewogIF9pbnZva2VBbmRyb2lkTWFya2V0ID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KSggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKG9wdGlvbnMpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIG9wdGlvbnMubWFya2V0U2NoZW1lID0gZ2V0TWFya2V0U2NoZW1lKG9wdGlvbnMucGtnTmFtZSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBpbnZva2VXaXRoVHlwZShvcHRpb25zLCBJbnZva2VUeXBlLkFORFJPSURfTUFSS0VUKSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMyk7CiAgfSkpOwogIHJldHVybiBfaW52b2tlQW5kcm9pZE1hcmtldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBpbnZva2VNYXJrZXQoX3g2KSB7CiAgcmV0dXJuIF9pbnZva2VNYXJrZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQovKioKICogQGZpbGUgYXBwY29uZmlnCiAqIEBhdXRob3IgemhhbmdzaXl1YW4oemhhbmdzaXl1YW5AYmFpZHUuY29tKQogKiBAc2VlIGh0dHA6Ly9hZ3JvdXAuYmFpZHUuY29tL2NldWctZmUvbWQvYXJ0aWNsZS8yNzk5MTM1CiAqLwovLyDlhbzlrrnkuIDkuIvnrKzkuInmlrnnmoRhcHBOYW1l5ZCN5a2XCgoKZnVuY3Rpb24gX2ludm9rZU1hcmtldCgpIHsKICBfaW52b2tlTWFya2V0ID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KSggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KHBrZ05hbWUpIHsKICAgIHZhciB0aW1lb3V0LAogICAgICAgIHNjaGVtZSwKICAgICAgICBfYXJnczQgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB0aW1lb3V0ID0gX2FyZ3M0Lmxlbmd0aCA+IDEgJiYgX2FyZ3M0WzFdICE9PSB1bmRlZmluZWQgPyBfYXJnczRbMV0gOiAyMDAwOwogICAgICAgICAgICBzY2hlbWUgPSBnZXRNYXJrZXRTY2hlbWUocGtnTmFtZSk7IC8vIOWHveaVsOetvuWQjemcgOimgeS4gOS4qkFwcE5hbWXvvIzkvYblhbblrp5pbnZva2VNYXJrZXTlubbkuI3kvJrnlKjliLAKICAgICAgICAgICAgLy8g5omA5Lul6L+Z6YeM6ZqP5oSP5Lyg5YWl5LiA5Liq5aW95LqG5LqGCgogICAgICAgICAgICBpbnZva2VBY3Rpb24oc2NoZW1lLCAnYmFpZHVpbnB1dCcpOwogICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDM7CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjsKICAgICAgICAgICAgcmV0dXJuIGNoZWNrSW52b2tlKHRpbWVvdXQpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIFN0YXR1cy5BUFBTVE9SRV9TVUNDRVNTKTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gOTsKICAgICAgICAgICAgX2NvbnRleHQ0LnQwID0gX2NvbnRleHQ0WyJjYXRjaCJdKDMpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZWplY3QoU3RhdHVzLklOVk9LRV9BUFBTVE9SRV9GQUlMKSk7CgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTQsIG51bGwsIFtbMywgOV1dKTsKICB9KSk7CiAgcmV0dXJuIF9pbnZva2VNYXJrZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKdmFyIGFwcENvbmZpZ01hcCA9IHsKICBiYWlkdWJveGFwcDogewogICAgZ2V0VWxpbms6IGZ1bmN0aW9uIGdldFVsaW5rKHNjaGVtZSwgdGFyZ2V0KSB7CiAgICAgIHJldHVybiAiaHR0cHM6Ly9ib3hlci5iYWlkdS5jb20vc2NoZW1lP3NjaGVtZT0iLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoc2NoZW1lKSwgIiZ0YXJnZXQ9IikuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudCh0YXJnZXQpKTsKICAgIH0sCiAgICBhcHBTdG9yZVVybDogJ2h0dHBzOi8vaXR1bmVzLmFwcGxlLmNvbS9jbi9hcHAvaWQzODIyMDE5ODU/bXQ9OCcsCiAgICBzY2hlbWU6ICdiYWlkdWJveGFwcDovL3YxMS9hcHBUYWIvc2VsZWN0P2l0ZW09aG9tZSZ1cGdyYWRlPTAnLAogICAgcGtnTmFtZTogJ2NvbS5iYWlkdS5zZWFyY2hib3gnCiAgfSwKICBiYWlkdWJveGxpdGU6IHsKICAgIGdldFVsaW5rOiBmdW5jdGlvbiBnZXRVbGluayhzY2hlbWUsIHRhcmdldCkgewogICAgICByZXR1cm4gImh0dHBzOi8vd2FrZXVwLmJhaWR1LmNvbS9iYWlkdWJveGxpdGUvc2NoZW1lP3NjaGVtZT0iLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoc2NoZW1lKSwgIiZ0YXJnZXQ9IikuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudCh0YXJnZXQpKTsKICAgIH0sCiAgICBhcHBTdG9yZVVybDogJ2h0dHBzOi8vaXR1bmVzLmFwcGxlLmNvbS9jbi9hcHAvaWQxMjgxODczMTE4P210PTgnLAogICAgc2NoZW1lOiAnYmFpZHVib3hsaXRlOi8vdjExL2FwcFRhYi9zZWxlY3Q/aXRlbT1ob21lJnVwZ3JhZGU9MCcsCiAgICBwa2dOYW1lOiAnY29tLmJhaWR1LnNlYXJjaGJveC5saXRlJwogIH0sCiAgYmFpZHVoYW9rYW46IHsKICAgIGdldFVsaW5rOiBmdW5jdGlvbiBnZXRVbGluayhzY2hlbWUsIHRhcmdldCkgewogICAgICB2YXIgcGF0aCA9IHNjaGVtZS5yZXBsYWNlKCdiYWlkdWhhb2thbjovLycsICcnKTsKICAgICAgdmFyIGhhc1F1ZXN0aW9uTWFyayA9IHBhdGguaW5jbHVkZXMoJz8nKTsKICAgICAgcmV0dXJuICdodHRwczovL2hrdS5iYWlkdS5jb20vaDUvc2hhcmUvcy8nICsgcGF0aCArIChoYXNRdWVzdGlvbk1hcmsgPyAnJicgOiAnPycpICsgInRhcmdldD0iLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQodGFyZ2V0KSk7CiAgICB9LAogICAgYXBwU3RvcmVVcmw6ICdodHRwczovL2l0dW5lcy5hcHBsZS5jb20vY24vYXBwL2JhaS1kdS1oYW8ta2FuL2lkMTA5MjAzMTAwMycsCiAgICBzY2hlbWU6ICdiYWlkdWhhb2thbjovL2hvbWUvaW5kZXgnLAogICAgcGtnTmFtZTogJ2NvbS5iYWlkdS5oYW9rYW4nCiAgfSwKICBiZG1pbml2aWRlbzogewogICAgZ2V0VWxpbms6IGZ1bmN0aW9uIGdldFVsaW5rKHNjaGVtZSwgdGFyZ2V0KSB7CiAgICAgIHJldHVybiAiaHR0cHM6Ly92di5iYWlkdS5jb20vZmVlZHZpZGVvdWkvdWxpbms/c2NoZW1lPSIuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudChzY2hlbWUpLCAiJnRhcmdldD0iKS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHRhcmdldCkpOwogICAgfSwKICAgIGFwcFN0b3JlVXJsOiAnaHR0cHM6Ly9pdHVuZXMuYXBwbGUuY29tL2NuL2FwcC8lRTUlODUlQTglRTYlQjAlOTElRTUlQjAlOEYlRTglQTclODYlRTklQTIlOTEvaWQxMzI5Mzg1MTQ1P210PTgnLAogICAgc2NoZW1lOiAnYmRtaW5pdmlkZW86Ly9ob21lL2luZGV4JywKICAgIHBrZ05hbWU6ICdjb20uYmFpZHUubWluaXZpZGVvJwogIH0sCiAgdGllYmE6IHsKICAgIGFwcFN0b3JlVXJsOiAnaHR0cHM6Ly9pdHVuZXMuYXBwbGUuY29tL2FwcC9hcHBsZS1zdG9yZS9pZDQ3NzkyNzgxMj9wdD0zMjgwNTcmY3Q9Ym90dG9tX2xheWVyJm10PTgnLAogICAgcGtnTmFtZTogJ2NvbS5iYWlkdS50aWViYScsCiAgICAvLyDotLTlkKfmsqHmnInmj5Dkvpt1bGluawogICAgZ2V0VWxpbms6IGZ1bmN0aW9uIGdldFVsaW5rKCkgewogICAgICByZXR1cm4gJyc7CiAgICB9LAogICAgc2NoZW1lOiAnY29tLmJhaWR1LnRpZWJhOi8vdW5pZGlzcGF0Y2gvaG9tZXBhZ2UnCiAgfSwKICBiZG5ldGRpc2s6IHsKICAgIGdldFVsaW5rOiBmdW5jdGlvbiBnZXRVbGluayhzY2hlbWUsIHRhcmdldCkgewogICAgICByZXR1cm4gImh0dHBzOi8vc25zeXVuLmJhaWR1LmNvbS93YXAvc25zZGVlcGxpbms/c2NoZW1lPSIuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudChzY2hlbWUpLCAiJnRhcmdldD0iKS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHRhcmdldCkpOwogICAgfSwKICAgIHBrZ05hbWU6ICdjb20uYmFpZHUubmV0ZGlzaycsCiAgICBhcHBTdG9yZVVybDogJ2h0dHBzOi8vaXR1bmVzLmFwcGxlLmNvbS9jbi9hcHAvJUU3JTk5JUJFJUU1JUJBJUE2JUU3JUJEJTkxJUU3JTlCJTk4L2lkNTQ3MTY2NzAxP210PTgnLAogICAgc2NoZW1lOiAnYmRuZXRkaXNrOi8vbi9hY3Rpb24uRVhURVJOQUxfQUNUSVZJVFk/bV9uX3Y9MTAuMC4yMCcKICB9LAogIGlxaXlpOiB7CiAgICBnZXRVbGluazogZnVuY3Rpb24gZ2V0VWxpbmsoKSB7CiAgICAgIHJldHVybiAnJzsKICAgIH0sCiAgICBwa2dOYW1lOiAnY29tLnFpeWkudmlkZW8nLAogICAgYXBwU3RvcmVVcmw6ICdodHRwczovL2FwcHMuYXBwbGUuY29tL2NuL2FwcC9pZDM5Mzc2NTg3MycsCiAgICBzY2hlbWU6ICdpcWl5aTovLycKICB9LAogIGJhaWR1bWFwOiB7CiAgICBnZXRVbGluazogZnVuY3Rpb24gZ2V0VWxpbmsoc2NoZW1lLCB0YXJnZXQpIHsKICAgICAgcmV0dXJuICJodHRwczovL2NsaWVudG1hcC5iYWlkdS5jb20vbWFwL21hcGxpbmsucGhwP2NidXJsPSIuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudCh0YXJnZXQpLCAiJm9wZW5hcGk9IikuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudChzY2hlbWUpKTsKICAgIH0sCiAgICBhcHBTdG9yZVVybDogJ2h0dHBzOi8vaXR1bmVzLmFwcGxlLmNvbS9jbi9hcHAvaWQ0NTIxODYzNzAnLAogICAgc2NoZW1lOiAnYmFpZHVtYXA6Ly9tYXA/c3JjPXVnaW52b2tlJywKICAgIHBrZ05hbWU6ICdjb20uYmFpZHUuQmFpZHVNYXAnCiAgfSwKICBiZGRyYW1hOiB7CiAgICBnZXRVbGluazogZnVuY3Rpb24gZ2V0VWxpbmsoc2NoZW1lLCB0YXJnZXQpIHsKICAgICAgcmV0dXJuICJodHRwczovL3VsaW5rbXZpZGVvLmJhaWR1LmNvbS93aXNlZHJhbWEvc3lzdGVtL3VsaW5rP3NjaGVtZT0iLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoc2NoZW1lKSwgIiZ0YXJnZXQ9IikuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudCh0YXJnZXQpKTsKICAgIH0sCiAgICBhcHBTdG9yZVVybDogJ2h0dHBzOi8vYXBwcy5hcHBsZS5jb20vY24vYXBwLyVFNyU5NSVBQSVFNCVCOSU5MC9pZDE0ODQzMDE5MzYnLAogICAgcGtnTmFtZTogJ2NvbS5iYWlkdS5tdi5kcmFtYScsCiAgICBzY2hlbWU6ICdiZGRyYW1hOi8vaG9tZT9zb3VyY2U9JwogIH0sCiAgd2Vua3U6IHsKICAgIGdldFVsaW5rOiBmdW5jdGlvbiBnZXRVbGluaygpIHsKICAgICAgcmV0dXJuICcnOwogICAgfSwKICAgIGFwcFN0b3JlVXJsOiAnaHR0cHM6Ly9hcHBzLmFwcGxlLmNvbS9jbi9hcHAvaWQ0MjYzNDA4MTEnLAogICAgcGtnTmFtZTogJ2NvbS5iYWlkdS53ZW5rdScsCiAgICBzY2hlbWU6ICdiZHdlbmt1Oi8vd2Vua3Uvb3BlcmF0aW9uP3R5cGU9MTM2JnRhYj1maW5kJwogIH0sCiAgbGVtb246IHsKICAgIGdldFVsaW5rOiBmdW5jdGlvbiBnZXRVbGluayhzY2hlbWUsIHRhcmdldCkgewogICAgICByZXR1cm4gImh0dHBzOi8vd2FrZXVwLmJhaWR1LmNvbS9sZW1vbmFwcC9zY2hlbWU/c2NoZW1lPSIuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudChzY2hlbWUpLCAiJnRhcmdldD0iKS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHRhcmdldCkpOwogICAgfSwKICAgIGFwcFN0b3JlVXJsOiAnaHR0cDovL2NsaWNrLmhtLmJhaWR1LmNvbS9hcHAuZ2lmP2FwPTE4MDEwODEmY2g9NDc1NTYnLAogICAgc2NoZW1lOiAnbGVtb246Ly9zaGFyZT90eXBlPTEzJywKICAgIHBrZ05hbWU6ICdjb20uYmFpZHUubGVtb24nCiAgfSwKICBiYWlkdWlucHV0OiB7CiAgICAvLyDnmb7luqbovpPlhaXms5XkuI3mlK/mjIHlpLHotKXlkI7ot7Povazpk77mjqUKICAgIGdldFVsaW5rOiBmdW5jdGlvbiBnZXRVbGluayhzY2hlbWUpIHsKICAgICAgcmV0dXJuICJodHRwczovL3NyZi5iYWlkdS5jb20vP2Zyb209MTAyNDEyOW0mYz1hcHBsZSZlPWltZWhkJm5hdGl2ZV91cmw9Ii5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHNjaGVtZSkpOwogICAgfSwKICAgIGFwcFN0b3JlVXJsOiAnaHR0cHM6Ly9pdHVuZXMuYXBwbGUuY29tL2FwcC9hcHBsZS1zdG9yZS9pZDkxNjEzOTQwOD9wdD02MjU4MDUmY3Q9MTAyNDEyOW0mbXQ9OCcsCiAgICBzY2hlbWU6ICdiYWlkdWltc2V0dGluZ3MyOi8vc3VwZXJza2luJywKICAgIHBrZ05hbWU6ICdjb20uYmFpZHUuaW5wdXQnCiAgfSwKICBiYWlkdWJveHZpc2lvbjogewogICAgZ2V0VWxpbms6IGZ1bmN0aW9uIGdldFVsaW5rKHNjaGVtZSwgdGFyZ2V0KSB7CiAgICAgIHJldHVybiAiaHR0cHM6Ly93YWtldXAuYmFpZHUuY29tL2JhaWR1Ym94dmlzaW9uL3NjaGVtZT9zY2hlbWU9Ii5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHNjaGVtZSksICImdGFyZ2V0PSIpLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQodGFyZ2V0KSk7CiAgICB9LAogICAgYXBwU3RvcmVVcmw6ICdodHRwczovL2FwcHMuYXBwbGUuY29tL2NuL2FwcC9pZDE1MjYxMTA3ODknLAogICAgc2NoZW1lOiAnYmFpZHVib3h2aXNpb246Ly9hcHBUYWIvc2VsZWN0P2l0ZW09aG9tZScsCiAgICBwa2dOYW1lOiAnY29tLmJhaWR1LnNlYXJjaGJveC52aXNpb24nCiAgfSwKICB3ZWliYWFwcDogewogICAgZ2V0VWxpbms6IGZ1bmN0aW9uIGdldFVsaW5rKCkgewogICAgICByZXR1cm4gJyc7CiAgICB9LAogICAgYXBwU3RvcmVVcmw6ICdodHRwczovL2FwcHMuYXBwbGUuY29tL2NuL2FwcC8lRTUlQkUlQUUlRTUlOEYlQUQvaWQxNDEwMTc4NzIwJywKICAgIHNjaGVtZTogJ2xhenliZDovL2NvbS5tZWxvbi5sYXp5bWVsb24vaG9tZScsCiAgICBwa2dOYW1lOiAnY29tLm1lbG9uLmxhenltZWxvbicKICB9LAogIHlvdWppYTogewogICAgZ2V0VWxpbms6IGZ1bmN0aW9uIGdldFVsaW5rKCkgewogICAgICByZXR1cm4gJyc7CiAgICB9LAogICAgYXBwU3RvcmVVcmw6ICdodHRwczovL2FwcHMuYXBwbGUuY29tL2NuL2FwcC9pZDE0OTAyMjcwNzcnLAogICAgc2NoZW1lOiAneW91amlhOi8vYXBwL2hvbWVwYWdlJywKICAgIHBrZ05hbWU6ICdjb20uYmFpZHUuYXV0b2NhcicKICB9LAogIGFza215YmFieTogewogICAgZ2V0VWxpbms6IGZ1bmN0aW9uIGdldFVsaW5rKCkgewogICAgICByZXR1cm4gJyc7CiAgICB9LAogICAgYXBwU3RvcmVVcmw6ICdodHRwczovL2FwcHMuYXBwbGUuY29tL2NuL2FwcC8lRTUlQUUlOUQlRTUlQUUlOUQlRTclOUYlQTUlRTklODElOTMtJUU3JUE3JTkxJUU1JUFEJUE2JUU1JUE0JTg3JUU1JUFEJTk1JUU2JTgwJTgwJUU1JUFEJTk1JUU4JTgyJUIyJUU1JTg0JUJGJUU1JThBJUE5JUU2JTg5JThCL2lkODU4NDAxOTA2JywKICAgIHNjaGVtZTogJ2Fza215YmFieTovL2NvbS5iYWlkdS5tYmFieS8nLAogICAgcGtnTmFtZTogJ2NvbS5iYWlkdS5tYmFieScKICB9LAogIHlpa2U6IHsKICAgIC8vIOS4gOWIu+ebuOWGjOS4jeaUr+aMgeWksei0peWQjui3s+i9rOmTvuaOpQogICAgZ2V0VWxpbms6IGZ1bmN0aW9uIGdldFVsaW5rKHNjaGVtZSkgewogICAgICByZXR1cm4gImh0dHBzOi8vcGhvdG8uYmFpZHUuY29tL2FwcC9zY2hlbWU/JnNjaGVtZT0iLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoc2NoZW1lKSk7CiAgICB9LAogICAgYXBwU3RvcmVVcmw6ICdodHRwczovL2FwcHMuYXBwbGUuY29tL2NuL2FwcC8lRTQlQjglODAlRTUlODglQkIlRTclOUIlQjglRTUlODYlOEMtJUU3JTk5JUJFJUU1JUJBJUE2JUU3JUJEJTkxJUU3JTlCJTk4JUU1JTg3JUJBJUU1JTkzJTgxL2lkMTQ2Nzg1MjU4NycsCiAgICBzY2hlbWU6ICd5b3VhOi8veW91YS5jb20vaG9tZScsCiAgICBwa2dOYW1lOiAnY29tLmJhaWR1LnlvdWF2aWRlbycKICB9LAogIGJhaWR1aGFueXU6IHsKICAgIGdldFVsaW5rOiBmdW5jdGlvbiBnZXRVbGluayhzY2hlbWUsIHRhcmdldCkgewogICAgICByZXR1cm4gImh0dHBzOi8vd2FrZXVwLmJhaWR1LmNvbS9iYWlkdWRpY3Qvc2NoZW1lP3NjaGVtZT0iLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoc2NoZW1lKSwgIiZ0YXJnZXQ9IikuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudCh0YXJnZXQpKTsKICAgIH0sCiAgICBhcHBTdG9yZVVybDogJ2h0dHBzOi8vYXBwcy5hcHBsZS5jb20vY24vYXBwLzEvaWQxMDY1ODI5MTc2JywKICAgIHNjaGVtZTogJ2JhaWR1ZGljdDovL2NvbS5iYWlkdS5kaWN0JywKICAgIHBrZ05hbWU6ICdjb20uYmFpZHUuZGljdCcKICB9LAogIHlvb3B1OiB7CiAgICBnZXRVbGluazogZnVuY3Rpb24gZ2V0VWxpbmsoc2NoZW1lLCB0YXJnZXQpIHsKICAgICAgcmV0dXJuICJodHRwczovL3dha2V1cC5iYWlkdS5jb20veW9vcHUvc2NoZW1lP3NjaGVtZT0iLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoc2NoZW1lKSwgIiZ0YXJnZXQ9IikuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudCh0YXJnZXQpKTsKICAgIH0sCiAgICBhcHBTdG9yZVVybDogJ2h0dHBzOi8vaXR1bmVzLmFwcGxlLmNvbS9jbi9hcHAvaWQxNTMzNjE1Nzg2P210PTgnLAogICAgc2NoZW1lOiAneW9vcHU6Ly8nLAogICAgcGtnTmFtZTogJ2NvbS5iYWlkdS55b29wdScKICB9LAogIHRvbWFzOiB7CiAgICBnZXRVbGluazogZnVuY3Rpb24gZ2V0VWxpbmsoc2NoZW1lLCB0YXJnZXQpIHsKICAgICAgcmV0dXJuICJodHRwczovL3dha2V1cC5iYWlkdS5jb20vdG9tYXMvc2NoZW1lP3NjaGVtZT0iLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoc2NoZW1lKSwgIiZ0YXJnZXQ9IikuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudCh0YXJnZXQpKTsKICAgIH0sCiAgICBhcHBTdG9yZVVybDogJ2h0dHBzOi8vYXBwcy5hcHBsZS5jb20vY24vYXBwL2lkMTU0NjE3MzAwOCcsCiAgICBzY2hlbWU6ICd0b21hczovLycsCiAgICBwa2dOYW1lOiAnY29tLmJhaWR1LnNlYXJjaGJveC50b21hcycKICB9LAogIGZvcnR1bmVjYXQ6IHsKICAgIGdldFVsaW5rOiBmdW5jdGlvbiBnZXRVbGluayhzY2hlbWUsIHRhcmdldCkgewogICAgICByZXR1cm4gImh0dHBzOi8vd2FrZXVwLmJhaWR1LmNvbS9mb3J0dW5lY2F0L3NjaGVtZT9zY2hlbWU9Ii5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHNjaGVtZSksICImdGFyZ2V0PSIpLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQodGFyZ2V0KSk7CiAgICB9LAogICAgYXBwU3RvcmVVcmw6ICdodHRwczovL2FwcHMuYXBwbGUuY29tL2NuL2FwcC9pZDE1MjM0ODc0NTInLAogICAgc2NoZW1lOiAnZm9ydHVuZWNhdDovL2ludm9rZT9wPSU3QiUyMnR5cGUlMjIlM0EwJTJDJTIyc291cmNlJTIyJTNBMSU3RCZ1YmNfZXh0PSU3QiUyMmludm9rZV9jaGFubmVsJTIyJTNBJTIyMTAyNDYzNGYlMjIlN0QnLAogICAgcGtnTmFtZTogJ2NvbS5iYWlkdS5mb3J0dW5lY2F0JwogIH0sCiAgeWlqdTogewogICAgZ2V0VWxpbms6IGZ1bmN0aW9uIGdldFVsaW5rKHNjaGVtZSwgdGFyZ2V0KSB7CiAgICAgIHJldHVybiAiaHR0cHM6Ly91bGlua212aWRlby5iYWlkdS5jb20veWlqdS9zeXN0ZW0vdWxpbms/c2NoZW1lPSIuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudChzY2hlbWUpLCAiJnRhcmdldD0iKS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHRhcmdldCkpOwogICAgfSwKICAgIGFwcFN0b3JlVXJsOiAnaHR0cHM6Ly9hcHBzLmFwcGxlLmNvbS9jbi9hcHAvaWQxNTQ4MjQ2NjczJywKICAgIHNjaGVtZTogJ2JkeWlqdTovL2hvbWUvaW5kZXgnLAogICAgcGtnTmFtZTogJ2NvbS5iYWlkdS55aWp1JwogIH0sCiAgYmRoZWFsdGhhcHA6IHsKICAgIGdldFVsaW5rOiBmdW5jdGlvbiBnZXRVbGluayhzY2hlbWUsIHRhcmdldCkgewogICAgICByZXR1cm4gImh0dHBzOi8vamlhbmthbmcuYmFpZHUuY29tL3NjaGVtZT9zY2hlbWU9Ii5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHNjaGVtZSksICImdGFyZ2V0PSIpLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQodGFyZ2V0KSk7CiAgICB9LAogICAgYXBwU3RvcmVVcmw6ICdodHRwczovL2FwcHMuYXBwbGUuY29tL2NuL2FwcC9pZDE1NTU2MTY4NTAnLAogICAgc2NoZW1lOiAnYmRoZWFsdGhhcHA6Ly9hcHAvaG9tZScsCiAgICBwa2dOYW1lOiAnY29tLmJhaWR1LmJkaGVhbHRoJwogIH0sCiAgYmR3a3N0OiB7CiAgICBnZXRVbGluazogZnVuY3Rpb24gZ2V0VWxpbmsoKSB7CiAgICAgIHJldHVybiAnJzsKICAgIH0sCiAgICBhcHBTdG9yZVVybDogJ2h0dHBzOi8vYXBwcy5hcHBsZS5jb20vY24vYXBwL2lkMTUyNzAzMDI0OCcsCiAgICBzY2hlbWU6ICdiZHdrc3Q6Ly9zdHVkZW50L29wZXJhdGlvbj90eXBlPTEzNicsCiAgICBwa2dOYW1lOiAnY29tLmJhaWR1LnN0dWRlbnQnCiAgfSwKICByYXA6IHsKICAgIGdldFVsaW5rOiBmdW5jdGlvbiBnZXRVbGluayhzY2hlbWUsIHRhcmdldCkgewogICAgICByZXR1cm4gImh0dHBzOi8vdWxpbmttdmlkZW8uYmFpZHUuY29tL3dpc2VkcmFtYS9zeXN0ZW0veWluY2l1bGluaz9zY2hlbWU9Ii5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHNjaGVtZSksICImdGFyZ2V0PSIpLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQodGFyZ2V0KSk7CiAgICB9LAogICAgYXBwU3RvcmVVcmw6ICdodHRwczovL2FwcHMuYXBwbGUuY29tL2NuL2FwcC9pZDE1Mjg0NTU2NjUnLAogICAgc2NoZW1lOiAnYmRoaXBob3A6Ly8nLAogICAgcGtnTmFtZTogJ2NvbS5iYWlkdS5yYXAnCiAgfSwKICB3ZXBvZDogewogICAgZ2V0VWxpbms6IGZ1bmN0aW9uIGdldFVsaW5rKHNjaGVtZSwgdGFyZ2V0KSB7CiAgICAgIHJldHVybiAiaHR0cHM6Ly91bGlua212aWRlby5iYWlkdS5jb20vd2lzZWRyYW1hL3N5c3RlbS93ZXBvZHVsaW5rP3NjaGVtZT0iLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoc2NoZW1lKSwgIiZ0YXJnZXQ9IikuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudCh0YXJnZXQpKTsKICAgIH0sCiAgICBhcHBTdG9yZVVybDogJ2h0dHBzOi8vYXBwcy5hcHBsZS5jb20vY24vYXBwL2lkMTU0MTgxMjQ3MycsCiAgICBzY2hlbWU6ICdiZHdlcG9kOi8vJywKICAgIHBrZ05hbWU6ICdjb20uYmFpZHUud2Vwb2QnCiAgfSwKICB5eW1vYmlsZTogewogICAgZ2V0VWxpbms6IGZ1bmN0aW9uIGdldFVsaW5rKHNjaGVtZSkgewogICAgICByZXR1cm4gImh0dHBzOi8vdWxpbmsueXkuY29tL3VybHNjaGVtZT90eXBlPXNjaGVtZSZhY3Rpb249Ii5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHNjaGVtZSksICImYXV0b2Rvd25sb2FkPTEiKTsKICAgIH0sCiAgICBhcHBTdG9yZVVybDogJ2h0dHBzOi8vYXBwcy5hcHBsZS5jb20vYXBwL2lkNDI3OTQxMDE3JywKICAgIHNjaGVtZTogJ3l5bW9iaWxlOi8vJywKICAgIHBrZ05hbWU6ICdjb20uZHVvd2FuLm1vYmlsZScKICB9LAogIGJhaWR1Ym94c2VuaW9yOiB7CiAgICBnZXRVbGluazogZnVuY3Rpb24gZ2V0VWxpbmsoc2NoZW1lLCB0YXJnZXQpIHsKICAgICAgcmV0dXJuICJodHRwczovL3dha2V1cC5iYWlkdS5jb20vYmFpZHVib3hzZW5pb3Ivc2NoZW1lP3NjaGVtZT0iLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoc2NoZW1lKSwgIiZ0YXJnZXQ9IikuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudCh0YXJnZXQpKTsKICAgIH0sCiAgICBhcHBTdG9yZVVybDogJ2h0dHBzOi8vYXBwcy5hcHBsZS5jb20vY24vYXBwL2lkMTU4MTc5NjY2MicsCiAgICBzY2hlbWU6ICdiYWlkdWJveHNlbmlvcjovL3YxMS9hcHBUYWIvc2VsZWN0P2l0ZW09aG9tZSZ1cGdyYWRlPTAnLAogICAgcGtnTmFtZTogJ2NvbS5iYWlkdS5zZWFyY2hib3guc2VuaW9yJwogIH0sCiAga25ld3M6IHsKICAgIGdldFVsaW5rOiBmdW5jdGlvbiBnZXRVbGluaygpIHsKICAgICAgcmV0dXJuICcnOwogICAgfSwKICAgIGFwcFN0b3JlVXJsOiAnJywKICAgIHNjaGVtZTogJ2tuZXdzOi8vdjExL2FwcFRhYi9zZWxlY3Q/aXRlbT1ob21lJnVwZ3JhZGU9MCcsCiAgICBwa2dOYW1lOiAnY29tLm1pdWkua25ld3MnCiAgfQp9OwovKioKICogQGZpbGUgZGVlcGxpbmsgbWFwCiAqIEBhdXRob3IgemhhbmdzaXl1YW4oemhhbmdzaXl1YW5AYmFpZHUuY29tKQogKi8KLy8g5omL55m+CgpleHBvcnRzLmFwcENvbmZpZ01hcCA9IGFwcENvbmZpZ01hcDsKdmFyIGJveERlZXBsaW5rQ29uZmlnID0gewogIGdldFNjaGVtZTogZnVuY3Rpb24gZ2V0U2NoZW1lKGFwcFVybCwgY2FsbGJhY2spIHsKICAgIHJldHVybiAnYmFpZHVib3hhcHA6Ly92Ny92ZW5kb3IvYWQvZGVlcGxpbms/JyArICIiLmNvbmNhdCgoMCwgX2VvcFV0aWxzLnRvUXVlcnlTdHJpbmcpKCgwLCBfZW9wVXRpbHMuc3RyaW5naWZ5UXVlcnkpKHsKICAgICAgcGFyYW1zOiB7CiAgICAgICAgYXBwVXJsOiBhcHBVcmwKICAgICAgfQogICAgfSkpKSArICImY2FsbGJhY2s9Ii5jb25jYXQoKDAsIF9lb3BVdGlscy50b0dsb2JhbEZ1bmMpKGNhbGxiYWNrKSk7CiAgfSwKICBzdWNjZXNzQ29kZTogMAp9OyAvLyDnmb7luqbnnIvnnIsKCnZhciBiYWlkdWJveHZpc2lvbiA9IHsKICBnZXRTY2hlbWU6IGZ1bmN0aW9uIGdldFNjaGVtZShhcHBVcmwsIGNhbGxiYWNrKSB7CiAgICByZXR1cm4gJ2JhaWR1Ym94dmlzaW9uOi8vdjcvdmVuZG9yL2FkL2RlZXBsaW5rPycgKyAiIi5jb25jYXQoKDAsIF9lb3BVdGlscy50b1F1ZXJ5U3RyaW5nKSgoMCwgX2VvcFV0aWxzLnN0cmluZ2lmeVF1ZXJ5KSh7CiAgICAgIHBhcmFtczogewogICAgICAgIGFwcFVybDogYXBwVXJsCiAgICAgIH0KICAgIH0pKSkgKyAiJmNhbGxiYWNrPSIuY29uY2F0KCgwLCBfZW9wVXRpbHMudG9HbG9iYWxGdW5jKShjYWxsYmFjaykpOwogIH0sCiAgc3VjY2Vzc0NvZGU6IDAKfTsgLy8g5YWo5rCRCgp2YXIgYmRtaW5pdmlkZW8gPSB7CiAgZ2V0U2NoZW1lOiBmdW5jdGlvbiBnZXRTY2hlbWUoYXBwVXJsLCBjYWxsYmFjaykgewogICAgcmV0dXJuICdiZG1pbml2aWRlbzovL2dyb3d0aC9sYXVuY2gzcmRBcHA/JyArICgwLCBfZW9wVXRpbHMudG9RdWVyeVN0cmluZykoKDAsIF9lb3BVdGlscy5zdHJpbmdpZnlRdWVyeSkoewogICAgICBjYWxsYmFjazogY2FsbGJhY2ssCiAgICAgIHBhcmFtczogewogICAgICAgIHNjaGVtZTogYXBwVXJsCiAgICAgIH0KICAgIH0sIHRydWUpKTsKICB9LAogIHN1Y2Nlc3NDb2RlOiAwCn07CnZhciBkZWVwbGlua0NvbmZpZ01hcCA9IHsKICBiYWlkdWJveGFwcDogYm94RGVlcGxpbmtDb25maWcsCiAgYmFpZHVib3hsaXRlOiBib3hEZWVwbGlua0NvbmZpZywKICB0b21hczogYm94RGVlcGxpbmtDb25maWcsCiAgYmFpZHVib3h2aXNpb246IGJhaWR1Ym94dmlzaW9uLAogIC8vIOWlveeci+eahOerr+iDveWKm2xhdW5jaDNyZEFwcOaciemXrumimO+8jOiwg+i1t+Wksei0peS5n+S8mui/lOWbnuaIkOWKn+eahOS/oeaBrwogIC8vIOaaguaXtuaQgee9ruS4jeWkhOeQhgogIGJkbWluaXZpZGVvOiBiZG1pbml2aWRlbwp9OyAvLyDnsbvlnovkv53miqQKLy8gQnJvd3NlciA9PiBEZWVwbGlua0FwcAoKZnVuY3Rpb24gaXNEZWVwbGlua0FwcChicm93c2VyKSB7CiAgcmV0dXJuIE9iamVjdC5rZXlzKGRlZXBsaW5rQ29uZmlnTWFwKS5pbmNsdWRlcyhicm93c2VyKTsKfQovKioKICogQGZpbGUg6LCD6LW35bqU55So5a6dCiAqIEBhdXRob3Igemh1emhpYm8oemh1emhpYm9AYmFpZHUuY29tKQogKiBAYXV0aG9yIHpzeQogKi8KCi8qKgogKiDosIPotbflupTnlKjlrp0KICovCgoKZnVuY3Rpb24gb3BlbllZQihvcHRpb25zKSB7CiAgdmFyIFlZQlVybCA9ICJodHRwOi8vYS5hcHAucXEuY29tL28vc2ltcGxlLmpzcD9wa2duYW1lPSIuY29uY2F0KG9wdGlvbnMucGtnTmFtZSk7CiAgc2VuZEg1RXJyTG9nKG9wdGlvbnMsIFN0YXR1cy5ZWUJfU1VDQ0VTUyk7CiAgbG9jYXRpb24uaHJlZiA9ICIiLmNvbmNhdChZWUJVcmwsICImYW5kcm9pZF9zY2hlbWE9IikuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudChvcHRpb25zLnNjaGVtZSkpOwogIHJldHVybiBTdGF0dXMuWVlCX1NVQ0NFU1M7Cn0KLyoqCiAqIEBmaWxlIOS4jeWwneivleiwg+i1t+eahOinhOWImemFjee9rgogKiBAYXV0aG9yIHpoYW5nc2l5dWFuKHpoYW5nc2l5dWFuQGJhaWR1LmNvbSkKICovCi8vIOi/memHjOeahOWMuemFjeinhOWImeS4gOWumuimgeS7juWktOWIsOWwvgovLyDlrZjlnKjkvJjlhYjnuqfnmoQKLy8gW2Jyb3dzZXIsIGFwcE5hbWUsIG9zXQovLyDku47lvZPliY1icm93c2Vy6LCD6LW36Iez55uu5qCHYXBwTmFtZe+8jOS4jeWwneivleiwg+i1t++8jOebtOaOpei1sOWksei0pei3r+W+hAoKCnZhciBub3RUcnlKdW1wUnVsZXMgPSBbWyd4aWFvbWknLCAnYmFpZHVib3hhcHAnLCAnYW5kcm9pZCddLCBbJ3VjJywgJ2JhaWR1Ym94YXBwJywgJ2FuZHJvaWQnXSwgWydvcHBvJywgJ2JhaWR1Ym94YXBwJywgJ2FuZHJvaWQnXSwgWyd2aXZvJywgJ2JhaWR1Ym94YXBwJywgJ2FuZHJvaWQnXSwgWyd3ZWNoYXQnLCAnYmFpZHVib3hhcHAnLCAnYW5kcm9pZCddXTsKLyoqCiAqIEBmaWxlIOajgOafpeaYr+WQpuWkhOS6jum7keWQjeWNlea1j+iniOWZqOS4rQogKiBAYXV0aG9yIHpodXpoaWJvIDx6aHV6aGlib0BiYWlkdS5jb20+CiAqLwoKLyoqCiAqIOajgOafpeaYr+WQpuWkhOS6jum7keWQjeWNlea1j+iniOWZqOS4rQogKi8KCmZ1bmN0aW9uIGNoZWNrTm90VHJ5SnVtcChicm93c2VyLCBhcHBOYW1lLCBvcykgewogIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobm90VHJ5SnVtcFJ1bGVzKSwKICAgICAgX3N0ZXAzOwoKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgdmFyIF9zdGVwMyR2YWx1ZSA9ICgwLCBfc2xpY2VkVG9BcnJheTIuZGVmYXVsdCkoX3N0ZXAzLnZhbHVlLCAzKSwKICAgICAgICAgIGJyb3dzZXJSdWxlID0gX3N0ZXAzJHZhbHVlWzBdLAogICAgICAgICAgYXBwTmFtZVJ1bGUgPSBfc3RlcDMkdmFsdWVbMV0sCiAgICAgICAgICBvc1J1bGUgPSBfc3RlcDMkdmFsdWVbMl07CgogICAgICBpZiAoKGJyb3dzZXJSdWxlID09PSAnKicgfHwgYnJvd3NlclJ1bGUgPT09IGJyb3dzZXIpICYmIChhcHBOYW1lUnVsZSA9PT0gJyonIHx8IGFwcE5hbWVSdWxlID09PSBhcHBOYW1lKSAmJiAob3NSdWxlID09PSAnKicgfHwgb3NSdWxlID09PSBvcykpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yMy5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvcjMuZigpOwogIH0KCiAgcmV0dXJuIGZhbHNlOwp9Ci8qKgogKiBAZmlsZSBuYSBkZWVwbGlua+iDveWKmwogKiBAYXV0aG9yIHpoYW5nc2l5dWFuKHpoYW5nc2l5dWFuQGJhaWR1LmNvbSkKICovCgoKZnVuY3Rpb24gbmFEZWVwbGluayhfeDcsIF94OCkgewogIHJldHVybiBfbmFEZWVwbGluay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9Ci8qKgogKiBAZmlsZSDliarotLTmnb/mk43kvZwKICogQGF1dGhvciB6aHV6aGlibyA8emh1emhpYm9AYmFpZHUuY29tPgogKiBAYXV0aG9yIHpzeQogKi8KCi8qKgogKiDln7rkuo4gY2xpcGJvYXJkLmpzIOeahOm7mOiupOWkjeWItuWJqui0tOadv+aWueazlQogKgogKi8KCgpmdW5jdGlvbiBfbmFEZWVwbGluaygpIHsKICBfbmFEZWVwbGluayA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNShvcHRpb25zLCBicm93c2VyKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICB2YXIgX2RlZXBsaW5rQ29uZmlnTWFwJGJyID0gZGVlcGxpbmtDb25maWdNYXBbYnJvd3Nlcl0sCiAgICAgICAgICAgICAgICAgIGdldFNjaGVtZSA9IF9kZWVwbGlua0NvbmZpZ01hcCRici5nZXRTY2hlbWUsCiAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NDb2RlID0gX2RlZXBsaW5rQ29uZmlnTWFwJGJyLnN1Y2Nlc3NDb2RlOyAvLyDlm57osIPmmK/lsI/nqIvluo/op6blj5HnmoTvvIznsbvlnovlvojpmr7mkJ7llYoKCiAgICAgICAgICAgICAgZnVuY3Rpb24gY2FsbGJhY2socmVzdWx0KSB7CiAgICAgICAgICAgICAgICB2YXIgcmVzID0gSlNPTi5wYXJzZShyZXN1bHQpOwoKICAgICAgICAgICAgICAgIGlmICgrcmVzLnN0YXR1cyA9PT0gc3VjY2Vzc0NvZGUpIHsKICAgICAgICAgICAgICAgICAgc2VuZEg1RXJyTG9nKG9wdGlvbnMsIFN0YXR1cy5JTlZPS0VfU1VDQ0VTUyk7CiAgICAgICAgICAgICAgICAgIHJlc29sdmUoU3RhdHVzLklOVk9LRV9TVUNDRVNTKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHJlc29sdmUoaGFuZGxlSW52b2tlRmFpbGVkKG9wdGlvbnMsIEludm9rZVR5cGUuREVFUExJTkspKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGludm9rZUFjdGlvbihnZXRTY2hlbWUob3B0aW9ucy5zY2hlbWUsIGNhbGxiYWNrKSwgb3B0aW9ucy5hcHBOYW1lKTsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTUpOwogIH0pKTsKICByZXR1cm4gX25hRGVlcGxpbmsuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gY29weVRleHQodG9rZW4pIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgbmV3IF9jbGlwYm9hcmRBY3Rpb24uZGVmYXVsdCh7CiAgICAgIGFjdGlvbjogJ2NvcHknLAogICAgICB0ZXh0OiB0b2tlbiwKICAgICAgY29udGFpbmVyOiBkb2N1bWVudC5ib2R5LAogICAgICBlbWl0dGVyOiB7CiAgICAgICAgZW1pdDogZnVuY3Rpb24gZW1pdCh0eXBlKSB7CiAgICAgICAgICBpZiAodHlwZSA9PT0gJ3N1Y2Nlc3MnKSB7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSk7Cn0KLyoqCiAqIEBmaWxlIE5B6IO95YqbICDlhpnliarotLTmnb8KICogQGF1dGhvciB6aGFuZ3NpeXVhbih6aGFuZ3NpeXVhbkBiYWlkdS5jb20pCiAqLwoKCnZhciBuYUNvcHkgPSBmdW5jdGlvbiBuYUNvcHkodGV4dCkgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICB3aW5kb3cuX25hQ29weUNiXyA9IGZ1bmN0aW9uIChyZXMpIHsKICAgICAgLy8g6LCD6LW35oiQ5YqfCiAgICAgIGlmIChyZXMgJiYgTnVtYmVyKEpTT04ucGFyc2UocmVzKS5zdGF0dXMpID09PSAwKSB7CiAgICAgICAgcmVzb2x2ZSgnbmFDb3B5RG9uZScpOwogICAgICB9IGVsc2UgewogICAgICAgIHJlamVjdChyZXMpOwogICAgICB9CiAgICB9OwoKICAgIHZhciBwYXJhbXMgPSBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoewogICAgICBkYXRhOiB0ZXh0CiAgICB9KSk7CiAgICBpbnZva2VBY3Rpb24oImJhaWR1Ym94YXBwOi8vdjE5L3V0aWxzL3NldENsaXBib2FyZERhdGE/cGFyYW1zPSIuY29uY2F0KHBhcmFtcywgIiZjYWxsYmFjaz1fbmFDb3B5Q2JfIiksICdiYWlkdWJveGFwcCcpOwogIH0pOwp9OwovKioKICoKICog5YWc5bqVUHJvbWlzZS5yYWNlICBIT0MKICoKICovCgoKZnVuY3Rpb24gcmFjZVRpbWUoX3g5LCBfeDEwKSB7CiAgcmV0dXJuIF9yYWNlVGltZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9IC8vICDljIXoo4XkuIDkuIvotoXml7bosIPnlKgKLy8g5L2/55So6L+Z5Liq5pa55rOV5pu05a6J5YWoCi8vIOS4jeS8mmhhbmfkvY8KCgpmdW5jdGlvbiBfcmFjZVRpbWUoKSB7CiAgX3JhY2VUaW1lID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KSggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KHRpbWUsIGZ1bmMpIHsKICAgIHZhciBfbGVuLAogICAgICAgIGFyZ3MsCiAgICAgICAgX2tleSwKICAgICAgICBfYXJnczYgPSBhcmd1bWVudHM7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgZm9yIChfbGVuID0gX2FyZ3M2Lmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuID4gMiA/IF9sZW4gLSAyIDogMCksIF9rZXkgPSAyOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgICAgICAgYXJnc1tfa2V5IC0gMl0gPSBfYXJnczZbX2tleV07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJhY2UoW2Z1bmMuYXBwbHkodm9pZCAwLCBhcmdzKSwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgIC8vIOi2heaXtiAg6LCD55So5aSx6LSlCiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KCJcdThDMDNcdTc1MjhcdThEODVcdTY1RjZcdUZGMDE6ICIuY29uY2F0KGZ1bmMubmFtZSkpOwogICAgICAgICAgICAgIH0sIHRpbWUpOwogICAgICAgICAgICB9KV0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU2KTsKICB9KSk7CiAgcmV0dXJuIF9yYWNlVGltZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9Cgp2YXIgaW52b2tlTmFDb3B5ID0gZnVuY3Rpb24gaW52b2tlTmFDb3B5KHRleHQpIHsKICByZXR1cm4gcmFjZVRpbWUoNTAwLCBuYUNvcHksIHRleHQpOwp9OwoKZnVuY3Rpb24gZXhlY0NvcHkoX3gxMSkgewogIHJldHVybiBfZXhlY0NvcHkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQovKioKICogQGZpbGUgZXhlY0ludm9rZSBpbmRleAogKiBAYXV0aG9yIHpodXpoaWJvKHpodXpoaWJvQGJhaWR1LmNvbSkKICovCgoKZnVuY3Rpb24gX2V4ZWNDb3B5KCkgewogIF9leGVjQ29weSA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNyhvcHRpb25zKSB7CiAgICB2YXIgbmFDb3B5UmVzOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ3LnByZXYgPSAwOwogICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBjb3B5VGV4dChvcHRpb25zLnRva2VuKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjI7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgX2NvbnRleHQ3LnByZXYgPSA1OwogICAgICAgICAgICBfY29udGV4dDcudDAgPSBfY29udGV4dDdbImNhdGNoIl0oMCk7CiAgICAgICAgICAgIC8vIOaJi+eZvuerr+WGhSAg5Y+v5Lul6K+V6K+VICDnq6/og73lipvlhpnliarotLTmnb8KICAgICAgICAgICAgbmFDb3B5UmVzID0gZmFsc2U7CgogICAgICAgICAgICBpZiAoIShvcHRpb25zLmJyb3dzZXIgPT09ICdiYWlkdWJveGFwcCcpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQ3LnByZXYgPSA5OwogICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDEyOwogICAgICAgICAgICByZXR1cm4gaW52b2tlTmFDb3B5KG9wdGlvbnMudG9rZW4pOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIG5hQ29weVJlcyA9IHRydWU7CiAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTg7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIF9jb250ZXh0Ny5wcmV2ID0gMTU7CiAgICAgICAgICAgIF9jb250ZXh0Ny50MSA9IF9jb250ZXh0N1siY2F0Y2giXSg5KTsKICAgICAgICAgICAgLy8gdG9kbyAg6ICD6JmR5LiK5oql5ZCX77yfCiAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0Ny50MSk7CgogICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgaWYgKG5hQ29weVJlcykgewogICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNlbmRINUVyckxvZyhvcHRpb25zLCBTdGF0dXMuQ09QWV9GQUlMRUQpOyAvLyDmiZPlvIDov5nkuKrpgInpobnnmoTvvIznm7TmjqXkuK3mlq3osIPotbfmtYHnqIvvvIzov5Tlm57plJnor68KCiAgICAgICAgICAgIGlmICghb3B0aW9ucy5jaGVja1Rva2VuQ29waWVkKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KFN0YXR1cy5DT1BZX0ZBSUxFRCkpOwoKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU3LCBudWxsLCBbWzAsIDVdLCBbOSwgMTVdXSk7CiAgfSkpOwogIHJldHVybiBfZXhlY0NvcHkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gZXhlY0ludm9rZShfeDEyKSB7CiAgcmV0dXJuIF9leGVjSW52b2tlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KLyoqCiAqIEBmaWxlIGludm9rZQogKiBAYXV0aG9yIHpoYW5nc2l5dWFuKHpoYW5nc2l5dWFuQGJhaWR1LmNvbSkKICovCgoKZnVuY3Rpb24gX2V4ZWNJbnZva2UoKSB7CiAgX2V4ZWNJbnZva2UgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgob3B0aW9ucykgewogICAgdmFyIGJyb3dzZXIsIGFwcE5hbWUsIG9zOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgLy8g5byA5aeLIOWwneivleiwg+i1t++8geaJk+eCue+8gQogICAgICAgICAgICAvLyDlpI3liLblj6Pku6Tlj6/og73lpLHotKXvvIzkuZ/opoHnrpfliLDlsJ3or5XosIPotbfnmoTnu5PmnpzkuK0KICAgICAgICAgICAgLy8g5omA5Lul6L+Z6YeM6KaB5o+Q5Yiw5pyA5YmNCiAgICAgICAgICAgIHNlbmRINUVyckxvZyhvcHRpb25zLCBTdGF0dXMuVFJZX0pVTVApOyAvLyDlpITnkIblj6Pku6QKCiAgICAgICAgICAgIGlmICghb3B0aW9ucy50b2tlbikgewogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gZXhlY0NvcHkob3B0aW9ucyk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBicm93c2VyID0gb3B0aW9ucy5icm93c2VyLCBhcHBOYW1lID0gb3B0aW9ucy5hcHBOYW1lLCBvcyA9IG9wdGlvbnMub3M7IC8vIOWuieWNk+WSjGlvc+aJjeacieiwg+i1t+eahOaEj+S5iQogICAgICAgICAgICAvLyDlhbbku5bns7vnu5/nm7TmjqXmiqXplJnlsLHooYzkuoYKCiAgICAgICAgICAgIGlmICghKElTX0lPUyB8fCBJU19BTkRST0lEKSkgewogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghKElTX0FORFJPSUQgJiYgb3B0aW9ucy50b1lZQiAmJiBicm93c2VyID09PSAnd2VjaGF0JykpIHsKICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDEwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgb3BlbllZQihvcHRpb25zKSk7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgaWYgKCEob3B0aW9ucy51c2VEZWVwbGluayAmJiAvYmFpZHVcLmNvbS9pLnRlc3QobG9jYXRpb24uaHJlZikgJiYgaXNEZWVwbGlua0FwcChicm93c2VyKSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDE0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgbmFEZWVwbGluayhvcHRpb25zLCBicm93c2VyKSk7CgogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgaWYgKCEob3B0aW9ucy51c2VOb3RUcnlMaXN0ICYmIGNoZWNrTm90VHJ5SnVtcChicm93c2VyLCBhcHBOYW1lLCBvcykpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIGhhbmRsZUludm9rZUZhaWxlZChvcHRpb25zLCBJbnZva2VUeXBlLk5PVF9UUlkpKTsKCiAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICBpZiAoIShvcHRpb25zLnVsaW5rICYmIG1hdGNoZWRVbGluayhicm93c2VyLCBhcHBOYW1lKSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDIwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgaW52b2tlV2l0aFR5cGUob3B0aW9ucywgSW52b2tlVHlwZS5VTElOSykpOwoKICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCBpbnZva2VXaXRoVHlwZShvcHRpb25zLCBJbnZva2VUeXBlLlNDSEVNRSkpOwoKICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChTdGF0dXMuTk9UX1NVUFBPUlRfU1lTVEVNKSk7CgogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTgpOwogIH0pKTsKICByZXR1cm4gX2V4ZWNJbnZva2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gaW52b2tlQXBwKF94MTMpIHsKICByZXR1cm4gX2ludm9rZUFwcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfaW52b2tlQXBwKCkgewogIF9pbnZva2VBcHAgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoX3JlZjMpIHsKICAgIHZhciBhcHBOYW1lLCBfcmVmMyR0b2tlbiwgdG9rZW4sIF9yZWYzJHNjaGVtZSwgc2NoZW1lLCBfcmVmMyR0b1N0b3JlLCB0b1N0b3JlLCBfcmVmMyR0b1lZQiwgdG9ZWUIsIHVsaW5rLCBfcmVmMyR0aW1lb3V0LCB0aW1lb3V0LCBfcmVmMyR1c2VEZWVwbGluaywgdXNlRGVlcGxpbmssIF9yZWYzJGFwa1VybCwgYXBrVXJsLCBfcmVmMyRmYWlsZWRVcmwsIGZhaWxlZFVybCwgX3JlZjMkdXNlTm90VHJ5TGlzdCwgdXNlTm90VHJ5TGlzdCwgX3JlZjMkY2hlY2tUb2tlbkNvcGllLCBjaGVja1Rva2VuQ29waWVkLCBfcmVmMyRpb3NTdG9yZVVybCwgaW9zU3RvcmVVcmwsIF9yZWYzJHN0YXRSYXRpbywgc3RhdFJhdGlvLCBfYXBwQ29uZmlnTWFwJGFwcE5hbWUsIGFwcFN0b3JlVXJsLCBwa2dOYW1lLCBkZWZhdWx0U2NoZW1lLCBnZXRVbGluaywgZmluYWxTY2hlbWUsIGZpbmFsQXBwU3RvcmVVcmwsIGZpbmFsVWxpbmssIGlzSGl0U3RhdDsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBhcHBOYW1lID0gX3JlZjMuYXBwTmFtZSwgX3JlZjMkdG9rZW4gPSBfcmVmMy50b2tlbiwgdG9rZW4gPSBfcmVmMyR0b2tlbiA9PT0gdm9pZCAwID8gJycgOiBfcmVmMyR0b2tlbiwgX3JlZjMkc2NoZW1lID0gX3JlZjMuc2NoZW1lLCBzY2hlbWUgPSBfcmVmMyRzY2hlbWUgPT09IHZvaWQgMCA/ICcnIDogX3JlZjMkc2NoZW1lLCBfcmVmMyR0b1N0b3JlID0gX3JlZjMudG9TdG9yZSwgdG9TdG9yZSA9IF9yZWYzJHRvU3RvcmUgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVmMyR0b1N0b3JlLCBfcmVmMyR0b1lZQiA9IF9yZWYzLnRvWVlCLCB0b1lZQiA9IF9yZWYzJHRvWVlCID09PSB2b2lkIDAgPyB0cnVlIDogX3JlZjMkdG9ZWUIsIHVsaW5rID0gX3JlZjMudWxpbmssIF9yZWYzJHRpbWVvdXQgPSBfcmVmMy50aW1lb3V0LCB0aW1lb3V0ID0gX3JlZjMkdGltZW91dCA9PT0gdm9pZCAwID8gMjUwMCA6IF9yZWYzJHRpbWVvdXQsIF9yZWYzJHVzZURlZXBsaW5rID0gX3JlZjMudXNlRGVlcGxpbmssIHVzZURlZXBsaW5rID0gX3JlZjMkdXNlRGVlcGxpbmsgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjMkdXNlRGVlcGxpbmssIF9yZWYzJGFwa1VybCA9IF9yZWYzLmFwa1VybCwgYXBrVXJsID0gX3JlZjMkYXBrVXJsID09PSB2b2lkIDAgPyAnJyA6IF9yZWYzJGFwa1VybCwgX3JlZjMkZmFpbGVkVXJsID0gX3JlZjMuZmFpbGVkVXJsLCBmYWlsZWRVcmwgPSBfcmVmMyRmYWlsZWRVcmwgPT09IHZvaWQgMCA/ICcnIDogX3JlZjMkZmFpbGVkVXJsLCBfcmVmMyR1c2VOb3RUcnlMaXN0ID0gX3JlZjMudXNlTm90VHJ5TGlzdCwgdXNlTm90VHJ5TGlzdCA9IF9yZWYzJHVzZU5vdFRyeUxpc3QgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVmMyR1c2VOb3RUcnlMaXN0LCBfcmVmMyRjaGVja1Rva2VuQ29waWUgPSBfcmVmMy5jaGVja1Rva2VuQ29waWVkLCBjaGVja1Rva2VuQ29waWVkID0gX3JlZjMkY2hlY2tUb2tlbkNvcGllID09PSB2b2lkIDAgPyB0cnVlIDogX3JlZjMkY2hlY2tUb2tlbkNvcGllLCBfcmVmMyRpb3NTdG9yZVVybCA9IF9yZWYzLmlvc1N0b3JlVXJsLCBpb3NTdG9yZVVybCA9IF9yZWYzJGlvc1N0b3JlVXJsID09PSB2b2lkIDAgPyAnJyA6IF9yZWYzJGlvc1N0b3JlVXJsLCBfcmVmMyRzdGF0UmF0aW8gPSBfcmVmMy5zdGF0UmF0aW8sIHN0YXRSYXRpbyA9IF9yZWYzJHN0YXRSYXRpbyA9PT0gdm9pZCAwID8gMTAgOiBfcmVmMyRzdGF0UmF0aW87CgogICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoYXBwQ29uZmlnTWFwKS5pbmNsdWRlcyhhcHBOYW1lKSkgewogICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KFN0YXR1cy5BUFBOQU1FX05PVF9TVVBQT1JUKSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAvLyDlpITnkIbkuIvlj4LmlbAKICAgICAgICAgICAgX2FwcENvbmZpZ01hcCRhcHBOYW1lID0gYXBwQ29uZmlnTWFwW2FwcE5hbWVdLCBhcHBTdG9yZVVybCA9IF9hcHBDb25maWdNYXAkYXBwTmFtZS5hcHBTdG9yZVVybCwgcGtnTmFtZSA9IF9hcHBDb25maWdNYXAkYXBwTmFtZS5wa2dOYW1lLCBkZWZhdWx0U2NoZW1lID0gX2FwcENvbmZpZ01hcCRhcHBOYW1lLnNjaGVtZSwgZ2V0VWxpbmsgPSBfYXBwQ29uZmlnTWFwJGFwcE5hbWUuZ2V0VWxpbms7CiAgICAgICAgICAgIGZpbmFsU2NoZW1lID0gc2NoZW1lIHx8IGRlZmF1bHRTY2hlbWU7CiAgICAgICAgICAgIGZpbmFsQXBwU3RvcmVVcmwgPSBpb3NTdG9yZVVybCB8fCBhcHBTdG9yZVVybDsKICAgICAgICAgICAgZmluYWxVbGluayA9IHVsaW5rICE9PSBudWxsICYmIHVsaW5rICE9PSB2b2lkIDAgPyB1bGluayA6IGdldFVsaW5rKGZpbmFsU2NoZW1lLCB0b1N0b3JlID8gZmluYWxBcHBTdG9yZVVybCA6IGZhaWxlZFVybCk7CiAgICAgICAgICAgIGlzSGl0U3RhdCA9IGlzSGl0KHN0YXRSYXRpbyk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCBleGVjSW52b2tlKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZ2V0SG9zdEluZm8oKSksIHt9LCB7CiAgICAgICAgICAgICAgaXNIaXRTdGF0OiBpc0hpdFN0YXQsCiAgICAgICAgICAgICAgYXBwTmFtZTogYXBwTmFtZSwKICAgICAgICAgICAgICB0b2tlbjogdG9rZW4sCiAgICAgICAgICAgICAgYXBrVXJsOiBhcGtVcmwsCiAgICAgICAgICAgICAgZmFpbGVkVXJsOiBmYWlsZWRVcmwsCiAgICAgICAgICAgICAgcGtnTmFtZTogcGtnTmFtZSwKICAgICAgICAgICAgICBzY2hlbWU6IGZpbmFsU2NoZW1lLAogICAgICAgICAgICAgIGlvc1N0b3JlVXJsOiBmaW5hbEFwcFN0b3JlVXJsLAogICAgICAgICAgICAgIHRvU3RvcmU6IHRvU3RvcmUsCiAgICAgICAgICAgICAgdG9ZWUI6IHRvWVlCLAogICAgICAgICAgICAgIHRpbWVvdXQ6IHRpbWVvdXQsCiAgICAgICAgICAgICAgdXNlRGVlcGxpbms6IHVzZURlZXBsaW5rLAogICAgICAgICAgICAgIHVsaW5rOiBmaW5hbFVsaW5rLAogICAgICAgICAgICAgIHVzZU5vdFRyeUxpc3Q6IHVzZU5vdFRyeUxpc3QsCiAgICAgICAgICAgICAgY2hlY2tUb2tlbkNvcGllZDogY2hlY2tUb2tlbkNvcGllZCwKICAgICAgICAgICAgICBzdGF0UmF0aW86IHN0YXRSYXRpbwogICAgICAgICAgICB9KSkpOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTkpOwogIH0pKTsKICByZXR1cm4gX2ludm9rZUFwcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBpbnZva2VUcEFwcChfeDE0KSB7CiAgcmV0dXJuIF9pbnZva2VUcEFwcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9Ci8qKgogKiBAZmlsZSBpbmRleAogKiBAYXV0aG9yIHpoYW5nc2l5dWFuKHpoYW5nc2l5dWFuQGJhaWR1LmNvbSkKICovCi8vIOWFqOWxgOeJiOacrOWPt++8jOehruiupOe6v+S4iueJiOacrAoKCmZ1bmN0aW9uIF9pbnZva2VUcEFwcCgpIHsKICBfaW52b2tlVHBBcHAgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKF9yZWY0KSB7CiAgICB2YXIgX3JlZjQkdG9rZW4sIHRva2VuLCBzY2hlbWUsIF9yZWY0JHRvU3RvcmUsIHRvU3RvcmUsIF9yZWY0JHRvWVlCLCB0b1lZQiwgX3JlZjQkdWxpbmssIHVsaW5rLCBfcmVmNCR0aW1lb3V0LCB0aW1lb3V0LCBfcmVmNCRhcGtVcmwsIGFwa1VybCwgX3JlZjQkZmFpbGVkVXJsLCBmYWlsZWRVcmwsIF9yZWY0JGNoZWNrVG9rZW5Db3BpZSwgY2hlY2tUb2tlbkNvcGllZCwgX3JlZjQkaW9zU3RvcmVVcmwsIGlvc1N0b3JlVXJsLCBwa2dOYW1lLCBzdGF0UmF0aW8sIGlzSGl0U3RhdDsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX3JlZjQkdG9rZW4gPSBfcmVmNC50b2tlbiwgdG9rZW4gPSBfcmVmNCR0b2tlbiA9PT0gdm9pZCAwID8gJycgOiBfcmVmNCR0b2tlbiwgc2NoZW1lID0gX3JlZjQuc2NoZW1lLCBfcmVmNCR0b1N0b3JlID0gX3JlZjQudG9TdG9yZSwgdG9TdG9yZSA9IF9yZWY0JHRvU3RvcmUgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjQkdG9TdG9yZSwgX3JlZjQkdG9ZWUIgPSBfcmVmNC50b1lZQiwgdG9ZWUIgPSBfcmVmNCR0b1lZQiA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmNCR0b1lZQiwgX3JlZjQkdWxpbmsgPSBfcmVmNC51bGluaywgdWxpbmsgPSBfcmVmNCR1bGluayA9PT0gdm9pZCAwID8gJycgOiBfcmVmNCR1bGluaywgX3JlZjQkdGltZW91dCA9IF9yZWY0LnRpbWVvdXQsIHRpbWVvdXQgPSBfcmVmNCR0aW1lb3V0ID09PSB2b2lkIDAgPyAyNTAwIDogX3JlZjQkdGltZW91dCwgX3JlZjQkYXBrVXJsID0gX3JlZjQuYXBrVXJsLCBhcGtVcmwgPSBfcmVmNCRhcGtVcmwgPT09IHZvaWQgMCA/ICcnIDogX3JlZjQkYXBrVXJsLCBfcmVmNCRmYWlsZWRVcmwgPSBfcmVmNC5mYWlsZWRVcmwsIGZhaWxlZFVybCA9IF9yZWY0JGZhaWxlZFVybCA9PT0gdm9pZCAwID8gJycgOiBfcmVmNCRmYWlsZWRVcmwsIF9yZWY0JGNoZWNrVG9rZW5Db3BpZSA9IF9yZWY0LmNoZWNrVG9rZW5Db3BpZWQsIGNoZWNrVG9rZW5Db3BpZWQgPSBfcmVmNCRjaGVja1Rva2VuQ29waWUgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVmNCRjaGVja1Rva2VuQ29waWUsIF9yZWY0JGlvc1N0b3JlVXJsID0gX3JlZjQuaW9zU3RvcmVVcmwsIGlvc1N0b3JlVXJsID0gX3JlZjQkaW9zU3RvcmVVcmwgPT09IHZvaWQgMCA/ICcnIDogX3JlZjQkaW9zU3RvcmVVcmwsIHBrZ05hbWUgPSBfcmVmNC5wa2dOYW1lOwoKICAgICAgICAgICAgaWYgKCEoIXNjaGVtZSB8fCAodG9TdG9yZSB8fCB0b1lZQikgJiYgIXBrZ05hbWUpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc29sZS5lcnJvcignaW52b2tlVHBBcHDlj4LmlbDplJnor6/vvIzor7fmo4Dmn6XvvIEnKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChTdGF0dXMuUEFSQU1TX0VSUk9SKSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBzdGF0UmF0aW8gPSAxMDsKICAgICAgICAgICAgaXNIaXRTdGF0ID0gaXNIaXQoc3RhdFJhdGlvKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCBleGVjSW52b2tlKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZ2V0SG9zdEluZm8oKSksIHt9LCB7CiAgICAgICAgICAgICAgaXNIaXRTdGF0OiBpc0hpdFN0YXQsCiAgICAgICAgICAgICAgYXBwTmFtZTogJ3RwJywKICAgICAgICAgICAgICB0b2tlbjogdG9rZW4sCiAgICAgICAgICAgICAgYXBrVXJsOiBhcGtVcmwsCiAgICAgICAgICAgICAgZmFpbGVkVXJsOiBmYWlsZWRVcmwsCiAgICAgICAgICAgICAgcGtnTmFtZTogcGtnTmFtZSwKICAgICAgICAgICAgICBzY2hlbWU6IHNjaGVtZSwKICAgICAgICAgICAgICBpb3NTdG9yZVVybDogaW9zU3RvcmVVcmwsCiAgICAgICAgICAgICAgdG9TdG9yZTogdG9TdG9yZSwKICAgICAgICAgICAgICB0b1lZQjogdG9ZWUIsCiAgICAgICAgICAgICAgdGltZW91dDogdGltZW91dCwKICAgICAgICAgICAgICB1c2VEZWVwbGluazogZmFsc2UsCiAgICAgICAgICAgICAgdWxpbms6IHVsaW5rLAogICAgICAgICAgICAgIHVzZU5vdFRyeUxpc3Q6IGZhbHNlLAogICAgICAgICAgICAgIGNoZWNrVG9rZW5Db3BpZWQ6IGNoZWNrVG9rZW5Db3BpZWQsCiAgICAgICAgICAgICAgc3RhdFJhdGlvOiBzdGF0UmF0aW8KICAgICAgICAgICAgfSkpKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMTApOwogIH0pKTsKICByZXR1cm4gX2ludm9rZVRwQXBwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCndpbmRvdy5fX1VJQV9WRVJTSU9OX18gPSAnMi4yLjQnOw=="},{"version":3,"sources":["/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/ug-invoke-app/dist/index.js"],"names":["browserMap","Map","brandMap","samsung","xiaomi","oppo","vivo","huawei","honor","apple","ua","navigator","userAgent","detectIpad","isMobile","RegExp","test","isMac","maxTouchPoints","IS_IPAD","IS_IOS","IS_ANDROID","getIOSVersion","reg","osv","exec","length","replace","IOS_VERSION","Number","split","getHostInfo","os","res","browser","brand","browserReg","Object","entries","brandReg","androidStoreRules","marketMap","mimarket","pkgName","appmarket","oppomarket","vivomarket","samsungapps","market","getMarketScheme","marketScheme","browserRule","brandRule","schemeName","notUlinkRules","notIframeRules","matchRules","rules","appName","some","appNameRule","matchIosWithVersion","matchedUlink","notUlink","notMatchedIframe","invokeAction","scheme","window","top","location","href","node","document","createElement","style","display","src","body","appendChild","setTimeout","removeChild","checkInvoke","timeout","Promise","resolve","reject","timer","visibilityState","clearTimeout","addEventListener","Status","TRY_JUMP","INVOKE_SUCCESS","APPSTORE_SUCCESS","APK_SUCCESS","YYB_SUCCESS","FAILEDURL_SUCCESS","COPY_FAILED","INVOKE_FAIL","NOT_SUPPORT_SYSTEM","INVOKE_APPSTORE_FAIL","INVOKE_ULINK_FAIL","APPNAME_NOT_SUPPORT","PARAMS_ERROR","InvokeType","DEEPLINK","ULINK","SCHEME","NOT_TRY","ANDROID_MARKET","H5ErrLogInstance","init","url","app","watch","getRandomNumber","Math","floor","random","isHit","statRatio","Url","query","qs","parse","_uia_h","sendH5ErrLog","options","status","useSendBeacon","isHitStat","rest","uiaVer","__UIA_VERSION__","send","_uia_status","handleInvokeFailed","invokeType","toStore","invokeAndroidMarket","iosStoreUrl","apkUrl","failedUrl","invokeWithType","ulink","invokeMarket","appConfigMap","baiduboxapp","getUlink","target","encodeURIComponent","appStoreUrl","baiduboxlite","baiduhaokan","path","hasQuestionMark","includes","bdminivideo","tieba","bdnetdisk","iqiyi","baidumap","bddrama","wenku","lemon","baiduinput","baiduboxvision","weibaapp","youjia","askmybaby","yike","baiduhanyu","yoopu","tomas","fortunecat","yiju","bdhealthapp","bdwkst","rap","wepod","yymobile","baiduboxsenior","knews","boxDeeplinkConfig","getScheme","appUrl","callback","params","successCode","deeplinkConfigMap","isDeeplinkApp","keys","openYYB","YYBUrl","notTryJumpRules","checkNotTryJump","osRule","naDeeplink","result","JSON","copyText","token","ClipboardAction","action","text","container","emitter","emit","type","naCopy","_naCopyCb_","stringify","data","raceTime","time","func","args","race","name","invokeNaCopy","execCopy","naCopyRes","console","log","checkTokenCopied","execInvoke","toYYB","useDeeplink","useNotTryList","invokeApp","defaultScheme","finalScheme","finalAppStoreUrl","finalUlink","invokeTpApp","error"],"mappings":"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","sourcesContent":["import H5ErrLogInstance from '@baidu/ug-error-log';\nimport Url from 'url-parse';\nimport qs from 'query-string';\nimport { toQueryString, stringifyQuery, toGlobalFunc } from '@baidu/eop-utils';\nimport ClipboardAction from 'clipboard/src/clipboard-action';\n\n/**\n * @file browserslist\n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\n// browser\n// browserrules\n// browseropera\nconst browserMap = new Map([['wechat', /micromessenger/i], ['qqbrowser', /\\bm?qqbrowser\\/([0-9.]+)(?!.* qq)/i], ['qq', /\\bqq\\/([0-9.]+)/i], ['weibo', /weibo__/i], ['uc', /((?:[\\s\\/])uc?\\s?browser|(?:juc.+)ucweb)[\\/\\s]?([\\w.]+)/i], ['360', /(qihu|qhbrowser|qihoobrowser|360browser)/i], ['baiduboxlite', /(lite|info) baiduboxapp/i], ['fortunecat', /fcapp/i], ['baiduboxmission', /mission baiduboxapp/i], ['baiduboxvision', /baiduboxvision/i], ['baiduboxapp', /baiduboxapp/i], ['tieba', /tieba/i], ['baiduhaokan', /haokan/i], ['bdminivideo', /bdminivideo/i], ['bdnetdisk', /netdisk/i], ['baidumap', /baidumap/i], ['baiduhi', /baiduhi_android/i], ['bddrama', /bddrama/i], ['knews', /knews/i], ['baiduboxsenior', /baiduboxsenior/i], ['wenku', /com.baidu.wenku/i], ['lemon', /lemonapp/i], ['baiduinput', /baiduinput/i], ['weibaapp', /weibaapp/i], ['youjia', /youjia/i], ['yike', /youa/i], ['bdwkst', /-HadesCore-.*student/i], ['askmybaby', /mybaby/i], ['tomas', /tomas/i], ['yiju', /bdyiju/i], ['rap', /hiphop/i], ['wepod', /wepod/i], ['bdhealthapp', /bdhealthapp/i], ['yymobile', /.*yy([(])?(clientversion:)?([0-9.]+).*/gi], ['baiduhanyu', /dictapp/i], ['sogou', /sogoum(obilebrowser|se)/i], ['alipay', /alipayclient/i], ['taobao', /\\baliapp\\(tb\\/([0-9.]+)\\)/i], ['tianmao', /\\baliapp\\(tm\\/([0-9.]+)\\)/i], ['tao', /\\btaobrowser\\/([0-9.]+)/i], ['quark', /\\bquark\\/([0-9.]+)/i], ['xiaomi', /\\bmiuibrowser\\/([0-9.]+)/i], ['oppo', /\\bheytapbrowser\\/([0-9.]+)/i], ['vivo', /\\bvivobrowser\\/([0-9.]+)/i], ['meizu', /\\bmzbrowser\\/([0-9.]+)/i], ['huawei', /huaweibrowser\\/([0-9.]+)/i], ['samsung', /\\bsamsungbrowser\\/([0-9.]+)/i], ['edge', /edge\\/([0-9.]+)/i], ['firefox', /\\bfirefox\\/([0-9.ab]+)/i], ['chrome', /(?:chrome|crios|crmo)\\/([0-9.]+)/i], ['safari', /\\bversion\\/([0-9.]+(?: beta)?)(?: mobile(?:\\/[a-z0-9]+)?)? safari\\//i]]);\n\n/**\n * @file list\n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\n//  '-'\nconst brandMap = {\n  samsung: /.*Android.*(SAMSUNG|SM-).*/i,\n  xiaomi: /.*Android.*(Mi|M2011K2C).*/i,\n  oppo: /.*(OPPO|heytap|p[a-z][a-z][a-z]\\d0).*/i,\n  vivo: /.*Android.*(vivo|v\\d\\d\\d\\d[a-z]?a?).*/i,\n  huawei: /.*huawei.*/i,\n  honor: /.*honor.*/i,\n  apple: /(iPhone|iPod|iPad|Macintosh)/i\n};\n\n/**\n * @file \n * @author zhuzhibo <zhuzhibo@baidu.com>\n */\nconst ua = navigator.userAgent;\n\nfunction detectIpad() {\n  let isMobile = RegExp(/iPad/i).test(navigator.userAgent);\n\n  if (!isMobile) {\n    const isMac = RegExp(/Macintosh/i).test(navigator.userAgent);\n\n    if (isMac && navigator.maxTouchPoints && navigator.maxTouchPoints > 2) {\n      isMobile = true;\n    }\n  }\n\n  return isMobile;\n}\n\nconst IS_IPAD = detectIpad();\nconst IS_IOS = /(iPhone|iPod|iPad|Macintosh)/i.test(ua) || IS_IPAD;\nconst IS_ANDROID = /(Android)/i.test(ua);\n\nfunction getIOSVersion() {\n  let reg = /OS ((\\d+_?){2,3})\\s/i;\n\n  if (IS_IOS) {\n    let osv = reg.exec(navigator.userAgent); // @ts-ignore\n\n    if ((osv === null || osv === void 0 ? void 0 : osv.length) > 0) {\n      // @ts-ignore\n      return osv[0].replace('OS', '').replace('os', '').replace(/\\s+/g, '').replace(/_/g, '.');\n    }\n  }\n\n  return '';\n}\n\nconst IOS_VERSION = Number(getIOSVersion().split('.')[0]);\n\n/**\n * @file ua parser\n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\nfunction getHostInfo() {\n  const ua = navigator.userAgent;\n  const os = IS_IOS ? 'ios' : IS_ANDROID ? 'android' : '-'; // -\n\n  const res = {\n    browser: '-',\n    brand: '-',\n    os\n  }; // browser name\n\n  for (const [browser, browserReg] of browserMap) {\n    if (browserReg.test(ua)) {\n      res.browser = browser;\n      break;\n    }\n  } // brand\n\n\n  for (let [brand, brandReg] of Object.entries(brandMap)) {\n    if (brandReg.test(ua)) {\n      res.brand = brand;\n      break;\n    }\n  }\n\n  return res;\n}\n\n/**\n * @file market\n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\n// \n// \n// [browser, brand, marketScheme]\nconst androidStoreRules = [// market,\n['*', 'samsung', 'samsungapps'], // ,\n['weibo', '*', 'market'], // \n['baiduboxapp', '*', 'market'], ['baiduboxlite', '*', 'market'], ['tomas', '*', 'market'], //   uc mi \n['xiaomi', 'xiaomi', 'mimarket'], ['uc', 'xiaomi', 'mimarket'], ['sogou', 'xiaomi', 'mimarket'], // qqmarket\n['qqbrowser', 'huawei', 'market'], ['qqbrowser', 'honor', 'market'], //  \n['*', 'huawei', 'appmarket'], ['*', 'honor', 'appmarket'], // oppo\n['oppo', 'oppo', 'oppomarket'], ['uc', 'oppo', 'oppomarket'], ['sogou', 'oppo', 'oppomarket'], ['quark', 'oppo', 'oppomarket'], // vivo\n['uc', 'vivo', 'vivomarket'], ['sogou', 'vivo', 'vivomarket']];\n\n/**\n * @file \n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\nconst marketMap = {\n  mimarket: pkgName => `mimarket://details?id=${pkgName}&back=true`,\n  appmarket: pkgName => `appmarket://details?id=${pkgName}&back=true`,\n  oppomarket: pkgName => `oppomarket://details?packagename=${pkgName}`,\n  vivomarket: pkgName => `vivomarket://details?id=${pkgName}`,\n  samsungapps: pkgName => `samsungapps://ProductDetail/${pkgName}?back=1`,\n  market: pkgName => `market://details?id=${pkgName}`\n};\n\n/**\n *  scheme\n *\n */\nfunction getMarketScheme(pkgName) {\n  const {\n    browser,\n    brand\n  } = getHostInfo();\n  let marketScheme = `market://details?id=${pkgName}`;\n\n  for (const [browserRule, brandRule, schemeName] of androidStoreRules) {\n    if ((browserRule === '*' || browser === browserRule) && (brandRule === '*' || brand === brandRule)) {\n      marketScheme = marketMap[schemeName](pkgName);\n      break;\n    }\n  } // case\n  // ,\n\n\n  if (browser === 'tieba') {\n    marketScheme += '&enable_tieba_native_open=1';\n  }\n\n  return marketScheme;\n}\n\n/**\n * @file invokeTypeRules\n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\nconst notUlinkRules = [['weibo', 'baiduboxapp'], ['uc', 'baiduboxapp'], ['quark', 'baiduboxapp'], ['chrome', '*']]; // [browser,appName][]\n\nconst notIframeRules = [['uc', '*'], ['chrome', '*'], ['samsung', '*']]; // \n\nconst matchRules = (rules, browser, appName) => rules.some(([browserRule, appNameRule]) => {\n  return (browserRule === '*' || browserRule === browser) && (appNameRule === '*' || appNameRule === appName);\n}); // ios9.iapd  \n\n\nconst matchIosWithVersion = IS_IOS && IOS_VERSION > 9 || IS_IPAD;\nfunction matchedUlink(browser, appName) {\n  const notUlink = matchRules(notUlinkRules, browser, appName); // iosnotUlink\n\n  return matchIosWithVersion && !notUlink;\n}\nfunction notMatchedIframe(browser, appName) {\n  return matchIosWithVersion || matchRules(notIframeRules, browser, appName);\n}\n\n/**\n * @file schema \n * @author zhuzhibo <zhuzhibo@baidu.com>\n * @author zsy\n */\n\n/**\n *\n * invokeAction\n * location = scheme\n * iframe\n *\n */\nfunction invokeAction(scheme, appName) {\n  const {\n    browser\n  } = getHostInfo(); // appName\n  // !!!api  invokeMarket!!!\n\n  if (notMatchedIframe(browser, appName)) {\n    window.top.location.href = scheme;\n    return;\n  } // iframe\n\n\n  let node = document.createElement('iframe');\n  node.style.display = 'none';\n  node.src = scheme;\n  const body = document.body;\n  body.appendChild(node); //  iframe\n\n  setTimeout(() => {\n    body.removeChild(node); // @ts-ignore\n\n    node = null;\n  }, 0);\n}\n\n/**\n * @file \n * @author zhuzhibo(zhuzhibo@baidu.com)\n * @author zsy\n */\n\n/**\n * \n *\n */\nfunction checkInvoke(timeout) {\n  return new Promise((resolve, reject) => {\n    const timer = setTimeout(() => {\n      // visibilitychangestate\n      // \n      // \n      if (document.visibilityState === 'hidden') {\n        clearTimeout(timer);\n        resolve();\n        return;\n      }\n\n      reject();\n    }, timeout);\n    document.addEventListener('visibilitychange', () => {\n      if (document.visibilityState === 'hidden') {\n        clearTimeout(timer);\n        resolve();\n      }\n    });\n  });\n}\n\n/**\n * @file \n * @author zhuzhibo(zhuzhibo@baidu.com)\n * @author zsy\n */\nconst Status = {\n  TRY_JUMP: 90001,\n  INVOKE_SUCCESS: 10000,\n  APPSTORE_SUCCESS: 10001,\n  APK_SUCCESS: 10002,\n  YYB_SUCCESS: 10003,\n  FAILEDURL_SUCCESS: 10004,\n  COPY_FAILED: 20004,\n  INVOKE_FAIL: 20005,\n  NOT_SUPPORT_SYSTEM: 20006,\n  INVOKE_APPSTORE_FAIL: 20007,\n  INVOKE_ULINK_FAIL: 20008,\n  APPNAME_NOT_SUPPORT: 20011,\n  PARAMS_ERROR: 21000\n};\n\n/**\n * @file \n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\n// 5\n// statusCode\n// \n// yybyybcode\nconst InvokeType = {\n  DEEPLINK: \"deeplink\",\n  ULINK: \"ulink\",\n  SCHEME: \"scheme\",\n  NOT_TRY: \"notTry\",\n  ANDROID_MARKET: \"market\"\n};\n\n/**\n * @file send error\n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\nH5ErrLogInstance.init({\n  url: 'https://activity.baidu.com/activity/felog/log',\n  app: 'ug-invoke-app_prod02',\n  watch: false\n});\nfunction getRandomNumber() {\n  return Math.floor(100 * Math.random());\n} //   \n// query_uia_h=1\n// \n\nfunction isHit(statRatio) {\n  let url = new Url(window.location.href);\n  let query = qs.parse(url.query) || {};\n  return query._uia_h === '1' || getRandomNumber() < statRatio;\n}\n/**\n *\n *\n * ug-invoke-app\n * \n * \n * \n * statusinvokeapp\n * \n *\n *\n */\n\nfunction sendH5ErrLog(options, status, useSendBeacon = true) {\n  if (options.isHitStat) {\n    // \n    const {\n      marketScheme,\n      isHitStat,\n      pkgName,\n      ...rest\n    } = options;\n    const uiaVer = window.__UIA_VERSION__ || '-';\n    H5ErrLogInstance.send({ ...rest,\n      uiaVer,\n\n      /* eslint-disable */\n      _uia_status: status\n      /* eslint-enable */\n\n    }, useSendBeacon);\n  }\n}\n\n/**\n * @file \n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\nasync function handleInvokeFailed(options, invokeType) {\n  // sendH5Errlog\n  // \n  if (invokeType === InvokeType.ULINK) {\n    sendH5ErrLog(options, Status.INVOKE_ULINK_FAIL);\n    return Promise.reject(Status.INVOKE_ULINK_FAIL);\n  }\n\n  if (options.toStore) {\n    if (IS_ANDROID && invokeType !== InvokeType.ANDROID_MARKET) {\n      return invokeAndroidMarket(options);\n    } else if (IS_IOS && options.iosStoreUrl) {\n      sendH5ErrLog(options, Status.APPSTORE_SUCCESS);\n      location.href = options.iosStoreUrl;\n      return Status.APPSTORE_SUCCESS;\n    }\n  }\n\n  if (IS_ANDROID && options.apkUrl) {\n    sendH5ErrLog(options, Status.APK_SUCCESS);\n    location.href = options.apkUrl;\n    return Status.APK_SUCCESS;\n  }\n\n  if (options.failedUrl) {\n    sendH5ErrLog(options, Status.FAILEDURL_SUCCESS);\n    location.href = options.failedUrl;\n    return Status.FAILEDURL_SUCCESS;\n  } // androidmarket\n  // \n\n\n  if (options.toStore && IS_ANDROID && invokeType === InvokeType.ANDROID_MARKET) {\n    sendH5ErrLog(options, Status.INVOKE_APPSTORE_FAIL);\n    return Promise.reject(Status.INVOKE_APPSTORE_FAIL);\n  }\n\n  sendH5ErrLog(options, Status.INVOKE_FAIL);\n  return Promise.reject(Status.INVOKE_FAIL);\n}\n\n/**\n * @file invoke \n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\nasync function invokeWithType(options, invokeType) {\n\n  if (invokeType === InvokeType.ULINK) {\n    window.top.location.href = options.ulink;\n  } else if (invokeType === InvokeType.ANDROID_MARKET && options.marketScheme) {\n    invokeAction(options.marketScheme, options.appName);\n  } else if (invokeType === InvokeType.SCHEME) {\n    invokeAction(options.scheme, options.appName);\n  }\n\n  try {\n    await checkInvoke(options.timeout);\n    const status = invokeType === InvokeType.ANDROID_MARKET ? Status.APPSTORE_SUCCESS : Status.INVOKE_SUCCESS;\n    sendH5ErrLog(options, status);\n    return status;\n  } catch (e) {\n    return handleInvokeFailed(options, invokeType);\n  }\n}\n\n/**\n * @file \n * @author zhuzhibo(zhuzhibo@baidu.com)\n */\n\nasync function invokeAndroidMarket(options) {\n  options.marketScheme = getMarketScheme(options.pkgName);\n  return invokeWithType(options, InvokeType.ANDROID_MARKET);\n} // api\n\nasync function invokeMarket(pkgName, timeout = 2000) {\n  const scheme = getMarketScheme(pkgName); // AppNameinvokeMarket\n  // \n\n  invokeAction(scheme, 'baiduinput');\n\n  try {\n    await checkInvoke(timeout);\n    return Status.APPSTORE_SUCCESS;\n  } catch (e) {\n    return Promise.reject(Status.INVOKE_APPSTORE_FAIL);\n  }\n}\n\n/**\n * @file appconfig\n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n * @see http://agroup.baidu.com/ceug-fe/md/article/2799135\n */\n// appName\nconst appConfigMap = {\n  baiduboxapp: {\n    getUlink(scheme, target) {\n      return `https://boxer.baidu.com/scheme?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'https://itunes.apple.com/cn/app/id382201985?mt=8',\n    scheme: 'baiduboxapp://v11/appTab/select?item=home&upgrade=0',\n    pkgName: 'com.baidu.searchbox'\n  },\n  baiduboxlite: {\n    getUlink(scheme, target) {\n      return `https://wakeup.baidu.com/baiduboxlite/scheme?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'https://itunes.apple.com/cn/app/id1281873118?mt=8',\n    scheme: 'baiduboxlite://v11/appTab/select?item=home&upgrade=0',\n    pkgName: 'com.baidu.searchbox.lite'\n  },\n  baiduhaokan: {\n    getUlink(scheme, target) {\n      const path = scheme.replace('baiduhaokan://', '');\n      const hasQuestionMark = path.includes('?');\n      return 'https://hku.baidu.com/h5/share/s/' + path + (hasQuestionMark ? '&' : '?') + `target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'https://itunes.apple.com/cn/app/bai-du-hao-kan/id1092031003',\n    scheme: 'baiduhaokan://home/index',\n    pkgName: 'com.baidu.haokan'\n  },\n  bdminivideo: {\n    getUlink(scheme, target) {\n      return `https://vv.baidu.com/feedvideoui/ulink?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'https://itunes.apple.com/cn/app/%E5%85%A8%E6%B0%91%E5%B0%8F%E8%A7%86%E9%A2%91/id1329385145?mt=8',\n    scheme: 'bdminivideo://home/index',\n    pkgName: 'com.baidu.minivideo'\n  },\n  tieba: {\n    appStoreUrl: 'https://itunes.apple.com/app/apple-store/id477927812?pt=328057&ct=bottom_layer&mt=8',\n    pkgName: 'com.baidu.tieba',\n\n    // ulink\n    getUlink() {\n      return '';\n    },\n\n    scheme: 'com.baidu.tieba://unidispatch/homepage'\n  },\n  bdnetdisk: {\n    getUlink(scheme, target) {\n      return `https://snsyun.baidu.com/wap/snsdeeplink?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    pkgName: 'com.baidu.netdisk',\n    appStoreUrl: 'https://itunes.apple.com/cn/app/%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98/id547166701?mt=8',\n    scheme: 'bdnetdisk://n/action.EXTERNAL_ACTIVITY?m_n_v=10.0.20'\n  },\n  iqiyi: {\n    getUlink() {\n      return '';\n    },\n\n    pkgName: 'com.qiyi.video',\n    appStoreUrl: 'https://apps.apple.com/cn/app/id393765873',\n    scheme: 'iqiyi://'\n  },\n  baidumap: {\n    getUlink(scheme, target) {\n      return `https://clientmap.baidu.com/map/maplink.php?cburl=${encodeURIComponent(target)}&openapi=${encodeURIComponent(scheme)}`;\n    },\n\n    appStoreUrl: 'https://itunes.apple.com/cn/app/id452186370',\n    scheme: 'baidumap://map?src=uginvoke',\n    pkgName: 'com.baidu.BaiduMap'\n  },\n  bddrama: {\n    getUlink(scheme, target) {\n      return `https://ulinkmvideo.baidu.com/wisedrama/system/ulink?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/%E7%95%AA%E4%B9%90/id1484301936',\n    pkgName: 'com.baidu.mv.drama',\n    scheme: 'bddrama://home?source='\n  },\n  wenku: {\n    getUlink() {\n      return '';\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/id426340811',\n    pkgName: 'com.baidu.wenku',\n    scheme: 'bdwenku://wenku/operation?type=136&tab=find'\n  },\n  lemon: {\n    getUlink(scheme, target) {\n      return `https://wakeup.baidu.com/lemonapp/scheme?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'http://click.hm.baidu.com/app.gif?ap=1801081&ch=47556',\n    scheme: 'lemon://share?type=13',\n    pkgName: 'com.baidu.lemon'\n  },\n  baiduinput: {\n    // \n    getUlink(scheme) {\n      return `https://srf.baidu.com/?from=1024129m&c=apple&e=imehd&native_url=${encodeURIComponent(scheme)}`;\n    },\n\n    appStoreUrl: 'https://itunes.apple.com/app/apple-store/id916139408?pt=625805&ct=1024129m&mt=8',\n    scheme: 'baiduimsettings2://superskin',\n    pkgName: 'com.baidu.input'\n  },\n  baiduboxvision: {\n    getUlink(scheme, target) {\n      return `https://wakeup.baidu.com/baiduboxvision/scheme?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/id1526110789',\n    scheme: 'baiduboxvision://appTab/select?item=home',\n    pkgName: 'com.baidu.searchbox.vision'\n  },\n  weibaapp: {\n    getUlink() {\n      return '';\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/%E5%BE%AE%E5%8F%AD/id1410178720',\n    scheme: 'lazybd://com.melon.lazymelon/home',\n    pkgName: 'com.melon.lazymelon'\n  },\n  youjia: {\n    getUlink() {\n      return '';\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/id1490227077',\n    scheme: 'youjia://app/homepage',\n    pkgName: 'com.baidu.autocar'\n  },\n  askmybaby: {\n    getUlink() {\n      return '';\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/%E5%AE%9D%E5%AE%9D%E7%9F%A5%E9%81%93-%E7%A7%91%E5%AD%A6%E5%A4%87%E5%AD%95%E6%80%80%E5%AD%95%E8%82%B2%E5%84%BF%E5%8A%A9%E6%89%8B/id858401906',\n    scheme: 'askmybaby://com.baidu.mbaby/',\n    pkgName: 'com.baidu.mbaby'\n  },\n  yike: {\n    // \n    getUlink(scheme) {\n      return `https://photo.baidu.com/app/scheme?&scheme=${encodeURIComponent(scheme)}`;\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/%E4%B8%80%E5%88%BB%E7%9B%B8%E5%86%8C-%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E5%87%BA%E5%93%81/id1467852587',\n    scheme: 'youa://youa.com/home',\n    pkgName: 'com.baidu.youavideo'\n  },\n  baiduhanyu: {\n    getUlink(scheme, target) {\n      return `https://wakeup.baidu.com/baidudict/scheme?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/1/id1065829176',\n    scheme: 'baidudict://com.baidu.dict',\n    pkgName: 'com.baidu.dict'\n  },\n  yoopu: {\n    getUlink(scheme, target) {\n      return `https://wakeup.baidu.com/yoopu/scheme?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'https://itunes.apple.com/cn/app/id1533615786?mt=8',\n    scheme: 'yoopu://',\n    pkgName: 'com.baidu.yoopu'\n  },\n  tomas: {\n    getUlink(scheme, target) {\n      return `https://wakeup.baidu.com/tomas/scheme?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/id1546173008',\n    scheme: 'tomas://',\n    pkgName: 'com.baidu.searchbox.tomas'\n  },\n  fortunecat: {\n    getUlink(scheme, target) {\n      return `https://wakeup.baidu.com/fortunecat/scheme?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/id1523487452',\n    scheme: 'fortunecat://invoke?p=%7B%22type%22%3A0%2C%22source%22%3A1%7D&ubc_ext=%7B%22invoke_channel%22%3A%221024634f%22%7D',\n    pkgName: 'com.baidu.fortunecat'\n  },\n  yiju: {\n    getUlink(scheme, target) {\n      return `https://ulinkmvideo.baidu.com/yiju/system/ulink?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/id1548246673',\n    scheme: 'bdyiju://home/index',\n    pkgName: 'com.baidu.yiju'\n  },\n  bdhealthapp: {\n    getUlink(scheme, target) {\n      return `https://jiankang.baidu.com/scheme?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/id1555616850',\n    scheme: 'bdhealthapp://app/home',\n    pkgName: 'com.baidu.bdhealth'\n  },\n  bdwkst: {\n    getUlink() {\n      return '';\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/id1527030248',\n    scheme: 'bdwkst://student/operation?type=136',\n    pkgName: 'com.baidu.student'\n  },\n  rap: {\n    getUlink(scheme, target) {\n      return `https://ulinkmvideo.baidu.com/wisedrama/system/yinciulink?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/id1528455665',\n    scheme: 'bdhiphop://',\n    pkgName: 'com.baidu.rap'\n  },\n  wepod: {\n    getUlink(scheme, target) {\n      return `https://ulinkmvideo.baidu.com/wisedrama/system/wepodulink?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/id1541812473',\n    scheme: 'bdwepod://',\n    pkgName: 'com.baidu.wepod'\n  },\n  yymobile: {\n    getUlink(scheme) {\n      return `https://ulink.yy.com/urlscheme?type=scheme&action=${encodeURIComponent(scheme)}&autodownload=1`;\n    },\n\n    appStoreUrl: 'https://apps.apple.com/app/id427941017',\n    scheme: 'yymobile://',\n    pkgName: 'com.duowan.mobile'\n  },\n  baiduboxsenior: {\n    getUlink(scheme, target) {\n      return `https://wakeup.baidu.com/baiduboxsenior/scheme?scheme=${encodeURIComponent(scheme)}&target=${encodeURIComponent(target)}`;\n    },\n\n    appStoreUrl: 'https://apps.apple.com/cn/app/id1581796662',\n    scheme: 'baiduboxsenior://v11/appTab/select?item=home&upgrade=0',\n    pkgName: 'com.baidu.searchbox.senior'\n  },\n  knews: {\n    getUlink() {\n      return '';\n    },\n\n    appStoreUrl: '',\n    scheme: 'knews://v11/appTab/select?item=home&upgrade=0',\n    pkgName: 'com.miui.knews'\n  }\n};\n\n/**\n * @file deeplink map\n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\n// \nconst boxDeeplinkConfig = {\n  getScheme(appUrl, callback) {\n    return 'baiduboxapp://v7/vendor/ad/deeplink?' + `${toQueryString(stringifyQuery({\n      params: {\n        appUrl\n      }\n    }))}` + `&callback=${toGlobalFunc(callback)}`;\n  },\n\n  successCode: 0\n}; // \n\nconst baiduboxvision = {\n  getScheme(appUrl, callback) {\n    return 'baiduboxvision://v7/vendor/ad/deeplink?' + `${toQueryString(stringifyQuery({\n      params: {\n        appUrl\n      }\n    }))}` + `&callback=${toGlobalFunc(callback)}`;\n  },\n\n  successCode: 0\n}; // \n\nconst bdminivideo = {\n  getScheme(appUrl, callback) {\n    return 'bdminivideo://growth/launch3rdApp?' + toQueryString(stringifyQuery({\n      callback: callback,\n      params: {\n        scheme: appUrl\n      }\n    }, true));\n  },\n\n  successCode: 0\n};\nconst deeplinkConfigMap = {\n  baiduboxapp: boxDeeplinkConfig,\n  baiduboxlite: boxDeeplinkConfig,\n  tomas: boxDeeplinkConfig,\n  baiduboxvision,\n  // launch3rdApp\n  // \n  bdminivideo\n};\n// \n// Browser => DeeplinkApp\nfunction isDeeplinkApp(browser) {\n  return Object.keys(deeplinkConfigMap).includes(browser);\n}\n\n/**\n * @file \n * @author zhuzhibo(zhuzhibo@baidu.com)\n * @author zsy\n */\n/**\n * \n */\n\nfunction openYYB(options) {\n  const YYBUrl = `http://a.app.qq.com/o/simple.jsp?pkgname=${options.pkgName}`;\n  sendH5ErrLog(options, Status.YYB_SUCCESS);\n  location.href = `${YYBUrl}&android_schema=${encodeURIComponent(options.scheme)}`;\n  return Status.YYB_SUCCESS;\n}\n\n/**\n * @file \n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\n// \n// \n// [browser, appName, os]\n// browserappName\nconst notTryJumpRules = [['xiaomi', 'baiduboxapp', 'android'], ['uc', 'baiduboxapp', 'android'], ['oppo', 'baiduboxapp', 'android'], ['vivo', 'baiduboxapp', 'android'], ['wechat', 'baiduboxapp', 'android']];\n\n/**\n * @file \n * @author zhuzhibo <zhuzhibo@baidu.com>\n */\n\n/**\n * \n */\nfunction checkNotTryJump(browser, appName, os) {\n  for (const [browserRule, appNameRule, osRule] of notTryJumpRules) {\n    if ((browserRule === '*' || browserRule === browser) && (appNameRule === '*' || appNameRule === appName) && (osRule === '*' || osRule === os)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * @file na deeplink\n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\nasync function naDeeplink(options, browser) {\n  return new Promise(resolve => {\n    const {\n      getScheme,\n      successCode\n    } = deeplinkConfigMap[browser]; // \n\n    function callback(result) {\n      let res = JSON.parse(result);\n\n      if (+res.status === successCode) {\n        sendH5ErrLog(options, Status.INVOKE_SUCCESS);\n        resolve(Status.INVOKE_SUCCESS);\n      } else {\n        resolve(handleInvokeFailed(options, InvokeType.DEEPLINK));\n      }\n    }\n\n    invokeAction(getScheme(options.scheme, callback), options.appName);\n  });\n}\n\n/**\n * @file \n * @author zhuzhibo <zhuzhibo@baidu.com>\n * @author zsy\n */\n/**\n *  clipboard.js \n *\n */\n\nfunction copyText(token) {\n  return new Promise((resolve, reject) => {\n    new ClipboardAction({\n      action: 'copy',\n      text: token,\n      container: document.body,\n      emitter: {\n        emit(type) {\n\n          if (type === 'success') {\n            resolve();\n          } else {\n            reject();\n          }\n        }\n\n      }\n    });\n  });\n}\n\n/**\n * @file NA  \n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\n\nconst naCopy = text => new Promise((resolve, reject) => {\n  window._naCopyCb_ = function (res) {\n    // \n    if (res && Number(JSON.parse(res).status) === 0) {\n      resolve('naCopyDone');\n    } else {\n      reject(res);\n    }\n  };\n\n  const params = encodeURIComponent(JSON.stringify({\n    data: text\n  }));\n  invokeAction(`baiduboxapp://v19/utils/setClipboardData?params=${params}&callback=_naCopyCb_`, 'baiduboxapp');\n});\n/**\n *\n * Promise.race  HOC\n *\n */\n\nasync function raceTime(time, func, ...args) {\n  return Promise.race([func(...args), new Promise((resolve, reject) => {\n    //   \n    setTimeout(() => reject(`: ${func.name}`), time);\n  })]);\n} //  \n// \n// hang\n\nconst invokeNaCopy = text => raceTime(500, naCopy, text);\n\nasync function execCopy(options) {\n  try {\n    await copyText(options.token);\n  } catch (e) {\n    //     \n    let naCopyRes = false;\n\n    if (options.browser === 'baiduboxapp') {\n      try {\n        await invokeNaCopy(options.token);\n        naCopyRes = true;\n      } catch (err) {\n        // todo  \n        console.log(err);\n      }\n    } // \n\n\n    if (!naCopyRes) {\n      sendH5ErrLog(options, Status.COPY_FAILED); // \n\n      if (options.checkTokenCopied) {\n        return Promise.reject(Status.COPY_FAILED);\n      }\n    }\n  }\n}\n\n/**\n * @file execInvoke index\n * @author zhuzhibo(zhuzhibo@baidu.com)\n */\nasync function execInvoke(options) {\n  //  \n  // \n  // \n  sendH5ErrLog(options, Status.TRY_JUMP); // \n\n  if (options.token) {\n    await execCopy(options);\n  }\n\n  const {\n    browser,\n    appName,\n    os\n  } = options; // ios\n  // \n\n  if (IS_IOS || IS_ANDROID) {\n    // \n    if (IS_ANDROID && options.toYYB && browser === 'wechat') {\n      return openYYB(options);\n    } // deeplink\n    else if (options.useDeeplink && /baidu\\.com/i.test(location.href) && isDeeplinkApp(browser)) {\n        return naDeeplink(options, browser);\n      } // notTryJump\n      else if (options.useNotTryList && checkNotTryJump(browser, appName, os)) {\n          return handleInvokeFailed(options, InvokeType.NOT_TRY);\n        } // ulink\n        else if (options.ulink && matchedUlink(browser, appName)) {\n            return invokeWithType(options, InvokeType.ULINK);\n          } // scheme\n\n\n    return invokeWithType(options, InvokeType.SCHEME);\n  }\n\n  return Promise.reject(Status.NOT_SUPPORT_SYSTEM);\n}\n\n/**\n * @file invoke\n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\nasync function invokeApp({\n  appName,\n  token = '',\n  scheme = '',\n  toStore = true,\n  toYYB = true,\n  ulink,\n  timeout = 2500,\n  useDeeplink = false,\n  apkUrl = '',\n  failedUrl = '',\n  useNotTryList = true,\n  checkTokenCopied = true,\n  iosStoreUrl = '',\n  statRatio = 10\n}) {\n  // appName\n  if (!Object.keys(appConfigMap).includes(appName)) {\n    return Promise.reject(Status.APPNAME_NOT_SUPPORT);\n  } // \n\n\n  const {\n    appStoreUrl,\n    pkgName,\n    scheme: defaultScheme,\n    getUlink\n  } = appConfigMap[appName];\n  const finalScheme = scheme || defaultScheme;\n  const finalAppStoreUrl = iosStoreUrl || appStoreUrl;\n  const finalUlink = ulink !== null && ulink !== void 0 ? ulink : getUlink(finalScheme, toStore ? finalAppStoreUrl : failedUrl);\n  const isHitStat = isHit(statRatio);\n  return execInvoke({ ...getHostInfo(),\n    isHitStat,\n    appName,\n    token,\n    apkUrl,\n    failedUrl,\n    pkgName,\n    scheme: finalScheme,\n    iosStoreUrl: finalAppStoreUrl,\n    toStore,\n    toYYB,\n    timeout,\n    useDeeplink,\n    ulink: finalUlink,\n    useNotTryList,\n    checkTokenCopied,\n    statRatio\n  });\n}\nasync function invokeTpApp({\n  token = '',\n  scheme,\n  toStore = false,\n  toYYB = false,\n  ulink = '',\n  timeout = 2500,\n  apkUrl = '',\n  failedUrl = '',\n  checkTokenCopied = true,\n  iosStoreUrl = '',\n  pkgName\n}) {\n  if (!scheme || (toStore || toYYB) && !pkgName) {\n    console.error('invokeTpApp');\n    return Promise.reject(Status.PARAMS_ERROR);\n  }\n\n  const statRatio = 10;\n  const isHitStat = isHit(statRatio);\n  return execInvoke({ ...getHostInfo(),\n    isHitStat,\n    appName: 'tp',\n    token,\n    apkUrl,\n    failedUrl,\n    pkgName,\n    scheme,\n    iosStoreUrl,\n    toStore,\n    toYYB,\n    timeout,\n    useDeeplink: false,\n    ulink,\n    useNotTryList: false,\n    checkTokenCopied,\n    statRatio\n  });\n}\n\n/**\n * @file index\n * @author zhangsiyuan(zhangsiyuan@baidu.com)\n */\n// \nwindow.__UIA_VERSION__ = '2.2.4';\n\nexport { appConfigMap, getHostInfo, invokeApp, invokeMarket, invokeTpApp };\n"]}]}