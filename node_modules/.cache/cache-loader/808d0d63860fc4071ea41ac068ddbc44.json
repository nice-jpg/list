{"remainingRequest":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js??ref--1-2!/Users/liaohuanyu/projects/baidu-work/baidu/feed3/topic-components/@baidu/auc-star-header/request.js","dependencies":[{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/topic-components/@baidu/auc-star-header/request.js","mtime":1696919769102},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/san-hot-loader/index.js","mtime":1696919525187},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/cache-loader/dist/cjs.js","mtime":1696919513896},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js","mtime":1696919524615}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyIpOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnJlcXVlc3QgPSB2b2lkIDA7Cgp2YXIgX3R5cGVvZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mIikpOwoKdmFyIHJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KHVybCwgZGF0YSkgewogIGlmICghdXJsKSB7Ly8gdGhyb3cgbmV3IEVycm9yKCd1cmwgaXMgbmVjZXNzYXJ5Jyk7CiAgfQoKICB2YXIgY2FsbGJhY2sgPSAnQ0FMTEJBQ0snICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygpLnN1YnN0cig5LCAxOCk7CiAgdmFyIEpTT05QID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgSlNPTlAuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvamF2YXNjcmlwdCcpOwogIHZhciBoZWFkRWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTsKICB2YXIgcmV0ID0gJyc7CgogIGlmIChkYXRhKSB7CiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICAgIHJldCA9ICcmJyArIGRhdGE7CiAgICB9IGVsc2UgaWYgKCgwLCBfdHlwZW9mMi5kZWZhdWx0KShkYXRhKSA9PT0gJ29iamVjdCcpIHsKICAgICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHsKICAgICAgICByZXQgKz0gJyYnICsga2V5ICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFba2V5XSk7CiAgICAgIH0KICAgIH0KCiAgICByZXQgKz0gJyZfdGltZT0nICsgRGF0ZS5ub3coKTsKICB9CgogIEpTT05QLnNyYyA9ICIiLmNvbmNhdCh1cmwsICI/Y2FsbGJhY2s9IikuY29uY2F0KGNhbGxiYWNrKS5jb25jYXQocmV0KTsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgd2luZG93W2NhbGxiYWNrXSA9IGZ1bmN0aW9uIChyKSB7CiAgICAgIHJlc29sdmUocik7CiAgICAgIGhlYWRFbGUucmVtb3ZlQ2hpbGQoSlNPTlApOwogICAgICBkZWxldGUgd2luZG93W2NhbGxiYWNrXTsKICAgIH07CgogICAgaGVhZEVsZS5hcHBlbmRDaGlsZChKU09OUCk7CiAgfSk7Cn07CgpleHBvcnRzLnJlcXVlc3QgPSByZXF1ZXN0Ow=="},{"version":3,"sources":["/Users/liaohuanyu/projects/baidu-work/baidu/feed3/topic-components/@baidu/auc-star-header/request.js"],"names":["request","url","data","callback","Math","random","toString","substr","JSONP","document","createElement","setAttribute","headEle","getElementsByTagName","ret","key","encodeURIComponent","Date","now","src","Promise","resolve","reject","window","r","removeChild","appendChild"],"mappings":";;;;;;;;;;;;;;;;;;;AAAO,IAAMA,OAAO,GAAG,SAAVA,OAAU,CAACC,GAAD,EAAMC,IAAN,EAAe;AAClC,MAAI,CAACD,GAAL,EAAU,CACN;AACH;;AACD,MAAME,QAAQ,GAAG,aAAaC,IAAI,CAACC,MAAL,GAAcC,QAAd,GAAyBC,MAAzB,CAAgC,CAAhC,EAAmC,EAAnC,CAA9B;AACA,MAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAd;AACAF,EAAAA,KAAK,CAACG,YAAN,CAAmB,MAAnB,EAA2B,iBAA3B;AAEA,MAAMC,OAAO,GAAGH,QAAQ,CAACI,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAAhB;AAEA,MAAIC,GAAG,GAAG,EAAV;;AACA,MAAIZ,IAAJ,EAAU;AACN,QAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC1BY,MAAAA,GAAG,GAAG,MAAMZ,IAAZ;AACH,KAFD,MAGK,IAAI,sBAAOA,IAAP,MAAgB,QAApB,EAA8B;AAC/B,WAAK,IAAIa,GAAT,IAAgBb,IAAhB,EAAsB;AAClBY,QAAAA,GAAG,IAAI,MAAMC,GAAN,GAAY,GAAZ,GAAkBC,kBAAkB,CAACd,IAAI,CAACa,GAAD,CAAL,CAA3C;AACH;AACJ;;AACDD,IAAAA,GAAG,IAAI,YAAYG,IAAI,CAACC,GAAL,EAAnB;AACH;;AACDV,EAAAA,KAAK,CAACW,GAAN,aAAelB,GAAf,uBAA+BE,QAA/B,SAA0CW,GAA1C;AACA,SAAO,IAAIM,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCC,IAAAA,MAAM,CAACpB,QAAD,CAAN,GAAmB,UAAAqB,CAAC,EAAI;AACpBH,MAAAA,OAAO,CAACG,CAAD,CAAP;AACAZ,MAAAA,OAAO,CAACa,WAAR,CAAoBjB,KAApB;AACA,aAAOe,MAAM,CAACpB,QAAD,CAAb;AACH,KAJD;;AAKAS,IAAAA,OAAO,CAACc,WAAR,CAAoBlB,KAApB;AACH,GAPM,CAAP;AAQH,CA/BM","sourcesContent":["export const request = (url, data) => {\n    if (!url) {\n        // throw new Error('url is necessary');\n    }\n    const callback = 'CALLBACK' + Math.random().toString().substr(9, 18);\n    const JSONP = document.createElement('script');\n    JSONP.setAttribute('type', 'text/javascript');\n\n    const headEle = document.getElementsByTagName('head')[0];\n\n    let ret = '';\n    if (data) {\n        if (typeof data === 'string') {\n            ret = '&' + data;\n        }\n        else if (typeof data === 'object') {\n            for (let key in data) {\n                ret += '&' + key + '=' + encodeURIComponent(data[key]);\n            }\n        }\n        ret += '&_time=' + Date.now();\n    }\n    JSONP.src = `${url}?callback=${callback}${ret}`;\n    return new Promise((resolve, reject) => {\n        window[callback] = r => {\n            resolve(r);\n            headEle.removeChild(JSONP);\n            delete window[callback];\n        };\n        headEle.appendChild(JSONP);\n    });\n};\n"]}]}