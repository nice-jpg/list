{"remainingRequest":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js??ref--1-2!/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/mo-core/dist/scrollview.js","dependencies":[{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/mo-core/dist/scrollview.js","mtime":1696919505774},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/san-hot-loader/index.js","mtime":1696919525187},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/cache-loader/dist/cjs.js","mtime":1696919513896},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js","mtime":1696919524615}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5yZWdpc3RlclNjcm9sbHZpZXcgPSByZWdpc3RlclNjcm9sbHZpZXc7Cgp2YXIgX3hib3ggPSByZXF1aXJlKCJAYmFpZHUveGJveCIpOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaC50aHJvdHRsZSIpKTsKCnZhciBfdmlld3BvcnQgPSByZXF1aXJlKCIuL3ZpZXdwb3J0Iik7CgovKioKICogQ29weXJpZ2h0IChDKSAyMDIxIH4gcHJlc2VudCBiYWlkdS5jb20KICovCnZhciBkZWZhdWx0RXZlbnQgPSAnc2Nyb2xsOnJlYWxTaG93JzsKCnZhciBzdWJzY3JpYmUgPSBmdW5jdGlvbiBzdWJzY3JpYmUoaXRlbSkgewogIHJldHVybiBmdW5jdGlvbiAobGlzdGVuZXIpIHsKICAgIGxpc3RlbmVyICYmIGl0ZW0ubGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGl0ZW0ubGlzdGVuZXJzID0gaXRlbS5saXN0ZW5lcnMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0gPT09IGxpc3RlbmVyOwogICAgICB9KTsKICAgIH07CiAgfTsKfTsKLyoqCiAqIOWFg+e0oOi/m+WFpSB2aWV3IOaXtuiwg+eUqAogKgogKiBAcGFyYW0gaXRlbSDlt7Lnu4/ms6jlhozov4fnmoQgZXZlbnQg5pWw5o2uCiAqIEBwYXJhbSBldmVudCDmu5rliqjkuovku7blr7nosaEKICovCgoKdmFyIGVudGVyVmlldyA9IGZ1bmN0aW9uIGVudGVyVmlldyhpdGVtLCBldmVudCkgewogIHZhciBpc1Nob3cgPSBmYWxzZTsKICBpdGVtLmluVmlldyA9IHRydWU7CgogIGlmIChpdGVtLm9wdGlvbnMudGltZSAmJiBpdGVtLm9wdGlvbnMudGltZS0tID4gMCkgewogICAgaXNTaG93ID0gdHJ1ZTsKICAgIHZhciBldmVudHMgPSBpdGVtLmV2ZW50TmFtZTsKCiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXZlbnRzKSkgewogICAgICBldmVudHMgPSBbZXZlbnRzXTsKICAgIH0KCiAgICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIHZhciBkYXRhID0gdHlwZW9mIGl0ZW0uZGF0YSA9PT0gJ2Z1bmN0aW9uJyA/IGl0ZW0uZGF0YSgpIDogaXRlbS5kYXRhOwogICAgICBpdGVtLmRpc3BhdGNoICYmIGl0ZW0uZGlzcGF0Y2goZXZ0LCBkYXRhKTsKICAgIH0pOwogIH0KCiAgaXRlbS5saXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoZm4pIHsKICAgIGZuLmNhbGwodW5kZWZpbmVkLCB7CiAgICAgIHR5cGU6ICdlbnRlcicsCiAgICAgIGl0ZW06IGl0ZW0sCiAgICAgIGV2ZW50OiBldmVudAogICAgfSk7CiAgICBpc1Nob3cgJiYgZm4uY2FsbCh1bmRlZmluZWQsIHsKICAgICAgdHlwZTogJ3Nob3cnLAogICAgICBpdGVtOiBpdGVtLAogICAgICBldmVudDogZXZlbnQKICAgIH0pOwogIH0pOwp9OwovKioKICog5YWD57Sg56a75byAIHZpZXcg5pe255qE6LCD55SoCiAqCiAqIEBwYXJhbSBpdGVtIOW3sue7j+azqOWGjOi/h+eahCBldmVudCDmlbDmja4KICogQHBhcmFtIGV2ZW50IOa7muWKqOS6i+S7tuWvueixoQogKi8KCgp2YXIgbGVhdmVWaWV3ID0gZnVuY3Rpb24gbGVhdmVWaWV3KGl0ZW0sIGV2ZW50KSB7CiAgaXRlbS5pblZpZXcgPSBmYWxzZTsKICBpdGVtLmxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChmbikgewogICAgZm4uY2FsbCh1bmRlZmluZWQsIHsKICAgICAgdHlwZTogJ2xlYXZlJywKICAgICAgaXRlbTogaXRlbSwKICAgICAgZXZlbnQ6IGV2ZW50CiAgICB9KTsKICB9KTsKfTsKCnZhciBoYW5kbGVTY3JvbGwgPSBmdW5jdGlvbiBoYW5kbGVTY3JvbGwoaXRlbXMpIHsKICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuIGl0ZW0ubGlzdGVuZXJzLmxlbmd0aCAmJiBpdGVtLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0OwogICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICB2YXIgX2l0ZW0kb3B0aW9ucyA9IGl0ZW0ub3B0aW9ucywKICAgICAgICAgIG9mZnNldFggPSBfaXRlbSRvcHRpb25zLm9mZnNldFgsCiAgICAgICAgICBvZmZzZXRZID0gX2l0ZW0kb3B0aW9ucy5vZmZzZXRZLAogICAgICAgICAgaW5WaWV3Rm4gPSBfaXRlbSRvcHRpb25zLmluVmlld0ZuOwogICAgICB2YXIgaXNJblZpZXcgPSAoMCwgX3ZpZXdwb3J0LmlzVmlzaWJsZSkoaXRlbS5lbGVtZW50LCAoMCwgX3ZpZXdwb3J0LmdldFZpZXdwb3J0KSgpLmVsZW1lbnQsIG9mZnNldFgsIG9mZnNldFkpOwoKICAgICAgaWYgKHR5cGVvZiBpblZpZXdGbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIGlzSW5WaWV3ID0gaW5WaWV3Rm4oaXNJblZpZXcpOwogICAgICB9CgogICAgICBpZiAoaXNJblZpZXcpIHsKICAgICAgICBpdGVtLmluVmlldyB8fCBlbnRlclZpZXcoaXRlbSwgZXZlbnQpOwogICAgICB9IGVsc2UgewogICAgICAgIGl0ZW0uaW5WaWV3ICYmIGxlYXZlVmlldyhpdGVtLCBldmVudCk7CiAgICAgIH0KICAgIH0pOwogIH07Cn07Ci8qKgogKiDkuLrkuIDkuKrlhYPntKDlnKjlj6/mu5rliqjlrrnlmajlhoXms6jlhozmu5rliqjnm5HlkKwKICoKICogQHBhcmFtIHBhcmFtcy5lbCBET03lhYPntKAKICogQHBhcmFtIHBhcmFtcy5jb250YWluZXIg55uu5qCH5a655ZmoCiAqIEBwYXJhbSBwYXJhbXMub3B0aW9ucyDphY3nva7lj4LmlbAKICogQHJldHVybnMgU2Nyb2xsdmlldyDlr7nosaHmiJYgZmFsc2UKICovCgoKZnVuY3Rpb24gcmVnaXN0ZXJTY3JvbGx2aWV3KF9yZWYpIHsKICB2YXIgZWxlbWVudCA9IF9yZWYuZWxlbWVudCwKICAgICAgX3JlZiRjb250YWluZXIgPSBfcmVmLmNvbnRhaW5lciwKICAgICAgY29udGFpbmVyID0gX3JlZiRjb250YWluZXIgPT09IHZvaWQgMCA/ICgwLCBfdmlld3BvcnQuZ2V0Vmlld3BvcnQpKCkuZWxlbWVudCA6IF9yZWYkY29udGFpbmVyLAogICAgICBvcHRpb25zID0gX3JlZi5vcHRpb25zOwoKICBpZiAoIWVsZW1lbnQgfHwgIWNvbnRhaW5lcikgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgdmFyIHByb2dyZXNzID0gdHJ1ZTsKICB2YXIgaXRlbUxpc3QgPSBbXTsKICB2YXIgc3Vic2NyaWJlZEl0ZW0gPSBpdGVtTGlzdC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbS5lbGVtZW50ID09PSBlbGVtZW50OwogIH0pOwogIG9wdGlvbnMgPSAoMCwgX3hib3guZXh0ZW5kKSh7CiAgICB0aW1lOiAxCiAgfSwgb3B0aW9ucyk7CgogIGlmICghc3Vic2NyaWJlZEl0ZW0pIHsKICAgIC8vIOacquazqOWGjOi/h+WFg+e0oAogICAgc3Vic2NyaWJlZEl0ZW0gPSB7CiAgICAgIGRhdGE6IG9wdGlvbnMuZGF0YSwKICAgICAgZXZlbnROYW1lOiBvcHRpb25zLmV2ZW50TmFtZSB8fCBkZWZhdWx0RXZlbnQsCiAgICAgIGluVmlldzogZmFsc2UsCiAgICAgIGxpc3RlbmVyczogW10sCiAgICAgIG9wdGlvbnM6IG9wdGlvbnMsCiAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgICB0aGlzLmxpc3RlbmVycy5sZW5ndGggPSAwOwogICAgICB9LAogICAgICBldmVudDogZnVuY3Rpb24gZXZlbnQocGFyYW1zKSB7CiAgICAgICAgcmV0dXJuIHBhcmFtczsKICAgICAgfQogICAgfTsKICB9CgogIHN1YnNjcmliZShzdWJzY3JpYmVkSXRlbSkob3B0aW9ucy5ldmVudCk7CiAgaXRlbUxpc3QucHVzaChzdWJzY3JpYmVkSXRlbSk7CiAgdmFyIHNjcm9sbEZuID0gKDAsIF9sb2Rhc2guZGVmYXVsdCkoaGFuZGxlU2Nyb2xsKGl0ZW1MaXN0KSwgMTUwKTsKICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgc2Nyb2xsRm4sIGZhbHNlKTsKICBzY3JvbGxGbihuZXcgRXZlbnQoJ3Njcm9sbCcpKTsKICByZXR1cm4gewogICAgLy8g5YGc5q2i5rua5Yqo55uR5ZCsCiAgICBzdG9wOiBmdW5jdGlvbiBzdG9wKCkgewogICAgICBpZiAocHJvZ3Jlc3MpIHsKICAgICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgc2Nyb2xsRm4sIGZhbHNlKTsKICAgICAgICBwcm9ncmVzcyA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgLy8g5pqC5YGc5rua5Yqo55uR5ZCsCiAgICByZXN1bWU6IGZ1bmN0aW9uIHJlc3VtZSgpIHsKICAgICAgaWYgKCFwcm9ncmVzcykgewogICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxGbiwgZmFsc2UpOwogICAgICAgIHByb2dyZXNzID0gdHJ1ZTsKICAgICAgfQogICAgfQogIH07Cn0="},{"version":3,"sources":["/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/mo-core/dist/scrollview.js"],"names":["defaultEvent","subscribe","item","listener","listeners","push","filter","enterView","event","isShow","inView","options","time","events","eventName","Array","isArray","forEach","evt","data","dispatch","fn","call","undefined","type","leaveView","handleScroll","items","length","element","getBoundingClientRect","offsetX","offsetY","inViewFn","isInView","registerScrollview","container","progress","itemList","subscribedItem","find","clear","params","scrollFn","addEventListener","Event","stop","removeEventListener","resume"],"mappings":"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","sourcesContent":["/**\n * Copyright (C) 2021 ~ present baidu.com\n */\nimport { extend } from '@baidu/xbox';\nimport throttle from 'lodash.throttle';\nimport { getViewport, isVisible, } from './viewport';\nconst defaultEvent = 'scroll:realShow';\nconst subscribe = (item) => {\n    return (listener) => {\n        listener && item.listeners.push(listener);\n        return () => (item.listeners = item.listeners.filter(item => item === listener));\n    };\n};\n/**\n * 元素进入 view 时调用\n *\n * @param item 已经注册过的 event 数据\n * @param event 滚动事件对象\n */\nconst enterView = (item, event) => {\n    let isShow = false;\n    item.inView = true;\n    if (item.options.time && item.options.time-- > 0) {\n        isShow = true;\n        let events = item.eventName;\n        if (!Array.isArray(events)) {\n            events = [events];\n        }\n        events.forEach(evt => {\n            const data = typeof item.data === 'function' ? item.data() : item.data;\n            item.dispatch && item.dispatch(evt, data);\n        });\n    }\n    item.listeners.forEach(fn => {\n        fn.call(undefined, {\n            type: 'enter',\n            item,\n            event,\n        });\n        isShow\n            && fn.call(undefined, {\n                type: 'show',\n                item,\n                event,\n            });\n    });\n};\n/**\n * 元素离开 view 时的调用\n *\n * @param item 已经注册过的 event 数据\n * @param event 滚动事件对象\n */\nconst leaveView = (item, event) => {\n    item.inView = false;\n    item.listeners.forEach(fn => {\n        fn.call(undefined, {\n            type: 'leave',\n            item,\n            event,\n        });\n    });\n};\nconst handleScroll = (items) => {\n    return (event) => {\n        items\n            .filter(item => item.listeners.length && item.element.getBoundingClientRect)\n            .forEach(item => {\n            const { offsetX, offsetY, inViewFn } = item.options;\n            let isInView = isVisible(item.element, getViewport().element, offsetX, offsetY);\n            if (typeof inViewFn === 'function') {\n                isInView = inViewFn(isInView);\n            }\n            if (isInView) {\n                item.inView || enterView(item, event);\n            }\n            else {\n                item.inView && leaveView(item, event);\n            }\n        });\n    };\n};\n/**\n * 为一个元素在可滚动容器内注册滚动监听\n *\n * @param params.el DOM元素\n * @param params.container 目标容器\n * @param params.options 配置参数\n * @returns Scrollview 对象或 false\n */\nexport function registerScrollview({ element, container = getViewport().element, options, }) {\n    if (!element || !container) {\n        return false;\n    }\n    let progress = true;\n    const itemList = [];\n    let subscribedItem = itemList.find(item => item.element === element);\n    options = extend({\n        time: 1,\n    }, options);\n    if (!subscribedItem) {\n        // 未注册过元素\n        subscribedItem = {\n            data: options.data,\n            eventName: options.eventName || defaultEvent,\n            inView: false,\n            listeners: [],\n            options,\n            element: element,\n            clear() {\n                this.listeners.length = 0;\n            },\n            event(params) {\n                return params;\n            },\n        };\n    }\n    subscribe(subscribedItem)(options.event);\n    itemList.push(subscribedItem);\n    const scrollFn = throttle(handleScroll(itemList), 150);\n    container.addEventListener('scroll', scrollFn, false);\n    scrollFn(new Event('scroll'));\n    return {\n        // 停止滚动监听\n        stop() {\n            if (progress) {\n                container.removeEventListener('scroll', scrollFn, false);\n                progress = false;\n            }\n        },\n        // 暂停滚动监听\n        resume() {\n            if (!progress) {\n                container.addEventListener('scroll', scrollFn, false);\n                progress = true;\n            }\n        },\n    };\n}\n"]}]}