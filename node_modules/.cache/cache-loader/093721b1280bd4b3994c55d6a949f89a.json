{"remainingRequest":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js??ref--1-2!/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/xbox-share/index.js","dependencies":[{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/xbox-share/index.js","mtime":1696919509827},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/san-hot-loader/index.js","mtime":1696919525187},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/cache-loader/dist/cjs.js","mtime":1696919513896},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js","mtime":1696919524615}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gZXhwb3J0cy5TaGFyZUNvbmZpZyA9IHZvaWQgMDsKCnZhciBfdHlwZW9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2YiKSk7Cgp2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSIpKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIikpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSk7Cgp2YXIgX2RldGVjdCA9IHJlcXVpcmUoIkBiYWlkdS94Ym94L2Jyb3dzZXIvZGV0ZWN0Iik7Cgp2YXIgX2lzTWF0cml4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAYmFpZHUveGJveC9pcy1tYXRyaXgiKSk7Cgp2YXIgX2d1aWQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBiYWlkdS94Ym94L2d1aWQiKSk7Cgp2YXIgX2xvYWRqcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQGJhaWR1L3hib3gvYnJvd3Nlci9sb2FkanMiKSk7Cgp2YXIgX3R5cGUgPSByZXF1aXJlKCJAYmFpZHUveGJveC90eXBlIik7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCnZhciBkb2MgPSBkb2N1bWVudDsKdmFyIHByb3RvY29sID0gbG9jYXRpb24ucHJvdG9jb2wgIT09ICdodHRwczonID8gJ2h0dHA6JyA6ICdodHRwczonOwp2YXIgd2VpeGluanMgPSBnZXRDdXN0b21VUkwoJy8vcmVzLnd4LnFxLmNvbS9vcGVuL2pzL2p3ZWl4aW4tMS40LjAuanMnKTsKdmFyIHF6b25lanMgPSBnZXRDdXN0b21VUkwoJy8vcXpvbmVzdHlsZS5ndGltZy5jbi9xem9uZS9xemFjdC9jb21tb24vc2hhcmUvc2hhcmUuanMnKTsKdmFyIHBvV3hKc29ucCA9IGdldEN1c3RvbVVSTCgnLy9wby5iYWlkdS5jb20vYXBpL3dlY2hhdC90b2tlbi5qc29ucCcpOwoKdmFyIGVtcHR5Rm4gPSBmdW5jdGlvbiBlbXB0eUZuKCkge307Cgp2YXIgZGVmYXVsdExpbmsgPSBsb2NhdGlvbi5ocmVmOwp2YXIgdGNSZXBvcnRVcmwgPSBnZXRDdXN0b21VUkwoJy8vbWJkLmJhaWR1LmNvbS90Y2JveCcpOwp2YXIgZGVmYXV0VGl0bGUgPSAn55m+5bqmQXBwJzsKdmFyIGRlZmF1bHREZXNjID0gJ+eZvuW6pkFwcCc7CnZhciBkZWZhdWx0SWNvbiA9ICdodHRwczovL2IuYmRzdGF0aWMuY29tL3NlYXJjaGJveC9pY21zL3NlYXJjaGJveC9pbWcvcG8vYWN0L25ld3VzZXJyZWRwYWNrL2JveF9sb2dvLnBuZyc7CnZhciBkZWZhdWx0R2V0U2lnbmF0dXJlSW50ZXJmYWNlID0gewogIHVybDogcG9XeEpzb25wLAogIG1ldGhvZDogJ2pzb25wJywKICAvLyDlj6rmlK/mjIFnZXTlkoxqc29ucAogIG9wdGlvbk9iajoge30sCiAgcHJvbWlzZUZ1bmM6IG51bGwKfTsKCmZ1bmN0aW9uIGdldEN1c3RvbVVSTCh1cmwpIHsKICBpZiAodXJsLmluZGV4T2YoJy8vJykgPT09IDApIHsKICAgIHJldHVybiAiIi5jb25jYXQocHJvdG9jb2wpLmNvbmNhdCh1cmwpOwogIH0KCiAgcmV0dXJuIHVybDsKfQoKdmFyIGVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShzdHIpIHsKICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cik7Cn07Cgp2YXIgc3RyaW5naWZ5ID0gZnVuY3Rpb24gc3RyaW5naWZ5KGpzb24sIHVzZUVuY29kZSkgewogIGlmICghKDAsIF90eXBlLmlzVHlwZSkoanNvbiwgJ3N0cmluZycpKSB7CiAgICBqc29uID0gSlNPTi5zdHJpbmdpZnkoanNvbik7CiAgfQoKICBpZiAodXNlRW5jb2RlKSB7CiAgICBqc29uID0gZW5jb2RlKGpzb24pOwogIH0KCiAgcmV0dXJuIGpzb247Cn07IC8vIOiOt+WPlumhtemdouS4iuWkp+S6jiAyOTAgKiAyOTAg55qE5Zu+54mHCgoKZnVuY3Rpb24gZ2V0U2hhcmVJbWcoY2FsbGJhY2ssIGRlZmF1bHRVcmwpIHsKICAvLyDojrflj5bpobXpnaLnmoTlm77niYcKICB2YXIgaW1nc09mUGFnZSA9IGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW1nJyk7CiAgdmFyIGluZGV4OwogIHZhciBpdGVtOwogIHZhciBsZW5ndGggPSBpbWdzT2ZQYWdlLmxlbmd0aDsgLy8g5Y+q5Y+W5YmNMTDkuKrlm77niYfvvIzlpJrkuoblv73nlaUKCiAgbGVuZ3RoID0gbGVuZ3RoIDw9IDEwID8gbGVuZ3RoIDogMTA7IC8vIOmBjeWOhgoKICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHsKICAgIGl0ZW0gPSBpbWdzT2ZQYWdlW2luZGV4XTsKCiAgICAoZnVuY3Rpb24gKHNyYykgewogICAgICB2YXIgbmV3SW1nID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwoKICAgICAgbmV3SW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAobmV3SW1nLndpZHRoID4gMjkwICYmIG5ld0ltZy5oZWlnaHQgPiAyOTApIHsKICAgICAgICAgIGNhbGxiYWNrKHNyYyk7CiAgICAgICAgfQoKICAgICAgICBuZXdJbWcgPSBudWxsOwogICAgICB9OwoKICAgICAgbmV3SW1nLnNyYyA9IHNyYzsKICAgIH0pKGl0ZW0uc3JjKTsKICB9IC8vIDFzIOS5i+WQjui/mOayoeaQnuWumu+8jOWImei/lOWbnum7mOiupOWAvAoKCiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICBjYWxsYmFjayhkZWZhdWx0VXJsKTsKICB9LCAxZTMpOwp9IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0g6ZSZ6K+v5omT54K5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgpmdW5jdGlvbiBzZW5kRXJyb3JMb2coZXZ0LCBtc2cpIHsKICBpZiAoTWF0aC5yYW5kb20oKSA8PSAwLjk1ICYmIGRlZmF1bHRMaW5rLmluZGV4T2YoJ3NoYXJlX2NvbmZpZ19yYW5kb209MScpIDwgMCkgewogICAgLy8g5oq95qC3IDAuMDUg5qaC546HCiAgICByZXR1cm47CiAgfQoKICBpZiAoIWV2dCB8fCAhbXNnKSB7CiAgICByZXR1cm47CiAgfQoKICBtc2cgPSBlbmNvZGUobXNnKTsgLy8g54m55a6a55qEIHBhZ2VpZAoKICB2YXIgcGFnZUlkID0gJzMwMF8wMDEnOyAvLyDlvoAgdGNib3gg5omT54K5CgogIC8qIGVzbGludC1kaXNhYmxlIG9wZXJhdG9yLWxpbmVicmVhayAqLwoKICB2YXIgdGNib3hVcmwgPSAiIi5jb25jYXQodGNSZXBvcnRVcmwsICI/c2VydmljZT1iZGJveCZhY3Rpb249cGJsb2cmZGF0YT0iKSArCiAgLyogZXNsaW50LWVuYWJsZSBvcGVyYXRvci1saW5lYnJlYWsgKi8KICBzdHJpbmdpZnkoewogICAgYXBwaWQ6IDEsCiAgICBkYXRhaWQ6IDIsCiAgICBjYXRlaWQ6IDI2LAogICAgYWN0aW9uaWQ6IDIsCiAgICBhY3Rpb250eXBlOiAnMCcsCiAgICBhY3Rpb25kYXRhOiB7CiAgICAgIHR5cGU6IDAsCiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSwKICAgICAgY29udGVudDogewogICAgICAgIC8vIOWinuWKoOS4quaXpeW/l+agh+ivhgogICAgICAgIGZyb206ICd4Ym94JywKICAgICAgICBwYWdlX2lkOiBwYWdlSWQsCiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAgIGxvZ3R5cGU6IDMsCiAgICAgICAgdHlwZTogJ2NfJyArIGV2dCwKICAgICAgICBtc2c6IG1zZwogICAgICB9CiAgICB9CiAgfSwgdHJ1ZSk7IC8vIOW+gCBpc3BlZWQg5omT54K5IOWOu+aOiQogIC8vIOWPkemAgeaJk+eCuQogIC8vIOW8gOWni+aJk+eCuQoKICB2YXIgaW1nID0gbmV3IEltYWdlKCk7CgogIGltZy5vbmxvYWQgPSBpbWcub25lcnJvciA9IGltZy5vbmFib3J0ID0gZnVuY3Rpb24gKCkgewogICAgaW1nID0gbnVsbDsKICB9OwoKICBpbWcuc3JjID0gdGNib3hVcmw7Cn0gLy8g6I635Y+W5LiA5LiqIGVsZW0g55qEIHRleHQKCgpmdW5jdGlvbiBnZXRFbGVtZW50VGV4dChlbGVtKSB7CiAgaWYgKCgwLCBfdHlwZS5pc1R5cGUpKGVsZW0sICdzdHJpbmcnKSkgewogICAgcmV0dXJuIGVsZW07CiAgfQoKICBpZiAoIWVsZW0gfHwgZWxlbS5ub2RlVHlwZSAhPT0gMSkgewogICAgcmV0dXJuICcnOwogIH0KCiAgcmV0dXJuIGVsZW0uaW5uZXJUZXh0LnJlcGxhY2UoL1xuL2dpbSwgJycpLnJlcGxhY2UoL15ccysvLCAnJykucmVwbGFjZSgvXHMrJC8sICcnKTsKfQoKZnVuY3Rpb24gZ2V0Q2FsbGJhY2tOYW1lKCkgewogIHZhciBuYW1lID0gJ19zaGFyZUNvbmZpZ0ZOXycgKyAoMCwgX2d1aWQuZGVmYXVsdCkoKTsKCiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogIH0KCiAgdmFyIGZuID0gYXJncy5maW5kKGZ1bmN0aW9uIChmbikgewogICAgaWYgKCgwLCBfdHlwZS5pc1R5cGUpKGZuLCAnZnVuY3Rpb24nKSkgewogICAgICB3aW5kb3dbbmFtZV0gPSBmbjsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2UgaWYgKCgwLCBfdHlwZS5pc1R5cGUpKGZuLCAnc3RyaW5nJykgJiYgKDAsIF90eXBlLmlzVHlwZSkod2luZG93W2ZuXSwgJ2Z1bmN0aW9uJykpIHsKICAgICAgbmFtZSA9IGZuOwogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9KTsKCiAgaWYgKGZuKSB7CiAgICByZXR1cm4gbmFtZTsKICB9IC8vIOmDveS4jeWtmOWcqO+8jOWImeeUqOS4quepuueahAoKCiAgbmFtZSA9ICdfc2hhcmVDb25maWdFbXB0eUZuXyc7CiAgd2luZG93W25hbWVdID0gZW1wdHlGbjsKICByZXR1cm4gbmFtZTsKfQoKdmFyIFNoYXJlQ29uZmlnID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTaGFyZUNvbmZpZygpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHsKICAgICAgLy8g5piv5ZCm5byA5ZCvIGRlYnVnIOaooeW8j++8iOmUmeivr+S7pSBhbGVydCDlvaLlvI/lvLnlh7rvvInvvIzpu5jorqQgZmFsc2UKICAgICAgZGVidWc6IGZhbHNlLAogICAgICAvLyDmuKDpgZPvvIznlKjkuo7lgZrnu5/orqHvvIzlv4XloavvvIjor7fkvb/nlKjkuKrmgKfnmoTlkI3np7DvvIzpgb/lhY3lkozlhbbku5bkuqflk4HnmoQgY2hhbm5lbCDph43lpI3jgIHlr7zoh7Tnu5/orqHplJnor6/vvIkKICAgICAgY2hhbm5lbDogJycsCiAgICAgIC8vIOWIhuS6q+agh+mimO+8jOmAieWhq++8jOm7mOiupOS4uiBkb2N1bWVudC50aXRsZQogICAgICB0aXRsZTogZG9jLnRpdGxlLAogICAgICAvLyDpgInloavjgILlvZMgdGl0bGUg5Y+C5pWw5Li656m677yM5LiU5oqT5Y+W5LiN5Yiw6aG16Z2i55qE5qCH6aKY5pe277yM5YiZ5L2/55So6K+l5YC85L2c5Li6IHRpdGxlCiAgICAgIHRpdGxlRGVmYXVsdDogZG9jLnRpdGxlIHx8IGRlZmF1dFRpdGxlLAogICAgICAvLyDliIbkuqvov57mjqXvvIzpgInloavvvIzpu5jorqTkuLogbG9jYXRpb24uaHJlZgogICAgICBsaW5rVXJsOiBkZWZhdWx0TGluaywKICAgICAgLy8g5YiG5Lqr5o+P6L+w77yM6YCJ5aGr44CC56ys5LiA77yM5Y+v55u05o6l5aGr5YaZ5o+P6L+w5a2X56ym5Liy77yb56ys5LqM77yM5Y+v5Lyg5YWl5LiA5LiqIGVsZW0g5aaCIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXYxJynvvJvnrKzkuInvvIzlpoLmnpzkuI3loavvvIzpu5jorqTkuLogZG9jdW1lbnQuYm9keQogICAgICBjb250ZW50OiAnJywKICAgICAgLy8g6YCJ5aGr44CC5b2TIGNvbnRlbnQg5pyq5Lyg5YWl5a2X56ym5Liy77yM5LiU5oqT5Y+W5LiN5Yiw6aG16Z2i5YaF5a655pe277yM5L2/55So6K+l5YC85L2c5Li6IGNvbnRlbnQKICAgICAgY29udGVudERlZmF1bHQ6IGRlZmF1bHREZXNjLAogICAgICAvLyDliIbkuqsgaWNvbiDlm77niYflnLDlnYDvvIzpgInloavjgILlpoLmnpzkuI3kvKDlhaXlgLzvvIzkvJrmipPlj5bpobXpnaLnrKzkuIDkuKrlpKfkuo7nrYnkuo4gMzAwICogMzAwIOeahOWbvueJh++8jDHnp5LkuYvlhoXmipPlj5bkuI3liLDliJnpu5jorqTkvb/nlKjmiYvnmb4gbG9nbyDlm74KICAgICAgaWNvblVybDogJycsCiAgICAgIC8vIOmAieWhq+OAguW9kyBpY29uVXJsIOWPguaVsOS4uuepuu+8jOS4lOaKk+WPluWbvueJh+Wksei0peaXtu+8jOeUqOivpeWAvOS9nOS4uiBpY29uVXJsCiAgICAgIGljb25VcmxEZWZhdWx0OiBkZWZhdWx0SWNvbiwKICAgICAgLy8g5omL55m+5YiG5Lqr6YWN572u77yI5aaC5p6c5L2/55So5omL55m+5YiG5Lqr77yM5YiZ5b+F5aGr77yJCiAgICAgIGJkYm94OiB7fSwKICAgICAgLy8g5b6u5L+h5YiG5Lqr6YWN572u77yI5aaC5p6c5L2/55So5b6u5L+h5YiG5Lqr77yM5YiZ5b+F5aGr77yJ77yM6buY6K6k55m+5a625Y+35YWs5YWx5biQ5Y+377yM5a6J5YWo5Z+fIGJhaWR1LmNvbQogICAgICB3eDogewogICAgICAgIGFwcElkOiAnd3hhZGMxYTBjNmI5MDk2ZTg5JywKICAgICAgICBqc0FwaUxpc3Q6IFtdCiAgICAgIH0sCiAgICAgIC8vIOiHquWumuS5ieeahOW+ruS/oXNkawogICAgICBjdXN0b21XZWl4aW5qczogd2VpeGluanMsCiAgICAgIC8vIOiHquWumuS5ieeahHFx55qEc2RrCiAgICAgIGN1c3RvbVF6b25lanM6IHF6b25lanMsCiAgICAgIC8vIOiHquWumuS5ieiOt+WPluetvuWQjeeahOaOpeWPo+S/oeaBrwogICAgICBnZXRTaWduYXR1cmVJbnRlcmZhY2U6IGRlZmF1bHRHZXRTaWduYXR1cmVJbnRlcmZhY2UsCiAgICAgIHN1Y2Nlc3M6IGVtcHR5Rm4sCiAgICAgIGVycm9yOiBlbXB0eUZuCiAgICB9OwogICAgdmFyIHN1Y2Nlc3NDYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkOwogICAgdmFyIGVycm9yQ2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZDsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syLmRlZmF1bHQpKHRoaXMsIFNoYXJlQ29uZmlnKTsKICAgIHRoaXMubG9nID0gZ2V0TG9nZ2VyKG9wdGlvbnMuZGVidWcpOyAvLyDlvq7kv6EgYXBwaWQgY2FjaGUKCiAgICB0aGlzLl93eENhY2hlID0ge307CiAgICB0aGlzLnVzZVdlaXhpbkNhY2hlID0gb3B0aW9ucy51c2VXZWl4aW5DYWNoZSB8fCB0cnVlOwogICAgdmFyIGNvbnRlbnQgPSBnZXRFbGVtZW50VGV4dChvcHRpb25zLmNvbnRlbnQpIHx8IGdldEVsZW1lbnRUZXh0KG9wdGlvbnMuY29udGVudERlZmF1bHQpOwogICAgb3B0aW9ucy5jb250ZW50ID0gY29udGVudC5sZW5ndGggPD0gNTAgPyBjb250ZW50IDogY29udGVudC5zbGljZSgwLCA1MCkgKyAnLi4uJzsKICAgIG9wdGlvbnMudGl0bGUgPSBvcHRpb25zLnRpdGxlID8gb3B0aW9ucy50aXRsZSA6IG9wdGlvbnMudGl0bGVEZWZhdWx0OwoKICAgIGlmIChvcHRpb25zLnd4ICYmICghb3B0aW9ucy53eC5hcHBJZCB8fCBvcHRpb25zLnd4LmFwcElkLmxlbmd0aCA8IDEwKSkgewogICAgICBvcHRpb25zLnd4LmFwcElkID0gJ3d4YWRjMWEwYzZiOTA5NmU4OSc7CiAgICB9CgogICAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKICAgIHRoaXMuc3VjY2Vzc0NhbGxiYWNrID0gZ2V0Q2FsbGJhY2tOYW1lKHN1Y2Nlc3NDYWxsYmFjaywgb3B0aW9ucy5zdWNjZXNzKTsKICAgIHRoaXMuZXJyb3JDYWxsYmFjayA9IGdldENhbGxiYWNrTmFtZShlcnJvckNhbGxiYWNrLCBvcHRpb25zLmVycm9yKTsgLy8g6YWN572uIGljb25VcmwKCiAgICB2YXIgaXNHZXRJbWdDYWxsZWQgPSBmYWxzZTsKCiAgICBpZiAoIW9wdGlvbnMuaWNvblVybCkgewogICAgICAvLyDml6Dlm77niYfvvIzlhYjor5Xlm77ojrflj5blm77niYflho3miafooYwKICAgICAgZ2V0U2hhcmVJbWcoZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgIC8vIOiusOW9leeKtuaAge+8jOS4jemHjeWkjeiwg+eUqAogICAgICAgIGlmIChpc0dldEltZ0NhbGxlZCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaXNHZXRJbWdDYWxsZWQgPSB0cnVlOyAvLyDorr7nva4gaWNvbiDlgLzlubbmiafooYwKCiAgICAgICAgX3RoaXMub3B0aW9ucy5pY29uVXJsID0gcmVzdWx0OwogICAgICB9LCBvcHRpb25zLmljb25VcmxEZWZhdWx0KTsKICAgIH0KCiAgICBpZiAoKDAsIF9kZXRlY3QuaXNXZWl4aW4pKCkpIHsKICAgICAgLy8g5Zyo5b6u5L+h5LitCiAgICAgIGlmICh3aW5kb3cud3gpIHsKICAgICAgICAvLyDlt7Lnu4/lvJXlhaXlvq7kv6EganNzZGsKICAgICAgICB0aGlzLndlaXhpbigpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOWKoOi9veW+ruS/oSBqc3NkayDkuYvlkI7lho3liJ3lp4vljJYKICAgICAgICAoMCwgX2xvYWRqcy5kZWZhdWx0KSh7CiAgICAgICAgICB1cmw6IHRoaXMub3B0aW9ucy5jdXN0b21XZWl4aW5qcyB8fCB3ZWl4aW5qcywKICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoKSB7CiAgICAgICAgICAgIF90aGlzLndlaXhpbigpOwogICAgICAgICAgfSwKICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcigpIHsKICAgICAgICAgICAgc2VuZEVycm9yTG9nKCdsb2FkX3d4c2RrX2VycicsIGRlZmF1bHRMaW5rKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSBlbHNlIGlmICgoMCwgX2RldGVjdC5pc1FRKSgpKSB7CiAgICAgIC8vIOWcqCBRUSDkuK0KICAgICAgaWYgKHdpbmRvdy5zZXRTaGFyZUluZm8pIHsKICAgICAgICAvLyDlt7Lnu4/lvJXlhaVRUSBqc3NkawogICAgICAgIHRoaXMucXEoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDliqDovb0gUVEganNzZGsg5LmL5ZCO5YaN5Yid5aeL5YyWCiAgICAgICAgKDAsIF9sb2FkanMuZGVmYXVsdCkoewogICAgICAgICAgdXJsOiB0aGlzLm9wdGlvbnMuY3VzdG9tUXpvbmVqcyB8fCBxem9uZWpzLAogICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcygpIHsKICAgICAgICAgICAgX3RoaXMucXEoKTsKICAgICAgICAgIH0sCiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoKSB7CiAgICAgICAgICAgIHNlbmRFcnJvckxvZygnbG9hZF9xcXNka19lcnInLCBkZWZhdWx0TGluayk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoKDAsIF9kZXRlY3QuaXNCb3gpKCkgfHwgKDAsIF9pc01hdHJpeC5kZWZhdWx0KSgpKSB7CiAgICAgIHRoaXMuYm94KCk7CiAgICB9IGVsc2Ugey8vIHRoaXMub3RoZXIoKTsKICAgIH0KICB9CgogICgwLCBfY3JlYXRlQ2xhc3MyLmRlZmF1bHQpKFNoYXJlQ29uZmlnLCBbewogICAga2V5OiAicXEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHFxKCkgewogICAgICAvLyDliKTmlq3kvp3otZbnmoQgc2RrIOaYr+WQpuWKoOi9veWujAogICAgICBpZiAoKDAsIF9kZXRlY3QuaXNRUSkoKSAmJiAhd2luZG93LnNldFNoYXJlSW5mbykgewogICAgICAgIHRoaXMubG9nKCdRUSBTREsg5pyq5Yqg6L295a6M5oiQJyk7CiAgICAgIH0KCiAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zOwogICAgICB2YXIgX29wdGlvbnMkd3ggPSBvcHRpb25zLnd4LAogICAgICAgICAgd3ggPSBfb3B0aW9ucyR3eCA9PT0gdm9pZCAwID8ge30gOiBfb3B0aW9ucyR3eCwKICAgICAgICAgIHRpdGxlID0gb3B0aW9ucy50aXRsZSwKICAgICAgICAgIGNvbnRlbnQgPSBvcHRpb25zLmNvbnRlbnQsCiAgICAgICAgICBsaW5rVXJsID0gb3B0aW9ucy5saW5rVXJsLAogICAgICAgICAgaWNvblVybCA9IG9wdGlvbnMuaWNvblVybDsKICAgICAgdmFyIGFwcElkID0gd3guYXBwSWQ7IC8vIC0tLS0tLS0tLS0tLS0tLSBRUeWIhuS6q+mFjee9riAtLS0tLS0tLS0tLS0tLS0KCiAgICAgIHRoaXMuX2dldFdlaXhpblNpZ25hdHVyZShhcHBJZCwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICB3aW5kb3cuc2V0U2hhcmVJbmZvKHsKICAgICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICAgIHN1bW1hcnk6IGNvbnRlbnQsCiAgICAgICAgICBwaWM6IGljb25VcmwsCiAgICAgICAgICB1cmw6IGxpbmtVcmwsCiAgICAgICAgICAvLyDlvq7kv6HmnYPpmZDpqozor4HphY3nva7kv6Hmga/vvIzoi6XkuI3lnKjlvq7kv6HkvKDmkq3vvIzlj6/lv73nlaUKICAgICAgICAgIFdYY29uZmlnOiB7CiAgICAgICAgICAgIHN3YXBUaXRsZUluV1g6IGZhbHNlLAogICAgICAgICAgICAvLyDmmK/lkKbmoIfpopjlhoXlrrnkupLmjaLvvIjku4XmnIvlj4vlnIjvvIzlm6DmnIvlj4vlnIjlhoXlj6rmmL7npLrmoIfpopjvvIkKICAgICAgICAgICAgYXBwSWQ6IGFwcElkLAogICAgICAgICAgICAvLyDlhazkvJflj7fnmoTllK/kuIDmoIfor4YKICAgICAgICAgICAgdGltZXN0YW1wOiBkYXRhLnRpbWVzdGFtcCwKICAgICAgICAgICAgLy8g55Sf5oiQ562+5ZCN55qE5pe26Ze05oizCiAgICAgICAgICAgIG5vbmNlU3RyOiBkYXRhLm5vbmNlU3RyLAogICAgICAgICAgICAvLyDnlJ/miJDnrb7lkI3nmoTpmo/mnLrkuLIKICAgICAgICAgICAgc2lnbmF0dXJlOiBkYXRhLnNpZ25hdHVyZSAvLyDnrb7lkI0KCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIndlaXhpbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gd2VpeGluKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICgoMCwgX2RldGVjdC5pc1dlaXhpbikoKSAmJiAhd2luZG93Lnd4KSB7CiAgICAgICAgdGhpcy5sb2coJ+W+ruS/oSBTREsg5pyq5Yqg6L295a6M5oiQJyk7CiAgICAgIH0KCiAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zOwogICAgICB2YXIgdGl0bGUgPSBvcHRpb25zLnRpdGxlLAogICAgICAgICAgY29udGVudCA9IG9wdGlvbnMuY29udGVudCwKICAgICAgICAgIGxpbmtVcmwgPSBvcHRpb25zLmxpbmtVcmwsCiAgICAgICAgICBpY29uVXJsID0gb3B0aW9ucy5pY29uVXJsOwogICAgICB2YXIgd2VjaGF0ID0gb3B0aW9ucy53eDsKICAgICAgdmFyIGFwcElkID0gd2VjaGF0LmFwcElkLAogICAgICAgICAgX3dlY2hhdCRqc0FwaUxpc3QgPSB3ZWNoYXQuanNBcGlMaXN0LAogICAgICAgICAganNBcGlMaXN0ID0gX3dlY2hhdCRqc0FwaUxpc3QgPT09IHZvaWQgMCA/IFtdIDogX3dlY2hhdCRqc0FwaUxpc3Q7IC8vIOWIneWni+WMluW+ruS/oemFjee9ruWPguaVsAoKICAgICAganNBcGlMaXN0ID0ganNBcGlMaXN0LmNvbmNhdChbJ2NoZWNrSnNBcGknLCAnb25NZW51U2hhcmVUaW1lbGluZScsICdvbk1lbnVTaGFyZUFwcE1lc3NhZ2UnLCAnb25NZW51U2hhcmVRUScsICdvbk1lbnVTaGFyZVdlaWJvJywgJ29uTWVudVNoYXJlUVpvbmUnXSk7CiAgICAgIHZhciBzdWNjZXNzID0gd2luZG93W3RoaXMuc3VjY2Vzc0NhbGxiYWNrXTsKICAgICAgdmFyIGNhbmNlbCA9IHdpbmRvd1t0aGlzLmVycm9yQ2FsbGJhY2tdOyAvLyDliqjmgIHojrflj5blvq7kv6Hnrb7lkI0KCiAgICAgIHRoaXMuX2dldFdlaXhpblNpZ25hdHVyZShhcHBJZCwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0g5b6u5L+h5YiG5Lqr6YWN572uIC0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIOWIneWni+WMluW+ruS/oWpzc2RrCiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgd3guY29uZmlnKHsKICAgICAgICAgIGRlYnVnOiAhIV90aGlzMi5vcHRpb25zLmRlYnVnLAogICAgICAgICAganNBcGlMaXN0OiBqc0FwaUxpc3QsCiAgICAgICAgICBhcHBJZDogYXBwSWQsCiAgICAgICAgICBub25jZVN0cjogZGF0YS5ub25jZVN0ciwKICAgICAgICAgIHRpbWVzdGFtcDogZGF0YS50aW1lc3RhbXAsCiAgICAgICAgICBzaWduYXR1cmU6IGRhdGEuc2lnbmF0dXJlCiAgICAgICAgfSk7IC8vIOWQhOS4quWIhuS6q+eahOmFjee9rgoKICAgICAgICB2YXIgY29uZmlnRGF0YSA9IHsKICAgICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICAgIGRlc2M6IGNvbnRlbnQsCiAgICAgICAgICBsaW5rOiBsaW5rVXJsLAogICAgICAgICAgaW1nVXJsOiBpY29uVXJsLAogICAgICAgICAgc3VjY2Vzczogc3VjY2VzcywKICAgICAgICAgIGNhbmNlbDogY2FuY2VsCiAgICAgICAgfTsKICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSovCgogICAgICAgIHd4LnJlYWR5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIOmFjee9ruW+ruS/oeaci+WPi+WciOWIhuS6qwogICAgICAgICAgd3gub25NZW51U2hhcmVUaW1lbGluZShjb25maWdEYXRhKTsgLy8g6YWN572u5b6u5L+h5raI5oGv5YiG5LqrCgogICAgICAgICAgd3gub25NZW51U2hhcmVBcHBNZXNzYWdlKGNvbmZpZ0RhdGEpOyAvLyDphY3nva5RUeWIhuS6qwoKICAgICAgICAgIHd4Lm9uTWVudVNoYXJlUVEoY29uZmlnRGF0YSk7IC8vIOmFjee9ruiFvuiur+W+ruWNmgoKICAgICAgICAgIHd4Lm9uTWVudVNoYXJlV2VpYm8oY29uZmlnRGF0YSk7IC8vIOmFjee9rlFR56m66Ze05YiG5LqrCgogICAgICAgICAgd3gub25NZW51U2hhcmVRWm9uZShjb25maWdEYXRhKTsKICAgICAgICB9KTsKICAgICAgICAvKiBlc2xpbnQtZW5hYmxlKi8KICAgICAgfSk7CiAgICB9IC8vIOWKqOaAgeiOt+WPluW+ruS/oeetvuWQjQoKICB9LCB7CiAgICBrZXk6ICJfZ2V0V2VpeGluU2lnbmF0dXJlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0V2VpeGluU2lnbmF0dXJlKGFwcElkLCBjYWxsYmFjaykgewogICAgICB2YXIgY2FjaGUgPSB0aGlzLl93eENhY2hlW2FwcElkXTsgLy8g57yT5a2YMjDliIbpkp8KCiAgICAgIGlmIChjYWNoZSAmJiBjYWNoZS5zaWduYXR1cmUgJiYgY2FjaGUubm9uY2VTdHIgJiYgRGF0ZS5ub3coKSAtIGNhY2hlLl9ub3cgPCAyMCAqIDYwZTMpIHsKICAgICAgICBjYWxsYmFjayhjYWNoZSk7CiAgICAgIH0KCiAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgIGlmIChhcHBJZCkgewogICAgICAgIHZhciBzdWNjZXNzQ2IgPSBmdW5jdGlvbiBzdWNjZXNzQ2IoaW5mbykgewogICAgICAgICAgdmFyIGVycm5vID0gaW5mby5lcnJubywKICAgICAgICAgICAgICBfaW5mbyRkYXRhID0gaW5mby5kYXRhLAogICAgICAgICAgICAgIGRhdGEgPSBfaW5mbyRkYXRhID09PSB2b2lkIDAgPyB7fSA6IF9pbmZvJGRhdGEsCiAgICAgICAgICAgICAgZXJybXNnID0gaW5mby5lcnJtc2c7CgogICAgICAgICAgaWYgKCtlcnJubyAhPT0gMCB8fCAhZGF0YS5zaWduYXR1cmUpIHsKICAgICAgICAgICAgc2VuZEVycm9yTG9nKCd3eF9nZXR0b2tlbl9lcnInLCBkZWZhdWx0TGluayk7CiAgICAgICAgICAgIHNlbGYubG9nKCfojrflj5bnrb7lkI3nmoTmjqXlj6PplJnor6/vvJonICsgZXJybXNnKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGNhbGxiYWNrKGRhdGEpOwogICAgICAgICAgZGF0YS5fbm93ID0gRGF0ZS5ub3coKTsKICAgICAgICAgIHNlbGYuX3d4Q2FjaGVbYXBwSWRdID0gZGF0YTsKICAgICAgICB9OwoKICAgICAgICB2YXIgX3JlZiA9IHNlbGYub3B0aW9ucy5nZXRTaWduYXR1cmVJbnRlcmZhY2UgfHwgZGVmYXVsdEdldFNpZ25hdHVyZUludGVyZmFjZSwKICAgICAgICAgICAgdXJsID0gX3JlZi51cmwsCiAgICAgICAgICAgIG1ldGhvZCA9IF9yZWYubWV0aG9kLAogICAgICAgICAgICBfcmVmJG9wdGlvbk9iaiA9IF9yZWYub3B0aW9uT2JqLAogICAgICAgICAgICBvcHRpb25PYmogPSBfcmVmJG9wdGlvbk9iaiA9PT0gdm9pZCAwID8ge30gOiBfcmVmJG9wdGlvbk9iaiwKICAgICAgICAgICAgcHJvbWlzZUZ1bmMgPSBfcmVmLnByb21pc2VGdW5jOwoKICAgICAgICBpZiAocHJvbWlzZUZ1bmMgJiYgdHlwZW9mIHByb21pc2VGdW5jID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAvLyDnm7TmjqXkvKDlpITnkIblh73mlbAKICAgICAgICAgIHByb21pc2VGdW5jKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIHN1Y2Nlc3NDYihyZXMpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChtZXRob2QgPT09ICdHRVQnKSB7CiAgICAgICAgICAvLyBnZXQg5pa55byP6K+35rGCCiAgICAgICAgICBmZXRjaCh1cmwsIF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICBtZXRob2Q6IG1ldGhvZAogICAgICAgICAgfSwgb3B0aW9uT2JqKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBzdWNjZXNzQ2IocmVzKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAoMCwgX2xvYWRqcy5kZWZhdWx0KSh7CiAgICAgICAgICAgIHVybDogcG9XeEpzb25wLAogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgYXBwX2lkOiBhcHBJZCwKICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgICAgICAgICAgdXJsOiBlbmNvZGUoZGVmYXVsdExpbmspLAogICAgICAgICAgICAgIGNhbGxiYWNrOiAnPycsCiAgICAgICAgICAgICAgdHM6IERhdGUubm93KCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhfcmVmMikgewogICAgICAgICAgICAgIHZhciBlcnJubyA9IF9yZWYyLmVycm5vLAogICAgICAgICAgICAgICAgICBfcmVmMiRkYXRhID0gX3JlZjIuZGF0YSwKICAgICAgICAgICAgICAgICAgZGF0YSA9IF9yZWYyJGRhdGEgPT09IHZvaWQgMCA/IHt9IDogX3JlZjIkZGF0YSwKICAgICAgICAgICAgICAgICAgZXJybXNnID0gX3JlZjIuZXJybXNnOwogICAgICAgICAgICAgIHN1Y2Nlc3NDYih7CiAgICAgICAgICAgICAgICBlcnJubzogZXJybm8sCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgZXJybXNnOiBlcnJtc2cKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHNlbGYubG9nKCdhcHBJZCBpcyBlbXB0eScpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiYm94IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBib3goKSB7CiAgICAgIC8vIOWkhOS6juaJi+eZvueOr+WigwogICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9uczsKICAgICAgdmFyIGxpbmtVcmwgPSBvcHRpb25zLmxpbmtVcmwsCiAgICAgICAgICBiZGJveCA9IG9wdGlvbnMuYmRib3g7CiAgICAgIHZhciBzb3VyY2UgPSBiZGJveC5zb3VyY2U7CgogICAgICBpZiAoIXNvdXJjZSkgewogICAgICAgIHNlbmRFcnJvckxvZygnbm9fYmRib3hfc291cmNlJywgZGVmYXVsdExpbmspOwogICAgICAgIHRoaXMubG9nKCfkvb/nlKjmiYvnmb7liIbkuqvlv4XpobvphY3nva4gc291cmNlIOWPguaVsCcpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgdHlwZTogJ3VybCcsCiAgICAgICAgbWVkaWFUeXBlOiAnYWxsJywKICAgICAgICBsaW5rVXJsOiBsaW5rVXJsLAogICAgICAgIHNvdXJjZTogc291cmNlCiAgICAgIH07CgogICAgICBmb3IgKHZhciBpIGluIG9wdGlvbnMpIHsKICAgICAgICBpZiAoaSAhPT0gJ2JkYm94JykgewogICAgICAgICAgZGF0YVtpXSA9IG9wdGlvbnNbaV07CiAgICAgICAgfQogICAgICB9CgogICAgICB3aW5kb3cuQm94U2hhcmVEYXRhID0gewogICAgICAgIG9wdGlvbnM6IGRhdGEsCiAgICAgICAgc3VjY2Vzc2NhbGxiYWNrOiB0aGlzLnN1Y2Nlc3NDYWxsYmFjaywKICAgICAgICBlcnJvcmNhbGxiYWNrOiB0aGlzLmVycm9yQ2FsbGJhY2sKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwoKICAgICAgaWYgKCgwLCBfdHlwZW9mMi5kZWZhdWx0KShvcHRpb25zKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICBmb3IgKHZhciBpIGluIG9wdGlvbnMpIHsKICAgICAgICAgIHRoaXMub3B0aW9uc1tpXSA9IG9wdGlvbnNbaV07CiAgICAgICAgfQoKICAgICAgICBpZiAob3B0aW9ucy5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLnN1Y2Nlc3NDYWxsYmFjayA9IGdldENhbGxiYWNrTmFtZShvcHRpb25zLnN1Y2Nlc3MpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG9wdGlvbnMuZXJyb3IpIHsKICAgICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjayA9IGdldENhbGxiYWNrTmFtZShvcHRpb25zLmVycm9yKTsKICAgICAgICB9CgogICAgICAgIGlmICgoMCwgX2RldGVjdC5pc1dlaXhpbikoKSkgewogICAgICAgICAgdGhpcy53ZWl4aW4oKTsKICAgICAgICB9IGVsc2UgaWYgKCgwLCBfZGV0ZWN0LmlzQm94KSgpIHx8ICgwLCBfaXNNYXRyaXguZGVmYXVsdCkoKSkgewogICAgICAgICAgdGhpcy5ib3goKTsKICAgICAgICB9IGVsc2UgaWYgKCgwLCBfZGV0ZWN0LmlzUVEpKCkpIHsKICAgICAgICAgIHRoaXMucXEoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9XSk7CiAgcmV0dXJuIFNoYXJlQ29uZmlnOwp9KCk7CgpleHBvcnRzLlNoYXJlQ29uZmlnID0gU2hhcmVDb25maWc7CgpmdW5jdGlvbiBnZXRMb2dnZXIoZGVidWcpIHsKICBpZiAoZGVidWcgPT09ICdhbGVydCcpIHsKICAgIHJldHVybiBhbGVydDsKICB9IGVsc2UgaWYgKGRlYnVnID09PSBmYWxzZSkgewogICAgcmV0dXJuIGVtcHR5Rm47CiAgfSBlbHNlIGlmICgoMCwgX3R5cGUuaXNUeXBlKShkZWJ1ZywgJ2Z1bmN0aW9uJykpIHsKICAgIHJldHVybiBkZWJ1ZzsKICB9IGVsc2UgewogICAgcmV0dXJuIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgY29uc29sZS5sb2coJyVjW3NoYXJlXScsICdjb2xvcjpyZWQ7YmFja2dyb3VuZDp5ZWxsb3cnLCBtc2cpOwogICAgfTsKICB9Cn0KLyoqCiAqIEBsaW5rIGh0dHA6Ly9pY29kZS5iYWlkdS5jb20vcmVwb3MvYmFpZHUvc2VhcmNoYm94LWZlL2NvbW1vbi90cmVlL21hc3RlcjpvcGVuanMvc2hhcmVDb25maWcvCiAqLwoKCnZhciBfZGVmYXVsdCA9IGZ1bmN0aW9uIF9kZWZhdWx0KG9wdGlvbnMsIHN1Y2Nlc3MsIGVycm9yKSB7CiAgcmV0dXJuIG5ldyBTaGFyZUNvbmZpZyhvcHRpb25zLCBzdWNjZXNzLCBlcnJvcik7Cn07CgpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"sources":["/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/xbox-share/index.js"],"names":["doc","document","protocol","location","weixinjs","getCustomURL","qzonejs","poWxJsonp","emptyFn","defaultLink","href","tcReportUrl","defautTitle","defaultDesc","defaultIcon","defaultGetSignatureInterface","url","method","optionObj","promiseFunc","indexOf","encode","str","encodeURIComponent","stringify","json","useEncode","JSON","getShareImg","callback","defaultUrl","imgsOfPage","getElementsByTagName","index","item","length","src","newImg","createElement","onload","width","height","setTimeout","sendErrorLog","evt","msg","Math","random","pageId","tcboxUrl","appid","dataid","cateid","actionid","actiontype","actiondata","type","timestamp","Date","now","content","from","page_id","logtype","img","Image","onerror","onabort","getElementText","elem","nodeType","innerText","replace","getCallbackName","name","args","fn","find","window","ShareConfig","options","debug","channel","title","titleDefault","linkUrl","contentDefault","iconUrl","iconUrlDefault","bdbox","wx","appId","jsApiList","customWeixinjs","customQzonejs","getSignatureInterface","success","error","successCallback","errorCallback","log","getLogger","_wxCache","useWeixinCache","slice","isGetImgCalled","result","weixin","setShareInfo","qq","box","_getWeixinSignature","data","summary","pic","WXconfig","swapTitleInWX","nonceStr","signature","wechat","concat","cancel","config","configData","desc","link","imgUrl","ready","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","cache","_now","self","successCb","info","errno","errmsg","then","res","fetch","response","app_id","ts","source","mediaType","i","BoxShareData","successcallback","errorcallback","alert","console"],"mappings":"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","sourcesContent":["/**\n * 通用分享，支持二次分享，原来 shareConfig 迁移\n * @link http://icode.baidu.com/repos/baidu/searchbox-fe/common/tree/master:openjs/shareConfig/\n * @file Created on Thu Nov 22 2018\n * @author wangyongqing <wangyongqing01@baidu.com>\n */\n\nimport {isQQ, isWeixin, isBox} from '@baidu/xbox/browser/detect';\nimport isMatrix from '@baidu/xbox/is-matrix';\nimport guid from '@baidu/xbox/guid';\nimport loadjs from '@baidu/xbox/browser/loadjs';\nimport {isType} from '@baidu/xbox/type';\nconst doc = document;\nconst protocol = location.protocol !== 'https:' ? 'http:' : 'https:';\n\nconst weixinjs = getCustomURL('//res.wx.qq.com/open/js/jweixin-1.4.0.js');\nconst qzonejs = getCustomURL('//qzonestyle.gtimg.cn/qzone/qzact/common/share/share.js');\nconst poWxJsonp = getCustomURL('//po.baidu.com/api/wechat/token.jsonp');\nconst emptyFn = () => {};\nconst defaultLink = location.href;\nconst tcReportUrl = getCustomURL('//mbd.baidu.com/tcbox');\nconst defautTitle = '百度App';\nconst defaultDesc = '百度App';\nconst defaultIcon = 'https://b.bdstatic.com/searchbox/icms/searchbox/img/po/act/newuserredpack/box_logo.png';\nconst defaultGetSignatureInterface = {\n    url: poWxJsonp,\n    method: 'jsonp', // 只支持get和jsonp\n    optionObj: {},\n    promiseFunc: null\n};\n\nfunction getCustomURL(url) {\n    if (url.indexOf('//') === 0) {\n        return `${protocol}${url}`;\n    }\n    return url;\n}\nconst encode = str => encodeURIComponent(str);\nconst stringify = (json, useEncode) => {\n    if (!isType(json, 'string')) {\n        json = JSON.stringify(json);\n    }\n    if (useEncode) {\n        json = encode(json);\n    }\n    return json;\n};\n// 获取页面上大于 290 * 290 的图片\nfunction getShareImg(callback, defaultUrl) {\n    // 获取页面的图片\n    let imgsOfPage = doc.getElementsByTagName('img');\n    let index;\n    let item;\n    let length = imgsOfPage.length;\n    // 只取前10个图片，多了忽略\n    length = length <= 10 ? length : 10;\n    // 遍历\n    for (index = 0; index < length; index++) {\n        item = imgsOfPage[index];\n        (src => {\n            let newImg = doc.createElement('img');\n            newImg.onload = () => {\n                if (newImg.width > 290 && newImg.height > 290) {\n                    callback(src);\n                }\n                newImg = null;\n            };\n            newImg.src = src;\n        })(item.src);\n    }\n    // 1s 之后还没搞定，则返回默认值\n    setTimeout(() => {\n        callback(defaultUrl);\n    }, 1e3);\n}\n\n// ------------------------------------- 错误打点 -------------------------------------\nfunction sendErrorLog(evt, msg) {\n    if (Math.random() <= 0.95 && defaultLink.indexOf('share_config_random=1') < 0) {\n        // 抽样 0.05 概率\n        return;\n    }\n    if (!evt || !msg) {\n        return;\n    }\n    msg = encode(msg);\n    // 特定的 pageid\n    const pageId = '300_001';\n    // 往 tcbox 打点\n    /* eslint-disable operator-linebreak */\n    const tcboxUrl =\n        `${tcReportUrl}?service=bdbox&action=pblog&data=` +\n        /* eslint-enable operator-linebreak */\n        stringify(\n            {\n                appid: 1,\n                dataid: 2,\n                cateid: 26,\n                actionid: 2,\n                actiontype: '0',\n                actiondata: {\n                    type: 0,\n                    timestamp: Date.now(),\n                    content: {\n                        // 增加个日志标识\n                        from: 'xbox',\n                        page_id: pageId, // eslint-disable-line\n                        logtype: 3,\n                        type: 'c_' + evt,\n                        msg: msg\n                    }\n                }\n            },\n            true\n        );\n    // 往 ispeed 打点 去掉\n    // 发送打点\n    // 开始打点\n    let img = new Image();\n    img.onload = img.onerror = img.onabort = () => {\n        img = null;\n    };\n    img.src = tcboxUrl;\n}\n\n// 获取一个 elem 的 text\nfunction getElementText(elem) {\n    if (isType(elem, 'string')) {\n        return elem;\n    }\n    if (!elem || elem.nodeType !== 1) {\n        return '';\n    }\n    return elem.innerText\n        .replace(/\\n/gim, '')\n        .replace(/^\\s+/, '')\n        .replace(/\\s+$/, '');\n}\nfunction getCallbackName(...args) {\n    let name = '_shareConfigFN_' + guid();\n    let fn = args.find(fn => {\n        if (isType(fn, 'function')) {\n            window[name] = fn;\n            return true;\n        } else if (isType(fn, 'string') && isType(window[fn], 'function')) {\n            name = fn;\n        }\n        return false;\n    });\n    if (fn) {\n        return name;\n    }\n    // 都不存在，则用个空的\n    name = '_shareConfigEmptyFn_';\n    window[name] = emptyFn;\n    return name;\n}\nexport class ShareConfig {\n    constructor(\n        options = {\n            // 是否开启 debug 模式（错误以 alert 形式弹出），默认 false\n            debug: false,\n            // 渠道，用于做统计，必填（请使用个性的名称，避免和其他产品的 channel 重复、导致统计错误）\n            channel: '',\n            // 分享标题，选填，默认为 document.title\n            title: doc.title,\n            // 选填。当 title 参数为空，且抓取不到页面的标题时，则使用该值作为 title\n            titleDefault: doc.title || defautTitle,\n            // 分享连接，选填，默认为 location.href\n            linkUrl: defaultLink,\n            // 分享描述，选填。第一，可直接填写描述字符串；第二，可传入一个 elem 如 document.getElementById('div1')；第三，如果不填，默认为 document.body\n            content: '',\n            // 选填。当 content 未传入字符串，且抓取不到页面内容时，使用该值作为 content\n            contentDefault: defaultDesc,\n            // 分享 icon 图片地址，选填。如果不传入值，会抓取页面第一个大于等于 300 * 300 的图片，1秒之内抓取不到则默认使用手百 logo 图\n            iconUrl: '',\n            // 选填。当 iconUrl 参数为空，且抓取图片失败时，用该值作为 iconUrl\n            iconUrlDefault: defaultIcon,\n            // 手百分享配置（如果使用手百分享，则必填）\n            bdbox: {},\n            // 微信分享配置（如果使用微信分享，则必填），默认百家号公共帐号，安全域 baidu.com\n            wx: {\n                appId: 'wxadc1a0c6b9096e89',\n                jsApiList: []\n            },\n            // 自定义的微信sdk\n            customWeixinjs: weixinjs,\n            // 自定义的qq的sdk\n            customQzonejs: qzonejs,\n            // 自定义获取签名的接口信息\n            getSignatureInterface: defaultGetSignatureInterface,\n            success: emptyFn,\n            error: emptyFn\n        },\n        successCallback,\n        errorCallback\n    ) {\n        this.log = getLogger(options.debug);\n        // 微信 appid cache\n        this._wxCache = {};\n        this.useWeixinCache = options.useWeixinCache || true;\n\n        let content = getElementText(options.content) || getElementText(options.contentDefault);\n        options.content = content.length <= 50 ? content : content.slice(0, 50) + '...';\n        options.title = options.title ? options.title : options.titleDefault;\n        if (options.wx && (!options.wx.appId || options.wx.appId.length < 10)) {\n            options.wx.appId = 'wxadc1a0c6b9096e89';\n        }\n        this.options = options;\n\n        this.successCallback = getCallbackName(successCallback, options.success);\n        this.errorCallback = getCallbackName(errorCallback, options.error);\n\n        // 配置 iconUrl\n        let isGetImgCalled = false;\n        if (!options.iconUrl) {\n            // 无图片，先试图获取图片再执行\n            getShareImg(result => {\n                // 记录状态，不重复调用\n                if (isGetImgCalled) {\n                    return;\n                }\n                isGetImgCalled = true;\n                // 设置 icon 值并执行\n                this.options.iconUrl = result;\n            }, options.iconUrlDefault);\n        }\n        if (isWeixin()) {\n            // 在微信中\n            if (window.wx) {\n                // 已经引入微信 jssdk\n                this.weixin();\n            } else {\n                // 加载微信 jssdk 之后再初始化\n                loadjs({\n                    url: this.options.customWeixinjs || weixinjs,\n                    success: () => {\n                        this.weixin();\n                    },\n                    error: () => {\n                        sendErrorLog('load_wxsdk_err', defaultLink);\n                    }\n                });\n            }\n        } else if (isQQ()) {\n            // 在 QQ 中\n            if (window.setShareInfo) {\n                // 已经引入QQ jssdk\n                this.qq();\n            } else {\n                // 加载 QQ jssdk 之后再初始化\n                loadjs({\n                    url: this.options.customQzonejs || qzonejs,\n                    success: () => {\n                        this.qq();\n                    },\n                    error: () => {\n                        sendErrorLog('load_qqsdk_err', defaultLink);\n                    }\n                });\n            }\n        } else if (isBox() || isMatrix()) {\n            this.box();\n        } else {\n            // this.other();\n        }\n    }\n\n    qq() {\n        // 判断依赖的 sdk 是否加载完\n        if (isQQ() && !window.setShareInfo) {\n            this.log('QQ SDK 未加载完成');\n        }\n        const options = this.options;\n        const {wx = {}, title, content, linkUrl, iconUrl} = options;\n\n        let appId = wx.appId;\n\n        // --------------- QQ分享配置 ---------------\n        this._getWeixinSignature(appId, data => {\n            window.setShareInfo({\n                title,\n                summary: content,\n                pic: iconUrl,\n                url: linkUrl,\n                // 微信权限验证配置信息，若不在微信传播，可忽略\n                WXconfig: {\n                    swapTitleInWX: false, // 是否标题内容互换（仅朋友圈，因朋友圈内只显示标题）\n                    appId, // 公众号的唯一标识\n                    timestamp: data.timestamp, // 生成签名的时间戳\n                    nonceStr: data.nonceStr, // 生成签名的随机串\n                    signature: data.signature // 签名\n                }\n            });\n        });\n    }\n    weixin() {\n        if (isWeixin() && !window.wx) {\n            this.log('微信 SDK 未加载完成');\n        }\n        const options = this.options;\n        const {title, content, linkUrl, iconUrl} = options;\n        let wechat = options.wx;\n        let {appId, jsApiList = []} = wechat;\n        // 初始化微信配置参数\n        jsApiList = jsApiList.concat([\n            'checkJsApi',\n            'onMenuShareTimeline',\n            'onMenuShareAppMessage',\n            'onMenuShareQQ',\n            'onMenuShareWeibo',\n            'onMenuShareQZone'\n        ]);\n        const success = window[this.successCallback];\n        const cancel = window[this.errorCallback];\n\n        // 动态获取微信签名\n        this._getWeixinSignature(appId, data => {\n            // --------------- 微信分享配置 ---------------\n            // 初始化微信jssdk\n            // eslint-disable-next-line\n            wx.config({\n                debug: !!this.options.debug,\n                jsApiList,\n                appId,\n                nonceStr: data.nonceStr,\n                timestamp: data.timestamp,\n                signature: data.signature\n            });\n            // 各个分享的配置\n            const configData = {\n                title,\n                desc: content,\n                link: linkUrl,\n                imgUrl: iconUrl,\n                success,\n                cancel\n            };\n            /* eslint-disable*/\n            wx.ready(() => {\n                // 配置微信朋友圈分享\n                wx.onMenuShareTimeline(configData);\n                // 配置微信消息分享\n                wx.onMenuShareAppMessage(configData);\n                // 配置QQ分享\n                wx.onMenuShareQQ(configData);\n                // 配置腾讯微博\n                wx.onMenuShareWeibo(configData);\n                // 配置QQ空间分享\n                wx.onMenuShareQZone(configData);\n            });\n            /* eslint-enable*/\n        });\n    }\n    // 动态获取微信签名\n    _getWeixinSignature(appId, callback) {\n        const cache = this._wxCache[appId];\n\n        // 缓存20分钟\n        if (cache && cache.signature && cache.nonceStr && Date.now() - cache._now < 20 * 60e3) {\n            callback(cache);\n        }\n        const self = this;\n        if (appId) {\n            let {\n                url,\n                method,\n                optionObj = {},\n                promiseFunc\n            } = self.options.getSignatureInterface || defaultGetSignatureInterface;\n            if (promiseFunc && typeof promiseFunc === 'function') {\n                // 直接传处理函数\n                promiseFunc().then(res => {\n                    successCb(res);\n                });\n            } else if (method === 'GET') {\n                // get 方式请求\n                fetch(url, {\n                    method,\n                    ...optionObj\n                }).then(response => response.json())\n                .then(res => {\n                    successCb(res);\n                });\n            } else {\n                loadjs({\n                    url: poWxJsonp,\n                    data: {\n                        app_id: appId, // eslint-disable-line\n                        url: encode(defaultLink),\n                        callback: '?',\n                        ts: Date.now()\n                    },\n                    success: ({errno, data = {}, errmsg}) => {\n                        successCb({errno, data, errmsg});\n                    }\n                });\n            }\n            function successCb(info) {\n                let {errno, data = {}, errmsg} = info;\n                if (+errno !== 0 || !data.signature) {\n                    sendErrorLog('wx_gettoken_err', defaultLink);\n                    self.log('获取签名的接口错误：' + errmsg);\n                    return;\n                }\n                callback(data);\n                data._now = Date.now();\n                self._wxCache[appId] = data;\n            }\n        } else {\n            self.log('appId is empty');\n        }\n    }\n    box() {\n        // 处于手百环境\n        const options = this.options;\n        let {linkUrl, bdbox} = options;\n        let {source} = bdbox;\n        if (!source) {\n            sendErrorLog('no_bdbox_source', defaultLink);\n            this.log('使用手百分享必须配置 source 参数');\n            return;\n        }\n        const data = {\n            type: 'url',\n            mediaType: 'all',\n            linkUrl,\n            source\n        };\n        for (let i in options) {\n            if (i !== 'bdbox') {\n                data[i] = options[i];\n            }\n        }\n\n        window.BoxShareData = {\n            options: data,\n            successcallback: this.successCallback,\n            errorcallback: this.errorCallback\n        };\n    }\n    update(options = {}) {\n        if (typeof options === 'object') {\n            for (let i in options) {\n                this.options[i] = options[i];\n            }\n            if (options.success) {\n                this.successCallback = getCallbackName(options.success);\n            }\n            if (options.error) {\n                this.errorCallback = getCallbackName(options.error);\n            }\n\n            if (isWeixin()) {\n                this.weixin();\n            } else if (isBox() || isMatrix()) {\n                this.box();\n            } else if (isQQ()) {\n                this.qq();\n            }\n        }\n    }\n}\n\nfunction getLogger(debug) {\n    if (debug === 'alert') {\n        return alert;\n    } else if (debug === false) {\n        return emptyFn;\n    } else if (isType(debug, 'function')) {\n        return debug;\n    } else {\n        return msg => {\n            console.log('%c[share]', 'color:red;background:yellow', msg);\n        };\n    }\n}\n/**\n * @link http://icode.baidu.com/repos/baidu/searchbox-fe/common/tree/master:openjs/shareConfig/\n */\nexport default (options, success, error) => new ShareConfig(options, success, error);\n"]}]}