{"remainingRequest":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js??ref--1-2!/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/auc-base/viewport.js","dependencies":[{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/auc-base/viewport.js","mtime":1696919503890},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/san-hot-loader/index.js","mtime":1696919525187},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/cache-loader/dist/cjs.js","mtime":1696919513896},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js","mtime":1696919524615}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmdldFNjcm9sbEhlaWdodCA9IGdldFNjcm9sbEhlaWdodDsKZXhwb3J0cy5nZXRQYWdlV2lkdGggPSBnZXRQYWdlV2lkdGg7CmV4cG9ydHMuZ2V0UGFnZUhlaWdodCA9IGdldFBhZ2VIZWlnaHQ7CmV4cG9ydHMuZ2V0Vmlld0hlaWdodCA9IGdldFZpZXdIZWlnaHQ7CmV4cG9ydHMuZ2V0Vmlld1dpZHRoID0gZ2V0Vmlld1dpZHRoOwpleHBvcnRzLmlzU2Nyb2xsQm90dG9tID0gaXNTY3JvbGxCb3R0b207CmV4cG9ydHMuaW5WaWV3ID0gaW5WaWV3OwpleHBvcnRzLmdldFZpZXdQb3J0ID0gZ2V0Vmlld1BvcnQ7Cgp2YXIgX2lzID0gcmVxdWlyZSgiQGJhaWR1L3hib3gvaXMiKTsKCnZhciBfZW52ID0gcmVxdWlyZSgiLi9lbnYiKTsKCnZhciBfZ2xvYmFsID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2dsb2JhbCIpKTsKCi8qKgogKiBAZmlsZSB2aWV3cG9ydCDnm7jlhbPmlrnms5UKICogQGF1dGhvciBsaWhhaXpodQogKi8KZnVuY3Rpb24gZ2V0U2Nyb2xsSGVpZ2h0KCkgewogIHJldHVybiBfZ2xvYmFsLmRlZmF1bHQucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCAwOwp9CgpmdW5jdGlvbiBnZXRQYWdlV2lkdGgoKSB7CiAgcmV0dXJuIE1hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsV2lkdGgsIGRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGgpOwp9CgpmdW5jdGlvbiBnZXRQYWdlSGVpZ2h0KCkgewogIHJldHVybiBNYXRoLm1heChkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCwgZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQpOwp9CgpmdW5jdGlvbiBnZXRWaWV3SGVpZ2h0KCkgewogIHJldHVybiBfZ2xvYmFsLmRlZmF1bHQuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCB8fCAwOwp9CgpmdW5jdGlvbiBnZXRWaWV3V2lkdGgoKSB7CiAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoIHx8IDA7Cn0KCmZ1bmN0aW9uIGlzU2Nyb2xsQm90dG9tKCkgewogIHZhciB2aWV3SGVpZ2h0ID0gZ2V0Vmlld0hlaWdodCgpOwogIHZhciBzY3JvbGxIZWlnaHQgPSBnZXRTY3JvbGxIZWlnaHQoKTsKICB2YXIgcGFnZUhlaWdodCA9IGdldFBhZ2VIZWlnaHQoKTsKICByZXR1cm4gdmlld0hlaWdodCArIHNjcm9sbEhlaWdodCA+PSBwYWdlSGVpZ2h0Owp9Ci8qKgogKiDliKTmlq1lbGVtZW505piv5ZCm5Zyo6KeG56qX5YaFCiAqIEBwYXJhbSB7RE9NfSByZWYgRE9NIGVsZW1lbnQKICogQHBhY2thZ2Uge251bWJlcn0gb2Zmc2V0IOWBj+enu+mHjwogKiBAcmV0dXJucyB7Ym9vbGVhbn0g5piv5ZCm5Zyo6KeG56qX5YaFCiAqLwoKCmZ1bmN0aW9uIGluVmlldyhyZWYsIG9mZnNldCkgewogIGlmICghcmVmKSB7CiAgICByZXR1cm47CiAgfQoKICB2YXIgX3JlZiRnZXRCb3VuZGluZ0NsaWVuID0gcmVmLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLAogICAgICB0b3AgPSBfcmVmJGdldEJvdW5kaW5nQ2xpZW4udG9wLAogICAgICBib3R0b20gPSBfcmVmJGdldEJvdW5kaW5nQ2xpZW4uYm90dG9tOwoKICB2YXIgdmlld0hlaWdodCA9IGdldFZpZXdIZWlnaHQoKTsKICByZXR1cm4gdG9wIC0gb2Zmc2V0IDwgdmlld0hlaWdodCAmJiBib3R0b20gKyBvZmZzZXQgPiAwOwp9Ci8qKgogKiDmoLnmja7mmK/lkKblnKhpZnJhbWXlhoXmnaXojrflj5bkuI3lkIznmoR2aWV3cG9ydAogKiAqLwoKCmZ1bmN0aW9uIGdldFZpZXdQb3J0KCkgewogIGlmIChfZW52LmVudi5pc1NTUikgewogICAgcmV0dXJuIHt9OwogIH0KCiAgaWYgKF9nbG9iYWwuZGVmYXVsdC5zZWxmICE9PSBfZ2xvYmFsLmRlZmF1bHQudG9wICYmIF9lbnYuZW52LmlzSU9TKSB7CiAgICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7CiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUub3ZlcmZsb3dZID0gJ2F1dG8nOwogICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJzsKICAgIGJvZHkuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnOwogICAgYm9keS5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7CiAgICBib2R5LnN0eWxlLm92ZXJmbG93WSA9ICdzY3JvbGwnOwogICAgYm9keS5zdHlsZS53ZWJraXRPdmVyZmxvd1Njcm9sbGluZyA9ICd0b3VjaCc7CiAgICAvKioKICAgICAqIFdoZW4gcGFnZSBpbiBJT1MtSUZSQU1FLCBzY3JvbGwgYW5kIHJlY3QgaGF2ZSBzb21lIGJ1Z3MuCiAgICAgKiBTbyB3ZSBuZWVkIGFkZCBzb21lIGVsZW1lbnRzIHRvIHNvbHZlIHRoaXMgcHJvYmxlbS4KICAgICAqIGNvcHkgZnJvbSBtaXAKICAgICAqLwoKICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBlbGVtZW50LnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3dpZHRoOjA7aGVpZ2h0OjA7dmlzaWJpbGl0eTpoaWRkZW47JzsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbWVudCk7CiAgICByZXR1cm4gewogICAgICByZWY6IGJvZHksCiAgICAgIHdpZHRoOiBnZXRQYWdlV2lkdGgoKSwKICAgICAgaGVpZ2h0OiBnZXRQYWdlSGVpZ2h0KCksCiAgICAgIHNjcm9sbFRvcDogZnVuY3Rpb24gc2Nyb2xsVG9wKHRvcCkgewogICAgICAgIGlmICgoMCwgX2lzLmlzTnVtYmVyKSh0b3ApKSB7CiAgICAgICAgICBib2R5LnNjcm9sbFRvcCA9IHRvcDsKICAgICAgICAgIHJldHVybiB0b3A7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgtZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApOwogICAgICB9CiAgICB9OwogIH0KCiAgcmV0dXJuIHsKICAgIHJlZjogX2dsb2JhbC5kZWZhdWx0LAogICAgaGVpZ2h0OiBnZXRWaWV3SGVpZ2h0KCksCiAgICB3aWR0aDogZ2V0Vmlld1dpZHRoKCksCiAgICBzY3JvbGxUb3A6IGZ1bmN0aW9uIHNjcm9sbFRvcCh0b3ApIHsKICAgICAgaWYgKCgwLCBfaXMuaXNOdW1iZXIpKHRvcCkgJiYgdHlwZW9mIF9nbG9iYWwuZGVmYXVsdC5zY3JvbGxUbyA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIF9nbG9iYWwuZGVmYXVsdC5zY3JvbGxUbygwLCB0b3ApOwoKICAgICAgICByZXR1cm4gdG9wOwogICAgICB9CgogICAgICByZXR1cm4gX2dsb2JhbC5kZWZhdWx0LnNjcm9sbFkgfHwgMDsKICAgIH0KICB9Owp9"},{"version":3,"sources":["/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/auc-base/viewport.js"],"names":["getScrollHeight","global","pageYOffset","document","documentElement","scrollTop","body","getPageWidth","Math","max","scrollWidth","offsetWidth","getPageHeight","scrollHeight","offsetHeight","getViewHeight","innerHeight","clientHeight","getViewWidth","clientWidth","isScrollBottom","viewHeight","pageHeight","inView","ref","offset","getBoundingClientRect","top","bottom","getViewPort","env","isSSR","self","isIOS","style","overflowY","height","position","webkitOverflowScrolling","element","createElement","cssText","appendChild","width","round","scrollTo","scrollY"],"mappings":";;;;;;;;;;;;;;;;AAKA;;AACA;;AACA;;AAPA;AACA;AACA;AACA;AAMO,SAASA,eAAT,GAA2B;AAC9B,SAAOC,gBAAOC,WAAP,IAAsBC,QAAQ,CAACC,eAAT,CAAyBC,SAA/C,IAA4DF,QAAQ,CAACG,IAAT,CAAcD,SAA1E,IAAuF,CAA9F;AACH;;AAEM,SAASE,YAAT,GAAwB;AAC3B,SAAOC,IAAI,CAACC,GAAL,CAASN,QAAQ,CAACG,IAAT,CAAcI,WAAvB,EAAoCP,QAAQ,CAACG,IAAT,CAAcK,WAAlD,CAAP;AACH;;AAEM,SAASC,aAAT,GAAyB;AAC5B,SAAOJ,IAAI,CAACC,GAAL,CAASN,QAAQ,CAACG,IAAT,CAAcO,YAAvB,EAAqCV,QAAQ,CAACG,IAAT,CAAcQ,YAAnD,CAAP;AACH;;AAEM,SAASC,aAAT,GAAyB;AAC5B,SAAOd,gBAAOe,WAAP,IAAsBb,QAAQ,CAACC,eAAT,CAAyBa,YAA/C,IAA+D,CAAtE;AACH;;AAEM,SAASC,YAAT,GAAwB;AAC3B,SAAOf,QAAQ,CAACC,eAAT,CAAyBe,WAAzB,IAAwChB,QAAQ,CAACG,IAAT,CAAca,WAAtD,IAAqE,CAA5E;AACH;;AAEM,SAASC,cAAT,GAA0B;AAC7B,MAAMC,UAAU,GAAGN,aAAa,EAAhC;AACA,MAAMF,YAAY,GAAGb,eAAe,EAApC;AACA,MAAMsB,UAAU,GAAGV,aAAa,EAAhC;AACA,SAAOS,UAAU,GAAGR,YAAb,IAA6BS,UAApC;AACH;AAED;AACA;AACA;AACA;AACA;AACA;;;AACO,SAASC,MAAT,CAAgBC,GAAhB,EAAqBC,MAArB,EAA6B;AAChC,MAAI,CAACD,GAAL,EAAU;AACN;AACH;;AAH+B,8BAIVA,GAAG,CAACE,qBAAJ,EAJU;AAAA,MAIzBC,GAJyB,yBAIzBA,GAJyB;AAAA,MAIpBC,MAJoB,yBAIpBA,MAJoB;;AAKhC,MAAMP,UAAU,GAAGN,aAAa,EAAhC;AACA,SAAOY,GAAG,GAAGF,MAAN,GAAeJ,UAAf,IAA6BO,MAAM,GAAGH,MAAT,GAAkB,CAAtD;AACH;AAED;AACA;AACA;;;AACO,SAASI,WAAT,GAAuB;AAC1B,MAAIC,SAAIC,KAAR,EAAe;AACX,WAAO,EAAP;AACH;;AACD,MAAI9B,gBAAO+B,IAAP,KAAgB/B,gBAAO0B,GAAvB,IAA8BG,SAAIG,KAAtC,EAA6C;AACzC,QAAM3B,IAAI,GAAGH,QAAQ,CAACG,IAAtB;AACAH,IAAAA,QAAQ,CAACC,eAAT,CAAyB8B,KAAzB,CAA+BC,SAA/B,GAA2C,MAA3C;AACAhC,IAAAA,QAAQ,CAACC,eAAT,CAAyB8B,KAAzB,CAA+BE,MAA/B,GAAwC,MAAxC;AACA9B,IAAAA,IAAI,CAAC4B,KAAL,CAAWG,QAAX,GAAsB,UAAtB;AACA/B,IAAAA,IAAI,CAAC4B,KAAL,CAAWE,MAAX,GAAoB,MAApB;AACA9B,IAAAA,IAAI,CAAC4B,KAAL,CAAWC,SAAX,GAAuB,QAAvB;AACA7B,IAAAA,IAAI,CAAC4B,KAAL,CAAWI,uBAAX,GAAqC,OAArC;AAEA;AACR;AACA;AACA;AACA;;AACQ,QAAMC,OAAO,GAAGpC,QAAQ,CAACqC,aAAT,CAAuB,KAAvB,CAAhB;AACAD,IAAAA,OAAO,CAACL,KAAR,CAAcO,OAAd,GAAwB,oEAAxB;AACAtC,IAAAA,QAAQ,CAACG,IAAT,CAAcoC,WAAd,CAA0BH,OAA1B;AAEA,WAAO;AACHf,MAAAA,GAAG,EAAElB,IADF;AAEHqC,MAAAA,KAAK,EAAEpC,YAAY,EAFhB;AAGH6B,MAAAA,MAAM,EAAExB,aAAa,EAHlB;AAIHP,MAAAA,SAJG,qBAIOsB,GAJP,EAIY;AACX,YAAI,kBAASA,GAAT,CAAJ,EAAmB;AACfrB,UAAAA,IAAI,CAACD,SAAL,GAAiBsB,GAAjB;AACA,iBAAOA,GAAP;AACH;;AACD,eAAOnB,IAAI,CAACoC,KAAL,CAAW,CAACL,OAAO,CAACb,qBAAR,GAAgCC,GAA5C,CAAP;AACH;AAVE,KAAP;AAYH;;AACD,SAAO;AACHH,IAAAA,GAAG,EAAEvB,eADF;AAEHmC,IAAAA,MAAM,EAAErB,aAAa,EAFlB;AAGH4B,IAAAA,KAAK,EAAEzB,YAAY,EAHhB;AAIHb,IAAAA,SAJG,qBAIOsB,GAJP,EAIY;AACX,UAAI,kBAASA,GAAT,KAAiB,OAAO1B,gBAAO4C,QAAd,KAA2B,UAAhD,EAA4D;AACxD5C,wBAAO4C,QAAP,CAAgB,CAAhB,EAAmBlB,GAAnB;;AACA,eAAOA,GAAP;AACH;;AACD,aAAO1B,gBAAO6C,OAAP,IAAkB,CAAzB;AACH;AAVE,GAAP;AAYH","sourcesContent":["/**\n * @file viewport 相关方法\n * @author lihaizhu\n */\n\nimport {isNumber} from '@baidu/xbox/is';\nimport {env} from './env';\nimport global from './global';\n\nexport function getScrollHeight() {\n    return global.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n}\n\nexport function getPageWidth() {\n    return Math.max(document.body.scrollWidth, document.body.offsetWidth);\n}\n\nexport function getPageHeight() {\n    return Math.max(document.body.scrollHeight, document.body.offsetHeight);\n}\n\nexport function getViewHeight() {\n    return global.innerHeight || document.documentElement.clientHeight || 0;\n}\n\nexport function getViewWidth() {\n    return document.documentElement.clientWidth || document.body.clientWidth || 0;\n}\n\nexport function isScrollBottom() {\n    const viewHeight = getViewHeight();\n    const scrollHeight = getScrollHeight();\n    const pageHeight = getPageHeight();\n    return viewHeight + scrollHeight >= pageHeight;\n}\n\n/**\n * 判断element是否在视窗内\n * @param {DOM} ref DOM element\n * @package {number} offset 偏移量\n * @returns {boolean} 是否在视窗内\n */\nexport function inView(ref, offset) {\n    if (!ref) {\n        return;\n    }\n    const {top, bottom} = ref.getBoundingClientRect();\n    const viewHeight = getViewHeight();\n    return top - offset < viewHeight && bottom + offset > 0;\n}\n\n/**\n * 根据是否在iframe内来获取不同的viewport\n * */\nexport function getViewPort() {\n    if (env.isSSR) {\n        return {};\n    }\n    if (global.self !== global.top && env.isIOS) {\n        const body = document.body;\n        document.documentElement.style.overflowY = 'auto';\n        document.documentElement.style.height = '100%';\n        body.style.position = 'relative';\n        body.style.height = '100%';\n        body.style.overflowY = 'scroll';\n        body.style.webkitOverflowScrolling = 'touch';\n\n        /**\n         * When page in IOS-IFRAME, scroll and rect have some bugs.\n         * So we need add some elements to solve this problem.\n         * copy from mip\n         */\n        const element = document.createElement('div');\n        element.style.cssText = 'position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;';\n        document.body.appendChild(element);\n\n        return {\n            ref: body,\n            width: getPageWidth(),\n            height: getPageHeight(),\n            scrollTop(top) {\n                if (isNumber(top)) {\n                    body.scrollTop = top;\n                    return top;\n                }\n                return Math.round(-element.getBoundingClientRect().top);\n            }\n        };\n    }\n    return {\n        ref: global,\n        height: getViewHeight(),\n        width: getViewWidth(),\n        scrollTop(top) {\n            if (isNumber(top) && typeof global.scrollTo === 'function') {\n                global.scrollTo(0, top);\n                return top;\n            }\n            return global.scrollY || 0;\n        }\n    };\n}\n"]}]}