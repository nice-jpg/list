{"remainingRequest":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js??ref--1-2!/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/xbox/na/invoke.js","dependencies":[{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/xbox/na/invoke.js","mtime":1696919504571},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/san-hot-loader/index.js","mtime":1696919525187},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/cache-loader/dist/cjs.js","mtime":1696919513896},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js","mtime":1696919524615}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuYXNzaWduIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCIpOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmlzTWF5YmVCb3ggPSBpc01heWJlQm94OwpleHBvcnRzLmpzb24ycGFyYW1zID0ganNvbjJwYXJhbXM7CmV4cG9ydHMuZGVmYXVsdCA9IGludm9rZTsKZXhwb3J0cy5pbnZva2VQID0gaW52b2tlUDsKZXhwb3J0cy54UmVnaXN0ZXIgPSB4UmVnaXN0ZXI7Cgp2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSIpKTsKCnZhciBfc2xpY2VkVG9BcnJheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2xpY2VkVG9BcnJheSIpKTsKCnZhciBfdHlwZW9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2YiKSk7Cgp2YXIgX3ZlcnNpb25fY29tcGFyZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi4vdmVyc2lvbl9jb21wYXJlIikpOwoKdmFyIF9nZXRCb3hWZXJzaW9uID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuLi9nZXQtYm94LXZlcnNpb24iKSk7Cgp2YXIgX2lzQm94ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuLi9pcy1ib3giKSk7Cgp2YXIgX2lzTWF0cml4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuLi9pcy1tYXRyaXgiKSk7Cgp2YXIgX3R5cGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4uL3R5cGUiKSk7Cgp2YXIgX2lvcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9pb3MiKSk7Cgp2YXIgX2FuZHJvaWQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vYW5kcm9pZCIpKTsKCnZhciBfanNvbjJxdWVyeSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi4vanNvbjJxdWVyeSIpKTsKCnZhciBfb3MgPSByZXF1aXJlKCIuLi9vcyIpOwoKdmFyIF9nZXRCb3hOYW1lID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuLi9nZXQtYm94LW5hbWUiKSk7Cgp2YXIgX2dldE1hdHJpeFNjaGVtYSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi4vZ2V0LW1hdHJpeC1zY2hlbWEiKSk7Cgp2YXIgX3N0cmluZ2lmeSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi4vc3RyaW5naWZ5IikpOwoKdmFyIF9nZXRHbG9iYWxGdW5jID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuLi9nZXQtZ2xvYmFsLWZ1bmMiKSk7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCnZhciBOT1RfSU5fQk9YID0gewogIGVyckNvZGU6IDkwMiwKICBlcnJNc2c6ICdBUFDlpJbml6Dms5XosIPnlKjnq6/og73lipsnCn07CnZhciBDT01NQU5EX05PVF9FWElTVCA9IHsKICBlcnJDb2RlOiA5MDEsCiAgZXJyTXNnOiAn5LiN5a2Y5Zyo5q2k56uv6IO95YqbJwp9OyAvLyBjb25zdCBDT01NQU5EX0ZBSUwgPSB7Ci8vICAgICBlcnJDb2RlOiA5MDMsCi8vICAgICBlcnJNc2c6ICfnq6/og73lipvosIPnlKjlpLHotKUnCi8vIH07Ci8vIGNvbnN0IENPTU1BTkRfU1VDQ0VTUyA9IHsKLy8gICAgIGVyckNvZGU6IDAsCi8vICAgICBlcnJNc2c6ICfosIPnlKjmiJDlip8nCi8vIH07CgovKioKICog5oiW5Yik5pat5piv5ZCm5piv5p+Q5LiqIGJveAogKiBAcGFyYW0ge3N0cmluZ30gc3VibmFtZXMgLSBsaXRlL2luZm/nu4TlkIjvvIxbLF3pmpTlvIAKICogQHBhcmFtIHsqfSB1YSAtIHVhCiAqLwoKZnVuY3Rpb24gaXNNYXliZUJveChzdWJuYW1lcywgdWEpIHsKICBzdWJuYW1lcyA9IHN1Ym5hbWVzLnNwbGl0KCcsJyk7CiAgdmFyIGxlbiA9IHN1Ym5hbWVzLmxlbmd0aDsKCiAgd2hpbGUgKGxlbi0tKSB7CiAgICBpZiAoKDAsIF9pc0JveC5kZWZhdWx0KShzdWJuYW1lc1tsZW5dLCB1YSkgfHwgKDAsIF9pc01hdHJpeC5kZWZhdWx0KShzdWJuYW1lc1tsZW5dLCB1YSkpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfQoKICByZXR1cm4gZmFsc2U7Cn0KLyoqCiAqIEBmaWxlICDlsIYganNvbiDovazmiJAgcGFyYW1zIOWtl+espuS4sgogKiBAYXV0aG9yIHdhbmd5b25ncWluZyA8d2FuZ3lvbmdxaW5nMDFAYmFpZHUuY29tPgogKi8KCi8qKgogKiDnu4/luLjkvJrlh7rnjrAgcGFyYW1zIOeahCBzdHJpbmdpZnkg5LmL5ZCO5YaNZW5jb2RlIOeahOaDheWGte+8jOi/memHjOe7n+S4gOWkhOeQhuS6hgogKiDov5jlpITnkIbkuoblh73mlbDpl67popjvvIzlj6/ku6Xnm7TmjqXkvKDlhaXljL/lkI3lh73mlbDljbPlj6/oh6rliqjovazkuLrlhajlsYDlh73mlbAKICogQGZ1bmN0aW9uIGpzb24ycGFyYW1zCiAqIEBwYXJhbSB7T2JqZWN0fSBqc29uIC0g5Y+C5pWwCiAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5jb2RlIC0g5piv5ZCmZW5jb2RlCiAqIEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UgLSBQcm9taXNlCiAqLwoKCmZ1bmN0aW9uIGpzb24ycGFyYW1zKGpzb24pIHsKICB2YXIgZW5jb2RlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0cnVlOwoKICBpZiAoKDAsIF90eXBlLmRlZmF1bHQpKGpzb24pID09PSAnc3RyaW5nJykgewogICAgcmV0dXJuIGpzb247CiAgfQoKICB2YXIgcnMgPSB7fTsKCiAgZm9yICh2YXIgaSBpbiBqc29uKSB7CiAgICB2YXIgaiA9IGpzb25baV07CgogICAgc3dpdGNoICgoMCwgX3R5cGUuZGVmYXVsdCkoaikpIHsKICAgICAgY2FzZSAnYXJyYXknOgogICAgICAgIGogPSBtYXBBcnJheShqKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2Z1bmN0aW9uJzoKICAgICAgICBqID0gKDAsIF9nZXRHbG9iYWxGdW5jLmRlZmF1bHQpKGopOwogICAgICAgIGJyZWFrOwogICAgfQoKICAgIHJzW2ldID0gajsKICB9CgogIHJldHVybiAoMCwgX3N0cmluZ2lmeS5kZWZhdWx0KShycywgZW5jb2RlKTsKfQoKZnVuY3Rpb24gbWFwQXJyYXkoYXJncykgewogIHJldHVybiBhcmdzLm1hcChmdW5jdGlvbiAoYXJnKSB7CiAgICBzd2l0Y2ggKCgwLCBfdHlwZS5kZWZhdWx0KShhcmcpKSB7CiAgICAgIGNhc2UgJ2Z1bmN0aW9uJzoKICAgICAgICByZXR1cm4gKDAsIF9nZXRHbG9iYWxGdW5jLmRlZmF1bHQpKGFyZyk7CgogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBhcmc7CiAgICB9CiAgfSk7Cn0KLyoqCiAqIOaWsOiwg+i1t+iDveWKm++8jOWujOWFqCBzY2hlbWUg5b2i5byP77yM5pSv5oyBIGlvcyDlkozlronljZPnm7jlkIzmiJbogIXkuI3lkIzvvIwKICog5LiN5ZCM5pe277yM5YWI5LygIGFuZHJvaWTlkI4gaW9z77yI6aaW5a2X5q+N5o6S5bqP77yJCiAqIOW/hemhuyBiYWlkdWJveGFwcCDlvIDlpLQKICogQGZ1bmN0aW9uIGludm9rZQogKiBAcGFyYW0ge3N0cmluZ30gYXJnczAgLSDlronljZPosIPotbcgc2NoZW1hCiAqIEBwYXJhbSB7c3RyaW5nfSBhcmdzMSAtIGlvc+iwg+i1tyBzY2hlbWHvvIzlpoLmnpznm7jlkIznnIHnlaXmlLnlj4LmlbAKICovCgoKZnVuY3Rpb24gaW52b2tlKCkgewogIGlmICghKDAsIF9pc0JveC5kZWZhdWx0KSgpICYmICEoMCwgX2lzTWF0cml4LmRlZmF1bHQpKCkpIHsKICAgIHJldHVybjsKICB9CgogIHZhciBhcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1swXTsgLy8g5a6J5Y2TIGlvcyDlhaznlKjkuIDkuKrnm7jlkIznmoQgc2NoZW1lCgogIHZhciBpcyA9IChhcmd1bWVudHMubGVuZ3RoIDw9IDEgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbMV0pID8gYXJndW1lbnRzLmxlbmd0aCA8PSAxID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzFdIDogYXJndW1lbnRzLmxlbmd0aCA8PSAwID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzBdOwoKICBpZiAoKDAsIF9vcy5pc0lPUykoKSAmJiBpcykgewogICAgKDAsIF9pb3MuZGVmYXVsdCkoZ2V0VmFsaWRTY2hlbWUoaXMpKTsKICB9IGVsc2UgaWYgKCgwLCBfb3MuaXNBbmRyb2lkKSgpICYmIGFzKSB7CiAgICAoMCwgX2FuZHJvaWQuZGVmYXVsdCkoZ2V0VmFsaWRTY2hlbWUoYXMpKTsKICB9Cn0KCmZ1bmN0aW9uIGdldFZhbGlkU2NoZW1lKHNjaGVtYSkgewogIC8vIOmDveaYr+S7pSBiYWlkdWJveCDlvIDlpLTljIXmi6zvvIxiYWlkdWJveGFwcCxiYWlkdWJveG1pc3Npb24KICBpZiAoKDAsIF90eXBlLmRlZmF1bHQpKHNjaGVtYSkgPT09ICdzdHJpbmcnICYmIHNjaGVtYS5pbmRleE9mKCdiYWlkdWJveCcpICE9PSAwKSB7CiAgICByZXR1cm4gJ2JhaWR1Ym94YXBwOi8vJyArIHNjaGVtYTsKICB9CgogIHJldHVybiBzY2hlbWE7Cn0KLyoqCiAqIFByb21pc2Ug6LCD6LW35ZG95Luk77yMaG9zdCDlkowgcGFyYW1zIOWIhuW8gOWkhOeQhu+8jOaUr+aMgeWHveaVsOebtOaOpeS8oOWFpQogKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uIC0gc2NoZW1hIGhvc3Qg6YOo5YiGCiAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXMgLSDlj4LmlbAKICogQHBhcmFtIHtzdHJpbmd9IHNjaGVtYUhlYWQgLSBzY2hlbWEg5aS077yM6buY6K6kIGJhaWR1Ym94YXBwCiAqIEByZXR1cm4ge1Byb21pc2V9CiAqLwoKCmZ1bmN0aW9uIGludm9rZVAoYWN0aW9uKSB7CiAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgdmFyIHNjaGVtYUhlYWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZDsKICBzY2hlbWFIZWFkID0gc2NoZW1hSGVhZCB8fCAoMCwgX2dldE1hdHJpeFNjaGVtYS5kZWZhdWx0KSgpOwoKICBpZiAoISgwLCBfaXNCb3guZGVmYXVsdCkoKSAmJiAhKDAsIF9pc01hdHJpeC5kZWZhdWx0KSgpKSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoTk9UX0lOX0JPWCk7CiAgfQoKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgdmFyIHRtcCA9IHBhcmFtcy5wYXJhbXMgfHwge307IC8vIOWkhOeQhiBwYXJhbXMg5bim5pyJIGNhbGxiYWNrIOeahOaDheWGtQoKICAgIHZhciBjYWxsYmFjayA9IHBhcmFtcy5jYWxsYmFjazsgLy8g5Yig6ZmkIGNhbGxiYWNr77yM6Ziy5q2iIGpzb24ycXVlcnkg6KKr5aSE55CG5YiwIHF1ZXJ5IOS4rQoKICAgIGRlbGV0ZSBwYXJhbXMuY2FsbGJhY2s7IC8vIOWwhiBjYWxsYmFjayDmg4XlhrXov5vooYzlpITnkIYKCiAgICB2YXIgZGVmYXVsdENCID0gZnVuY3Rpb24gZGVmYXVsdENCKGQpIHsKICAgICAgaWYgKGNhbGxiYWNrKSB7CiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgY2FsbGJhY2soZCk7CiAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBvcGVyYXRvci1saW5lYnJlYWsgKi8KICAgICAgICBjYWxsYmFjayA9PT0gJ3N0cmluZycgJiYgKHR5cGVvZiB3aW5kb3cgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiAoMCwgX3R5cGVvZjIuZGVmYXVsdCkod2luZG93KSkgPT09ICdvYmplY3QnICYmIHR5cGVvZiB3aW5kb3dbY2FsbGJhY2tdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICB3aW5kb3dbY2FsbGJhY2tdKGQpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICBpZiAoaXNFbXB0eU9iamVjdCh0bXApIHx8IHRtcCA9PT0gJyU3QiU3RCcgfHwgdG1wID09PSAne30nKSB7CiAgICAgIC8vIOWIoOmZpOepuueahHBhcmFtc+WvueixoQogICAgICBkZWxldGUgcGFyYW1zLnBhcmFtczsKICAgIH0gZWxzZSBpZiAoKDAsIF90eXBlLmRlZmF1bHQpKHRtcCkgPT09ICdvYmplY3QnKSB7CiAgICAgIHBhcmFtcy5wYXJhbXMgPSBqc29uMnBhcmFtcyh0bXApOwogICAgfSAvLyDph43mlrDotYvlgLwgY2FsbGJhY2sKCgogICAgcGFyYW1zLmNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2socmVzdWx0KSB7CiAgICAgIHZhciBkYXRhID0gcmVzdWx0OwoKICAgICAgaWYgKCgwLCBfdHlwZS5kZWZhdWx0KShyZXN1bHQpID09PSAnc3RyaW5nJykgewogICAgICAgIHRyeSB7CiAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShyZXN1bHQpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKCtkYXRhLnN0YXR1cyA9PT0gMCkgewogICAgICAgIC8vIOaIkOWKn+WbnuiwgwogICAgICAgIHJlc29sdmUoZGF0YS5kYXRhKTsKICAgICAgICBkZWZhdWx0Q0IoZGF0YS5kYXRhKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8g5aSx6LSl5Zue6LCD77yM5aSx6LSl5Lmf5Zue6LCDIGNhbGxiYWNr77yM57uZ5Ye66ZSZ6K+v56CB55qE5oOF5Ya1CgoKICAgICAgcmVqZWN0KGRhdGEpOwogICAgICBkZWZhdWx0Q0IoZGF0YSk7CiAgICB9OwoKICAgIHZhciBzZWFyY2ggPSAoMCwgX2pzb24ycXVlcnkuZGVmYXVsdCkocGFyYW1zKTsKICAgIHZhciBzY2hlbWEgPSAiIi5jb25jYXQoc2NoZW1hSGVhZCwgIjovLyIpLmNvbmNhdChhY3Rpb24sICI/IikuY29uY2F0KHNlYXJjaCk7CiAgICBpbnZva2Uoc2NoZW1hKTsKICB9KTsKfQovKioKICog5paw54mI5pys55qE5rOo5YaM77yM5Y+q55So5LqO5a6J5Y2T5ZKMIGlvcyDnm7jlkIznmoQgc2NoZW1lIOexu++8jOi/lOWbniBwcm9taXNlCiAqIEBmdW5jdGlvbiB4UmVnaXN0ZXIKICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IHJhbmdlIC0g54mI5pys6IyD5Zu0CiAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb24gLSBhY3Rpb24g6YOo5YiG77yM5Y675o6JIHYg6YOo5YiG77yM5L6L5aaCdjI2L3N3YW7lrp7pmYXkvKDlhaUgc3dhbuOAguOAguOAgiB2eHgg5LmL5ZCO55qECiAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSDlj4LmlbDpg6jliIbvvIzkvovlpoIgcGFyYW1zPXt1cmx977yM5Lyg5YWle3VybH3ljbPlj68KICogQHBhcmFtIHtTdHJpbmd9IHNjaGVtYUhlYWQgLSBzY2hlbWUg5aS0CiAqIEByZXR1cm4ge1Byb21pc2V9CiAqIEBleGFtcGxlCiAqICB4UmVnaXN0ZXIoCiAgICAgICAgewogICAgICAgICAgICBsaXRlOiB7CiAgICAgICAgICAgICAgICB2OiAzNCwKICAgICAgICAgICAgICAgIHZlcnNpb25SYW5nZTogJzMuOScKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWFpbjogewogICAgICAgICAgICAgICAgdjogNDEsCiAgICAgICAgICAgICAgICB2ZXJzaW9uUmFuZ2U6ICcxMS4zLjUnCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgICdhdWRpby9wbGF5U291bmQnLAogICAgICAgIHt1cmx9CiAgICApOwogKi8KCgpmdW5jdGlvbiB4UmVnaXN0ZXIoKSB7CiAgdmFyIHJhbmdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICB2YXIgYWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7CiAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgdmFyIHNjaGVtYUhlYWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6ICgwLCBfZ2V0TWF0cml4U2NoZW1hLmRlZmF1bHQpKCk7CgogIGlmICghKDAsIF9pc0JveC5kZWZhdWx0KSgpICYmICEoMCwgX2lzTWF0cml4LmRlZmF1bHQpKCkpIHsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChOT1RfSU5fQk9YKTsKICB9CgogIHZhciBvc25hbWUgPSAoMCwgX29zLmdldE9TTmFtZSkoKTsKICB2YXIgYm94bmFtZSA9ICgwLCBfZ2V0Qm94TmFtZS5kZWZhdWx0KSgpOyAvLyDkvJjlhYjor7vlj5YgYW5kcm9pZG1pc3Npb24g6L+Z5Liq77yM54S25ZCO5pivIG1pc3Npb24oaW9zK2FuZHJvaWTlhajlubPlj7Ap77yM5pyA5ZCO5Li75p2/IGFuZHJvaWQvaW9zCgogIHZhciBvcHQgPSByYW5nZVsiIi5jb25jYXQob3NuYW1lKS5jb25jYXQoYm94bmFtZSldIHx8IHJhbmdlW2JveG5hbWVdIHx8IHJhbmdlW29zbmFtZV07IC8vIOW/hemhu+imgeaciSB2CgogIGlmIChvcHQgJiYgb3B0LnYpIHsKICAgIHZhciB2ZXJzaW9uID0gKDAsIF9nZXRCb3hWZXJzaW9uLmRlZmF1bHQpKGJveG5hbWUpOwogICAgdmFyIHZlcnNpb25SYW5nZSA9IG9wdC52ZXJzaW9uUmFuZ2U7CgogICAgaWYgKCgwLCBfdHlwZS5kZWZhdWx0KSh2ZXJzaW9uUmFuZ2UpID09PSAnc3RyaW5nJykgewogICAgICAvLyDmlK/mjIEgJzMuOS03LjAnIOWGmeazlQogICAgICB2ZXJzaW9uUmFuZ2UgPSB2ZXJzaW9uUmFuZ2Uuc3BsaXQoJy0nKTsKICAgIH0KCiAgICB2YXIgX3ZlcnNpb25SYW5nZSA9IHZlcnNpb25SYW5nZSwKICAgICAgICBfdmVyc2lvblJhbmdlMiA9ICgwLCBfc2xpY2VkVG9BcnJheTIuZGVmYXVsdCkoX3ZlcnNpb25SYW5nZSwgMiksCiAgICAgICAgc3RhcnRWID0gX3ZlcnNpb25SYW5nZTJbMF0sCiAgICAgICAgZW5kViA9IF92ZXJzaW9uUmFuZ2UyWzFdOwoKICAgIGlmICgoMCwgX3ZlcnNpb25fY29tcGFyZS5kZWZhdWx0KSh2ZXJzaW9uLCBzdGFydFYpID49IDAgJiYgKCFlbmRWIHx8IGVuZFYgJiYgKDAsIF92ZXJzaW9uX2NvbXBhcmUuZGVmYXVsdCkodmVyc2lvbiwgZW5kVikgPD0gMCkpIHsKICAgICAgcGFyYW1zID0gb3B0LnBhcmFtcyA/IG9wdC5wYXJhbXMgOiBwYXJhbXM7CiAgICAgIHZhciBvdGhlcnMgPSB7fTsKCiAgICAgIGlmIChwYXJhbXMucGFyYW1zKSB7CiAgICAgICAgLy8g5ZCr5pyJIHBhcmFtcyDnmoQgcGFyYW1zID0ge3BhcmFtczoge30sIHVwZ3JhZGU6MX0KICAgICAgICB2YXIgdG1wID0gT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zLnBhcmFtcyk7CiAgICAgICAgcGFyYW1zLnBhcmFtcyA9IG51bGw7IC8vIOWIoOS4jeaOie+8nwoKICAgICAgICBkZWxldGUgcGFyYW1zLnBhcmFtczsKICAgICAgICBvdGhlcnMgPSBPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMpOwogICAgICAgIHBhcmFtcyA9IHRtcDsKICAgICAgfQoKICAgICAgdmFyIGFyZ3MgPSB7fTsKCiAgICAgIGlmIChvdGhlcnMgJiYgKDAsIF90eXBlLmRlZmF1bHQpKG90aGVycykgPT09ICdvYmplY3QnKSB7CiAgICAgICAgYXJncyA9IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgcGFyYW1zOiBqc29uMnBhcmFtcyhwYXJhbXMpCiAgICAgICAgfSwgb3RoZXJzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhcmdzID0gewogICAgICAgICAgcGFyYW1zOiBqc29uMnBhcmFtcyhwYXJhbXMpCiAgICAgICAgfTsKICAgICAgfSAvLyDlhbzlrrkgYWN0aW9uIOS4jeS4gOagt+eahOaDheWGte+8jOebtOaOpeWGmeWcqOmFjee9rumHjOmdogoKCiAgICAgIGFjdGlvbiA9ICJ2Ii5jb25jYXQob3B0LnYsICIvIikuY29uY2F0KG9wdC5hY3Rpb24gPyBvcHQuYWN0aW9uIDogYWN0aW9uKTsKICAgICAgcmV0dXJuIGludm9rZVAoYWN0aW9uLCBhcmdzLCBzY2hlbWFIZWFkKTsKICAgIH0KICB9CgogIHJldHVybiBQcm9taXNlLnJlamVjdChDT01NQU5EX05PVF9FWElTVCk7Cn0KCmZ1bmN0aW9uIGlzRW1wdHlPYmplY3Qob2JqKSB7CiAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSAwICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0Owp9"},{"version":3,"sources":["/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/xbox/na/invoke.js"],"names":["NOT_IN_BOX","errCode","errMsg","COMMAND_NOT_EXIST","isMaybeBox","subnames","ua","split","len","length","json2params","json","encode","rs","i","j","mapArray","args","map","arg","invoke","as","is","getValidScheme","schema","indexOf","invokeP","action","params","schemaHead","Promise","reject","resolve","tmp","callback","defaultCB","d","window","isEmptyObject","result","data","JSON","parse","e","console","log","status","search","xRegister","range","osname","boxname","opt","v","version","versionRange","startV","endV","others","Object","assign","obj","keys","constructor"],"mappings":"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","sourcesContent":["/**\n * @file Created on Thu Nov 15 2018\n * @author wangyongqing <wangyongqing01@baidu.com>\n */\nimport version_compare from '../version_compare';\nimport getBoxVersion from '../get-box-version';\nimport isBox from '../is-box';\nimport isMatrix from '../is-matrix';\nimport type from '../type';\nimport iosInvoke from './ios';\nimport androidInvoke from './android';\nimport json2query from '../json2query';\nimport {getOSName, isIOS, isAndroid} from '../os';\nimport getBoxName from '../get-box-name';\nimport getScheme from '../get-matrix-schema';\nimport stringify from '../stringify';\nimport getGlobalFunc from '../get-global-func';\n\nconst NOT_IN_BOX = {\n    errCode: 902,\n    errMsg: 'APP外无法调用端能力'\n};\n\nconst COMMAND_NOT_EXIST = {\n    errCode: 901,\n    errMsg: '不存在此端能力'\n};\n\n// const COMMAND_FAIL = {\n//     errCode: 903,\n//     errMsg: '端能力调用失败'\n// };\n// const COMMAND_SUCCESS = {\n//     errCode: 0,\n//     errMsg: '调用成功'\n// };\n\n/**\n * 或判断是否是某个 box\n * @param {string} subnames - lite/info组合，[,]隔开\n * @param {*} ua - ua\n */\nexport function isMaybeBox(subnames, ua) {\n    subnames = subnames.split(',');\n    let len = subnames.length;\n    while (len--) {\n        if (isBox(subnames[len], ua) || isMatrix(subnames[len], ua)) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * @file  将 json 转成 params 字符串\n * @author wangyongqing <wangyongqing01@baidu.com>\n */\n/**\n * 经常会出现 params 的 stringify 之后再encode 的情况，这里统一处理了\n * 还处理了函数问题，可以直接传入匿名函数即可自动转为全局函数\n * @function json2params\n * @param {Object} json - 参数\n * @param {boolean} encode - 是否encode\n * @return {Promise} promise - Promise\n */\nexport function json2params(json, encode = true) {\n    if (type(json) === 'string') {\n        return json;\n    }\n\n    const rs = {};\n    for (let i in json) {\n        let j = json[i];\n        switch (type(j)) {\n            case 'array':\n                j = mapArray(j);\n                break;\n            case 'function':\n                j = getGlobalFunc(j);\n                break;\n        }\n        rs[i] = j;\n    }\n    return stringify(rs, encode);\n}\n\nfunction mapArray(args) {\n    return args.map(arg => {\n        switch (type(arg)) {\n            case 'function':\n                return getGlobalFunc(arg);\n            default:\n                return arg;\n        }\n    });\n}\n\n/**\n * 新调起能力，完全 scheme 形式，支持 ios 和安卓相同或者不同，\n * 不同时，先传 android后 ios（首字母排序）\n * 必须 baiduboxapp 开头\n * @function invoke\n * @param {string} args0 - 安卓调起 schema\n * @param {string} args1 - ios调起 schema，如果相同省略改参数\n */\nexport default function invoke(...args) {\n    if (!isBox() && !isMatrix()) {\n        return;\n    }\n    let as = args[0];\n    // 安卓 ios 公用一个相同的 scheme\n    let is = args[1] ? args[1] : args[0];\n    if (isIOS() && is) {\n        iosInvoke(getValidScheme(is));\n    } else if (isAndroid() && as) {\n        androidInvoke(getValidScheme(as));\n    }\n}\n\nfunction getValidScheme(schema) {\n    // 都是以 baidubox 开头包括，baiduboxapp,baiduboxmission\n    if (type(schema) === 'string' && schema.indexOf('baidubox') !== 0) {\n        return 'baiduboxapp://' + schema;\n    }\n    return schema;\n}\n/**\n * Promise 调起命令，host 和 params 分开处理，支持函数直接传入\n * @param {String} action - schema host 部分\n * @param {object} params - 参数\n * @param {string} schemaHead - schema 头，默认 baiduboxapp\n * @return {Promise}\n */\nexport function invokeP(action, params = {}, schemaHead) {\n    schemaHead = schemaHead || getScheme();\n    if (!isBox() && !isMatrix()) {\n        return Promise.reject(NOT_IN_BOX);\n    }\n    return new Promise((resolve, reject) => {\n        let tmp = params.params || {};\n        // 处理 params 带有 callback 的情况\n        let callback = params.callback;\n        // 删除 callback，防止 json2query 被处理到 query 中\n        delete params.callback;\n        // 将 callback 情况进行处理\n        const defaultCB = d => {\n            if (callback) {\n                if (typeof callback === 'function') {\n                    callback(d);\n                } else if (\n                    /* eslint-disable operator-linebreak */\n                    callback === 'string' &&\n                    typeof window === 'object' &&\n                    typeof window[callback] === 'function'\n                ) {\n                    window[callback](d);\n                }\n            }\n        };\n\n        if (isEmptyObject(tmp) || tmp === '%7B%7D' || tmp === '{}') {\n            // 删除空的params对象\n            delete params.params;\n        } else if (type(tmp) === 'object') {\n            params.params = json2params(tmp);\n        }\n\n        // 重新赋值 callback\n        params.callback = function callback(result) {\n            let data = result;\n            if (type(result) === 'string') {\n                try {\n                    data = JSON.parse(result);\n                } catch (e) {\n                    console.log(e);\n                }\n            }\n            if (+data.status === 0) {\n                // 成功回调\n                resolve(data.data);\n                defaultCB(data.data);\n                return;\n            }\n            // 失败回调，失败也回调 callback，给出错误码的情况\n            reject(data);\n            defaultCB(data);\n        };\n        const search = json2query(params);\n\n        const schema = `${schemaHead}://${action}?${search}`;\n        invoke(schema);\n    });\n}\n/**\n * 新版本的注册，只用于安卓和 ios 相同的 scheme 类，返回 promise\n * @function xRegister\n * @param {Array|String} range - 版本范围\n * @param {String} action - action 部分，去掉 v 部分，例如v26/swan实际传入 swan。。。 vxx 之后的\n * @param {Object} params - 参数部分，例如 params={url}，传入{url}即可\n * @param {String} schemaHead - scheme 头\n * @return {Promise}\n * @example\n *  xRegister(\n        {\n            lite: {\n                v: 34,\n                versionRange: '3.9'\n            },\n            main: {\n                v: 41,\n                versionRange: '11.3.5'\n            }\n        },\n        'audio/playSound',\n        {url}\n    );\n */\nexport function xRegister(range = {}, action, params = {}, schemaHead = getScheme()) {\n    if (!isBox() && !isMatrix()) {\n        return Promise.reject(NOT_IN_BOX);\n    }\n    const osname = getOSName();\n    const boxname = getBoxName();\n    // 优先读取 androidmission 这个，然后是 mission(ios+android全平台)，最后主板 android/ios\n    const opt = range[`${osname}${boxname}`] || range[boxname] || range[osname];\n    // 必须要有 v\n    if (opt && opt.v) {\n        const version = getBoxVersion(boxname);\n        let versionRange = opt.versionRange;\n        if (type(versionRange) === 'string') {\n            // 支持 '3.9-7.0' 写法\n            versionRange = versionRange.split('-');\n        }\n        const [startV, endV] = versionRange;\n        if (version_compare(version, startV) >= 0 && (!endV || (endV && version_compare(version, endV) <= 0))) {\n            params = opt.params ? opt.params : params;\n            let others = {};\n            if (params.params) {\n                // 含有 params 的 params = {params: {}, upgrade:1}\n                let tmp = Object.assign({}, params.params);\n                params.params = null; // 删不掉？\n                delete params.params;\n                others = Object.assign({}, params);\n                params = tmp;\n            }\n            let args = {};\n            if (others && type(others) === 'object') {\n                args = {params: json2params(params), ...others};\n            } else {\n                args = {params: json2params(params)};\n            }\n            // 兼容 action 不一样的情况，直接写在配置里面\n            action = `v${opt.v}/${opt.action ? opt.action : action}`;\n            return invokeP(action, args, schemaHead);\n        }\n    }\n    return Promise.reject(COMMAND_NOT_EXIST);\n}\n\nfunction isEmptyObject(obj) {\n    return Object.keys(obj).length === 0 && obj.constructor === Object;\n}\n"]}]}