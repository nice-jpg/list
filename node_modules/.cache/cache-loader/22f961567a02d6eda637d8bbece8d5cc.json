{"remainingRequest":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js??ref--1-2!/Users/liaohuanyu/projects/baidu-work/baidu/feed3/topic-components/@baidu/auc-base/setAndGetBoxVideoInfo.js","dependencies":[{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/topic-components/@baidu/auc-base/setAndGetBoxVideoInfo.js","mtime":1696919769069},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/san-hot-loader/index.js","mtime":1696919525187},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/cache-loader/dist/cjs.js","mtime":1696919513896},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js","mtime":1696919524615}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlIik7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuc2Vla1BsYXllciA9IGV4cG9ydHMuc2V0Qm94VmlkZW9JbmZvID0gZXhwb3J0cy5nZXRCb3hWaWRlb0luZm8gPSB2b2lkIDA7Cgp2YXIgX2JveHggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBiYWlkdS9hdWMtYmFzZS9ib3h4IikpOwoKdmFyIGdldEJveFZpZGVvSW5mbyA9IGZ1bmN0aW9uIGdldEJveFZpZGVvSW5mbyh2aWQsIHBhZ2VVcmwpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sb3ZlLCByZWpldGMpIHsKICAgIGlmICghX2JveHguZGVmYXVsdC5jYW5JVXNlKCdtZWRpYS52aWRlby5yZWFkVmlkZW9IaXN0b3J5UGxheWVySW5mbycpKSB7CiAgICAgIHJlc29sb3ZlKCdmYWlsJyk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoIXZpZCB8fCAhcGFnZVVybCkgewogICAgICByZXNvbG92ZSgnZmFpbCcpOwogICAgICByZXR1cm47CiAgICB9CgogICAgX2JveHguZGVmYXVsdC5jYWxsKCdtZWRpYS52aWRlby5yZWFkVmlkZW9IaXN0b3J5UGxheWVySW5mbycsIHsKICAgICAgcGFnZVVybDogcGFnZVVybCwKICAgICAgdmlkOiB2aWQsCiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MocmVzKSB7CiAgICAgICAgaWYgKCtyZXMuc3RhdHVzID09PSAwKSB7CiAgICAgICAgICByZXNvbG92ZShyZXMuZGF0YS5wcm9ncmVzcyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc29sb3ZlKCdmYWlsJyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBmYWlsOiBmdW5jdGlvbiBmYWlsKGVycikgewogICAgICAgIHJlc29sb3ZlKCdmYWlsJyk7CiAgICAgIH0KICAgIH0pOwogIH0pOwp9OwoKZXhwb3J0cy5nZXRCb3hWaWRlb0luZm8gPSBnZXRCb3hWaWRlb0luZm87Cgp2YXIgc2V0Qm94VmlkZW9JbmZvID0gZnVuY3Rpb24gc2V0Qm94VmlkZW9JbmZvKHZpZCwgcGFnZVVybCwgcHJvZ3Jlc3MpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sb3ZlLCByZWpldGMpIHsKICAgIGlmICghX2JveHguZGVmYXVsdC5jYW5JVXNlKCdtZWRpYS52aWRlby5zYXZlVmlkZW9IaXN0b3J5UGxheWVySW5mbycpKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoIXZpZCB8fCAhcGFnZVVybCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgX2JveHguZGVmYXVsdC5jYWxsKCdtZWRpYS52aWRlby5zYXZlVmlkZW9IaXN0b3J5UGxheWVySW5mbycsIHsKICAgICAgcHJvZ3Jlc3M6IChwcm9ncmVzcyB8fCAwKSArICcnLAogICAgICBwYWdlVXJsOiBwYWdlVXJsLAogICAgICB2aWQ6IHZpZCwKICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhyZXMpIHsKICAgICAgICByZXNvbG92ZSgnc3VjY2VzcycpOwogICAgICB9LAogICAgICBmYWlsOiBmdW5jdGlvbiBmYWlsKHJlcykge30KICAgIH0pOwogIH0pOwp9OwoKZXhwb3J0cy5zZXRCb3hWaWRlb0luZm8gPSBzZXRCb3hWaWRlb0luZm87Cgp2YXIgc2Vla1BsYXllciA9IGZ1bmN0aW9uIHNlZWtQbGF5ZXIodmlkLCBzZWVrKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbG92ZSwgcmVqZXRjKSB7CiAgICBpZiAoIV9ib3h4LmRlZmF1bHQuY2FuSVVzZSgnbWVkaWEudmlkZW8uc2Vla1BsYXllcicpKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBfYm94eC5kZWZhdWx0LmNhbGwoJ21lZGlhLnZpZGVvLnNlZWtQbGF5ZXInLCB7CiAgICAgIHNlZWs6IHNlZWssCiAgICAgIHZpZDogdmlkLAogICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKHJlcykgewogICAgICAgIHJlc29sb3ZlKCdzdWNjZXNzJyk7CiAgICAgIH0KICAgIH0pOwogIH0pOwp9OwoKZXhwb3J0cy5zZWVrUGxheWVyID0gc2Vla1BsYXllcjs="},{"version":3,"sources":["/Users/liaohuanyu/projects/baidu-work/baidu/feed3/topic-components/@baidu/auc-base/setAndGetBoxVideoInfo.js"],"names":["getBoxVideoInfo","vid","pageUrl","Promise","resolove","rejetc","boxx","canIUse","call","success","res","status","data","progress","fail","err","setBoxVideoInfo","seekPlayer","seek"],"mappings":";;;;;;;;;;;;;AAAA;;AAEO,IAAMA,eAAe,GAAG,SAAlBA,eAAkB,CAACC,GAAD,EAAMC,OAAN,EAAkB;AAC7C,SAAO,IAAIC,OAAJ,CAAY,UAACC,QAAD,EAAWC,MAAX,EAAsB;AACrC,QAAI,CAACC,cAAKC,OAAL,CAAa,wCAAb,CAAL,EAA6D;AACzDH,MAAAA,QAAQ,CAAC,MAAD,CAAR;AACA;AACH;;AACD,QAAI,CAACH,GAAD,IAAQ,CAACC,OAAb,EAAsB;AAClBE,MAAAA,QAAQ,CAAC,MAAD,CAAR;AACA;AACH;;AACDE,kBAAKE,IAAL,CAAU,wCAAV,EAAoD;AAChDN,MAAAA,OAAO,EAAPA,OADgD;AAEhDD,MAAAA,GAAG,EAAHA,GAFgD;AAGhDQ,MAAAA,OAHgD,mBAGxCC,GAHwC,EAGnC;AACT,YAAI,CAACA,GAAG,CAACC,MAAL,KAAgB,CAApB,EAAuB;AACnBP,UAAAA,QAAQ,CAACM,GAAG,CAACE,IAAJ,CAASC,QAAV,CAAR;AACH,SAFD,MAEO;AACHT,UAAAA,QAAQ,CAAC,MAAD,CAAR;AACH;AACJ,OAT+C;AAUhDU,MAAAA,IAVgD,gBAU3CC,GAV2C,EAUtC;AACNX,QAAAA,QAAQ,CAAC,MAAD,CAAR;AACH;AAZ+C,KAApD;AAcH,GAvBM,CAAP;AAwBH,CAzBM;;;;AA2BA,IAAMY,eAAe,GAAG,SAAlBA,eAAkB,CAACf,GAAD,EAAMC,OAAN,EAAeW,QAAf,EAA4B;AACvD,SAAO,IAAIV,OAAJ,CAAY,UAACC,QAAD,EAAWC,MAAX,EAAsB;AACrC,QAAI,CAACC,cAAKC,OAAL,CAAa,wCAAb,CAAL,EAA6D;AACzD;AACH;;AACD,QAAI,CAACN,GAAD,IAAQ,CAACC,OAAb,EAAsB;AAClB;AACH;;AACDI,kBAAKE,IAAL,CAAU,wCAAV,EAAoD;AAChDK,MAAAA,QAAQ,EAAE,CAACA,QAAQ,IAAI,CAAb,IAAkB,EADoB;AAEhDX,MAAAA,OAAO,EAAPA,OAFgD;AAGhDD,MAAAA,GAAG,EAAHA,GAHgD;AAIhDQ,MAAAA,OAJgD,mBAIxCC,GAJwC,EAInC;AACTN,QAAAA,QAAQ,CAAC,SAAD,CAAR;AACH,OAN+C;AAOhDU,MAAAA,IAPgD,gBAO3CJ,GAP2C,EAOtC,CACT;AAR+C,KAApD;AAUH,GAjBM,CAAP;AAkBH,CAnBM;;;;AAqBA,IAAMO,UAAU,GAAG,SAAbA,UAAa,CAAChB,GAAD,EAAMiB,IAAN,EAAe;AACrC,SAAO,IAAIf,OAAJ,CAAY,UAACC,QAAD,EAAWC,MAAX,EAAsB;AACrC,QAAI,CAACC,cAAKC,OAAL,CAAa,wBAAb,CAAL,EAA6C;AACzC;AACH;;AACDD,kBAAKE,IAAL,CAAU,wBAAV,EAAoC;AAChCU,MAAAA,IAAI,EAAJA,IADgC;AAEhCjB,MAAAA,GAAG,EAAHA,GAFgC;AAGhCQ,MAAAA,OAHgC,mBAGxBC,GAHwB,EAGnB;AACTN,QAAAA,QAAQ,CAAC,SAAD,CAAR;AACH;AAL+B,KAApC;AAOH,GAXM,CAAP;AAYH,CAbM","sourcesContent":["import boxx from '@baidu/auc-base/boxx';\n\nexport const getBoxVideoInfo = (vid, pageUrl) => {\n    return new Promise((resolove, rejetc) => {\n        if (!boxx.canIUse('media.video.readVideoHistoryPlayerInfo')) {\n            resolove('fail');\n            return;\n        }\n        if (!vid || !pageUrl) {\n            resolove('fail');\n            return;\n        }\n        boxx.call('media.video.readVideoHistoryPlayerInfo', {\n            pageUrl,\n            vid,\n            success(res) {\n                if (+res.status === 0) {\n                    resolove(res.data.progress);\n                } else {\n                    resolove('fail');\n                }\n            },\n            fail(err) {\n                resolove('fail');\n            }\n        });\n    });\n};\n\nexport const setBoxVideoInfo = (vid, pageUrl, progress) => {\n    return new Promise((resolove, rejetc) => {\n        if (!boxx.canIUse('media.video.saveVideoHistoryPlayerInfo')) {\n            return;\n        }\n        if (!vid || !pageUrl) {\n            return;\n        }\n        boxx.call('media.video.saveVideoHistoryPlayerInfo', {\n            progress: (progress || 0) + '',\n            pageUrl,\n            vid,\n            success(res) {\n                resolove('success');\n            },\n            fail(res) {\n            }\n        });\n    });\n};\n\nexport const seekPlayer = (vid, seek) => {\n    return new Promise((resolove, rejetc) => {\n        if (!boxx.canIUse('media.video.seekPlayer')) {\n            return;\n        }\n        boxx.call('media.video.seekPlayer', {\n            seek,\n            vid,\n            success(res) {\n                resolove('success');\n            }\n        });\n    });\n};"]}]}