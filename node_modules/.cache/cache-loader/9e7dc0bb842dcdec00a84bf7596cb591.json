{"remainingRequest":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js??ref--1-2!/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/src/pages/recommend/containers/app.js","dependencies":[{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/src/pages/recommend/containers/app.js","mtime":1695633995788},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/san-hot-loader/index.js","mtime":1696919525187},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/cache-loader/dist/cjs.js","mtime":1696919513896},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js","mtime":1696919524615}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZmxlY3QuY29uc3RydWN0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwoKdmFyIF90b0NvbnN1bWFibGVBcnJheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdG9Db25zdW1hYmxlQXJyYXkiKSk7CgpyZXF1aXJlKCJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiKTsKCnZhciBfYXN5bmNUb0dlbmVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciIpKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIikpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSk7Cgp2YXIgX2luaGVyaXRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpKTsKCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIpKTsKCnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2dldFByb3RvdHlwZU9mIikpOwoKdmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHkiKSk7CgpyZXF1aXJlKCJAL2xpYi91dGlscy9wYXRjaFNhbiIpOwoKdmFyIF9zYW4gPSByZXF1aXJlKCJzYW4iKTsKCnZhciBfYXBwTW9kdWxlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2FwcC5tb2R1bGUubGVzcyIpKTsKCnZhciBfZmVlZEJhc2Vsb2cgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBiYWlkdS9mZWVkLWJhc2Vsb2ciKSk7Cgp2YXIgX3Njcm9sbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInNjcm9sbCIpKTsKCnZhciBfc2Nyb2xsRG9jID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJzY3JvbGwtZG9jIikpOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaC50aHJvdHRsZSIpKTsKCnZhciBfYXVjSGVhZGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAYmFpZHUvYXVjLWhlYWRlciIpKTsKCnZhciBfYXVjQ29sdW1uID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAYmFpZHUvYXVjLWNvbHVtbiIpKTsKCnZhciBfYXVjVGl0bGViYXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBiYWlkdS9hdWMtdGl0bGViYXIiKSk7Cgp2YXIgX2F1Y05hdiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQGJhaWR1L2F1Yy1uYXYiKSk7Cgp2YXIgX2F1Y01lbnVJY29uID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAYmFpZHUvYXVjLW1lbnUtaWNvbiIpKTsKCnZhciBfYXVjSW1hZ2VIZWFkZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBiYWlkdS9hdWMtaW1hZ2UtaGVhZGVyIikpOwoKdmFyIF9hdWNCYWNrQmFyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAYmFpZHUvYXVjLWJhY2stYmFyIikpOwoKdmFyIF9lbnYgPSByZXF1aXJlKCJAYmFpZHUvYXVjLWJhc2UvZW52Iik7Cgp2YXIgX2ludm9rZSA9IHJlcXVpcmUoIkBiYWlkdS94Ym94L25hL2ludm9rZSIpOwoKdmFyIF9pbmRleCA9IHJlcXVpcmUoIkBiYWlkdS9hdWMtbG9nL2luZGV4Iik7Cgp2YXIgX2F1Y0xvZyA9IHJlcXVpcmUoIkBiYWlkdS9hdWMtbG9nIik7Cgp2YXIgX2JveHggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBiYWlkdS9hdWMtYmFzZS9ib3h4IikpOwoKdmFyIF91dGlscyA9IHJlcXVpcmUoIkBiYWlkdS9hdWMtYmFzZS91dGlscyIpOwoKdmFyIF9wYWdlTW9kZSA9IHJlcXVpcmUoIkAvbGliL3V0aWxzL3BhZ2VNb2RlIik7Cgp2YXIgX3JlZmxvd1VnYyA9IHJlcXVpcmUoIkAvbGliL3V0aWxzL3JlZmxvd1VnYyIpOwoKdmFyIF9tY3AgPSByZXF1aXJlKCJAL2xpYi91dGlscy9tY3AiKTsKCnZhciBfZm9udFNpemUgPSByZXF1aXJlKCJAL2xpYi91dGlscy9mb250U2l6ZSIpOwoKdmFyIF9zZXRTaGFyZUluZm8gPSByZXF1aXJlKCJAL2xpYi91dGlscy9zZXRTaGFyZUluZm8iKTsKCnZhciBfZ2V0UXVlcnlTdHJpbmcgPSByZXF1aXJlKCJAL2xpYi91dGlscy9nZXRRdWVyeVN0cmluZyIpOwoKdmFyIF91dGlsczIgPSByZXF1aXJlKCJAL2xpYi91dGlscyIpOwoKZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yLmRlZmF1bHQpKHRoaXMsIHJlc3VsdCk7IH07IH0KCmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09ICJmdW5jdGlvbiIpIHJldHVybiB0cnVlOyB0cnkgeyBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFJlZmxlY3QuY29uc3RydWN0KERhdGUsIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfQoKdmFyIGJhc2Vsb2cgPSBuZXcgX2ZlZWRCYXNlbG9nLmRlZmF1bHQoKTsKdmFyIHNjcm9sbFBhZ2UgPSAoMCwgX3Njcm9sbERvYy5kZWZhdWx0KSgpOwoKdmFyIHB4VG9SZW0gPSBmdW5jdGlvbiBweFRvUmVtKHZhbHVlKSB7CiAgcmV0dXJuIHZhbHVlIC8gMTAwICsgJ3JlbSc7Cn07Cgp2YXIgYmluZ0V2ZW50QmdzID0gWycjZmUzNDRhJ107IC8vIOWwneivleWFs+mXreWKoOi9veaAgQoKdHJ5IHsKICAoX2Vudi5lbnYuaXNCb3hTZXJpZXMgfHwgX2Vudi5lbnYuaXNNYXRyaXgpICYmIF9ib3h4LmRlZmF1bHQuY2FsbCgnY29tbW9uVUkuY2xvc2VMb2FkaW5nJyk7Cn0gY2F0Y2ggKGUpIHsKICBjb25zb2xlLmVycm9yKGUpOwp9IC8vIOeUqOacgOWkmueahGVudgoKCnZhciBpc0NvbW1vbkVudiA9IF9lbnYuZW52LmlzQm94U2VyaWVzIHx8IF9lbnYuZW52LmlzWGlhb01pQmFpUGFpIHx8IF9lbnYuZW52LmlzTWF0cml4Owp2YXIgaXNDb21MaWdodEVudiA9IGlzQ29tbW9uRW52ICYmIF9lbnYuZW52LmlzTGlnaHRGcmFtZTsgLy8g6aG26YOo6LCD6LW35L2NCgp2YXIgUE9TX1RPUCA9ICdwb3NfdG9wUmVmbG93QnRuJzsgLy8g5bqV6YOo6LCD6LW35L2NCgp2YXIgUE9TX0JPVFRPTSA9ICdwb3NfYm90dG9tUmVmbG93QnRuJzsKdmFyIG1jcExpc3QgPSBudWxsOwp2YXIgbWNwQ3JlYXRlciA9ICgwLCBfbWNwLmdldE1jcENyZWF0ZXIpKCk7CnZhciBtb2RlTWFwID0gewogIGxpZ2h0bW9kZTogJ2RheScsCiAgbmlnaHRtb2RlOiAnbmlnaHQnLAogIGRhcmttb2RlOiAnZGFyaycKfTsKCnZhciBBcHAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICAoMCwgX2luaGVyaXRzMi5kZWZhdWx0KShBcHAsIF9Db21wb25lbnQpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEFwcCk7CgogIGZ1bmN0aW9uIEFwcCgpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syLmRlZmF1bHQpKHRoaXMsIEFwcCk7CiAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KShBcHAsIFt7CiAgICBrZXk6ICJpbml0RGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdERhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgc3R5bGVzOiBfYXBwTW9kdWxlLmRlZmF1bHQsCiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIGNvbHVtblBvc2l0b246IFtdLAogICAgICAgIGFjdGl2ZUluZGV4OiAwLAogICAgICAgIGNvbHVtbnM6IFtdLAogICAgICAgIGlzSW1tZXJzaXZlOiBmYWxzZSwKICAgICAgICBlbnY6IF9lbnYuZW52LAogICAgICAgIHBhZ2VTaXplOiAyMCwKICAgICAgICAvLyDngrnlh7vmm7TlpJrlh7oyMOadoe+8jOWJqeS9meWFqOWxleW8gAogICAgICAgIHBhZ2VBcnI6IFtdLAogICAgICAgIGlzSW5pdDogZmFsc2UsCiAgICAgICAgYXBwU2hvd1RpdGxlQmFyOiBmYWxzZSwKICAgICAgICBzY3JvbGxpbmc6IGZhbHNlLAogICAgICAgIC8vIOmYsuatoumHjeWkjeinpuWPkea7keWKqOWHveaVsAogICAgICAgIGRlZmF1bHRTdGF0dXNCYXJIZWlnaHQ6IDM1LAogICAgICAgIC8vIOW9k+iOt+WPluS4jeWIsOeKtuaAgeagj+mrmOW6puaXtueahOm7mOiupOWAvAogICAgICAgIHN0YXR1c0JhckhlaWdodDogMCwKICAgICAgICAvLyDmiYvmnLrnirbmgIHmoI/pq5jluqYKICAgICAgICBkZWZhdWx0VGl0bGVCYXJIZWlnaHQ6IDQ0LAogICAgICAgIC8vIHRpdGxlYmFy6auY5bqmIFRPRE86IOWKqOaAgeiOt+WPlgogICAgICAgIHByZUFjdGl2ZUluZGV4OiAwLAogICAgICAgIC8vIOiusOW9leS4iuS4gOasoeeCueWHu+eahHRhYkluZGV477yM55So5LqO5omT54K5CiAgICAgICAgbm9IZWFkRGVzYzogZmFsc2UsCiAgICAgICAgcGFnZU1vZGU6ICdkYXknLAogICAgICAgIGJveFByYXNlSWNvbkxpc3Q6IHt9LAogICAgICAgIGdsb2JhbFZlZGlvTXV0ZTogdHJ1ZSwKICAgICAgICBnbG9iYWxWZWRpb0F1dG9wbGF5OiAwLAogICAgICAgIGdsb2JhbFZlZGlvVm9sdW1lOiAwLAogICAgICAgIG5ldHdvcnRUeXBlOiAnd2lmaScsCiAgICAgICAgbmF2Q29sb3I6ICcnLAogICAgICAgIHZpZGVvTGlzdDoge30sCiAgICAgICAgdGltZW91dGVyOiBudWxsLAogICAgICAgIGludm9rZUluZm86IHt9LAogICAgICAgIHRlbXBIb3RSZXZpZXdzVmFsOiBmYWxzZQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogImluaXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2luaXRlZCA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIHZhciBpc1RvbWFzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlzVG9tYXMgPSAvdG9tYXMvaS50ZXN0KF9lbnYuZW52LnVhKTsKICAgICAgICAgICAgICAgIChfZW52LmVudi5pc0JveFNlcmllcyB8fCBfZW52LmVudi5pc1hpYW9NaUJhaVBhaSB8fCBfZW52LmVudi5pc01hdHJpeCkgJiYgIWlzVG9tYXMgJiYgX2Vudi5lbnYuaXNJT1MgJiYgKDAsIF9mb250U2l6ZS5zdGFydEZvbnRTaXplKSgpOwogICAgICAgICAgICAgICAgdGhpcy5pbml0TG9nKCk7CiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NpbmcoKTsKICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hNb2RlKCk7IC8vIGxhbmRUeXBlID0gMCDmma7pgJrmqKHmnb8KCiAgICAgICAgICAgICAgICB0aGlzLmRhdGEuZ2V0KCdiaWdFdmVudC5sYW5kVHlwZScpICE9PSAwICYmIHRoaXMuYmlnRXZlbnRDb25maWcoKTsKICAgICAgICAgICAgICAgIHRoaXMud2F0Y2goJ2FwcFNob3dUaXRsZUJhcicsIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmRhdGEuZ2V0KCd0ZW1wSG90UmV2aWV3c1ZhbCcpID09PSB2YWwpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGEuc2V0KCd0ZW1wSG90UmV2aWV3c1ZhbCcsIHZhbCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGluaXRlZCgpIHsKICAgICAgICByZXR1cm4gX2luaXRlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaW5pdGVkOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiaW5pdEludm9rZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdEludm9rZSgpIHsKICAgICAgdmFyIF9pbnZva2VfaW5mbywKICAgICAgICAgIF90aGlzMiA9IHRoaXM7CgogICAgICAvLyB1cmzku47mjqXlj6Pph4zlj5YKICAgICAgdmFyIF9yZWYgPSB3aW5kb3cuc29ydHNEYXRhLmhlYWRlciB8fCB7fSwKICAgICAgICAgIF9yZWYkbGluayA9IF9yZWYubGluaywKICAgICAgICAgIHVybCA9IF9yZWYkbGluayA9PT0gdm9pZCAwID8gd2luZG93LmxvY2F0aW9uLmhyZWYgOiBfcmVmJGxpbms7IC8vIOerr+WGheayiea1uOW8j+Wxleekuu+8jOWboOS4uuayiea1uOW8j+aYr+eJueauiueahOi9u+ahhuaetu+8jOS4uuWMuuWIhuWcqHVybOS4iuWKoOWPguaVsAoKCiAgICAgICEvaXNpbW1lcnNpdmUvLnRlc3QodXJsKSA/IHVybCArPSAnJmlzaW1tZXJzaXZlPWltbWVyc2l2ZScgOiAnJzsKICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICBiYWlkdWlkOiAoMCwgX3V0aWxzMi5jb29raWUpKCdCQUlEVUlEJyksCiAgICAgICAgJ3VzZXJfYWdlbnQnOiBuYXZpZ2F0b3IudXNlckFnZW50LAogICAgICAgICdpbnZva2VfaW5mbyc6IChfaW52b2tlX2luZm8gPSB7fSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkoX2ludm9rZV9pbmZvLCBQT1NfVE9QLCBbewogICAgICAgICAgdXJsOiB1cmwKICAgICAgICB9XSksICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKF9pbnZva2VfaW5mbywgUE9TX0JPVFRPTSwgW3sKICAgICAgICAgIHVybDogdXJsCiAgICAgICAgfV0pLCBfaW52b2tlX2luZm8pCiAgICAgIH07CiAgICAgICgwLCBfbWNwLmdldEludm9rZUluZm8pKHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLmRhdGEuc2V0KCdpbnZva2VJbmZvJywgcmVzKTsKCiAgICAgICAgdmFyIGFjdGlvblJ1bGUgPSByZXMuYWN0aW9uX3J1bGU7CiAgICAgICAgbWNwTGlzdCA9IE9iamVjdC5rZXlzKGFjdGlvblJ1bGUpLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBwb3M6IGtleSwKICAgICAgICAgICAgaW52b2tlTWNwOiBtY3BDcmVhdGVyLmNyZWF0ZSh7CiAgICAgICAgICAgICAgcG9zOiBrZXksCiAgICAgICAgICAgICAgb3B0OiBhY3Rpb25SdWxlW2tleV0sCiAgICAgICAgICAgICAgbG9nSWQ6IHJlcy5sb2dfaWQKICAgICAgICAgICAgfSkKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImF0dGFjaGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhdHRhY2hlZCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLnBhZ2VTaG93TG9nKCk7IC8vIOaYr+WQpuaYr+ayiea1uOW8j+aooeW8jwoKICAgICAgdGhpcy5kYXRhLnNldCgnaXNJbW1lcnNpdmUnLCAoMCwgX2dldFF1ZXJ5U3RyaW5nLmdldFF1ZXJ5U3RyaW5nKSgnaXNpbW1lcnNpdmUnKSA9PT0gJ2ltbWVyc2l2ZScpOyAvLyDpobXpnaLmu5Hliqjml7bnmoTnm5HlkKzlh73mlbAKCiAgICAgIHZhciBsYXN0SW5kZXggPSB0aGlzLmRhdGEuZ2V0KCdsaXN0JykuYWxsQ29sdW1ucy5sZW5ndGggLSAxOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKDAsIF9sb2Rhc2guZGVmYXVsdCkoZnVuY3Rpb24gKCkgewogICAgICAgIC8vIOa7keWKqOaXtueahHRhYuagj+WKqOaAgeiwg+aVtAogICAgICAgIF90aGlzMy5jaGVja05hdkluZGV4KCk7IC8vIHRpdGxlYmFy55qE5Yqo5oCB5pi+56S6CgoKICAgICAgICBfdGhpczMuY2hlY2tTaG93VGl0bGVCYXIoKTsgLy8g5qOA5p+l5piv5ZCm5ruR5Yqo5Yiw5LqG5pyA5ZCOCgoKICAgICAgICBfdGhpczMuY2hlY2tTY3JvbGxCb3R0b20oKTsgLy8g5rua5Yqo5Yiw5bqV6YOo5by65Yi25YiHdGFi5Yiw5pyA5ZCOCgoKICAgICAgICBpZiAod2luZG93LnNjcm9sbFkgKyB3aW5kb3cuaW5uZXJIZWlnaHQgKyA1ID49IGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0KSB7CiAgICAgICAgICBfdGhpczMuZGF0YS5zZXQoJ2FjdGl2ZUluZGV4JywgbGFzdEluZGV4KTsKCiAgICAgICAgICBfdGhpczMuZmlsdGVyYnRuU3R5bGUobGFzdEluZGV4KTsKICAgICAgICB9IC8vIOa7muWKqOWIsOmhtumDqOW8uuWItumakOiXj3RpdGxlYmFy5ZKMbmF25by556qXCgoKICAgICAgICBpZiAod2luZG93LnNjcm9sbFkgPCAxMCkgewogICAgICAgICAgX3RoaXMzLmRhdGEuc2V0KCdhcHBTaG93VGl0bGVCYXInLCBmYWxzZSk7CgogICAgICAgICAgX3RoaXMzLnJlZignbmF2cycpICYmIF90aGlzMy5yZWYoJ25hdnMnKS5tYXNrQ2xpY2soKTsKICAgICAgICB9CiAgICAgIH0sIDEwMCkpOyAvLyDljY7kuLom6L6f6LCj77yMb3Bwb+a1j+iniOWZqOOAgXBj6ZqQ6JeP56uv5aSW5Zue5rWBIOOAgeWwj+exs+eZveeJjOWIhuS6q+WHuuWOu+eahOmakOiXj+Wbnua1gQoKICAgICAgdmFyIGlzcGl5YW8gPSArKDAsIF9nZXRRdWVyeVN0cmluZy5nZXRRdWVyeVN0cmluZykoJ2lkJykgPT09IDU4MDc7CiAgICAgIHZhciBpc0tuZXdzID0gKDAsIF9nZXRRdWVyeVN0cmluZy5nZXRRdWVyeVN0cmluZykoJ19yZWZsdXhvcycpID09PSAnYTgnOwoKICAgICAgaWYgKCFfZW52LmVudi5pc0JveFNlcmllcyAmJiAhKF9lbnYuZW52LmlzSHVhd2VpICYmIGlzcGl5YW8pICYmICFfZW52LmVudi5pc09wcG8gJiYgX2Vudi5lbnYuaXNNb2JpbGUgJiYgIWlzS25ld3MgJiYgIV9lbnYuZW52LmlzWGlhb01pQmFpUGFpICYmICFfZW52LmVudi5pc01hdHJpeCkgewogICAgICAgIHRoaXMuaW5pdEludm9rZSgpOwogICAgICAgICgwLCBfcmVmbG93VWdjLmluaXRSZWZsb3dCeVVybCkod2luZG93LmxvY2F0aW9uLmhyZWYpOwogICAgICB9CgogICAgICB0aGlzLnRpdGxlQmFyT2Zmc2V0U2V0KCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBfdGhpczMuZGF0YS5zZXQoJ3N0YXR1c0JhckhlaWdodCcsICt2YWx1ZSk7CiAgICAgIH0pOwoKICAgICAgdmFyIF9yZWYyID0gd2luZG93LnNvcnRzRGF0YS5oZWFkZXIgfHwge30sCiAgICAgICAgICB0aXRsZSA9IF9yZWYyLnRpdGxlLAogICAgICAgICAgX3JlZjIkZGVzY3JpcHRpb24gPSBfcmVmMi5kZXNjcmlwdGlvbiwKICAgICAgICAgIGRlc2NyaXB0aW9uID0gX3JlZjIkZGVzY3JpcHRpb24gPT09IHZvaWQgMCA/ICflv6vpgJ/kuobop6Pku4rml6XmlrDpspzkuosnIDogX3JlZjIkZGVzY3JpcHRpb24sCiAgICAgICAgICBpbWdfdXJsID0gX3JlZjIuaW1nX3VybCwKICAgICAgICAgIGxpbmsgPSBfcmVmMi5saW5rOwoKICAgICAgKDAsIF9zZXRTaGFyZUluZm8uc2V0U2hhcmVJbmZvKSh7CiAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgIGxpbms6IGxpbmssCiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLAogICAgICAgIGljb246IGltZ191cmwKICAgICAgfSk7CiAgICB9IC8vIOWkp+S6i+S7tumFjee9ruWIneWni+WMlgoKICB9LCB7CiAgICBrZXk6ICJiaWdFdmVudENvbmZpZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2JpZ0V2ZW50Q29uZmlnID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KSggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgICB2YXIgbGFuZFR5cGUsIGxhbmRCZ0NvbG9yLCBiaWdFdmVudENvbG9yLCBuYXZzLCBuYXZDb2xvcjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbGFuZFR5cGUgPSB0aGlzLmRhdGEuZ2V0KCdiaWdFdmVudC5sYW5kVHlwZScpOwogICAgICAgICAgICAgICAgbGFuZEJnQ29sb3IgPSAoMCwgX3V0aWxzLm1hY2hpbmluZ0NvbG9yKSh0aGlzLmRhdGEuZ2V0KCdiaWdFdmVudC5sYW5kQmdDb2xvcicpKTsKICAgICAgICAgICAgICAgIGJpZ0V2ZW50Q29sb3IgPSBiaW5nRXZlbnRCZ3NbbGFuZFR5cGUgLSAxXTsKICAgICAgICAgICAgICAgIGxhbmRCZ0NvbG9yID8gYmlnRXZlbnRDb2xvciA9IGxhbmRCZ0NvbG9yIDogJyc7CiAgICAgICAgICAgICAgICB0aGlzLmRhdGEuc2V0KCdiaWdFdmVudENvbG9yJywgYmlnRXZlbnRDb2xvcik7CiAgICAgICAgICAgICAgICBuYXZzID0gdGhpcy5kYXRhLmdldCgnbGlzdC5uYXZMaXN0Jyk7IC8vIOayoeacieS4i+WPkW5hdkNvbG9y77yM5L2/55SoYmdDb2xvcgoKICAgICAgICAgICAgICAgIG5hdkNvbG9yID0gKDAsIF91dGlscy5tYWNoaW5pbmdDb2xvcikodGhpcy5kYXRhLmdldCgnYmlnRXZlbnQubGFuZE5hdmlnYXRpb25Db2xvcicpKTsKICAgICAgICAgICAgICAgIG5hdkNvbG9yICYmIHRoaXMuZGF0YS5zZXQoJ25hdkNvbG9yJywgbmF2Q29sb3IpOwogICAgICAgICAgICAgICAgbmF2cyAmJiBuYXZzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgICAgIHZhciBidG5TdHlsZSA9ICcnOwoKICAgICAgICAgICAgICAgICAgaWYgKG5hdkNvbG9yKSB7CiAgICAgICAgICAgICAgICAgICAgYnRuU3R5bGUgPSAiYmFja2dyb3VuZDogbm9uZTtjb2xvcjogIi5jb25jYXQobmF2Q29sb3IsICI7Iik7CgogICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gX3RoaXM0LmRhdGEuZ2V0KCdhY3RpdmVJbmRleCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICBidG5TdHlsZSA9ICJjb2xvcjogIi5jb25jYXQobmF2Q29sb3IsICI7YmFja2dyb3VuZDogbm9uZTsiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYnRuU3R5bGUgPSAnYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjE0KTtjb2xvcjogI2ZmZjsnOwoKICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IF90aGlzNC5kYXRhLmdldCgnYWN0aXZlSW5kZXgnKSkgewogICAgICAgICAgICAgICAgICAgICAgYnRuU3R5bGUgPSAiY29sb3I6ICIuY29uY2F0KGJpZ0V2ZW50Q29sb3IsICI7YmFja2dyb3VuZDogI2ZmZjsiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmJ0blN0eWxlID0gYnRuU3R5bGU7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gYmlnRXZlbnRDb25maWcoKSB7CiAgICAgICAgcmV0dXJuIF9iaWdFdmVudENvbmZpZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gYmlnRXZlbnRDb25maWc7CiAgICB9KCkgLy8g5qih5byP55uR5ZCsCgogIH0sIHsKICAgIGtleTogIndhdGNoTW9kZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3dhdGNoTW9kZSA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgICAgdmFyIHBhZ2VNb2RlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIShfZW52LmVudi5pc0JveFNlcmllcyB8fCBfZW52LmVudi5pc1hpYW9NaUJhaVBhaSB8fCBfZW52LmVudi5pc01hdHJpeCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAoMCwgX3BhZ2VNb2RlLnNldFBhZ2VNb2RlKSgpOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfcGFnZU1vZGUuZ2V0UGFnZU1vZGUpKCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHBhZ2VNb2RlID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICB0aGlzLmRhdGEuc2V0KCdwYWdlTW9kZScsIG1vZGVNYXBbcGFnZU1vZGVdKTsKICAgICAgICAgICAgICAgICgwLCBfcGFnZU1vZGUucmVnaXN0ZXJNb2RlQ2hhbmdlKShmdW5jdGlvbiAobW9kZSkgewogICAgICAgICAgICAgICAgICBfdGhpczUuZGF0YS5zZXQoJ3BhZ2VNb2RlJywgbW9kZU1hcFttb2RlXSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gd2F0Y2hNb2RlKCkgewogICAgICAgIHJldHVybiBfd2F0Y2hNb2RlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB3YXRjaE1vZGU7CiAgICB9KCkgLy8g5qOA5p+l6aG16Z2i5piv5ZCm5ruR5Yqo5Yiw5bqV6YOoCiAgICAvLyDnu5/orqHmu5HliLDmnIDlupXpg6jpmIXor7vlrozmiJDmiZPngrkKCiAgfSwgewogICAga2V5OiAiY2hlY2tTY3JvbGxCb3R0b20iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrU2Nyb2xsQm90dG9tKCkgewogICAgICAvLyArNeaYr+mYsuatouS4jeWPr+mihOefpeeahOWFvOWuueaAp2Nhc2UKICAgICAgaWYgKCF0aGlzLmRhdGEuZ2V0KCdsb2dQYWdlRW5kJykgJiYgd2luZG93LnNjcm9sbFkgKyB3aW5kb3cuaW5uZXJIZWlnaHQgKyA1ID49IGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0KSB7CiAgICAgICAgdGhpcy5kYXRhLnNldCgnbG9nUGFnZUVuZCcsIHRydWUpOwogICAgICAgICgwLCBfYXVjTG9nLnBhZ2VMb2cpKCdmaW5pc2gnKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNvbHVtblNob3ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbHVtblNob3coKSB7CiAgICAgICgwLCBfYXVjTG9nLnBhZ2VMb2cpKCdmaWVsZF9zaG93Jyk7CiAgICB9IC8vIOWIneWni+WMluaJk+eCueWPguaVsAoKICB9LCB7CiAgICBrZXk6ICJpbml0TG9nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0TG9nKCkgewogICAgICAoMCwgX2luZGV4LmluaXQpKFsvLyDpobXpnaLmiZPngrkKICAgICAgewogICAgICAgIGV2ZW50OiAncGFnZScsCiAgICAgICAgdWJjSWQ6ICcxMTQzMScsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBwYWdlOiAnaG90X25ld3MnLAogICAgICAgICAgc291cmNlOiAoMCwgX2dldFF1ZXJ5U3RyaW5nLmdldFF1ZXJ5U3RyaW5nKSgnc291cmNlJykgfHwgJ290aGVyJwogICAgICAgIH0KICAgICAgfSwgLy8g5q+P5Liq6LWE5rqQ5omT54K5CiAgICAgIHsKICAgICAgICBldmVudDogJ2NvbXBvbmVudCcsCiAgICAgICAgdWJjSWQ6ICcxMTQ1NScsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBwYWdlOiAnaG90X25ld3MnLAogICAgICAgICAgc291cmNlOiAoMCwgX2dldFF1ZXJ5U3RyaW5nLmdldFF1ZXJ5U3RyaW5nKSgnc291cmNlJykgfHwgJ290aGVyJwogICAgICAgIH0KICAgICAgfV0pOyAvLyDml7bplb/miZPngrnnu5/orqEKCiAgICAgIHZhciB1YmNMb2dnZXIgPSBiYXNlbG9nLnViY0luaXQoMTY4MzQpOwogICAgICB1YmNMb2dnZXIuc3RhcnRUaW1pbmdMb2coJ2hvdF9uZXdzX3RpbWluZycsIHsKICAgICAgICBwYWdlOiAnaG90X25ld3MnCiAgICAgIH0pOyAvLyDml7bplb/orqHlhaVmZWVk5aSn55uYCgogICAgICB2YXIgdWJjTG9nZ2VyRmVlZCA9IGJhc2Vsb2cudWJjSW5pdCg1MDcpOwogICAgICB1YmNMb2dnZXJGZWVkLnN0YXJ0VGltaW5nTG9nKCdob3RfbmV3c190aW1pbmcnLCB7CiAgICAgICAgZnJhbWVfc291cmNlOiAnaG90X25ld3MnCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInBhZ2VTaG93TG9nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwYWdlU2hvd0xvZygpIHsKICAgICAgLy8g6aG16Z2i5bGV546w5omT54K5CiAgICAgICgwLCBfYXVjTG9nLnBhZ2VMb2cpKCdwYWdlX3Nob3cnLCB7CiAgICAgICAgZW50ZXJfbmlkOiAoMCwgX2dldFF1ZXJ5U3RyaW5nLmdldFF1ZXJ5U3RyaW5nKSgnbmlkJykgfHwgJycKICAgICAgfSk7IC8vIOWxleeOsOiuoeWFpWZlZWTlpKfnm5gKCiAgICAgIGJhc2Vsb2cuc2VuZFViYyh7CiAgICAgICAgdWJjSWQ6ICc1OTQ2JywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHNvdXJjZTogJ2hvdF9uZXdzJywKICAgICAgICAgIGZyb206ICdmZWVkJwogICAgICAgIH0KICAgICAgfSk7IC8vIOWxleeOsOS4iuaKpXRodW5kZXIKCiAgICAgIGJhc2Vsb2cuc2VuZExvZyh7CiAgICAgICAgY3Q6IDMsCiAgICAgICAgY3N0OiAxLAogICAgICAgIGxvZ0Zyb206ICJmZWVkX21pZGJveCIsCiAgICAgICAgbG9nSW5mbzogImEyXzFfaG93X25ld3MiCiAgICAgIH0pOwogICAgfSAvLyDlvZPmmK/msonmtbjlvI/ml7bvvIzojrflj5bnirbmgIHmoI/pq5jluqYgVE9ET++8muWuieWNk+i/meS4querr+iDveWKm+S4jeWHhgoKICB9LCB7CiAgICBrZXk6ICJ0aXRsZUJhck9mZnNldFNldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdGl0bGVCYXJPZmZzZXRTZXQoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBpZiAoIV90aGlzNi5kYXRhLmdldCgnaXNJbW1lcnNpdmUnKSkgewogICAgICAgICAgcmVzb2x2ZSgwKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChfZW52LmVudi5pc0JveFNlcmllcyB8fCBfZW52LmVudi5pc01hdHJpeCkgewogICAgICAgICAgaWYgKF9lbnYuZW52LmlzSU9TKSB7CiAgICAgICAgICAgICgwLCBfaW52b2tlLmludm9rZVApKCd2MTYvdXRpbHMvZ2V0U3RhdHVzQmFySGVpZ2h0JykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgdmFyIGhlaWdodCA9ICtyZXMuaGVpZ2h0OwogICAgICAgICAgICAgIHJlc29sdmUoaGVpZ2h0KTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJlc29sdmUoX3RoaXM2LmRhdGEuZ2V0KCdkZWZhdWx0U3RhdHVzQmFySGVpZ2h0JykpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc29sdmUoX3RoaXM2LmRhdGEuZ2V0KCdkZWZhdWx0U3RhdHVzQmFySGVpZ2h0JykpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9IC8vIOajgOa1i+aYr+WQpuaYvuekunRpdGxlQmFy77yM5pi+56S65p2h5Lu25piv5b2TdGFi5LiL5ouJ5qGG5pi+56S65oiW6ICF5ruR5YqoMTAKCiAgfSwgewogICAga2V5OiAiY2hlY2tTaG93VGl0bGVCYXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrU2hvd1RpdGxlQmFyKCkgewogICAgICB0aGlzLmRhdGEuc2V0KCdhcHBTaG93VGl0bGVCYXInLCB3aW5kb3cuc2Nyb2xsWSA+IDEwKTsKICAgIH0gLy8g5qOA5p+l5bm25YiH5o2i6Iez5b2T5YmNdGFi5qCP5r+A5rS754q25oCB55qE5oyJ6ZKu77yM5qCP55uu5Yy65Z+f5piv5qCH6aKY5LiK5pa55LiA54K55Yiw5qCP55uu5bqV6YOoCgogIH0sIHsKICAgIGtleTogImNoZWNrTmF2SW5kZXgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrTmF2SW5kZXgoKSB7CiAgICAgIGlmICh0aGlzLmRhdGEuZ2V0KCdzY3JvbGxpbmcnKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHN0YXR1c0JhckhlaWdodCA9IHRoaXMuZGF0YS5nZXQoJ3N0YXR1c0JhckhlaWdodCcpOwogICAgICB2YXIgY29sdW1ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2F1Yy1jb2x1bW4td2F0Y2gnKTsKICAgICAgdmFyIHJlc3VsdCA9IDA7CiAgICAgIHZhciBuYXZzID0gdGhpcy5yZWYoJ25hdnMnKTsKCiAgICAgIGlmIChuYXZzKSB7CiAgICAgICAgdmFyIG5hdiA9IG5hdnMuY2hpbGRyZW5bMV07CiAgICAgICAgdmFyIG5hdkhlaWdodCA9IG5hdi5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7CiAgICAgICAgdmFyIHRvcEJhckhlaWdodCA9IHRoaXMuZGF0YS5nZXQoJ3RpdGxlQmFySGVpZ2h0Jyk7CiAgICAgICAgdmFyIHNjcm9sbFkgPSB3aW5kb3cuc2Nyb2xsWTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2x1bW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgY29sdW1uID0gY29sdW1uc1tpXTsgLy8g5omL5Yqo6LCD6K+V55qE6K+v5beuCgogICAgICAgICAgdmFyIGRlZmF1bHRPZmZzZXQgPSAvaW1hZ2UtbmFtZS8udGVzdChjb2x1bW4uY2xhc3NOYW1lKSA/IDMwIDogMjA7CgogICAgICAgICAgaWYgKGNvbHVtbi5vZmZzZXRUb3AgLSBuYXZIZWlnaHQgLSB0b3BCYXJIZWlnaHQgLSBzdGF0dXNCYXJIZWlnaHQgLSBkZWZhdWx0T2Zmc2V0IDwgc2Nyb2xsWSkgewogICAgICAgICAgICByZXN1bHQgPSBpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB0aGlzLmxvZ1RhYlN3aXRjaChyZXN1bHQsICdzY3JvbGwnKTsKICAgICAgICB0aGlzLmRhdGEuc2V0KCdhY3RpdmVJbmRleCcsIHJlc3VsdCk7CiAgICAgICAgdGhpcy5maWx0ZXJidG5TdHlsZShyZXN1bHQpOwogICAgICB9CiAgICB9IC8vIOWIh+aNonRhYueahOaJk+eCuQoKICB9LCB7CiAgICBrZXk6ICJsb2dUYWJTd2l0Y2giLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvZ1RhYlN3aXRjaChpbmRleCkgewogICAgICB2YXIgc3dpdGNoVHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ2NsaWNrJzsKCiAgICAgIGlmIChpbmRleCA9PT0gdGhpcy5kYXRhLmdldCgncHJlQWN0aXZlSW5kZXgnKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5kYXRhLnNldCgncHJlQWN0aXZlSW5kZXgnLCBpbmRleCk7CiAgICAgICgwLCBfYXVjTG9nLnBhZ2VMb2cpKCd0YWJfY2xpY2snLCB7CiAgICAgICAgY29sdW1uX2lkOiBpbmRleCArIDEsCiAgICAgICAgc3dpdGNoX3R5cGU6IHN3aXRjaFR5cGUKICAgICAgfSk7CiAgICB9IC8vIG5hdmJhciBmaXhlZOWIh+aNouS4juWQpgoKICB9LCB7CiAgICBrZXk6ICJjaGFuZ2VGaXhlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlRml4ZWQoKSB7CiAgICAgIHRoaXMuY2hlY2tTaG93VGl0bGVCYXIoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21tb25Mb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21tb25Mb2FkKGluZGV4LCBsb2FkaW5nU3RhdGUsIHRpbWVvdXQpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczcuc3RvcmVEaXNwYXRjaCgnc2V0Q29sdW1uTG9hZGluZ1N0YXRlJywgewogICAgICAgICAgaW5kZXg6IGluZGV4LAogICAgICAgICAgbG9hZGluZ1N0YXRlOiBsb2FkaW5nU3RhdGUKICAgICAgICB9KTsKICAgICAgfSwgdGltZW91dCk7CiAgICB9IC8vIOeCueWHu+i1hOa6kAoKICB9LCB7CiAgICBrZXk6ICJjb21KdW1wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21KdW1wKCkgewogICAgICAvLyDkuIrmiqXmiZPngrkKICAgICAgYmFzZWxvZy5zZW5kTG9nKHsKICAgICAgICBjdDogMywKICAgICAgICBjc3Q6IDIsCiAgICAgICAgbG9nRnJvbTogImZlZWRfbWlkYm94IiwKICAgICAgICBsb2dJbmZvOiAiYTJfMV9ob3dfbmV3cyIKICAgICAgfSk7CiAgICB9IC8vIOafpeeci+abtOWkmgoKICB9LCB7CiAgICBrZXk6ICJjbGlja01vcmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsaWNrTW9yZShpbmRleCkgewogICAgICB2YXIgX2NvcHlDb2x1bW5zJGluZGV4JG5lOwoKICAgICAgLy8g566A5Y2V5qih5ouf5LiL5Yqg6L295oCBCiAgICAgIHRoaXMuY29tbW9uTG9hZChpbmRleCwgMSwgMCk7IC8vIOe7meavj+S4quS4k+WMuue7keWumnBhZ2VpbmRleAoKICAgICAgdmFyIHBhZ2VBcnIgPSB0aGlzLmRhdGEuZ2V0KCdwYWdlQXJyJyk7CiAgICAgIHBhZ2VBcnJbaW5kZXhdID0gcGFnZUFycltpbmRleF0gKz0gMTsKICAgICAgdmFyIHBhZ2VTaXplID0gdGhpcy5kYXRhLmdldCgncGFnZVNpemUnKTsKICAgICAgdmFyIGJlZ2luTmV3cyA9IHBhZ2VBcnJbaW5kZXhdICogcGFnZVNpemU7CiAgICAgIHZhciBzaG93aW5nQ29sdW1ucyA9IHRoaXMuZGF0YS5nZXQoJ2xpc3Quc2hvd2luZ0NvbHVtbnMnKTsgLy8g5rex5ou36LSd5a+56LGh5pWw57uEY29sdW1uCgogICAgICB2YXIgY29weUNvbHVtbnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHNob3dpbmdDb2x1bW5zKSk7IC8vIOWPluavj+asoeWIhumhteeahG5ld3NMaXN05bm25o+S5YWl5Yiw5aSH5Lu95LitCgogICAgICB2YXIgbmV4dE5ld3NMaXN0ID0gc2hvd2luZ0NvbHVtbnNbaW5kZXhdLm5ld3NMaXN0LnNsaWNlKDAsIGJlZ2luTmV3cyk7CgogICAgICAoX2NvcHlDb2x1bW5zJGluZGV4JG5lID0gY29weUNvbHVtbnNbaW5kZXhdLm5ld3NMaXN0KS5zcGxpY2UuYXBwbHkoX2NvcHlDb2x1bW5zJGluZGV4JG5lLCBbMCwgY29weUNvbHVtbnNbaW5kZXhdLm5ld3NMaXN0Lmxlbmd0aF0uY29uY2F0KCgwLCBfdG9Db25zdW1hYmxlQXJyYXkyLmRlZmF1bHQpKG5leHROZXdzTGlzdCkpKTsKCiAgICAgIHRoaXMuY29tbW9uTG9hZChpbmRleCwgMCwgMzAwKTsKCiAgICAgIGlmIChjb3B5Q29sdW1uc1tpbmRleF0ubmV3c0xpc3QubGVuZ3RoID09PSBzaG93aW5nQ29sdW1uc1tpbmRleF0ubmV3c0xpc3QubGVuZ3RoKSB7CiAgICAgICAgY29weUNvbHVtbnNbaW5kZXhdLmlzRW5kID0gMTsKICAgICAgfQoKICAgICAgOyAvLyBzcGxpY2Xnu5npnIDopoHlsZXnpLrnmoTlr7nosaHmlbDnu4TvvIzlrozmiJDmlbDnu4Tmt7HlsYLmlbDmja7mlLnlj5jmm7TmlrDop4blm74KCiAgICAgIHRoaXMuZGF0YS5zcGxpY2UoJ2xpc3QuZnJvbnRTaG93Q2xvbHVtbicsIFtpbmRleCwgMSwgY29weUNvbHVtbnNbaW5kZXhdXSk7CiAgICB9IC8vIOaYvuekuuiPnOWNlQoKICB9LCB7CiAgICBrZXk6ICJjbGlja1NldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xpY2tTZXQoKSB7CiAgICAgIF9ib3h4LmRlZmF1bHQuY2FsbCgnZWFzeUJyb3dzZXIuc2hvd01lbnUnKTsKICAgIH0gLy8g5ruR5Yqo5Ye95pWwCgogIH0sIHsKICAgIGtleTogInNjcm9sbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2Nyb2xsKHRvcCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICBfc2Nyb2xsMi5kZWZhdWx0LnRvcChzY3JvbGxQYWdlLCB0b3AsIHsKICAgICAgICAgIGR1cmF0aW9uOiAxNTAsCiAgICAgICAgICAvLyDmu5HliqjmjIHnu63ml7bpl7QKICAgICAgICAgIGVhc2U6IGZ1bmN0aW9uIGVhc2UobikgewogICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICAgIH0gLy8g5ruR5Yqo5Yqo55S75Li657q/5oCn5Yqo55S7CgogICAgICAgIH0sIHJlc29sdmUpOwogICAgICB9KTsKICAgIH0gLy8g5b2T54K55Ye7dGFi5qCP55qE5oyJ6ZKu5pe277yM6ZyA6KaB5Yqo5oCB5ruR5Yqo77yM6K6h566X5rua5Yqo5L2N572u5bm26K6+5a6aYWN0aXZlSW5kZXgKCiAgfSwgewogICAga2V5OiAiY3VyckNvbHVtbkNoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3VyckNvbHVtbkNoYW5nZShpbmRleCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIC8vIOWmguaenOato+WcqOa7keWKqOi/h+eoi+S4reWImeS4jeWGjeaJp+ihjAogICAgICBpZiAodGhpcy5kYXRhLmdldCgnc2Nyb2xsaW5nJykpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMubG9nVGFiU3dpdGNoKGluZGV4LCAnY2xpY2snKTsKICAgICAgdmFyIG5hdkhlaWdodCA9IHRoaXMucmVmKCduYXZzJykuY2hpbGRyZW5bMV0uZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0OwogICAgICB2YXIgdG9wQmFySGVpZ2h0ID0gdGhpcy5kYXRhLmdldCgndGl0bGVCYXJIZWlnaHQnKTsKICAgICAgdmFyIHN0YXR1c0JhckhlaWdodCA9IHRoaXMuZGF0YS5nZXQoJ3N0YXR1c0JhckhlaWdodCcpOwogICAgICB2YXIgb2Zmc2V0VG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbHVtbicgKyBpbmRleCkub2Zmc2V0VG9wOyAvLyDmiYvliqjosIPor5XnlKjnmoTlgY/lt67vvIzkuLrkuobmnInmm7Tlpb3nmoTop4bop4nmlYjmnpwKCiAgICAgIHZhciBkZWZhdWx0T2Zmc2V0ID0gX2Vudi5lbnYuaXNBbmRyb2lkID8gMCA6IDEwOwoKICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2x1bW4nICsgaW5kZXgpICYmIC9pbWFnZS1uYW1lLy50ZXN0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2x1bW4nICsgaW5kZXgpLmNsYXNzTmFtZSkpIHsKICAgICAgICAvLyDlm77niYfmoIfpopjmoI/nm67ooaXlhYXlgY/np7vph4/kuLoyNQogICAgICAgIGRlZmF1bHRPZmZzZXQgPSAyNTsKICAgICAgfSAvLyBkaXPmmK/mnIDlkI7nrpflh7rmnaXnmoTmu5rliqjliLDnmoTlrprkvY3vvIzpnIDopoHkv53or4HlsZXnpLrlh7rmoI/nm67moIfpopgKCgogICAgICB2YXIgZGlzID0gb2Zmc2V0VG9wIC0gbmF2SGVpZ2h0IC0gdG9wQmFySGVpZ2h0IC0gc3RhdHVzQmFySGVpZ2h0IC0gZGVmYXVsdE9mZnNldDsKICAgICAgdGhpcy5kYXRhLnNldCgnc2Nyb2xsaW5nJywgdHJ1ZSk7CiAgICAgIHRoaXMuZGF0YS5zZXQoJ2FjdGl2ZUluZGV4JywgaW5kZXgpOwogICAgICB0aGlzLnNjcm9sbChkaXMpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIC8vIOa7keWKqOWujOaIkOS5i+WQjuWwhnNjcm9sbGluZ+e9ruWbnuWOn+S9jQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM4LmRhdGEuc2V0KCdzY3JvbGxpbmcnLCBmYWxzZSk7CiAgICAgICAgfSwgMzApOwogICAgICB9KTsKICAgICAgdGhpcy5maWx0ZXJidG5TdHlsZShpbmRleCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmlsdGVyYnRuU3R5bGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbHRlcmJ0blN0eWxlKGFjdGl2ZUluZGV4KSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgdmFyIG5hdnMgPSB0aGlzLmRhdGEuZ2V0KCdsaXN0Lm5hdkxpc3QnKTsKICAgICAgdmFyIG5hdkNvbG9yID0gKDAsIF91dGlscy5tYWNoaW5pbmdDb2xvcikodGhpcy5kYXRhLmdldCgnYmlnRXZlbnQubGFuZE5hdmlnYXRpb25Db2xvcicpKTsKICAgICAgbmF2cyAmJiBuYXZzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgdmFyIGJ0blN0eWxlID0gJyc7CiAgICAgICAgYnRuU3R5bGUgPSAiYmFja2dyb3VuZDogbm9uZTtjb2xvcjogIi5jb25jYXQobmF2Q29sb3IsICI7Iik7CgogICAgICAgIGlmIChpbmRleCA9PT0gX3RoaXM5LmRhdGEuZ2V0KCdhY3RpdmVJbmRleCcpKSB7CiAgICAgICAgICBidG5TdHlsZSA9ICJjb2xvcjogIi5jb25jYXQobmF2Q29sb3IsICI7YmFja2dyb3VuZDogbm9uZTsiKTsKICAgICAgICB9CgogICAgICAgIF90aGlzOS5kYXRhLnNldCgibGlzdC5uYXZMaXN0WyIuY29uY2F0KGluZGV4LCAiXS5idG5TdHlsZSIpLCBidG5TdHlsZSk7CiAgICAgIH0pOwogICAgfSAvLyDliJ3lp4vljJbml7bmjInopoHmsYLlr7npg6jliIbnibnmrormg4XlhrXlpITnkIYKCiAgfSwgewogICAga2V5OiAicHJvY2Vzc2luZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzc2luZygpIHsKICAgICAgLy8gaW1nVHlwZT0wfHwx77yM5Zu65a6abmF255qEbWFyZ2luLXRvcOWPlua2iAogICAgICB2YXIgaGVhZCA9IHRoaXMuZGF0YS5nZXQoJ2hlYWQnKTsKICAgICAgdmFyIG1vZGlmeVRpbWUgPSB0aGlzLmRhdGEuZ2V0KCdtb2RpZnlUaW1lJyk7CiAgICAgIHZhciBpc1NlY29uZEVkaXRpb24gPSBtb2RpZnlUaW1lID4gMTU5OTU2NzAwMCAmJiBtb2RpZnlUaW1lIDwgMTYyNjg1MjkxOTsKCiAgICAgIGlmIChoZWFkICYmICFoZWFkLmRlc2NyaXB0aW9uICYmICEoaGVhZC5pbWdUeXBlID09PSAyICYmIGlzU2Vjb25kRWRpdGlvbikpIHsKICAgICAgICB0aGlzLmRhdGEuc2V0KCdub0hlYWREZXNjJywgdHJ1ZSk7CiAgICAgIH0KCiAgICAgIHZhciBhbGxDb2x1bW5zID0gdGhpcy5kYXRhLmdldCgnbGlzdC5hbGxDb2x1bW5zJyk7CiAgICAgIHZhciBzaG93aW5nQ29sdW1ucyA9IHRoaXMuZGF0YS5nZXQoJ2xpc3Quc2hvd2luZ0NvbHVtbnMnKTsKCiAgICAgIGlmIChhbGxDb2x1bW5zLmxlbmd0aCA9PT0gc2hvd2luZ0NvbHVtbnMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5zdG9yZURpc3BhdGNoKCdtYWluOnNldExhc3RDb2x1bW4nKTsKICAgICAgfQogICAgfSAvLyDlr7zoiKrmn6XnnIvmm7TlpJrngrnlh7sKCiAgfSwgewogICAga2V5OiAibmF2TW9yZUNsaWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBuYXZNb3JlQ2xpY2soKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHZhciBzdGF0dXNCYXJIZWlnaHQgPSB0aGlzLmRhdGEuZ2V0KCdzdGF0dXNCYXJIZWlnaHQnKTsKICAgICAgdmFyIHRvcEJhckhlaWdodCA9IHRoaXMuZGF0YS5nZXQoJ3RpdGxlQmFySGVpZ2h0Jyk7CiAgICAgIHZhciBuYXZzSGVpZ2h0ID0gdGhpcy5yZWYoJ25hdnMnKSA/IHRoaXMucmVmKCduYXZzJykuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IDogMDsgLy8g5aaC5p6c5q2j5Zyo5ruR5Yqo6L+H56iL5Lit5YiZ5LiN5YaN5omn6KGMCgogICAgICBpZiAodGhpcy5kYXRhLmdldCgnc2Nyb2xsaW5nJykpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YS5zZXQoJ3Njcm9sbGluZycsIHRydWUpOwogICAgICB2YXIgZGlzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbHVtbjAnKS5vZmZzZXRUb3AgLSBuYXZzSGVpZ2h0IC0gc3RhdHVzQmFySGVpZ2h0IC0gdG9wQmFySGVpZ2h0OwogICAgICB0aGlzLnNjcm9sbChkaXMpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIC8vIOa7keWKqOWujOaIkOS5i+WQjuWwhnNjcm9sbGluZ+e9ruWbnuWOn+S9jQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMxMC5kYXRhLnNldCgnc2Nyb2xsaW5nJywgZmFsc2UpOwogICAgICAgIH0sIDMwKTsKICAgICAgfSk7CiAgICB9IC8vIOWbnua1geaJi+eZvgoKICB9LCB7CiAgICBrZXk6ICJiYWNrU2hvdWJhaSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYmFja1Nob3ViYWkocG9zKSB7CiAgICAgICgwLCBfYXVjTG9nLnBhZ2VMb2cpKCd0b3BpY19iYWNrX3Nob3ViYWknKTsKCiAgICAgIGlmIChtY3BMaXN0KSB7CiAgICAgICAgdmFyIF9tY3BMaXN0JGZpbmQ7CgogICAgICAgIHZhciBwb3NJZCA9IHBvcyA9PT0gJ3RvcCcgPyBQT1NfVE9QIDogUE9TX0JPVFRPTTsKICAgICAgICB2YXIgbWNwSW5zdGFuY2UgPSAoX21jcExpc3QkZmluZCA9IG1jcExpc3QuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0ucG9zID09PSBwb3NJZDsKICAgICAgICB9KSkgPT09IG51bGwgfHwgX21jcExpc3QkZmluZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX21jcExpc3QkZmluZC5pbnZva2VNY3A7CiAgICAgICAgdmFyIGlzV2VpeGluID0gX2Vudi5lbnYuaXNXZWl4aW4sCiAgICAgICAgICAgIGlzSU9TID0gX2Vudi5lbnYuaXNJT1MsCiAgICAgICAgICAgIGlzU2FmYXJpID0gX2Vudi5lbnYuaXNTYWZhcmk7CiAgICAgICAgdmFyIGhpdE1jcCA9IG1jcEluc3RhbmNlICYmIG1jcEluc3RhbmNlLmhpdE1jcCgpICYmIG1jcEluc3RhbmNlLmdldEFjdGlvbkZsYWcoKTsgLy8gaW9z55qE5b6u5L+h44CBc2FmYXJp6LWwbWNw6LCD6LW377yMbWNw6buY6K6k6LWwdWxpbmvosIPotbcKICAgICAgICAvLyBmaXjvvJrlvq7ljZrlkoxxcea1j+iniOWZqOWxj+iUvXVsaW5r5peg5rOV6LCD6LW355qE6Zeu6aKYCgogICAgICAgIHZhciB1c2VNY3AgPSBoaXRNY3AgJiYgKGlzSU9TICYmIChpc1dlaXhpbiB8fCBpc1NhZmFyaSkgfHwgIWlzSU9TKTsKCiAgICAgICAgaWYgKG1jcEluc3RhbmNlICYmICFtY3BJbnN0YW5jZS5nZXRBY3Rpb25GbGFnKCkpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICh1c2VNY3ApIHsKICAgICAgICAgIC8vIOaLpuaIquaMiemSruaYr+WQpuWRveS4reWxj+iUveetlueVpTogdHJ1ZTrkuI3lsY/olL0sIGZhbHNlOuWxj+iUvQogICAgICAgICAgbWNwSW5zdGFuY2UuaW5kZXggPSAwOwogICAgICAgICAgbWNwSW5zdGFuY2UuZXhlY0ludm9rZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAoMCwgX3JlZmxvd1VnYy5vcGVuUmVmbG93QnlVcmwpKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgKDAsIF9yZWZsb3dVZ2Mub3BlblJlZmxvd0J5VXJsKSh3aW5kb3cubG9jYXRpb24uaHJlZik7CiAgICAgIH0KICAgIH0KICB9XSk7CiAgcmV0dXJuIEFwcDsKfShfc2FuLkNvbXBvbmVudCk7CgpleHBvcnRzLmRlZmF1bHQgPSBBcHA7CigwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKEFwcCwgInRlbXBsYXRlIiwKLyogaHRtbCAqLwoiXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ7e3N0eWxlcy5tYWluUGFnZX19XCIgaWQ9XCJtYWluUGFnZVwiPlxuICAgICAgICAgICAgPGF1Yy1iYWNrLWJhciBcbiAgICAgICAgICAgICAgICBzLWlmPVwiIShlbnYuaXNCb3hTZXJpZXMgfHwgZW52LmlzWGlhb01pQmFpUGFpIHx8IGVudi5pc01hdHJpeClcIlxuICAgICAgICAgICAgICAgIG9uLWJhY2tTaG91YmFpPVwiYmFja1Nob3ViYWkoJ3RvcCcpXCI+PC9hdWMtYmFjay1iYXI+XG4gICAgICAgICAgICA8YXVjLXRpdGxlYmFyXG4gICAgICAgICAgICAgICAgdGl0bGU9XCJ7e2hlYWQudGl0bGV9fVwiXG4gICAgICAgICAgICAgICAgcy1pZj1cInNob3dUaXRsZUJhclwiXG4gICAgICAgICAgICAgICAgcy1yZWY9XCJ0aXRsZUJhclwiXG4gICAgICAgICAgICAgICAgb24tY2xpY2stc2V0PVwiY2xpY2tTZXRcIlxuICAgICAgICAgICAgICAgIHRvcD1cInt7dGl0bGVCYXJUb3B9fVwiXG4gICAgICAgICAgICAgICAgaXNCaWdFdmVudD1cInt7YmlnRXZlbnQubGFuZFR5cGUgIT09IDB9fVwiXG4gICAgICAgICAgICAgICAgYmlnRXZlbnRDb2xvcj1cInt7YmlnRXZlbnRDb2xvcn19XCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHMtaWY9XCJ7e3Nob3dUaXRsZUJhciAmJiBpc0ltbWVyc2l2ZX19XCJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJoZWlnaHQ6IHt7c3RhdHVzQmFySGVpZ2h0UmVtfX07e3tiaWdFdmVudENvbG9yID8gJ2JhY2tncm91bmQtY29sb3I6JyArIGJpZ0V2ZW50Q29sb3IgOiAnJ319XCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJ0aXRsZUltbWVyc2l2ZVwiXG4gICAgICAgICAgICAgICAgPjwvZGl2PlxuICAgICAgICAgICAgPC9hdWMtdGl0bGViYXI+XG4gICAgICAgICAgICA8YXVjLW1lbnUtaWNvblxuICAgICAgICAgICAgICAgIHMtaWY9XCJzaG93TWVudUljb24gJiYgKGVudi5pc0JveFNlcmllcyB8fCBlbnYuaXNYaWFvTWlCYWlQYWkgfHwgZW52LmlzTWF0cml4KVwiXG4gICAgICAgICAgICAgICAgdG9wPVwie3tzdGF0dXNCYXJIZWlnaHRSZW19fVwiXG4gICAgICAgICAgICAgICAgaXNCaWdFdmVudD1cInt7YmlnRXZlbnQubGFuZFR5cGUgIT09IDB9fVwiXG4gICAgICAgICAgICAgICAgb24tY2xpY2stc2V0PVwiY2xpY2tTZXRcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9hdWMtbWVudS1pY29uPlxuICAgICAgICAgICAgPGF1Yy1pbWFnZS1oZWFkZXJcbiAgICAgICAgICAgICAgICBzLWlmPVwiYmlnRXZlbnQubGFuZFRvcEltZ1R5cGUgPT09IDFcIlxuICAgICAgICAgICAgICAgIHMtcmVmPVwiaGVhZGVyXCJcbiAgICAgICAgICAgICAgICBzcmM9XCJ7e2hlYWQuaW1nVXJsfX1cIlxuICAgICAgICAgICAgICAgIGltZ1R5cGU9XCJ7e2hlYWQuaW1nVHlwZX19XCJcbiAgICAgICAgICAgICAgICBoZWFkSW1nQ29sb3I9e3toZWFkLmhlYWRJbWdDb2xvcn19XG4gICAgICAgICAgICAgICAgY2xhc3M9XCJ7e3N0eWxlcy5pbWdIZWFkZXJ9fVwiXG4gICAgICAgICAgICA+PC9hdWMtaW1hZ2UtaGVhZGVyPlxuICAgICAgICAgICAgPGF1Yy1oZWFkZXJcbiAgICAgICAgICAgICAgICBzLWVsc2VcbiAgICAgICAgICAgICAgICBzLXJlZj1cImhlYWRlclwiXG4gICAgICAgICAgICAgICAgcy1iaW5kPVwie3t7XG4gICAgICAgICAgICAgICAgICAgIC4uLmhlYWQsXG4gICAgICAgICAgICAgICAgICAgIGlzQmlnRXZlbnQ6IGJpZ0V2ZW50LmxhbmRUeXBlICE9PSAwLFxuICAgICAgICAgICAgICAgICAgICBub0hlYWREZXNjOiBub0hlYWREZXNjLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNCYXJIZWlnaHQ6IHN0YXR1c0JhckhlaWdodFxuICAgICAgICAgICAgICAgIH19fVwiXG4gICAgICAgICAgICA+PC9hdWMtaGVhZGVyPlxuICAgICAgICAgICAgPHRlbXBsYXRlIHMtaWY9XCJsaXN0LnNob3dpbmdDb2x1bW5zLmxlbmd0aCA+IDFcIj5cbiAgICAgICAgICAgICAgICA8YXVjLW5hdlxuICAgICAgICAgICAgICAgICAgICBzLWlmPVwie3tsaXN0Lm5hdkxpc3QubGVuZ3RoID4gMX19XCJcbiAgICAgICAgICAgICAgICAgICAgcy1yZWY9XCJuYXZzXCJcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJuYXZzXCJcbiAgICAgICAgICAgICAgICAgICAgbmF2cz1cInt7bGlzdC5uYXZMaXN0fX1cIlxuICAgICAgICAgICAgICAgICAgICBvbi1uYXYtY2hhbmdlPVwiY3VyckNvbHVtbkNoYW5nZVwiXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUluZGV4PVwie3thY3RpdmVJbmRleH19XCJcbiAgICAgICAgICAgICAgICAgICAgbmF2RGlhbG9nVG9wPVwie3tuYXZEaWFsb2dUb3B9fVwiXG4gICAgICAgICAgICAgICAgICAgIG5hdklubmVyVG9wPVwie3tuYXZJbm5lclRvcH19XCJcbiAgICAgICAgICAgICAgICAgICAgbm9NYXJnaW5Ub3A9XCJ7e25vSGVhZERlc2N9fVwiXG4gICAgICAgICAgICAgICAgICAgIGlzQmlnRXZlbnRIZWFkZXI9XCJ7e2JpZ0V2ZW50LmxhbmRUb3BJbWdUeXBlID09PSAxfX1cIlxuICAgICAgICAgICAgICAgICAgICBpc1BjPVwie3shZW52LmlzTW9iaWxlfX1cIlxuICAgICAgICAgICAgICAgICAgICBsYW5kVHlwZT1cInt7YmlnRXZlbnQubGFuZFR5cGV9fVwiXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlQmFySGVpZ2h0PVwie3t0aXRsZUJhckhlaWdodH19XCJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQmFySGVpZ2h0PVwie3tzdGF0dXNCYXJIZWlnaHR9fVwiXG4gICAgICAgICAgICAgICAgICAgIGJpZ0V2ZW50Q29sb3I9XCJ7e2JpZ0V2ZW50Q29sb3J9fVwiXG4gICAgICAgICAgICAgICAgICAgIG5hdkNvbG9yPVwie3tuYXZDb2xvcn19XCJcbiAgICAgICAgICAgICAgICAgICAgb24tY2hhbmdlLWZpeGVkPVwiY2hhbmdlRml4ZWRcIlxuICAgICAgICAgICAgICAgICAgICBvbi1tb3JlLWNsaWNrPVwibmF2TW9yZUNsaWNrXCJcbiAgICAgICAgICAgICAgICAgICAgaXNUcmFuc3BhcmVudFdyYXA9XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nVGl0bGU9XCJcdTk4ODZcdTU3REZcdTcwRURcdTcwQjlcIlxuICAgICAgICAgICAgICAgID48L2F1Yy1uYXY+XG4gICAgICAgICAgICA8L3RlbXBsYXRlPlxuICAgICAgICAgICAgPGF1Yy1jb2x1bW5cbiAgICAgICAgICAgICAgICBpZD1cImNvbHVtbnt7aW5kZXh9fVwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJhdWMtY29sdW1uLXdhdGNoIHt7c3BlY2lhbENsb3VtbkNsYXNzfX0ge3tjb2x1bW4uY29sdW1uTmFtZVR5cGUgJiYgYmlnRXZlbnQubGFuZFR5cGUgIT09IDA/ICdpbWFnZS1uYW1lJyA6ICcnfX1cIlxuICAgICAgICAgICAgICAgIHMtZm9yPVwiY29sdW1uLGluZGV4IGluIGxpc3QuZnJvbnRTaG93Q2xvbHVtblwiXG4gICAgICAgICAgICAgICAgc2hvd1RpdGxlPVwie3tsaXN0LmZyb250U2hvd0Nsb2x1bW4ubGVuZ3RoID4gMX19XCJcbiAgICAgICAgICAgICAgICBzLWJpbmQ9XCJjb2x1bW5cIlxuICAgICAgICAgICAgICAgIGJveC1wcmFzZS1pY29uLWxpc3Q9XCJ7e2JveFByYXNlSWNvbkxpc3R9fVwiXG4gICAgICAgICAgICAgICAgcGFnZS1tb2RlPVwie3twYWdlTW9kZX19XCJcbiAgICAgICAgICAgICAgICBjb2x1bW4taW5kZXg9XCJ7e2luZGV4fX1cIlxuICAgICAgICAgICAgICAgIGlzLWltbWVyc2l2ZT1cInt7aXNJbW1lcnNpdmV9fVwiXG4gICAgICAgICAgICAgICAgc3RhdHVzLWJhci1oZWlnaHQ9XCJ7e3N0YXR1c0JhckhlaWdodH19XCJcbiAgICAgICAgICAgICAgICBnbG9iYWxWZWRpb011dGU9XCJ7e2dsb2JhbFZlZGlvTXV0ZX19XCJcbiAgICAgICAgICAgICAgICBnbG9iYWxWZWRpb0F1dG9wbGF5PVwie3tnbG9iYWxWZWRpb0F1dG9wbGF5fX1cIlxuICAgICAgICAgICAgICAgIGdsb2JhbFZlZGlvVm9sdW1lPVwie3tnbG9iYWxWZWRpb1ZvbHVtZX19XCJcbiAgICAgICAgICAgICAgICBuZXR3b3J0VHlwZT1cInt7bmV0d29ydFR5cGV9fVwiXG4gICAgICAgICAgICAgICAgaXNCaWdFdmVudD1cInt7YmlnRXZlbnQubGFuZFR5cGUgIT09IDB9fVwiXG4gICAgICAgICAgICAgICAgbGFuZFR5cGU9XCJ7e2JpZ0V2ZW50LmxhbmRUeXBlfX1cIlxuICAgICAgICAgICAgICAgIHN0YXR1c0JhckhlaWdodD1cInt7c3RhdHVzQmFySGVpZ2h0fX1cIlxuICAgICAgICAgICAgICAgIHRpdGxlQmFySGVpZ2h0PVwie3t0aXRsZUJhckhlaWdodH19XCJcbiAgICAgICAgICAgICAgICB0b3BpY0lkPVwie3tpbmZvLmlkfX1cIlxuICAgICAgICAgICAgICAgIGlzSG90TmV3cz1cInRydWVcIlxuICAgICAgICAgICAgICAgIG9uLWNsaWNrLW1vcmU9XCJjbGlja01vcmUoaW5kZXgpXCJcbiAgICAgICAgICAgICAgICBvbi1jb21KdW1wPVwiY29tSnVtcFwiXG4gICAgICAgICAgICAgICAgb24tYmFja1Nob3ViYWk9XCJiYWNrU2hvdWJhaSgnYm90dG9tJylcIlxuICAgICAgICAgICAgPjwvYXVjLWNvbHVtbj5cbiAgICAgICAgPC9kaXY+XG4gICAgIik7CigwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKEFwcCwgImNvbXBvbmVudHMiLCB7CiAgJ2F1Yy1oZWFkZXInOiBfYXVjSGVhZGVyLmRlZmF1bHQsCiAgJ2F1Yy1jb2x1bW4nOiBfYXVjQ29sdW1uLmRlZmF1bHQsCiAgJ2F1Yy1uYXYnOiBfYXVjTmF2LmRlZmF1bHQsCiAgJ2F1Yy10aXRsZWJhcic6IF9hdWNUaXRsZWJhci5kZWZhdWx0LAogICdhdWMtbWVudS1pY29uJzogX2F1Y01lbnVJY29uLmRlZmF1bHQsCiAgJ2F1Yy1pbWFnZS1oZWFkZXInOiBfYXVjSW1hZ2VIZWFkZXIuZGVmYXVsdCwKICAnYXVjLWJhY2stYmFyJzogX2F1Y0JhY2tCYXIuZGVmYXVsdAp9KTsKKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkoQXBwLCAiY29tcHV0ZWQiLCB7CiAgc2hvd1RpdGxlQmFyOiBmdW5jdGlvbiBzaG93VGl0bGVCYXIoKSB7CiAgICBpZiAoaXNDb21MaWdodEVudikgewogICAgICByZXR1cm4gdGhpcy5kYXRhLmdldCgnYXBwU2hvd1RpdGxlQmFyJyk7CiAgICB9CiAgfSwKICBzdGF0dXNCYXJIZWlnaHRSZW06IGZ1bmN0aW9uIHN0YXR1c0JhckhlaWdodFJlbSgpIHsKICAgIC8vIOaJi+WKqOWKoOmrmOeCue+8jGlPU+WPr+iDveS8muWHuueOsOmXtOmamQogICAgcmV0dXJuIHB4VG9SZW0oK3RoaXMuZGF0YS5nZXQoJ3N0YXR1c0JhckhlaWdodCcpICsgNyk7CiAgfSwKICBzaG93TWVudUljb246IGZ1bmN0aW9uIHNob3dNZW51SWNvbigpIHsKICAgIGlmIChpc0NvbUxpZ2h0RW52KSB7CiAgICAgIHJldHVybiAhdGhpcy5kYXRhLmdldCgnc2hvd1RpdGxlQmFyJyk7CiAgICB9CiAgfSwKICBuYXZJbm5lclRvcDogZnVuY3Rpb24gbmF2SW5uZXJUb3AoKSB7CiAgICB2YXIgdGl0bGVCYXJIZWlnaHQgPSB0aGlzLmRhdGEuZ2V0KCd0aXRsZUJhckhlaWdodCcpOwogICAgdmFyIHN0YXR1c0JhckhlaWdodCA9IHRoaXMuZGF0YS5nZXQoJ3N0YXR1c0JhckhlaWdodCcpOwoKICAgIGlmIChpc0NvbUxpZ2h0RW52KSB7CiAgICAgIGlmICh0aGlzLmRhdGEuZ2V0KCdpc0ltbWVyc2l2ZScpKSB7CiAgICAgICAgcmV0dXJuIHB4VG9SZW0odGl0bGVCYXJIZWlnaHQgKyBzdGF0dXNCYXJIZWlnaHQpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBweFRvUmVtKHRpdGxlQmFySGVpZ2h0KTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgfSwKICBuYXZEaWFsb2dUb3A6IGZ1bmN0aW9uIG5hdkRpYWxvZ1RvcCgpIHsKICAgIHZhciB0aXRsZUJhckhlaWdodCA9IHRoaXMuZGF0YS5nZXQoJ3RpdGxlQmFySGVpZ2h0Jyk7CiAgICB2YXIgc3RhdHVzQmFySGVpZ2h0ID0gdGhpcy5kYXRhLmdldCgnc3RhdHVzQmFySGVpZ2h0Jyk7CgogICAgaWYgKChfZW52LmVudi5pc0JveFNlcmllcyB8fCBfZW52LmVudi5pc1hpYW9NaUJhaVBhaSB8fCBfZW52LmVudi5pc01hdHJpeCkgJiYgX2Vudi5lbnYuaXNMaWdodEZyYW1lKSB7CiAgICAgIGlmICh0aGlzLmRhdGEuZ2V0KCdpc0ltbWVyc2l2ZScpKSB7CiAgICAgICAgcmV0dXJuIHB4VG9SZW0odGl0bGVCYXJIZWlnaHQgKyBzdGF0dXNCYXJIZWlnaHQpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBweFRvUmVtKHRpdGxlQmFySGVpZ2h0KTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgfSwKICB0aXRsZUJhclRvcDogZnVuY3Rpb24gdGl0bGVCYXJUb3AoKSB7CiAgICBpZiAoIWlzQ29tbW9uRW52KSB7CiAgICAgIHJldHVybiAwOwogICAgfSBlbHNlIGlmICh0aGlzLmRhdGEuZ2V0KCdpc0ltbWVyc2l2ZScpKSB7CiAgICAgIHJldHVybiBweFRvUmVtKHRoaXMuZGF0YS5nZXQoJ3N0YXR1c0JhckhlaWdodCcpKTsKICAgIH0KICB9LAogIHRpdGxlQmFySGVpZ2h0OiBmdW5jdGlvbiB0aXRsZUJhckhlaWdodCgpIHsKICAgIGlmICghaXNDb21tb25FbnYpIHsKICAgICAgcmV0dXJuIDA7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gK3RoaXMuZGF0YS5nZXQoJ2RlZmF1bHRUaXRsZUJhckhlaWdodCcpOwogICAgfQogIH0sCiAgaG90UmV2aWV3c1BsYWNlaG9sZGVyOiBmdW5jdGlvbiBob3RSZXZpZXdzUGxhY2Vob2xkZXIoKSB7CiAgICB2YXIgY2xpY2tlZCA9IHRoaXMuZGF0YS5nZXQoJ2NvbW1lbnRMaXN0LmNsaWNrZWQnKTsKICAgIHJldHVybiBbX2FwcE1vZHVsZS5kZWZhdWx0LmhvdFJldmlld3NQbGFjZWhvbGRlciwgY2xpY2tlZCA/IF9hcHBNb2R1bGUuZGVmYXVsdC5jbGlja2VkIDogJyddOwogIH0sCiAgcGFnZUFycjogZnVuY3Rpb24gcGFnZUFycigpIHsKICAgIHZhciBzaG93aW5nQ29sdW1ucyA9IHRoaXMuZGF0YS5nZXQoJ2xpc3Quc2hvd2luZ0NvbHVtbnMnKTsKCiAgICBpZiAoIShzaG93aW5nQ29sdW1ucyA9PT0gbnVsbCB8fCBzaG93aW5nQ29sdW1ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2hvd2luZ0NvbHVtbnMubGVuZ3RoKSkgewogICAgICByZXR1cm47CiAgICB9IC8vIOWIneWni+WMluavj+S4quaooeWdl+eahOWIhumhteaVsO+8jOWIneWni+m7mOiupOesrOS4gOmhtQoKCiAgICByZXR1cm4gKDAsIF90b0NvbnN1bWFibGVBcnJheTIuZGVmYXVsdCkoQXJyYXkoc2hvd2luZ0NvbHVtbnMgPT09IG51bGwgfHwgc2hvd2luZ0NvbHVtbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNob3dpbmdDb2x1bW5zLmxlbmd0aCkpLm1hcChmdW5jdGlvbiAoXykgewogICAgICByZXR1cm4gMTsKICAgIH0pOwogIH0KfSk7CgppZiAobW9kdWxlLmhvdCkgewogIHZhciBfX0hPVF9BUElfXyA9IHJlcXVpcmUoJy9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL3Nhbi1ob3QtbG9hZGVyL2xpYi9ydW50aW1lL2NvbXBvbmVudC1jbGllbnQtYXBpLmpzJyk7CgogIHZhciBfX0hPVF9VVElMU19fID0gcmVxdWlyZSgnL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvc2FuLWhvdC1sb2FkZXIvbGliL3J1bnRpbWUvdXRpbHMuanMnKTsKCiAgdmFyIF9fU0FOX0NPTVBPTkVOVF9fID0gX19IT1RfVVRJTFNfXy5nZXRFeHBvcnRzKG1vZHVsZSk7CgogIGlmIChfX1NBTl9DT01QT05FTlRfXy50ZW1wbGF0ZSB8fCBfX1NBTl9DT01QT05FTlRfXy5wcm90b3R5cGUudGVtcGxhdGUpIHsKICAgIG1vZHVsZS5ob3QuYWNjZXB0KCk7CgogICAgX19IT1RfQVBJX18uaW5zdGFsbChyZXF1aXJlKCdzYW4nKSk7CgogICAgdmFyIF9fSE1SX0lEX18gPSAnNDk1MTYzOWQnOwoKICAgIGlmICghbW9kdWxlLmhvdC5kYXRhKSB7CiAgICAgIF9fSE9UX0FQSV9fLmNyZWF0ZVJlY29yZChfX0hNUl9JRF9fLCBfX1NBTl9DT01QT05FTlRfXyk7CiAgICB9IGVsc2UgewogICAgICBfX0hPVF9BUElfXy5ob3RSZWxvYWQoX19ITVJfSURfXywgX19TQU5fQ09NUE9ORU5UX18pOwogICAgfQogIH0KfQ=="},{"version":3,"sources":["/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/src/pages/recommend/containers/app.js"],"names":["baselog","BaseLog","scrollPage","pxToRem","value","bingEventBgs","env","isBoxSeries","isMatrix","boxx","call","e","console","error","isCommonEnv","isXiaoMiBaiPai","isComLightEnv","isLightFrame","POS_TOP","POS_BOTTOM","mcpList","mcpCreater","modeMap","lightmode","nightmode","darkmode","App","styles","title","columnPositon","activeIndex","columns","isImmersive","pageSize","pageArr","isInit","appShowTitleBar","scrolling","defaultStatusBarHeight","statusBarHeight","defaultTitleBarHeight","preActiveIndex","noHeadDesc","pageMode","boxPraseIconList","globalVedioMute","globalVedioAutoplay","globalVedioVolume","networtType","navColor","videoList","timeouter","invokeInfo","tempHotReviewsVal","isTomas","test","ua","isIOS","initLog","processing","watchMode","data","get","bigEventConfig","watch","val","set","window","sortsData","header","link","url","location","href","params","baiduid","navigator","userAgent","then","res","actionRule","action_rule","Object","keys","map","key","pos","invokeMcp","create","opt","logId","log_id","pageShowLog","lastIndex","allColumns","length","addEventListener","checkNavIndex","checkShowTitleBar","checkScrollBottom","scrollY","innerHeight","document","body","offsetHeight","filterbtnStyle","ref","maskClick","ispiyao","isKnews","isHuawei","isOppo","isMobile","initInvoke","titleBarOffsetSet","description","img_url","icon","landType","landBgColor","bigEventColor","navs","forEach","item","index","btnStyle","mode","event","ubcId","page","source","ubcLogger","ubcInit","startTimingLog","ubcLoggerFeed","frame_source","enter_nid","sendUbc","from","sendLog","ct","cst","logFrom","logInfo","Promise","resolve","reject","height","getElementsByClassName","result","nav","children","navHeight","el","getBoundingClientRect","topBarHeight","i","column","defaultOffset","className","offsetTop","logTabSwitch","switchType","column_id","switch_type","loadingState","timeout","setTimeout","storeDispatch","commonLoad","beginNews","showingColumns","copyColumns","JSON","parse","stringify","nextNewsList","newsList","slice","splice","isEnd","top","scroll","duration","ease","n","getElementById","isAndroid","dis","head","modifyTime","isSecondEdition","imgType","navsHeight","posId","mcpInstance","find","isWeixin","isSafari","hitMcp","getActionFlag","useMcp","execInvoke","Component","AucHeader","AucColumn","AucNav","AucTitlebar","AucMenuIcon","AucImageHeader","AucBackBar","showTitleBar","statusBarHeightRem","showMenuIcon","navInnerTop","titleBarHeight","navDialogTop","titleBarTop","hotReviewsPlaceholder","clicked","Array","_","module","hot","__HOT_API__","require","__HOT_UTILS__","__SAN_COMPONENT__","getExports","template","prototype","accept","install","__HMR_ID__","createRecord","hotReload"],"mappings":"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","sourcesContent":["/**\n * @file 容器组件\n * @author leizhihao <leizhihao@baidu.com>\n */\n/* eslint-disable fecs-camelcase */\nimport '@/lib/utils/patchSan';\nimport {Component} from 'san';\nimport styles from './app.module.less';\nimport BaseLog from '@baidu/feed-baselog';\nimport scroll from 'scroll';\nimport scrollDoc from 'scroll-doc';\nimport throttle from 'lodash.throttle';\nimport AucHeader from '@baidu/auc-header';\nimport AucColumn from '@baidu/auc-column';\nimport AucTitlebar from '@baidu/auc-titlebar';\nimport AucNav from '@baidu/auc-nav';\nimport AucMenuIcon from '@baidu/auc-menu-icon';\nimport AucImageHeader from '@baidu/auc-image-header';\nimport AucBackBar from '@baidu/auc-back-bar';\nimport {env} from '@baidu/auc-base/env';\nimport {invokeP} from '@baidu/xbox/na/invoke';\nimport {init} from '@baidu/auc-log/index';\nimport {pageLog} from '@baidu/auc-log';\nimport boxx from '@baidu/auc-base/boxx';\nimport {machiningColor} from '@baidu/auc-base/utils';\nimport {setPageMode, getPageMode, registerModeChange} from '@/lib/utils/pageMode';\nimport {initReflowByUrl, openReflowByUrl} from '@/lib/utils/reflowUgc';\nimport {getInvokeInfo, getMcpCreater} from '@/lib/utils/mcp';\nimport {startFontSize} from '@/lib/utils/fontSize';\nimport {setShareInfo} from '@/lib/utils/setShareInfo';\nimport {getQueryString} from '@/lib/utils/getQueryString';\nimport {cookie} from '@/lib/utils';\n\nconst baselog = new BaseLog();\nconst scrollPage = scrollDoc();\nconst pxToRem = value => value / 100 + 'rem';\nconst bingEventBgs = ['#fe344a'];\n\n// 尝试关闭加载态\ntry {\n    (env.isBoxSeries || env.isMatrix) && boxx.call('commonUI.closeLoading');\n} catch (e) {\n    console.error(e);\n}\n\n// 用最多的env\nconst isCommonEnv = env.isBoxSeries || env.isXiaoMiBaiPai || env.isMatrix;\nconst isComLightEnv = isCommonEnv && env.isLightFrame;\n// 顶部调起位\nconst POS_TOP = 'pos_topReflowBtn';\n// 底部调起位\nconst POS_BOTTOM = 'pos_bottomReflowBtn';\nlet mcpList = null;\nlet mcpCreater = getMcpCreater();\nconst modeMap = {\n    lightmode: 'day',\n    nightmode: 'night',\n    darkmode: 'dark'\n};\n\nexport default class App extends Component {\n    static template = /* html */ `\n        <div class=\"{{styles.mainPage}}\" id=\"mainPage\">\n            <auc-back-bar \n                s-if=\"!(env.isBoxSeries || env.isXiaoMiBaiPai || env.isMatrix)\"\n                on-backShoubai=\"backShoubai('top')\"></auc-back-bar>\n            <auc-titlebar\n                title=\"{{head.title}}\"\n                s-if=\"showTitleBar\"\n                s-ref=\"titleBar\"\n                on-click-set=\"clickSet\"\n                top=\"{{titleBarTop}}\"\n                isBigEvent=\"{{bigEvent.landType !== 0}}\"\n                bigEventColor=\"{{bigEventColor}}\"\n            >\n                <div\n                    s-if=\"{{showTitleBar && isImmersive}}\"\n                    style=\"height: {{statusBarHeightRem}};{{bigEventColor ? 'background-color:' + bigEventColor : ''}}\"\n                    class=\"titleImmersive\"\n                ></div>\n            </auc-titlebar>\n            <auc-menu-icon\n                s-if=\"showMenuIcon && (env.isBoxSeries || env.isXiaoMiBaiPai || env.isMatrix)\"\n                top=\"{{statusBarHeightRem}}\"\n                isBigEvent=\"{{bigEvent.landType !== 0}}\"\n                on-click-set=\"clickSet\"\n            >\n            </auc-menu-icon>\n            <auc-image-header\n                s-if=\"bigEvent.landTopImgType === 1\"\n                s-ref=\"header\"\n                src=\"{{head.imgUrl}}\"\n                imgType=\"{{head.imgType}}\"\n                headImgColor={{head.headImgColor}}\n                class=\"{{styles.imgHeader}}\"\n            ></auc-image-header>\n            <auc-header\n                s-else\n                s-ref=\"header\"\n                s-bind=\"{{{\n                    ...head,\n                    isBigEvent: bigEvent.landType !== 0,\n                    noHeadDesc: noHeadDesc,\n                    statusBarHeight: statusBarHeight\n                }}}\"\n            ></auc-header>\n            <template s-if=\"list.showingColumns.length > 1\">\n                <auc-nav\n                    s-if=\"{{list.navList.length > 1}}\"\n                    s-ref=\"navs\"\n                    id=\"navs\"\n                    navs=\"{{list.navList}}\"\n                    on-nav-change=\"currColumnChange\"\n                    activeIndex=\"{{activeIndex}}\"\n                    navDialogTop=\"{{navDialogTop}}\"\n                    navInnerTop=\"{{navInnerTop}}\"\n                    noMarginTop=\"{{noHeadDesc}}\"\n                    isBigEventHeader=\"{{bigEvent.landTopImgType === 1}}\"\n                    isPc=\"{{!env.isMobile}}\"\n                    landType=\"{{bigEvent.landType}}\"\n                    titleBarHeight=\"{{titleBarHeight}}\"\n                    statusBarHeight=\"{{statusBarHeight}}\"\n                    bigEventColor=\"{{bigEventColor}}\"\n                    navColor=\"{{navColor}}\"\n                    on-change-fixed=\"changeFixed\"\n                    on-more-click=\"navMoreClick\"\n                    isTransparentWrap=\"true\"\n                    dialogTitle=\"领域热点\"\n                ></auc-nav>\n            </template>\n            <auc-column\n                id=\"column{{index}}\"\n                class=\"auc-column-watch {{specialCloumnClass}} {{column.columnNameType && bigEvent.landType !== 0? 'image-name' : ''}}\"\n                s-for=\"column,index in list.frontShowClolumn\"\n                showTitle=\"{{list.frontShowClolumn.length > 1}}\"\n                s-bind=\"column\"\n                box-prase-icon-list=\"{{boxPraseIconList}}\"\n                page-mode=\"{{pageMode}}\"\n                column-index=\"{{index}}\"\n                is-immersive=\"{{isImmersive}}\"\n                status-bar-height=\"{{statusBarHeight}}\"\n                globalVedioMute=\"{{globalVedioMute}}\"\n                globalVedioAutoplay=\"{{globalVedioAutoplay}}\"\n                globalVedioVolume=\"{{globalVedioVolume}}\"\n                networtType=\"{{networtType}}\"\n                isBigEvent=\"{{bigEvent.landType !== 0}}\"\n                landType=\"{{bigEvent.landType}}\"\n                statusBarHeight=\"{{statusBarHeight}}\"\n                titleBarHeight=\"{{titleBarHeight}}\"\n                topicId=\"{{info.id}}\"\n                isHotNews=\"true\"\n                on-click-more=\"clickMore(index)\"\n                on-comJump=\"comJump\"\n                on-backShoubai=\"backShoubai('bottom')\"\n            ></auc-column>\n        </div>\n    `;\n\n    static components = {\n        'auc-header': AucHeader,\n        'auc-column': AucColumn,\n        'auc-nav': AucNav,\n        'auc-titlebar': AucTitlebar,\n        'auc-menu-icon': AucMenuIcon,\n        'auc-image-header': AucImageHeader,\n        'auc-back-bar': AucBackBar,\n    };\n\n    static computed = {\n        showTitleBar() {\n            if (isComLightEnv) {\n                return this.data.get('appShowTitleBar');\n            }\n        },\n        statusBarHeightRem() {\n            // 手动加高点，iOS可能会出现间隙\n            return pxToRem(+this.data.get('statusBarHeight') + 7);\n        },\n        showMenuIcon() {\n            if (isComLightEnv) {\n                return !this.data.get('showTitleBar');\n            }\n        },\n        navInnerTop() {\n            const titleBarHeight = this.data.get('titleBarHeight');\n            const statusBarHeight = this.data.get('statusBarHeight');\n            if (isComLightEnv) {\n                if (this.data.get('isImmersive')) {\n                    return pxToRem(titleBarHeight + statusBarHeight);\n                } else {\n                    return pxToRem(titleBarHeight);\n                }\n            } else {\n                return 0;\n            }\n        },\n        navDialogTop() {\n            const titleBarHeight = this.data.get('titleBarHeight');\n            const statusBarHeight = this.data.get('statusBarHeight');\n            if ((env.isBoxSeries || env.isXiaoMiBaiPai || env.isMatrix) && env.isLightFrame) {\n                if (this.data.get('isImmersive')) {\n                    return pxToRem(titleBarHeight + statusBarHeight);\n                } else {\n                    return pxToRem(titleBarHeight);\n                }\n            } else {\n                return 0;\n            }\n        },\n        titleBarTop() {\n            if (!isCommonEnv) {\n                return 0;\n            } else if (this.data.get('isImmersive')) {\n                return pxToRem(this.data.get('statusBarHeight'));\n            }\n        },\n        titleBarHeight() {\n            if (!isCommonEnv) {\n                return 0;\n            } else {\n                return +this.data.get('defaultTitleBarHeight');\n            }\n        },\n\n        hotReviewsPlaceholder() {\n            const clicked = this.data.get('commentList.clicked');\n            return [\n                styles.hotReviewsPlaceholder,\n                clicked ? styles.clicked : ''  \n            ]\n        },\n        pageArr() {\n            const showingColumns = this.data.get('list.showingColumns');\n            if (!showingColumns?.length) {\n                return;\n            }\n            // 初始化每个模块的分页数，初始默认第一页\n            return [...Array(showingColumns?.length)].map(_=>1);\n        }\n    };\n\n    initData() {\n        return {\n            styles,\n            title: '',\n            columnPositon: [],\n            activeIndex: 0,\n            columns: [],\n            isImmersive: false,\n            env,\n            pageSize: 20, // 点击更多出20条，剩余全展开\n            pageArr: [],\n            isInit: false,\n            appShowTitleBar: false,\n            scrolling: false, // 防止重复触发滑动函数\n            defaultStatusBarHeight: 35, // 当获取不到状态栏高度时的默认值\n            statusBarHeight: 0, // 手机状态栏高度\n            defaultTitleBarHeight: 44, // titlebar高度 TODO: 动态获取\n            preActiveIndex: 0, // 记录上一次点击的tabIndex，用于打点\n            noHeadDesc: false,\n            pageMode: 'day',\n            boxPraseIconList: {},\n            globalVedioMute: true,\n            globalVedioAutoplay: 0,\n            globalVedioVolume: 0,\n            networtType: 'wifi',\n            navColor: '',\n            videoList: {},\n            timeouter: null,\n            invokeInfo: {},\n            tempHotReviewsVal: false,\n        };\n    }\n\n    async inited() {\n        let isTomas = /tomas/i.test(env.ua);\n        (env.isBoxSeries || env.isXiaoMiBaiPai || env.isMatrix) && !isTomas && env.isIOS && startFontSize();\n        this.initLog();\n        this.processing();\n        this.watchMode();\n        // landType = 0 普通模板\n        this.data.get('bigEvent.landType') !== 0 && this.bigEventConfig();\n\n        this.watch('appShowTitleBar', (val) => {\n            if (this.data.get('tempHotReviewsVal') === val) {\n                return;\n            }\n            this.data.set('tempHotReviewsVal', val);\n        });\n    }\n\n    initInvoke() {\n        // url从接口里取\n        let {link: url = window.location.href} = window.sortsData.header || {};\n        // 端内沉浸式展示，因为沉浸式是特殊的轻框架，为区分在url上加参数\n        !/isimmersive/.test(url) ? url += '&isimmersive=immersive': '';\n        const params = {\n            baiduid: cookie('BAIDUID'),\n            'user_agent': navigator.userAgent,\n            'invoke_info': {\n                [POS_TOP]: [{\n                    url\n                }],\n                [POS_BOTTOM]: [{\n                    url\n                }]\n            }\n        };\n        getInvokeInfo(params).then(res => {\n            this.data.set('invokeInfo', res);\n            let actionRule = res.action_rule;\n            mcpList = Object.keys(actionRule).map(key => {\n                return {\n                    pos: key,\n                    invokeMcp: mcpCreater.create({\n                        pos: key,\n                        opt: actionRule[key],\n                        logId: res.log_id\n                    })\n                };\n            });\n        });\n    }\n\n    attached() {\n        this.pageShowLog();\n\n        // 是否是沉浸式模式\n        this.data.set(\n            'isImmersive',\n            getQueryString('isimmersive') === 'immersive'\n        );\n\n        // 页面滑动时的监听函数\n        const lastIndex = this.data.get('list').allColumns.length - 1;\n        window.addEventListener('scroll', throttle(() => {\n            // 滑动时的tab栏动态调整\n            this.checkNavIndex();\n\n            // titlebar的动态显示\n            this.checkShowTitleBar();\n\n            // 检查是否滑动到了最后\n            this.checkScrollBottom();\n\n            // 滚动到底部强制切tab到最后\n            if (window.scrollY + window.innerHeight + 5 >= document.body.offsetHeight) {\n                this.data.set('activeIndex', lastIndex);\n                this.filterbtnStyle(lastIndex);\n            }\n            // 滚动到顶部强制隐藏titlebar和nav弹窗\n            if (window.scrollY < 10) {\n                this.data.set('appShowTitleBar', false);\n                this.ref('navs') && this.ref('navs').maskClick();\n            }\n        }, 100));\n\n        // 华为&辟谣，oppo浏览器、pc隐藏端外回流 、小米白牌分享出去的隐藏回流\n        let ispiyao = +getQueryString('id') === 5807;\n        let isKnews = getQueryString('_refluxos') === 'a8';\n        if (!env.isBoxSeries && !(env.isHuawei && ispiyao)\n            && !env.isOppo && env.isMobile && !isKnews && !env.isXiaoMiBaiPai && !env.isMatrix) {\n            this.initInvoke();\n            initReflowByUrl(window.location.href);\n        }\n\n        this.titleBarOffsetSet().then(value => {\n            this.data.set('statusBarHeight', +value);\n        });\n\n        const {\n            title,\n            description = '快速了解今日新鲜事',\n            img_url,\n            link\n        } = window.sortsData.header || {};\n        setShareInfo({\n            title,\n            link,\n            description,\n            icon: img_url\n        });\n    }\n\n    // 大事件配置初始化\n    async bigEventConfig() {\n        const landType = this.data.get('bigEvent.landType');\n        const landBgColor = machiningColor(this.data.get('bigEvent.landBgColor'));\n        let bigEventColor = bingEventBgs[landType - 1];\n        landBgColor ? bigEventColor = landBgColor : '';\n        this.data.set('bigEventColor', bigEventColor);\n        const navs = this.data.get('list.navList');\n        // 没有下发navColor，使用bgColor\n        const navColor = machiningColor(this.data.get('bigEvent.landNavigationColor'));\n        navColor && this.data.set('navColor', navColor);\n        navs && navs.forEach((item, index) => {\n            let btnStyle = '';\n            if (navColor) {\n                btnStyle = `background: none;color: ${navColor};`;\n                if (index === this.data.get('activeIndex')) {\n                    btnStyle = `color: ${navColor};background: none;`;\n                }\n            } else {\n                btnStyle = 'background: rgba(255,255,255,0.14);color: #fff;';\n                if (index === this.data.get('activeIndex')) {\n                    btnStyle = `color: ${bigEventColor};background: #fff;`;\n                }\n            }\n            return item.btnStyle = btnStyle;\n        });\n    }\n\n    // 模式监听\n    async watchMode() {\n        if (env.isBoxSeries || env.isXiaoMiBaiPai || env.isMatrix) {\n            setPageMode();\n            const pageMode = await getPageMode();\n            this.data.set('pageMode', modeMap[pageMode]);\n            registerModeChange((mode) => {\n                this.data.set('pageMode', modeMap[mode]);\n            });\n        }\n    }\n\n    // 检查页面是否滑动到底部\n    // 统计滑到最底部阅读完成打点\n    checkScrollBottom() {\n        // +5是防止不可预知的兼容性case\n        if (!this.data.get('logPageEnd') && window.scrollY + window.innerHeight + 5 >= document.body.offsetHeight) {\n            this.data.set('logPageEnd', true);\n            pageLog('finish');\n        }\n    }\n\n    columnShow() {\n        pageLog('field_show');\n    }\n\n    // 初始化打点参数\n    initLog() {\n        init([\n            // 页面打点\n            {\n                event: 'page',\n                ubcId: '11431',\n                params: {\n                    page: 'hot_news',\n                    source: getQueryString('source') || 'other',\n                }\n            },\n            // 每个资源打点\n            {\n                event: 'component',\n                ubcId: '11455',\n                params: {\n                    page: 'hot_news',\n                    source: getQueryString('source') || 'other',\n                }\n            },\n        ]);\n\n        // 时长打点统计\n        const ubcLogger = baselog.ubcInit(16834);\n        ubcLogger.startTimingLog('hot_news_timing',{\n            page: 'hot_news',\n        });\n        // 时长计入feed大盘\n        const ubcLoggerFeed = baselog.ubcInit(507);\n        ubcLoggerFeed.startTimingLog('hot_news_timing',{\n            frame_source: 'hot_news',\n        });\n    }\n\n    pageShowLog() {\n        // 页面展现打点\n        pageLog('page_show', {\n            enter_nid: getQueryString('nid') || ''\n        });\n        // 展现计入feed大盘\n        baselog.sendUbc({\n            ubcId: '5946',\n            params: {\n                source: 'hot_news',\n                from: 'feed',\n            },\n        });\n        // 展现上报thunder\n        baselog.sendLog({\n            ct: 3,\n            cst: 1,\n            logFrom: \"feed_midbox\",\n            logInfo: \"a2_1_how_news\",\n        });\n    }\n\n    // 当是沉浸式时，获取状态栏高度 TODO：安卓这个端能力不准\n    titleBarOffsetSet() {\n        return new Promise((resolve, reject) => {\n            if (!this.data.get('isImmersive')) {\n                resolve(0);\n                return;\n            }\n            if (env.isBoxSeries || env.isMatrix) {\n                if (env.isIOS) {\n                    invokeP('v16/utils/getStatusBarHeight').then(res => {\n                        const height = +res.height;\n                        resolve(height);\n                    }, () => {\n                        resolve(this.data.get('defaultStatusBarHeight'));\n                    });\n                } else {\n                    resolve(this.data.get('defaultStatusBarHeight'));\n                }\n            }\n        });\n    }\n\n    // 检测是否显示titleBar，显示条件是当tab下拉框显示或者滑动10\n    checkShowTitleBar() {\n        this.data.set(\n            'appShowTitleBar',\n            window.scrollY > 10\n        );\n    }\n\n    // 检查并切换至当前tab栏激活状态的按钮，栏目区域是标题上方一点到栏目底部\n    checkNavIndex() {\n        if (this.data.get('scrolling')) {\n            return;\n        }\n        const statusBarHeight = this.data.get('statusBarHeight');\n\n        const columns = document.getElementsByClassName('auc-column-watch');\n        let result = 0;\n        const navs = this.ref('navs');\n        if (navs) {\n            let nav = navs.children[1];\n            let navHeight = nav.el.getBoundingClientRect().height;\n            let topBarHeight = this.data.get('titleBarHeight');\n            let scrollY = window.scrollY;\n            for (let i = 0; i < columns.length; i++) {\n                let column = columns[i];\n                // 手动调试的误差\n                let defaultOffset = /image-name/.test(column.className) ? 30 : 20;\n                if (column.offsetTop - navHeight - topBarHeight - statusBarHeight - defaultOffset < scrollY) {\n                    result = i;\n                } else {\n                    break;\n                }\n            }\n\n            this.logTabSwitch(result, 'scroll');\n            this.data.set('activeIndex', result);\n            this.filterbtnStyle(result);\n        }\n    }\n\n    // 切换tab的打点\n    logTabSwitch(index, switchType = 'click') {\n        if (index === this.data.get('preActiveIndex')) {\n            return;\n        }\n        this.data.set('preActiveIndex', index);\n\n        pageLog('tab_click', {\n            column_id: index + 1,\n            switch_type: switchType\n        });\n    }\n\n    // navbar fixed切换与否\n    changeFixed() {\n        this.checkShowTitleBar();\n    }\n\n    commonLoad(index, loadingState, timeout) {\n        setTimeout(() => {\n            this.storeDispatch('setColumnLoadingState', {\n                index,\n                loadingState\n            });\n        }, timeout);\n    }\n\n    // 点击资源\n    comJump() {\n        // 上报打点\n        baselog.sendLog({\n            ct: 3,\n            cst: 2,\n            logFrom: \"feed_midbox\",\n            logInfo: \"a2_1_how_news\",\n        });\n    }\n\n    // 查看更多\n    clickMore(index) {\n        // 简单模拟下加载态\n        this.commonLoad(index, 1, 0);\n\n        // 给每个专区绑定pageindex\n        let pageArr = this.data.get('pageArr');\n        pageArr[index] = pageArr[index] += 1;\n\n        const pageSize = this.data.get('pageSize');\n        const beginNews = pageArr[index] * pageSize;\n\n        let showingColumns = this.data.get('list.showingColumns');\n        // 深拷贝对象数组column\n        let copyColumns = JSON.parse(JSON.stringify(showingColumns));\n        // 取每次分页的newsList并插入到备份中\n        const nextNewsList = showingColumns[index].newsList.slice(0, beginNews);\n        copyColumns[index].newsList.splice(0, copyColumns[index].newsList.length, ...nextNewsList);\n\n        this.commonLoad(index, 0, 300);\n\n        if (copyColumns[index].newsList.length === showingColumns[index].newsList.length) {\n            copyColumns[index].isEnd = 1;\n        };\n\n        // splice给需要展示的对象数组，完成数组深层数据改变更新视图\n        this.data.splice('list.frontShowClolumn', [index, 1, copyColumns[index]]);\n    }\n\n    // 显示菜单\n    clickSet() {\n        boxx.call('easyBrowser.showMenu');\n    }\n\n    // 滑动函数\n    scroll(top) {\n        return new Promise(resolve => {\n            scroll.top(scrollPage, top, {\n                duration: 150, // 滑动持续时间\n                ease: n => n // 滑动动画为线性动画\n            }, resolve);\n        });\n    }\n\n    // 当点击tab栏的按钮时，需要动态滑动，计算滚动位置并设定activeIndex\n    currColumnChange(index) {\n        // 如果正在滑动过程中则不再执行\n        if (this.data.get('scrolling')) {\n            return;\n        }\n        this.logTabSwitch(index, 'click');\n        let navHeight = this.ref('navs').children[1].el.getBoundingClientRect().height;\n        const topBarHeight = this.data.get('titleBarHeight');\n        const statusBarHeight = this.data.get('statusBarHeight');\n        let offsetTop = document.getElementById('column' + index).offsetTop;\n        // 手动调试用的偏差，为了有更好的视觉效果\n        let defaultOffset = env.isAndroid ? 0 : 10;\n        if (document.getElementById('column' + index) && /image-name/.test(document.getElementById('column' + index).className)) {\n            // 图片标题栏目补充偏移量为25\n            defaultOffset = 25;\n        }\n        // dis是最后算出来的滚动到的定位，需要保证展示出栏目标题\n        let dis = offsetTop - navHeight - topBarHeight - statusBarHeight - defaultOffset;\n        this.data.set('scrolling', true);\n        this.data.set('activeIndex', index);\n        this.scroll(dis).then(() => {\n            // 滑动完成之后将scrolling置回原位\n            setTimeout(() => {\n                this.data.set('scrolling', false);\n            }, 30);\n        });\n        this.filterbtnStyle(index);\n    }\n\n    filterbtnStyle(activeIndex) {\n        const navs = this.data.get('list.navList');\n        const navColor = machiningColor(this.data.get('bigEvent.landNavigationColor'));\n        navs && navs.forEach((item, index) => {\n            let btnStyle = '';\n\n            btnStyle = `background: none;color: ${navColor};`;\n            if (index === this.data.get('activeIndex')) {\n                btnStyle = `color: ${navColor};background: none;`;\n            }\n\n            this.data.set(`list.navList[${index}].btnStyle`, btnStyle);\n        });\n    }\n\n    // 初始化时按要求对部分特殊情况处理\n    processing() {\n        // imgType=0||1，固定nav的margin-top取消\n        let head = this.data.get('head');\n        const modifyTime = this.data.get('modifyTime');\n        let isSecondEdition = modifyTime > 1599567000 && modifyTime < 1626852919;\n        if (head && !head.description && !(head.imgType === 2 && isSecondEdition)) {\n            this.data.set('noHeadDesc', true);\n        }\n\n        const allColumns = this.data.get('list.allColumns');\n        const showingColumns = this.data.get('list.showingColumns');\n\n        if (allColumns.length === showingColumns.length) {\n            this.storeDispatch('main:setLastColumn');\n        }\n    }\n\n    // 导航查看更多点击\n    navMoreClick() {\n        const statusBarHeight = this.data.get('statusBarHeight');\n        let topBarHeight = this.data.get('titleBarHeight');\n        const navsHeight = this.ref('navs') ? this.ref('navs').el.getBoundingClientRect().height : 0;\n        // 如果正在滑动过程中则不再执行\n        if (this.data.get('scrolling')) {\n            return;\n        }\n        this.data.set('scrolling', true);\n        const dis =  document.getElementById('column0').offsetTop - navsHeight - statusBarHeight - topBarHeight;\n        this.scroll(dis).then(() => {\n            // 滑动完成之后将scrolling置回原位\n            setTimeout(() => {\n                this.data.set('scrolling', false);\n            }, 30);\n        });\n    }\n\n    // 回流手百\n    backShoubai(pos) {\n        pageLog('topic_back_shoubai');\n        if (mcpList) {\n            let posId = pos === 'top' ? POS_TOP : POS_BOTTOM;\n            let mcpInstance = mcpList.find(item => item.pos === posId)?.invokeMcp;\n            const {isWeixin, isIOS, isSafari} = env;\n            const hitMcp = mcpInstance && mcpInstance.hitMcp() && mcpInstance.getActionFlag();\n            // ios的微信、safari走mcp调起，mcp默认走ulink调起\n            // fix：微博和qq浏览器屏蔽ulink无法调起的问题\n            const useMcp = hitMcp && ((isIOS && (isWeixin || isSafari)) || !isIOS);\n            if (mcpInstance && !mcpInstance.getActionFlag()) {\n                return;\n            }\n            if (useMcp) {\n                // 拦截按钮是否命中屏蔽策略: true:不屏蔽, false:屏蔽\n                mcpInstance.index = 0;\n                mcpInstance.execInvoke();\n            } else {\n                openReflowByUrl(window.location.href);\n            }\n        } else {\n            openReflowByUrl(window.location.href);\n        }\n    }\n}\n\n"]}]}