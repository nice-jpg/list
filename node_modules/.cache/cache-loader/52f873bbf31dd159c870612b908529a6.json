{"remainingRequest":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js??ref--1-2!/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/src/pages/virusMap/components/mapChart/index.js","dependencies":[{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/src/pages/virusMap/components/mapChart/index.js","mtime":1695633995793},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/san-hot-loader/index.js","mtime":1696919525187},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/cache-loader/dist/cjs.js","mtime":1696919513896},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js","mtime":1696919524615}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkID0gcmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIik7Cgp2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoIi9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWZsZWN0LmNvbnN0cnVjdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCIpOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7Cgp2YXIgX3NsaWNlZFRvQXJyYXkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3NsaWNlZFRvQXJyYXkiKSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIikpOwoKdmFyIF9pbmhlcml0czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKSk7Cgp2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iKSk7Cgp2YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZiIpKTsKCnZhciBfZGVmaW5lUHJvcGVydHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5IikpOwoKdmFyIF9zYW4gPSByZXF1aXJlKCJzYW4iKTsKCnZhciBfbWFwQ2hhcnRNb2R1bGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vbWFwQ2hhcnQubW9kdWxlLmxlc3MiKSk7Cgp2YXIgZWNoYXJ0cyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoImVjaGFydHMvY29yZSIpKTsKCnZhciBfY2hhcnRzID0gcmVxdWlyZSgiZWNoYXJ0cy9jaGFydHMiKTsKCnZhciBfY29tcG9uZW50cyA9IHJlcXVpcmUoImVjaGFydHMvY29tcG9uZW50cyIpOwoKdmFyIF9yZW5kZXJlcnMgPSByZXF1aXJlKCJlY2hhcnRzL3JlbmRlcmVycyIpOwoKdmFyIF9jaGluYUpzb24gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4uLy4uLy4uLy4uL2Fzc2V0cy9tYXAvY2hpbmFKc29uIikpOwoKdmFyIF9tYXBDb25maWcgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9hc3NldHMvbWFwL21hcENvbmZpZyIpOwoKdmFyIF9pbnZva2VTY2hlbWUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4uLy4uL3V0aWxzL2ludm9rZVNjaGVtZSIpKTsKCnZhciBfdWJjUmVwb3J0U2RrID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAYmFpZHUvdWJjLXJlcG9ydC1zZGsiKSk7CgpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIuZGVmYXVsdCkodGhpcywgcmVzdWx0KTsgfTsgfQoKZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoRGF0ZSwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9Cgp2YXIgTWFwQ2hhcnRDb21wID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29tcG9uZW50KSB7CiAgKDAsIF9pbmhlcml0czIuZGVmYXVsdCkoTWFwQ2hhcnRDb21wLCBfQ29tcG9uZW50KTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihNYXBDaGFydENvbXApOwoKICBmdW5jdGlvbiBNYXBDaGFydENvbXAoKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMi5kZWZhdWx0KSh0aGlzLCBNYXBDaGFydENvbXApOwogICAgcmV0dXJuIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczIuZGVmYXVsdCkoTWFwQ2hhcnRDb21wLCBbewogICAga2V5OiAiYXR0YWNoZWQiLAoKICAgIC8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi8KCiAgICAvKiBlc2xpbnQtZW5hYmxlIG1heC1sZW4gKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBhdHRhY2hlZCgpIHsKICAgICAgdGhpcy5wcm9jZXNzRGF0YSgpOwogICAgICB0aGlzLnJlbmRlckdlb01hcCgwKTsKICAgICAgdGhpcy5yZWdpc3Rlck1hcENsaWNrKCk7CiAgICAgIHZhciBteU1hcEluc3RhbmNlID0gdGhpcy5kYXRhLmdldCgnbXlNYXBJbnN0YW5jZScpOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgbXlNYXBJbnN0YW5jZS5yZXNpemUpOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZWQoKSB7CiAgICAgIHZhciBzdWJUYWJTZWxlY3RlZCA9IHRoaXMuZGF0YS5nZXQoJ3N1YlRhYlNlbGVjdGVkJyk7CiAgICAgIHZhciBjdXJyZW50VGFiID0gdGhpcy5kYXRhLmdldCgnY3VycmVudFRhYicpOwoKICAgICAgaWYgKHN1YlRhYlNlbGVjdGVkICE9PSBjdXJyZW50VGFiKSB7CiAgICAgICAgdGhpcy5kYXRhLnNldCgnY3VycmVudFRhYicsIHN1YlRhYlNlbGVjdGVkKTsKICAgICAgICB0aGlzLnJlbmRlckdlb01hcChzdWJUYWJTZWxlY3RlZCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJwcm9jZXNzRGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzc0RhdGEoKSB7CiAgICAgIHZhciBvcmlnaW5EYXRhID0gdGhpcy5kYXRhLmdldCgnbWFwRGF0YScpOwogICAgICB2YXIgZGF0ZUxpc3QgPSBbXTsKICAgICAgdmFyIHNlYXJjaERhdGEgPSB7fTsKICAgICAgdmFyIGlucXVpcnlEYXRhID0ge307CiAgICAgIG9yaWdpbkRhdGEubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgdmFyIHRyZW5kcyA9IGl0ZW0udHJlbmRzOwogICAgICAgIHRyZW5kcyAmJiB0cmVuZHMubWFwKGZ1bmN0aW9uICh0cmVuZERhdGEpIHsKICAgICAgICAgIHZhciBfdHJlbmREYXRhJHVwZGF0ZV90aW0gPSB0cmVuZERhdGEudXBkYXRlX3RpbWUuc3BsaXQoJy4nKSwKICAgICAgICAgICAgICBfdHJlbmREYXRhJHVwZGF0ZV90aW0yID0gKDAsIF9zbGljZWRUb0FycmF5Mi5kZWZhdWx0KShfdHJlbmREYXRhJHVwZGF0ZV90aW0sIDIpLAogICAgICAgICAgICAgIG1vbnRoID0gX3RyZW5kRGF0YSR1cGRhdGVfdGltMlswXSwKICAgICAgICAgICAgICBkYXkgPSBfdHJlbmREYXRhJHVwZGF0ZV90aW0yWzFdOwoKICAgICAgICAgIHZhciB1cGRhdGVUaW1lID0gIiIuY29uY2F0KG1vbnRoLCAiXHU2NzA4IikuY29uY2F0KGRheSwgIlx1NjVFNSIpOyAvLyDlsIbml6XmnJ/lrZjliLBkYXRhTGlzdOmHjOmdogoKICAgICAgICAgIGlmICghZGF0ZUxpc3QuaW5jbHVkZXModXBkYXRlVGltZSkgJiYgZGF0ZUxpc3QubGVuZ3RoIDwgMzApIHsKICAgICAgICAgICAgZGF0ZUxpc3QudW5zaGlmdCh1cGRhdGVUaW1lKTsKICAgICAgICAgIH0gLy8g5bCG5pCc57Si44CB6Zeu6K+K5pWw5o2u5ZCE6Ieq5a2Y5YKoCgoKICAgICAgICAgIGlmICghc2VhcmNoRGF0YVt1cGRhdGVUaW1lXSkgewogICAgICAgICAgICBzZWFyY2hEYXRhW3VwZGF0ZVRpbWVdID0gW107CiAgICAgICAgICB9CgogICAgICAgICAgc2VhcmNoRGF0YVt1cGRhdGVUaW1lXS5wdXNoKHsKICAgICAgICAgICAgbmFtZTogaXRlbS5hcmVhLAogICAgICAgICAgICB2YWx1ZTogdHJlbmREYXRhLnNlYXJjaF9kYXUKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmICghaW5xdWlyeURhdGFbdXBkYXRlVGltZV0pIHsKICAgICAgICAgICAgaW5xdWlyeURhdGFbdXBkYXRlVGltZV0gPSBbXTsKICAgICAgICAgIH0KCiAgICAgICAgICBpbnF1aXJ5RGF0YVt1cGRhdGVUaW1lXS5wdXNoKHsKICAgICAgICAgICAgbmFtZTogaXRlbS5hcmVhLAogICAgICAgICAgICB2YWx1ZTogdHJlbmREYXRhLmlucXVpcnlfZGF1CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHRoaXMuZGF0YS5zZXQoJ2RhdGVMaXN0JywgZGF0ZUxpc3QpOwogICAgICB0aGlzLmRhdGEuc2V0KCdzZWFyY2hEYXRhJywgc2VhcmNoRGF0YSk7CiAgICAgIHRoaXMuZGF0YS5zZXQoJ2lucXVpcnlEYXRhJywgaW5xdWlyeURhdGEpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlckdlb01hcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyR2VvTWFwKGluZGV4KSB7CiAgICAgIC8vIOWcsOWbvumFjee9rgogICAgICB2YXIgcGllY2VzID0gW1t7CiAgICAgICAgc3RhcnQ6IDAsCiAgICAgICAgZW5kOiA0OTkKICAgICAgfSwgewogICAgICAgIHN0YXJ0OiA1MDAsCiAgICAgICAgZW5kOiA5OTkKICAgICAgfSwgewogICAgICAgIHN0YXJ0OiAxMDAwLAogICAgICAgIGVuZDogMTQ5OQogICAgICB9LCB7CiAgICAgICAgc3RhcnQ6IDE1MDAsCiAgICAgICAgZW5kOiAxOTk5CiAgICAgIH0sIHsKICAgICAgICBzdGFydDogMjAwMCwKICAgICAgICBlbmQ6IDI5OTkKICAgICAgfSwgewogICAgICAgIGd0ZTogMzAwMAogICAgICB9XSwgW3sKICAgICAgICBzdGFydDogMCwKICAgICAgICBlbmQ6IDQ5CiAgICAgIH0sIHsKICAgICAgICBzdGFydDogNTAsCiAgICAgICAgZW5kOiA5OQogICAgICB9LCB7CiAgICAgICAgc3RhcnQ6IDEwMCwKICAgICAgICBlbmQ6IDE0OQogICAgICB9LCB7CiAgICAgICAgc3RhcnQ6IDE1MCwKICAgICAgICBlbmQ6IDE5OQogICAgICB9LCB7CiAgICAgICAgc3RhcnQ6IDIwMCwKICAgICAgICBlbmQ6IDI5OQogICAgICB9LCB7CiAgICAgICAgZ3RlOiAzMDAKICAgICAgfV1dOwogICAgICB2YXIgcHJvdmluY2VDb2xvcnMgPSBbWyIjRUU1MDNDIiwgIiNGRjc4NjYiLCAiI0ZGOTM4NSIsICIjRkZCMEE2IiwgIiNGRkQyQ0MiLCAiI0ZGRUZFRCIsICIjRUVFRUVFIl0sIFsiIzFGOTQ5OSIsICIjNERCQUJGIiwgIiM2NkM4Q0MiLCAiIzk1RTJFNiIsICIjQzJGMEYyIiwgIiNFNkY5RkEiLCAiI0VFRUVFRSJdXTsKICAgICAgZWNoYXJ0cy51c2UoW19jb21wb25lbnRzLlRvb2x0aXBDb21wb25lbnQsIF9jb21wb25lbnRzLlZpc3VhbE1hcENvbXBvbmVudCwgX2NvbXBvbmVudHMuR2VvQ29tcG9uZW50LCBfY2hhcnRzLk1hcENoYXJ0LCBfcmVuZGVyZXJzLkNhbnZhc1JlbmRlcmVyXSk7CiAgICAgIHZhciBtYXBDaGFydCA9IGVjaGFydHMuaW5pdCh0aGlzLnJlZignbWFwQ29udGFpbmVyJyksIG51bGwsIHsKICAgICAgICByZW5kZXJlcjogJ2NhbnZhcycsCiAgICAgICAgdXNlRGlydHlSZWN0OiBmYWxzZQogICAgICB9KTsKICAgICAgdmFyIG1hcE5hbWUgPSAnYXR0YWNoLWNoaW5hJzsKICAgICAgZWNoYXJ0cy5yZWdpc3Rlck1hcChtYXBOYW1lLCBfY2hpbmFKc29uLmRlZmF1bHQpOwogICAgICB2YXIgY3VyU3ViVGFiSW5kZXggPSBpbmRleDsKICAgICAgdmFyIHByb3ZpbmNlQ29sb3IgPSBwcm92aW5jZUNvbG9yc1tjdXJTdWJUYWJJbmRleF07CiAgICAgIHZhciBwaWVjZSA9IHBpZWNlc1tjdXJTdWJUYWJJbmRleF07CiAgICAgIHZhciBkYXRhTGlzdCA9IHRoaXMuZ2V0TWFwRGF0YSgpOwogICAgICB2YXIgc2VhcmNoTGlua01hcCA9IHRoaXMuZ2V0U2VhcmNoTGlua01hcChkYXRhTGlzdCk7CiAgICAgIHZhciB0b29sdGlwID0gKDAsIF9tYXBDb25maWcuZ2V0VG9vbHRpcENvbmZpZykoX21hcENoYXJ0TW9kdWxlLmRlZmF1bHQsIGluZGV4LCBzZWFyY2hMaW5rTWFwKTsKICAgICAgdmFyIG9wdGlvbnMgPSAoMCwgX21hcENvbmZpZy5nZXRNYXBDb25maWcpKG1hcE5hbWUsIHRvb2x0aXAsIHsKICAgICAgICBwaWVjZTogcGllY2UsCiAgICAgICAgcHJvdmluY2VDb2xvcjogcHJvdmluY2VDb2xvcgogICAgICB9LCBkYXRhTGlzdCk7CiAgICAgIG1hcENoYXJ0LnNldE9wdGlvbihvcHRpb25zKTsKICAgICAgdGhpcy50cnlQaWNrSW5kZXgoKTsKICAgICAgdGhpcy5kYXRhLnNldCgnY3VyT3B0aW9uJywgb3B0aW9ucyk7CiAgICAgIHRoaXMuZGF0YS5zZXQoJ215TWFwSW5zdGFuY2UnLCBtYXBDaGFydCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVnaXN0ZXJNYXBDbGljayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJNYXBDbGljaygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMucmVmKCdtYXBDb250YWluZXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHN1YlRhYlNlbGVjdGVkID0gX3RoaXMuZGF0YS5nZXQoJ3N1YlRhYlNlbGVjdGVkJyk7IC8vIOWcsOWbvuWGheaPkOekuuahhueCueWHu+i3s+i9rOaJk+eCuSbpgLvovpEKCgogICAgICAgIGlmIChlLnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZigndmlydXMtbWFwLXRpcHMtZGV0YWlsJykgPiAtMSkgewogICAgICAgICAgdmFyIHNjaGVtYSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1ocmVmJyk7CiAgICAgICAgICAoMCwgX3ViY1JlcG9ydFNkay5kZWZhdWx0KSgnZXZlbnQnLCB7CiAgICAgICAgICAgIHR5cGU6ICdjbGsnLAogICAgICAgICAgICB2YWx1ZTogc3ViVGFiU2VsZWN0ZWQgPT09IDAgPyAnbWFwX2RldGFpbF9DT1ZJRCcgOiAnbWFwX2RldGFpbF9oZWFsdGgnCiAgICAgICAgICB9KTsKICAgICAgICAgIHNjaGVtYSAmJiAoMCwgX2ludm9rZVNjaGVtZS5kZWZhdWx0KShzY2hlbWEpOwogICAgICAgIH0gLy8g5Zyw5Zu+54Ot5Yy654K55Ye75pel5b+XCiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZhciBsb2dWYWwgPSBzdWJUYWJTZWxlY3RlZCA9PT0gMCA/ICdtYXBfYXJlYV9DT1ZJRCcgOiAnbWFwX2FyZWFfaGVhbHRoJzsKICAgICAgICAgICAgKDAsIF91YmNSZXBvcnRTZGsuZGVmYXVsdCkoJ2V2ZW50JywgewogICAgICAgICAgICAgIHR5cGU6ICdjbGsnLAogICAgICAgICAgICAgIHZhbHVlOiBsb2dWYWwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldE1hcERhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1hcERhdGEoZGF0ZSkgewogICAgICB2YXIgc3ViVGFiU2VsZWN0ZWQgPSB0aGlzLmRhdGEuZ2V0KCdzdWJUYWJTZWxlY3RlZCcpOwogICAgICB2YXIgbWFwRGF0YSA9IHN1YlRhYlNlbGVjdGVkID09PSAwID8gdGhpcy5kYXRhLmdldCgnc2VhcmNoRGF0YScpIDogdGhpcy5kYXRhLmdldCgnaW5xdWlyeURhdGEnKTsKICAgICAgdmFyIGluZGV4ID0gZGF0ZTsgLy8g5aaC5p6c5pyq5oyH5a6a5pel5pyf5YiZ6L+U5Zue5pyA5paw5LiA5aSpCgogICAgICBpZiAoIWluZGV4KSB7CiAgICAgICAgdmFyIGRhdGVMaXN0ID0gdGhpcy5kYXRhLmdldCgnZGF0ZUxpc3QnKTsKICAgICAgICBpbmRleCA9IGRhdGVMaXN0W2RhdGVMaXN0Lmxlbmd0aCAtIDFdOwogICAgICB9CgogICAgICByZXR1cm4gbWFwRGF0YVtpbmRleF07CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0U2VhcmNoTGlua01hcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2VhcmNoTGlua01hcChkYXRhTGlzdCkgewogICAgICB2YXIgbWFwID0ge307CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGl0ZW0gPSBkYXRhTGlzdFtpXTsKICAgICAgICB2YXIgdXJsID0gJ2h0dHBzOi8vbS5iYWlkdS5jb20vcz93b3JkPScgKyBlbmNvZGVVUklDb21wb25lbnQoaXRlbS5uYW1lICsgJ+eWq+aDhScpOwogICAgICAgIG1hcFtpdGVtLm5hbWVdID0gdXJsOwogICAgICB9CgogICAgICByZXR1cm4gbWFwOwogICAgfQogIH0sIHsKICAgIGtleTogImdvVGltZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdvVGltZXIoaW5kZXgpIHsKICAgICAgKDAsIF91YmNSZXBvcnRTZGsuZGVmYXVsdCkoJ2V2ZW50JywgewogICAgICAgIHR5cGU6ICdjbGsnLAogICAgICAgIHZhbHVlOiAnZGF0ZScKICAgICAgfSk7CiAgICAgIHZhciBydWxlciA9IHRoaXMucmVmKCd0aW1lclJ1bGVyJyk7CiAgICAgIHJ1bGVyLnNjcm9sbExlZnQgPSBpbmRleCAvIDM1ICogcnVsZXIuc2Nyb2xsV2lkdGggLSBydWxlci5jbGllbnRXaWR0aCAqIDAuNSAtIDk7CiAgICAgIHRoaXMucGlja0luZGV4KGluZGV4KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwaWNrVGltZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcGlja1RpbWUoZSkgewogICAgICAvLyDkuLvliqjlrprkvY3lkI41MDBtc+WGhe+8jOemgeatouW8ueaAp+WKqOeUu+mAoOaIkOeahOWGjeasoeWumuS9jQogICAgICBpZiAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLmRhdGEuZ2V0KCdsYXN0UGlja1RpbWUnKSA8IDUwMCkgewogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHJ1bGVyID0gZS50YXJnZXQ7CiAgICAgIHZhciBpbmRleCA9IE1hdGguY2VpbCgocnVsZXIuc2Nyb2xsTGVmdCArIHJ1bGVyLmNsaWVudFdpZHRoICogMC41KSAvIHJ1bGVyLnNjcm9sbFdpZHRoICogMzUpOwogICAgICB0aGlzLnBpY2tJbmRleChpbmRleCk7CiAgICB9CiAgfSwgewogICAga2V5OiAidHJ5UGlja0luZGV4IiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0cnlQaWNrSW5kZXgoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5kYXRhLnNldCgnbGFzdFBpY2tUaW1lJywgbmV3IERhdGUoKS5nZXRUaW1lKCkpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIucGlja0luZGV4KDMyLCB0cnVlKTsKICAgICAgfSwgMTApOwogICAgfQogIH0sIHsKICAgIGtleTogInBpY2tJbmRleCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcGlja0luZGV4KGluZGV4LCBmb3JjZVVwZGF0ZVBvc2l0aW9uKSB7CiAgICAgIHZhciBydWxlciA9IHRoaXMucmVmKCd0aW1lclJ1bGVyJyk7CiAgICAgIHZhciBvZmZzZXRYID0gOC41OwoKICAgICAgaWYgKHJ1bGVyICYmIGluZGV4ID49IDMyKSB7CiAgICAgICAgdmFyIG1heCA9IHJ1bGVyLmNoaWxkcmVuWzBdLmNsaWVudFdpZHRoIC0gcnVsZXIuY2xpZW50V2lkdGggLSBydWxlci5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jbGllbnRXaWR0aCAqIDAuNSAtIG9mZnNldFg7CiAgICAgICAgaWYgKHJ1bGVyLnNjcm9sbExlZnQgPiBtYXggfHwgZm9yY2VVcGRhdGVQb3NpdGlvbikgcnVsZXIuc2Nyb2xsTGVmdCA9IG1heDsKICAgICAgfQoKICAgICAgaWYgKHJ1bGVyICYmIGluZGV4IDw9IDMpIHsKICAgICAgICB2YXIgbWluID0gcnVsZXIuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uY2xpZW50V2lkdGggKiAwLjUgLSBvZmZzZXRYOwogICAgICAgIGlmIChydWxlci5zY3JvbGxMZWZ0IDwgbWluKSBydWxlci5zY3JvbGxMZWZ0ID0gbWluOwogICAgICB9CgogICAgICBpZiAoaW5kZXggPiAzMikgcmV0dXJuOyAvLyBjb21wYXJlIHdpdGggcHJlIGluZGV4LCBpZiBlcXVhbCB0aGVuIHJldHVybi4KICAgICAgLy8gZGVjcmVhc2UgcmVyZW5kZXIgY291bnQKCiAgICAgIGlmIChpbmRleCA9PT0gdGhpcy5kYXRhLmdldCgndGltZVBpY2tlclRtcCcpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgb3B0aW9uID0gdGhpcy5kYXRhLmdldCgnY3VyT3B0aW9uJyk7CiAgICAgIHZhciBnZW9JbnN0YW5jZSA9IHRoaXMuZGF0YS5nZXQoJ215TWFwSW5zdGFuY2UnKTsKICAgICAgdmFyIHN1YlRhYlNlbGVjdGVkID0gdGhpcy5kYXRhLmdldCgnc3ViVGFiU2VsZWN0ZWQnKTsKICAgICAgdmFyIGRhdGFMaXN0ID0gc3ViVGFiU2VsZWN0ZWQgPT09IDAgPyB0aGlzLmRhdGEuZ2V0KCdzZWFyY2hEYXRhJykgOiB0aGlzLmRhdGEuZ2V0KCdpbnF1aXJ5RGF0YScpOwogICAgICB2YXIga2V5ID0gdGhpcy5kYXRhLmdldCgnZGF0ZUxpc3QnKVtpbmRleCAtIDNdOwoKICAgICAgaWYgKCFkYXRhTGlzdFtrZXldKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBvcHRpb24uc2VyaWVzWzBdLmRhdGEgPSBkYXRhTGlzdFtrZXldOyAvLyBjb25zb2xlLmxvZygna2V5JyxpbmRleCxrZXkpOwoKICAgICAgZ2VvSW5zdGFuY2Uuc2V0T3B0aW9uKG9wdGlvbiwgdHJ1ZSk7CiAgICAgIHRoaXMuZGF0YS5hc3NpZ24oewogICAgICAgICdydWxlckluZGV4JzogaW5kZXgsCiAgICAgICAgJ3RpbWVQaWNrZXJUbXAnOiBpbmRleAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbml0RGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdERhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgc3R5bGVzOiBfbWFwQ2hhcnRNb2R1bGUuZGVmYXVsdCwKICAgICAgICBzdWJUYWJTZWxlY3RlZDogMCwKICAgICAgICBjdXJyZW50VGFiOiAwLAogICAgICAgIHJ1bGVybW06IG5ldyBBcnJheSgxMCksCiAgICAgICAgcnVsZXJjbTogbmV3IEFycmF5KDM1KSwKICAgICAgICBydWxlckluZGV4OiAwLAogICAgICAgIHVwZGF0ZVRpbWU6IFtdLAogICAgICAgIGxhc3RQaWNrVGltZTogMCwKICAgICAgICBzZWFyY2hUaW1lclBpY2tlckNvbG9yOiAnI0ZGNkE1NycsCiAgICAgICAgaW5xdWlyeVRpbWVyUGlja2VyQ29sb3I6ICcjMTBBRUI1JywKICAgICAgICBteU1hcEluc3RhbmNlOiAnJywKICAgICAgICBtYXBEYXRhOiBbewogICAgICAgICAgImFyZWEiOiAi5LiK5rW3IiwKICAgICAgICAgICJ0cmVuZHMiOiBbewogICAgICAgICAgICAic2VhcmNoX2luZGV4IjogMTkzMDM3OSwKICAgICAgICAgICAgLy8g5pCc57Si5oyH5pWwCiAgICAgICAgICAgICJpbnF1aXJ5X2luZGV4IjogOSwKICAgICAgICAgICAgLy8g5YGl5bq36Zeu6K+K5oyH5pWwCiAgICAgICAgICAgICJ1cGRhdGVfdGltZSI6ICIxMi4xMSIgLy8g5pel5pyfCgogICAgICAgICAgfSwgewogICAgICAgICAgICAic2VhcmNoX2luZGV4IjogMSwKICAgICAgICAgICAgImlucXVpcnlfaW5kZXgiOiAxODAxMDAsCiAgICAgICAgICAgICJ1cGRhdGVfdGltZSI6ICIxMi4xMiIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgInNlYXJjaF9pbmRleCI6IDM1NTI3NzgsCiAgICAgICAgICAgICJpbnF1aXJ5X2luZGV4IjogMjQ5NDU0LAogICAgICAgICAgICAidXBkYXRlX3RpbWUiOiAiMTIuMTMiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgICJzZWFyY2hfaW5kZXgiOiA0MjY2NTM5LAogICAgICAgICAgICAiaW5xdWlyeV9pbmRleCI6IDMzNDczOCwKICAgICAgICAgICAgInVwZGF0ZV90aW1lIjogIjEyLjE0IgogICAgICAgICAgfV0KICAgICAgICB9LCB7CiAgICAgICAgICAiYXJlYSI6ICLkupHljZciLAogICAgICAgICAgInRyZW5kcyI6IFt7CiAgICAgICAgICAgICJzZWFyY2hfaW5kZXgiOiAyMTE0MDE0LAogICAgICAgICAgICAiaW5xdWlyeV9pbmRleCI6IDUsCiAgICAgICAgICAgICJ1cGRhdGVfdGltZSI6ICIxMi4xMSIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgInNlYXJjaF9pbmRleCI6IDksCiAgICAgICAgICAgICJpbnF1aXJ5X2luZGV4IjogMjA5NDYyLAogICAgICAgICAgICAidXBkYXRlX3RpbWUiOiAiMTIuMTIiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgICJzZWFyY2hfaW5kZXgiOiAzNDI4MDMxLAogICAgICAgICAgICAiaW5xdWlyeV9pbmRleCI6IDI3NzI4MSwKICAgICAgICAgICAgInVwZGF0ZV90aW1lIjogIjEyLjEzIgogICAgICAgICAgfSwgewogICAgICAgICAgICAic2VhcmNoX2luZGV4IjogMzc2NzMzNCwKICAgICAgICAgICAgImlucXVpcnlfaW5kZXgiOiAzNjQyOTAsCiAgICAgICAgICAgICJ1cGRhdGVfdGltZSI6ICIxMi4xNCIKICAgICAgICAgIH1dCiAgICAgICAgfV0KICAgICAgfTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIE1hcENoYXJ0Q29tcDsKfShfc2FuLkNvbXBvbmVudCk7CgpleHBvcnRzLmRlZmF1bHQgPSBNYXBDaGFydENvbXA7CigwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKE1hcENoYXJ0Q29tcCwgInRlbXBsYXRlIiwgIlxuICAgICAgICA8ZGl2IGNsYXNzPVwie3tzdHlsZXNbJ21hcENoYXJ0J119fVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInt7c3R5bGVzWydtYXBDb250YWluJ119fVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ7e3N0eWxlc1snbWFwJ119fVwiIHMtcmVmPVwibWFwQ29udGFpbmVyXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInt7c3R5bGVzWydtYXBOYW5oYWknXX19XCI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ7e3N0eWxlc1sndGlwcyddfX1cIj5cdTRFRTVcdTRFMEFcdTY1NzBcdTYzNkVcdTRFM0FcdTUzNTVcdTRGNERcdTRFQkFcdTUzRTNcdTY0MUNcdTdEMjJcdTZCRDRcdTRGOEJcdUZGMDhcdTYyNDBcdTU3MjhcdTU3MzBcdTU3REZcdTYzMDdcdTY1NzAvXHU1RjUzXHU1NzMwXHU0RUJBXHU1M0UzXHU4OUM0XHU2QTIxXHVGRjA5XHVGRjBDXHU2RTJGXHU2RkIzXHU1M0YwXHU2NTcwXHU2MzZFXHU2NjgyXHU3RjNBXHU1OTMxPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlO1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ7e3N0eWxlc1snbWFwLXRpbWVyLWNvbnRhaW5lciddfX1cIiBvbi1zY3JvbGw9XCJwaWNrVGltZVwiIHMtcmVmPVwidGltZXJSdWxlclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwie3tzdHlsZXNbJ21hcC10aW1lci1ydWxlciddfX1cIiA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHMtZm9yPVwiY20sIGNtSW5kZXggaW4gcnVsZXJjbVwiIGNsYXNzPVwie3tzdHlsZXNbJ21hcC10aW1lci1ydWxlci1jbSddfX1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHMtZm9yPVwibW0sIG1tSW5kZXggaW4gcnVsZXJtbVwiICBjbGFzcz1cInt7c3R5bGVzWydtYXAtdGltZXItcnVsZXItbW0nXX19XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInt7c3R5bGVzWydtYXAtdGltZXItcnVsZXItY20tZGF0ZSddfX1cIiBvbi1jbGljaz1cImdvVGltZXIoY21JbmRleClcIj57eyBkYXRlTGlzdFtjbUluZGV4IC0gM10gfHwgJyd9fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSBzLWlmPVwiZGF0ZUxpc3RbcnVsZXJJbmRleCAtIDNdXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwie3tzdHlsZXNbJ21hcC10aW1lci1waWNrZXInXX19XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiB7e3N1YlRhYlNlbGVjdGVkID09PSAwID8gc2VhcmNoVGltZXJQaWNrZXJDb2xvciA6IGlucXVpcnlUaW1lclBpY2tlckNvbG9yfX07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3tpc1BDID8gJ2ZvbnQtc2l6ZTogLjE2cmVtOyB3aWR0aDogNzJweDsgbGVmdDogNDMuNSU7JyA6ICcnfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt7IGRhdGVMaXN0W3J1bGVySW5kZXggLSAzXX19XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInt7c3R5bGVzWydtYXAtdGltZXItcGlja2VyLXBvaW50J119fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjoge3tzdWJUYWJTZWxlY3RlZCA9PT0gMCA/IHNlYXJjaFRpbWVyUGlja2VyQ29sb3IgOiBpbnF1aXJ5VGltZXJQaWNrZXJDb2xvcn19O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHt7c3ViVGFiU2VsZWN0ZWQgPT09IDAgPyBzZWFyY2hUaW1lclBpY2tlckNvbG9yIDogaW5xdWlyeVRpbWVyUGlja2VyQ29sb3J9fVxuICAgICAgICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgPjwvZGl2PlxuICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgIik7CigwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKE1hcENoYXJ0Q29tcCwgImNvbXB1dGVkIiwge30pOwoKaWYgKG1vZHVsZS5ob3QpIHsKICB2YXIgX19IT1RfQVBJX18gPSByZXF1aXJlKCcvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9zYW4taG90LWxvYWRlci9saWIvcnVudGltZS9jb21wb25lbnQtY2xpZW50LWFwaS5qcycpOwoKICB2YXIgX19IT1RfVVRJTFNfXyA9IHJlcXVpcmUoJy9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL3Nhbi1ob3QtbG9hZGVyL2xpYi9ydW50aW1lL3V0aWxzLmpzJyk7CgogIHZhciBfX1NBTl9DT01QT05FTlRfXyA9IF9fSE9UX1VUSUxTX18uZ2V0RXhwb3J0cyhtb2R1bGUpOwoKICBpZiAoX19TQU5fQ09NUE9ORU5UX18udGVtcGxhdGUgfHwgX19TQU5fQ09NUE9ORU5UX18ucHJvdG90eXBlLnRlbXBsYXRlKSB7CiAgICBtb2R1bGUuaG90LmFjY2VwdCgpOwoKICAgIF9fSE9UX0FQSV9fLmluc3RhbGwocmVxdWlyZSgnc2FuJykpOwoKICAgIHZhciBfX0hNUl9JRF9fID0gJ2FhYmVlYjg4JzsKCiAgICBpZiAoIW1vZHVsZS5ob3QuZGF0YSkgewogICAgICBfX0hPVF9BUElfXy5jcmVhdGVSZWNvcmQoX19ITVJfSURfXywgX19TQU5fQ09NUE9ORU5UX18pOwogICAgfSBlbHNlIHsKICAgICAgX19IT1RfQVBJX18uaG90UmVsb2FkKF9fSE1SX0lEX18sIF9fU0FOX0NPTVBPTkVOVF9fKTsKICAgIH0KICB9Cn0="},{"version":3,"sources":["/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/src/pages/virusMap/components/mapChart/index.js"],"names":["MapChartComp","processData","renderGeoMap","registerMapClick","myMapInstance","data","get","window","addEventListener","resize","subTabSelected","currentTab","set","originData","dateList","searchData","inquiryData","map","item","trends","trendData","update_time","split","month","day","updateTime","includes","length","unshift","push","name","area","value","search_dau","inquiry_dau","index","pieces","start","end","gte","provinceColors","echarts","use","TooltipComponent","VisualMapComponent","GeoComponent","MapChart","CanvasRenderer","mapChart","init","ref","renderer","useDirtyRect","mapName","registerMap","china2","curSubTabIndex","provinceColor","piece","dataList","getMapData","searchLinkMap","getSearchLinkMap","tooltip","styles","options","setOption","tryPickIndex","e","target","className","indexOf","schema","getAttribute","type","logVal","date","mapData","i","url","encodeURIComponent","ruler","scrollLeft","scrollWidth","clientWidth","pickIndex","Date","getTime","stopPropagation","preventDefault","Math","ceil","setTimeout","forceUpdatePosition","offsetX","max","children","min","option","geoInstance","key","series","assign","rulermm","Array","rulercm","rulerIndex","lastPickTime","searchTimerPickerColor","inquiryTimerPickerColor","Component","module","hot","__HOT_API__","require","__HOT_UTILS__","__SAN_COMPONENT__","getExports","template","prototype","accept","install","__HMR_ID__","createRecord","hotReload"],"mappings":"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","sourcesContent":["/**\n * @file 地图组件\n * @author chaiyanchen@baidu.com\n */\n/* eslint-disable fecs-camelcase */\nimport {Component} from 'san';\nimport styles from './mapChart.module.less';\n// 按需引入\nimport * as echarts from 'echarts/core';\nimport {MapChart} from 'echarts/charts'\nimport {\n    TooltipComponent,\n    VisualMapComponent,\n    GeoComponent\n} from 'echarts/components'\nimport {CanvasRenderer} from 'echarts/renderers';\nimport china2 from '../../../../assets/map/chinaJson';\nimport {getMapConfig, getTooltipConfig} from '../../../../assets/map/mapConfig';\nimport invokeScheme from '../../utils/invokeScheme';\nimport ubc from '@baidu/ubc-report-sdk';\n\n\nexport default class MapChartComp extends Component {\n    /* eslint-disable max-len */\n    static template = `\n        <div class=\"{{styles['mapChart']}}\">\n            <div class=\"{{styles['mapContain']}}\">\n                <div class=\"{{styles['map']}}\" s-ref=\"mapContainer\"></div>\n                <div class=\"{{styles['mapNanhai']}}\"></div>\n            </div>\n            <div class=\"{{styles['tips']}}\">以上数据为单位人口搜索比例（所在地域指数/当地人口规模），港澳台数据暂缺失</div>\n            <div style=\"position: relative;\">\n                <div class=\"{{styles['map-timer-container']}}\" on-scroll=\"pickTime\" s-ref=\"timerRuler\">\n                    <div class=\"{{styles['map-timer-ruler']}}\" >\n                        <div s-for=\"cm, cmIndex in rulercm\" class=\"{{styles['map-timer-ruler-cm']}}\">\n                            <div s-for=\"mm, mmIndex in rulermm\"  class=\"{{styles['map-timer-ruler-mm']}}\"></div>\n                            <div class=\"{{styles['map-timer-ruler-cm-date']}}\" on-click=\"goTimer(cmIndex)\">{{ dateList[cmIndex - 3] || ''}}</div>\n                        </div>\n                    </div>\n                </div>\n                <template s-if=\"dateList[rulerIndex - 3]\">\n                    <div\n                        class=\"{{styles['map-timer-picker']}}\"\n                        style=\"\n                            border-color: {{subTabSelected === 0 ? searchTimerPickerColor : inquiryTimerPickerColor}};\n                            {{isPC ? 'font-size: .16rem; width: 72px; left: 43.5%;' : ''}}\n                        \"\n                    >\n                        {{ dateList[rulerIndex - 3]}}\n                    </div>\n                    <div\n                        class=\"{{styles['map-timer-picker-point']}}\"\n                        style=\"\n                            border-color: {{subTabSelected === 0 ? searchTimerPickerColor : inquiryTimerPickerColor}};\n                            background-color: {{subTabSelected === 0 ? searchTimerPickerColor : inquiryTimerPickerColor}}\n                        \"\n                    ></div>\n                </template>\n            </div>\n        </div>\n    `;\n    /* eslint-enable max-len */\n\n    static computed = {\n\n    };\n\n    attached() {\n        this.processData();\n        this.renderGeoMap(0);\n        this.registerMapClick();\n        const myMapInstance = this.data.get('myMapInstance');\n        window.addEventListener('resize', myMapInstance.resize);\n    }\n\n    updated() {\n        const subTabSelected = this.data.get('subTabSelected');\n        const currentTab = this.data.get('currentTab');\n        if (subTabSelected !== currentTab) {\n            this.data.set('currentTab', subTabSelected);\n            this.renderGeoMap(subTabSelected);\n        }\n    }\n\n    processData() {\n        const originData = this.data.get('mapData');\n        let dateList = [];\n        let searchData = {};\n        let inquiryData = {};\n        originData.map(item => {\n            const trends = item.trends;\n            trends && trends.map(trendData => {\n                const [month, day] = trendData.update_time.split('.');\n                const updateTime = `${month}月${day}日`;\n                // 将日期存到dataList里面\n                if (!dateList.includes(updateTime) && dateList.length < 30) {\n                    dateList.unshift(updateTime);\n                }\n                // 将搜索、问诊数据各自存储\n                if (!searchData[updateTime]) {\n                    searchData[updateTime] = []\n                }\n                searchData[updateTime].push({\n                    name: item.area,\n                    value:  trendData.search_dau\n                })\n                if (!inquiryData[updateTime]) {\n                    inquiryData[updateTime] = []\n                }\n                inquiryData[updateTime].push({\n                    name: item.area,\n                    value:  trendData.inquiry_dau\n                })\n            })\n        })\n        this.data.set('dateList', dateList);\n        this.data.set('searchData', searchData);\n        this.data.set('inquiryData', inquiryData);\n    }\n\n    renderGeoMap(index) {\n        // 地图配置\n        const pieces = [\n            [\n                {start: 0, end: 499},\n                {start: 500, end: 999},\n                {start: 1000, end: 1499},\n                {start: 1500, end: 1999},\n                {start: 2000, end: 2999},\n                {gte: 3000},\n            ],\n            [\n                {start: 0, end: 49},\n                {start: 50, end: 99},\n                {start: 100, end: 149},\n                {start: 150, end: 199},\n                {start: 200, end: 299},\n                {gte: 300}\n            ],\n        ]\n        const provinceColors = [\n            [\n                \"#EE503C\",\n                \"#FF7866\",\n                \"#FF9385\",\n                \"#FFB0A6\",\n                \"#FFD2CC\",\n                \"#FFEFED\",\n                \"#EEEEEE\",\n            ],\n            [\n                \"#1F9499\",\n                \"#4DBABF\",\n                \"#66C8CC\",\n                \"#95E2E6\",\n                \"#C2F0F2\",\n                \"#E6F9FA\",\n                \"#EEEEEE\"\n            ]\n        ];\n        echarts.use([\n            TooltipComponent,\n            VisualMapComponent,\n            GeoComponent,\n            MapChart,\n            CanvasRenderer,\n        ])\n        const mapChart = echarts.init(this.ref('mapContainer'), null, {\n            renderer: 'canvas',\n            useDirtyRect: false\n        });\n        const mapName = 'attach-china';\n        echarts.registerMap(mapName, china2);\n        const curSubTabIndex = index;\n        const provinceColor = provinceColors[curSubTabIndex];\n        const piece = pieces[curSubTabIndex];\n        const dataList = this.getMapData();\n        const searchLinkMap = this.getSearchLinkMap(dataList);\n        const tooltip = getTooltipConfig(styles, index, searchLinkMap);\n        const options = getMapConfig(mapName, tooltip, {\n            piece,\n            provinceColor\n        },\n        dataList);\n        mapChart.setOption(options);\n        this.tryPickIndex();\n        this.data.set('curOption', options);\n        this.data.set('myMapInstance', mapChart);\n    }\n\n    registerMapClick() {\n        this.ref('mapContainer').addEventListener('click', (e) => {\n            const subTabSelected = this.data.get('subTabSelected');\n            // 地图内提示框点击跳转打点&逻辑\n            if (e.target.className.indexOf('virus-map-tips-detail') > -1) {\n                const schema = e.target.getAttribute('data-href');\n                ubc('event', {\n                    type: 'clk',\n                    value: subTabSelected === 0 ? 'map_detail_COVID' : 'map_detail_health',\n                });\n                schema && invokeScheme(schema);\n            }\n            // 地图热区点击日志\n            else {\n                const logVal = subTabSelected === 0 ? 'map_area_COVID' : 'map_area_health';\n                ubc('event', {\n                    type: 'clk',\n                    value: logVal,\n                });\n            }\n        })\n    }\n\n    getMapData(date) {\n        const subTabSelected = this.data.get('subTabSelected');\n        const mapData = subTabSelected === 0 ? this.data.get('searchData') : this.data.get('inquiryData');\n        let index = date;\n        // 如果未指定日期则返回最新一天\n        if (!index) {\n            const dateList = this.data.get('dateList');\n            index = dateList[dateList.length - 1];\n        }\n        return mapData[index];\n    }\n\n    getSearchLinkMap(dataList) {\n        let map = {};\n        for (let i = 0; i < dataList.length; i++) {\n            const item = dataList[i];\n            const url = 'https://m.baidu.com/s?word=' + encodeURIComponent(item.name + '疫情');\n            map[item.name] = url;\n        }\n        return map;\n    }\n\n    goTimer(index) {\n        ubc('event', {\n            type: 'clk',\n            value: 'date',\n        });\n        const ruler = this.ref('timerRuler');\n        ruler.scrollLeft = index / 35 * ruler.scrollWidth - ruler.clientWidth * 0.5 - 9;\n        this.pickIndex(index);\n    }\n\n    pickTime(e) {\n        // 主动定位后500ms内，禁止弹性动画造成的再次定位\n        if (new Date().getTime() - this.data.get('lastPickTime') < 500) {\n            e.stopPropagation();\n            e.preventDefault();\n            return;\n        }\n        const ruler = e.target;\n        const index = Math.ceil(((ruler.scrollLeft + ruler.clientWidth * 0.5) / ruler.scrollWidth) * 35);\n        this.pickIndex(index);\n    }\n\n    tryPickIndex() {\n        this.data.set('lastPickTime', new Date().getTime());\n        setTimeout(() => {\n            this.pickIndex(32, true);\n        }, 10);\n    }\n\n    pickIndex(index, forceUpdatePosition) {\n        const ruler = this.ref('timerRuler');\n        const offsetX = 8.5;\n\n        if(ruler && index >= 32) {\n            const max = ruler.children[0].clientWidth - ruler.clientWidth  -\n                ruler.children[0].children[0].clientWidth * 0.5 - offsetX;\n            if (ruler.scrollLeft > max || forceUpdatePosition) ruler.scrollLeft = max;\n        }\n        if(ruler && index <=3) {\n            const min = ruler.children[0].children[0].clientWidth * 0.5 - offsetX;\n            if (ruler.scrollLeft < min) ruler.scrollLeft = min;\n        }\n\n        if(index > 32) return;\n        // compare with pre index, if equal then return.\n        // decrease rerender count\n        if (index === this.data.get('timePickerTmp')) {\n            return;\n        }\n\n        const option = this.data.get('curOption');\n        const geoInstance = this.data.get('myMapInstance');\n        const subTabSelected = this.data.get('subTabSelected');\n\n        const dataList = subTabSelected === 0 ? this.data.get('searchData') : this.data.get('inquiryData');\n        const key = this.data.get('dateList')[index - 3];\n        if (!dataList[key]) {\n            return;\n        }\n        option.series[0].data = dataList[key];\n        // console.log('key',index,key);\n        geoInstance.setOption(option, true);\n        this.data.assign({\n            'rulerIndex': index,\n            'timePickerTmp': index\n        });\n    }\n\n    initData() {\n        return {\n            styles,\n            subTabSelected: 0,\n            currentTab: 0,\n            rulermm: new Array(10),\n            rulercm: new Array(35),\n            rulerIndex: 0,\n            updateTime: [],\n            lastPickTime: 0,\n            searchTimerPickerColor: '#FF6A57',\n            inquiryTimerPickerColor: '#10AEB5',\n            myMapInstance: '',\n            mapData: [\n                {\n                    \"area\": \"上海\",\n                    \"trends\": [\n                        {\n                            \"search_index\": 1930379, // 搜索指数\n                            \"inquiry_index\": 9, // 健康问诊指数\n                            \"update_time\": \"12.11\" // 日期\n                        },\n                        {\n                            \"search_index\": 1,\n                            \"inquiry_index\": 180100,\n                            \"update_time\": \"12.12\"\n                        },\n                        {\n                            \"search_index\": 3552778,\n                            \"inquiry_index\": 249454,\n                            \"update_time\": \"12.13\"\n                        },\n                        {\n                            \"search_index\": 4266539,\n                            \"inquiry_index\": 334738,\n                            \"update_time\": \"12.14\"\n                        }\n                    ]\n                },\n                {\n                    \"area\": \"云南\",\n                    \"trends\": [\n                        {\n                            \"search_index\": 2114014,\n                            \"inquiry_index\": 5,\n                            \"update_time\": \"12.11\"\n                        },\n                        {\n                            \"search_index\": 9,\n                            \"inquiry_index\": 209462,\n                            \"update_time\": \"12.12\"\n                        },\n                        {\n                            \"search_index\": 3428031,\n                            \"inquiry_index\": 277281,\n                            \"update_time\": \"12.13\"\n                        },\n                        {\n                            \"search_index\": 3767334,\n                            \"inquiry_index\": 364290,\n                            \"update_time\": \"12.14\"\n                        }\n                    ]\n                }\n            ]\n        };\n    }\n}\n\n"]}]}