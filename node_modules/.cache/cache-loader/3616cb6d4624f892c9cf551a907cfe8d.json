{"remainingRequest":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js??ref--1-2!/Users/liaohuanyu/projects/baidu-work/baidu/feed3/topic-components/@baidu/auc-header/components/header-subscribe/index.js","dependencies":[{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/topic-components/@baidu/auc-header/components/header-subscribe/index.js","mtime":1696919769076},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/san-hot-loader/index.js","mtime":1696919525187},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/cache-loader/dist/cjs.js","mtime":1696919513896},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js","mtime":1696919524615}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWZsZWN0LmNvbnN0cnVjdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSk7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpKTsKCnZhciBfaW5oZXJpdHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIikpOwoKdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIikpOwoKdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZ2V0UHJvdG90eXBlT2YiKSk7Cgp2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSIpKTsKCnZhciBfc2FuID0gcmVxdWlyZSgic2FuIik7Cgp2YXIgX2VudiA9IHJlcXVpcmUoIkBiYWlkdS9hdWMtYmFzZS9lbnYiKTsKCnZhciBfYXVjTG9nID0gcmVxdWlyZSgiQGJhaWR1L2F1Yy1sb2ciKTsKCnZhciBfYm94eCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQGJhaWR1L2JveHgiKSk7CgpyZXF1aXJlKCIuL2luZGV4Lmxlc3MiKTsKCmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KSh0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMi5kZWZhdWx0KSh0aGlzLCByZXN1bHQpOyB9OyB9CgpmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSAiZnVuY3Rpb24iKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChEYXRlLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KCnZhciBwcmVmaXhDbHMgPSAndy10b3BpYy1oZWFkZXItdGl0bGUtc3ViJzsKCnZhciBIZWFkZXJUaXRsZVN1YiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkgewogICgwLCBfaW5oZXJpdHMyLmRlZmF1bHQpKEhlYWRlclRpdGxlU3ViLCBfQ29tcG9uZW50KTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihIZWFkZXJUaXRsZVN1Yik7CgogIGZ1bmN0aW9uIEhlYWRlclRpdGxlU3ViKCkgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazIuZGVmYXVsdCkodGhpcywgSGVhZGVyVGl0bGVTdWIpOwogICAgcmV0dXJuIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczIuZGVmYXVsdCkoSGVhZGVyVGl0bGVTdWIsIFt7CiAgICBrZXk6ICJpbml0RGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdERhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaXNTdXJlQ2FuY2xlU3ViOiBmYWxzZQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogImF0dGFjaGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhdHRhY2hlZCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMud2F0Y2goJ2lzTG9naW4nLCBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgX3RoaXMuaGFuZGxlc3ViQWN0aW9uKCk7CiAgICAgIH0pOwogICAgICB0aGlzLndhdGNoKCdzdWJTdGF0dXMnLCBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgaWYgKCt2YWwpIHsKICAgICAgICAgIF9ib3h4LmRlZmF1bHQuY2FsbCgnY29tbW9uVUkuc2hvd1RvYXN0JywgewogICAgICAgICAgICB0eXBlOiAnMScsCiAgICAgICAgICAgIG1lc3NhZ2U6ICforqLpmIXmiJDlip/vvIzmoI/nm67mnInmm7TmlrDml7bvvIzmiJHku6zlsIblj4rml7bmjqjpgIEnLAogICAgICAgICAgICB0aW1lOiAnNScKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzLmhhbmRsZVNob3dQZXJtaXNzaW9uRGlhbG9nKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF9ib3h4LmRlZmF1bHQuY2FsbCgnY29tbW9uVUkuc2hvd1RvYXN0JywgewogICAgICAgICAgICB0eXBlOiAnMScsCiAgICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojorqLpmIUnLAogICAgICAgICAgICB0aW1lOiAnNScKICAgICAgICAgIH0pOyAvLyDlj5bmtojorqLpmIXlkI7vvIzph43nva7nirbmgIHvvIzmr4/mrKHlj5bmtojorqLpmIXpg73pnIDopoHlvLnnqpfmj5DnpLoKCgogICAgICAgICAgX3RoaXMuZGF0YS5zZXQoJ2lzU3VyZUNhbmNsZVN1YicsIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgd2luZG93LkNhbmNlbFN1YkRpYWxvZ0NiID0gZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShyZXMpOwoKICAgICAgICBpZiAoZGF0YSAmJiArZGF0YS5wb3NpdGlvbiA9PT0gMSkgewogICAgICAgICAgX3RoaXMuZGF0YS5zZXQoJ2lzU3VyZUNhbmNsZVN1YicsIHRydWUpOwoKICAgICAgICAgIF90aGlzLmhhbmRsZXN1YkFjdGlvbigpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIHRoaXMubG9nKCd6aGVuTWluZ1N1Yl9zaG93Jyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFuZGxlc3ViQWN0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVzdWJBY3Rpb24oKSB7CiAgICAgIGlmIChfZW52LmVudi5pc0JveFNlcmllcyB8fCBfZW52LmVudi5pc0hvbm9yQXBwKSB7CiAgICAgICAgdGhpcy5sb2coJ3poZW5NaW5nU3ViX2NsaWNrJyk7CiAgICAgICAgdGhpcy5zdG9yZURpc3BhdGNoKCdwYWdlOmdldE5vdGlmaWNhdGlvblBlcm1pc3Npb24nLCB7CiAgICAgICAgICBzdG9yZVBvczogJ2hlYWQnCiAgICAgICAgfSk7CiAgICAgICAgdmFyIGlzTG9naW4gPSB0aGlzLmRhdGEuZ2V0KCdpc0xvZ2luJyk7CgogICAgICAgIGlmICghaXNMb2dpbikgewogICAgICAgICAgdGhpcy5zdG9yZURpc3BhdGNoKCdwYWdlOmxvZ2luJywgewogICAgICAgICAgICBzdG9yZVBvczogJ2hlYWQnCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIHN1YlN0YXR1cyA9IHRoaXMuZGF0YS5nZXQoJ3N1YlN0YXR1cycpOwogICAgICAgICAgdmFyIGlzU3VyZUNhbmNsZVN1YiA9IHRoaXMuZGF0YS5nZXQoJ2lzU3VyZUNhbmNsZVN1YicpOwoKICAgICAgICAgIGlmIChzdWJTdGF0dXMgJiYgIWlzU3VyZUNhbmNsZVN1YikgewogICAgICAgICAgICAvLyDlvZPnlKjmiLflj5bmtojorqLpmIXml7bvvIxkaWFsb2fmj5DphpIKICAgICAgICAgICAgaWYgKF9ib3h4LmRlZmF1bHQuY2FuSVVzZSgnY29tbW9uVUkuZGlhbG9nJykpIHsKICAgICAgICAgICAgICBfYm94eC5kZWZhdWx0LmNvbW1vblVJLmRpYWxvZyh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5Y+W5raI6K6i6ZiF5ZCO77yM5bCG5peg5rOV5pS25Yiw5pyA5paw55qEIueDreeCuea3seW6pueyvumAiSLmm7TmlrDmj5DphpInLAogICAgICAgICAgICAgICAgdGl0bGU6ICflj5bmtojorqLpmIXnoa7orqQnLAogICAgICAgICAgICAgICAgY2I6ICdDYW5jZWxTdWJEaWFsb2dDYicsCiAgICAgICAgICAgICAgICBidXR0b25zOiBbewogICAgICAgICAgICAgICAgICB0aXRsZTogJ+WGjeaDs+aDsycKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICflj5bmtojorqLpmIUnCiAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoKSB7fQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnN0b3JlRGlzcGF0Y2goJ3BhZ2U6cG9zdFN1YicsIHsKICAgICAgICAgICAgc3RvcmVQb3M6ICdoZWFkJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc3RvcmVEaXNwYXRjaCgncGFnZTpiYWNrU2hvdUJhaScpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFuZGxlU2hvd1Blcm1pc3Npb25EaWFsb2ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNob3dQZXJtaXNzaW9uRGlhbG9nKCkgewogICAgICB2YXIgc3ViU3RhdHVzID0gdGhpcy5kYXRhLmdldCgnc3ViU3RhdHVzJyk7CiAgICAgIHZhciBub3RpUGVybWlzc2lvbiA9IHRoaXMuZGF0YS5nZXQoJ25vdGlQZXJtaXNzaW9uJyk7CgogICAgICBpZiAoc3ViU3RhdHVzICYmICtub3RpUGVybWlzc2lvbi50b3RhbCA9PT0gMCkgewogICAgICAgIC8vIOacquiuoumYheeKtuaAgeS4lOeUqOaIt+S4uuW8gOWQr+mAmuefpeadg+mZkO+8jOaPkOmGkueUqOaIt+W8gOmAmuadg+mZkAogICAgICAgIHRoaXMuc3RvcmVEaXNwYXRjaCgncGFnZTpzaG93T3BlblBlcm1pc3Npb25EaWFsb2cnLCB7CiAgICAgICAgICBzdG9yZVBvczogJ2hlYWQnCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJsb2ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvZyh0eXBlKSB7CiAgICAgICgwLCBfYXVjTG9nLmNvbXBvbmVudExvZykodHlwZSwgJycsICcnKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEhlYWRlclRpdGxlU3ViOwp9KF9zYW4uQ29tcG9uZW50KTsKCmV4cG9ydHMuZGVmYXVsdCA9IEhlYWRlclRpdGxlU3ViOwooMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KShIZWFkZXJUaXRsZVN1YiwgInRlbXBsYXRlIiwKLyogaHRtbCAqLwoiXG4gICAgICAgIDxkaXYgY2xhc3M9XCIiLmNvbmNhdChwcmVmaXhDbHMsICIge3tzdWJTdGF0dXNDbGFzc319XCIgb24tY2xpY2s9XCJoYW5kbGVzdWJBY3Rpb25cIj5cbiAgICAgICAgICAgIDxzcGFuIHMtaWY9XCIhc3ViU3RhdHVzXCIgY2xhc3M9XCIiKS5jb25jYXQocHJlZml4Q2xzLCAiLWljb25cIj48L3NwYW4+XG4gICAgICAgICAgICA8c3Bhbj57e3N1YlN0YXR1cyA/ICdcdTVERjJcdThCQTJcdTk2MDUnIDogJ1x1OEJBMlx1OTYwNSd9fTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgIikpOwooMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KShIZWFkZXJUaXRsZVN1YiwgInRyaW1XaGl0ZXNwYWNlIiwgJ2FsbCcpOwooMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KShIZWFkZXJUaXRsZVN1YiwgImNvbXB1dGVkIiwgewogIHN1YlN0YXR1c0NsYXNzOiBmdW5jdGlvbiBzdWJTdGF0dXNDbGFzcygpIHsKICAgIHZhciBzdWJTdGF0dXMgPSArdGhpcy5kYXRhLmdldCgnc3ViU3RhdHVzJyk7CiAgICByZXR1cm4gc3ViU3RhdHVzID8gIiIuY29uY2F0KHByZWZpeENscywgIi1zdWJlZCIpIDogIiIuY29uY2F0KHByZWZpeENscywgIi11blN1YiIpOwogIH0KfSk7CgppZiAobW9kdWxlLmhvdCkgewogIHZhciBfX0hPVF9BUElfXyA9IHJlcXVpcmUoJy9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL3Nhbi1ob3QtbG9hZGVyL2xpYi9ydW50aW1lL2NvbXBvbmVudC1jbGllbnQtYXBpLmpzJyk7CgogIHZhciBfX0hPVF9VVElMU19fID0gcmVxdWlyZSgnL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvc2FuLWhvdC1sb2FkZXIvbGliL3J1bnRpbWUvdXRpbHMuanMnKTsKCiAgdmFyIF9fU0FOX0NPTVBPTkVOVF9fID0gX19IT1RfVVRJTFNfXy5nZXRFeHBvcnRzKG1vZHVsZSk7CgogIGlmIChfX1NBTl9DT01QT05FTlRfXy50ZW1wbGF0ZSB8fCBfX1NBTl9DT01QT05FTlRfXy5wcm90b3R5cGUudGVtcGxhdGUpIHsKICAgIG1vZHVsZS5ob3QuYWNjZXB0KCk7CgogICAgX19IT1RfQVBJX18uaW5zdGFsbChyZXF1aXJlKCdzYW4nKSk7CgogICAgdmFyIF9fSE1SX0lEX18gPSAnY2JlODk5ZDgnOwoKICAgIGlmICghbW9kdWxlLmhvdC5kYXRhKSB7CiAgICAgIF9fSE9UX0FQSV9fLmNyZWF0ZVJlY29yZChfX0hNUl9JRF9fLCBfX1NBTl9DT01QT05FTlRfXyk7CiAgICB9IGVsc2UgewogICAgICBfX0hPVF9BUElfXy5ob3RSZWxvYWQoX19ITVJfSURfXywgX19TQU5fQ09NUE9ORU5UX18pOwogICAgfQogIH0KfQ=="},{"version":3,"sources":["/Users/liaohuanyu/projects/baidu-work/baidu/feed3/topic-components/@baidu/auc-header/components/header-subscribe/index.js"],"names":["prefixCls","HeaderTitleSub","isSureCancleSub","watch","val","handlesubAction","boxx","call","type","message","time","handleShowPermissionDialog","data","set","window","CancelSubDialogCb","res","JSON","parse","position","log","env","isBoxSeries","isHonorApp","storeDispatch","storePos","isLogin","get","subStatus","canIUse","commonUI","dialog","title","cb","buttons","success","notiPermission","total","Component","subStatusClass","module","hot","__HOT_API__","require","__HOT_UTILS__","__SAN_COMPONENT__","getExports","template","prototype","accept","install","__HMR_ID__","createRecord","hotReload"],"mappings":"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","sourcesContent":["/**\n * @file 专题头图订阅功能\n * @author xiewenbo01 <xiewenbo01@baidu.com>\n */\n\nimport {Component} from 'san';\nimport {env} from '@baidu/auc-base/env';\nimport {componentLog} from '@baidu/auc-log';\nimport boxx from '@baidu/boxx';\nimport './index.less';\n\nconst prefixCls = 'w-topic-header-title-sub';\n\nexport default class HeaderTitleSub extends Component {\n    static template = /* html */ `\n        <div class=\"${prefixCls} {{subStatusClass}}\" on-click=\"handlesubAction\">\n            <span s-if=\"!subStatus\" class=\"${prefixCls}-icon\"></span>\n            <span>{{subStatus ? '已订阅' : '订阅'}}</span>\n        </div>\n    `;\n\n    static trimWhitespace = 'all';\n\n    static computed = {\n        subStatusClass() {\n            const subStatus = +this.data.get('subStatus');\n            return subStatus ? `${prefixCls}-subed` : `${prefixCls}-unSub`;\n        },\n    };\n\n    initData() {\n        return {\n            isSureCancleSub: false,\n        };\n    }\n\n    attached() {\n        this.watch('isLogin', val => {\n            this.handlesubAction();\n        });\n\n        this.watch('subStatus', val => {\n            if (+val) {\n                boxx.call('commonUI.showToast', {\n                    type: '1',\n                    message: '订阅成功，栏目有更新时，我们将及时推送',\n                    time: '5',\n                });\n                this.handleShowPermissionDialog();\n            }\n            else {\n                boxx.call('commonUI.showToast', {\n                    type: '1',\n                    message: '已取消订阅',\n                    time: '5',\n                });\n                // 取消订阅后，重置状态，每次取消订阅都需要弹窗提示\n                this.data.set('isSureCancleSub', false);\n            }\n        });\n\n        window.CancelSubDialogCb = res => {\n            const data = JSON.parse(res);\n            if (data && +data.position === 1) {\n                this.data.set('isSureCancleSub', true);\n                this.handlesubAction();\n            }\n        };\n\n        this.log('zhenMingSub_show');\n    }\n\n    handlesubAction() {\n        if (env.isBoxSeries || env.isHonorApp) {\n            this.log('zhenMingSub_click');\n            this.storeDispatch('page:getNotificationPermission', {\n                storePos: 'head',\n            });\n            const isLogin = this.data.get('isLogin');\n\n            if (!isLogin) {\n                this.storeDispatch('page:login', {\n                    storePos: 'head',\n                });\n            }\n            else {\n                const subStatus = this.data.get('subStatus');\n                const isSureCancleSub = this.data.get('isSureCancleSub');\n\n                if (subStatus && !isSureCancleSub) {\n                    // 当用户取消订阅时，dialog提醒\n                    if (boxx.canIUse('commonUI.dialog')) {\n                        boxx.commonUI.dialog({\n                            message: '取消订阅后，将无法收到最新的\"热点深度精选\"更新提醒',\n                            title: '取消订阅确认',\n                            cb: 'CancelSubDialogCb',\n                            buttons: [\n                                {\n                                    title: '再想想',\n                                },\n                                {\n                                    title: '取消订阅',\n                                },\n                            ],\n                            success: () => {},\n                        });\n\n                        return;\n                    }\n                }\n\n                this.storeDispatch('page:postSub', {\n                    storePos: 'head',\n                });\n            }\n        }\n        else {\n            this.storeDispatch('page:backShouBai');\n        }\n    }\n\n    handleShowPermissionDialog() {\n        const subStatus = this.data.get('subStatus');\n        const notiPermission = this.data.get('notiPermission');\n\n        if (subStatus && +notiPermission.total === 0) {\n            // 未订阅状态且用户为开启通知权限，提醒用户开通权限\n            this.storeDispatch('page:showOpenPermissionDialog', {\n                storePos: 'head',\n            });\n        }\n    }\n\n    log(type) {\n        componentLog(type, '', '');\n    }\n}\n"]}]}