{"remainingRequest":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js??ref--1-2!/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/src/pages/newsNotice/components/top-carousels/index.js","dependencies":[{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/src/pages/newsNotice/components/top-carousels/index.js","mtime":1695633995767},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/san-hot-loader/index.js","mtime":1696919525187},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/cache-loader/dist/cjs.js","mtime":1696919513896},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js","mtime":1696919524615}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCIuL2luZGV4Lmxlc3MiKTsKCnZhciBfaW5kZXgyID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vbGliL3V0aWxzL2luZGV4Iik7Cgp2YXIgX2RlZmF1bHQgPSB7CiAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vaW5kZXguaHRtbCcpLAogIGluaXREYXRhOiBmdW5jdGlvbiBpbml0RGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1ham9yUHJvZ3JhbXM6IHt9LAogICAgICBtdXRlZDogZmFsc2UKICAgIH07CiAgfSwKICB2aWRlb0NsaWNrOiBmdW5jdGlvbiB2aWRlb0NsaWNrKCkgewogICAgdmFyIGNtZCA9IHRoaXMuZGF0YS5nZXQoJ21ham9yUHJvZ3JhbXMnKS5jbWQ7CiAgICB0aGlzLmZpcmUoJ2NsaWNrSW52b2tlJywgY21kKTsKICB9LAogIG11dGVDbGljazogZnVuY3Rpb24gbXV0ZUNsaWNrKCkgewogICAgLy8g6Z2Z6Z+z5oyJ6ZKuCiAgICB2YXIgdmlkZW9SZWYgPSB0aGlzLnJlZigndmlkZW8nKTsKICAgIHZhciBtdXRlU3RhdHVzID0gdGhpcy5kYXRhLmdldCgnbXV0ZWQnKTsKICAgIHZpZGVvUmVmLm11dGVkID0gIW11dGVTdGF0dXM7CiAgICB0aGlzLmRhdGEuc2V0KCdtdXRlZCcsICFtdXRlU3RhdHVzKTsKICB9LAogIGF0dGFjaGVkOiBmdW5jdGlvbiBhdHRhY2hlZCgpIHsKICAgIHZhciB0aWNraW5nID0gZmFsc2U7CiAgICB2YXIgdmlkZW9SZWYgPSB0aGlzLnJlZigndmlkZW8nKTsKICAgIHZhciB2aWRlb1BsYXkgPSB2aWRlb1JlZi5wbGF5KCk7CiAgICB2aWRlb1BsYXkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIC8vIOWPr+S7peiHquWKqOaSreaUvgogICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAvKioKICAgICAgICog6KKrd2VpeGlu562J6ZmQ5Yi2CiAgICAgICAqIOS4jeWFgeiuuOiHquWKqOaSreaUvgogICAgICAgKi8KICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g5YW85a65d2VpeGlu6Ieq5Yqo5pKt5pS+CgogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdXZWl4aW5KU0JyaWRnZVJlYWR5JywgZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gdmlkZW9SZWYucGxheSgpOwogICAgICB9LCBmYWxzZSk7IC8vIOmAieaLqemdmemfs+WQjuWGjeaSreaUvgoKICAgICAgdmlkZW9SZWYubXV0ZWQgPSB0cnVlOwogICAgICB2aWRlb1JlZi5wbGF5KCk7IC8vIOWcqOeUqOaIt+S6pOS6kuWQjuiwg+eUqC5wbGF5KCkKCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gdmlkZW9SZWYucGxheSgpOwogICAgICB9KTsKICAgIH0pOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmICghdGlja2luZykgewogICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgICAgKDAsIF9pbmRleDIuaXNFbGVtZW50VmlzaWJsZSkodmlkZW9SZWYpID8gdmlkZW9SZWYucGxheSgpIDogdmlkZW9SZWYucGF1c2UoKTsKICAgICAgICAgIHRpY2tpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgICB0aWNraW5nID0gdHJ1ZTsKICAgICAgfQogICAgfSk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmlkZW9SZWYuY3VycmVudFRpbWUgPSAwOwogICAgICB2aWRlb1JlZi5wbGF5KCk7CiAgICB9KTsKICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"sources":["/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/src/pages/newsNotice/components/top-carousels/index.js"],"names":["template","require","initData","majorPrograms","muted","videoClick","cmd","data","get","fire","muteClick","videoRef","ref","muteStatus","set","attached","ticking","videoPlay","play","then","res","console","log","catch","err","document","addEventListener","e","window","requestAnimationFrame","pause","event","currentTime"],"mappings":";;;;;;;AAAA;;AACA;;eACe;AACXA,EAAAA,QAAQ,EAAEC,OAAO,CAAC,cAAD,CADN;AAEXC,EAAAA,QAFW,sBAEA;AACP,WAAO;AACHC,MAAAA,aAAa,EAAE,EADZ;AAEHC,MAAAA,KAAK,EAAE;AAFJ,KAAP;AAIH,GAPU;AAQXC,EAAAA,UARW,wBAQE;AACT,QAAMC,GAAG,GAAG,KAAKC,IAAL,CAAUC,GAAV,CAAc,eAAd,EAA+BF,GAA3C;AACA,SAAKG,IAAL,CAAU,aAAV,EAAyBH,GAAzB;AACH,GAXU;AAYXI,EAAAA,SAZW,uBAYC;AAAE;AACV,QAAIC,QAAQ,GAAG,KAAKC,GAAL,CAAS,OAAT,CAAf;AACA,QAAIC,UAAU,GAAG,KAAKN,IAAL,CAAUC,GAAV,CAAc,OAAd,CAAjB;AACAG,IAAAA,QAAQ,CAACP,KAAT,GAAiB,CAACS,UAAlB;AACA,SAAKN,IAAL,CAAUO,GAAV,CAAc,OAAd,EAAuB,CAACD,UAAxB;AACH,GAjBU;AAkBXE,EAAAA,QAlBW,sBAkBA;AACP,QAAIC,OAAO,GAAG,KAAd;AACA,QAAIL,QAAQ,GAAG,KAAKC,GAAL,CAAS,OAAT,CAAf;AACA,QAAIK,SAAS,GAAGN,QAAQ,CAACO,IAAT,EAAhB;AACAD,IAAAA,SAAS,CAACE,IAAV,CAAe,UAACC,GAAD,EAAS;AACpB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,KAHD,EAGGG,KAHH,CAGS,UAACC,GAAD,EAAS;AACd;AACZ;AACA;AACA;AACYH,MAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ,EALc,CAMd;;AACAC,MAAAA,QAAQ,CAACC,gBAAT,CACI,qBADJ,EAEI,UAAAC,CAAC;AAAA,eAAIhB,QAAQ,CAACO,IAAT,EAAJ;AAAA,OAFL,EAGI,KAHJ,EAPc,CAYd;;AACAP,MAAAA,QAAQ,CAACP,KAAT,GAAiB,IAAjB;AACAO,MAAAA,QAAQ,CAACO,IAAT,GAdc,CAed;;AACAU,MAAAA,MAAM,CAACF,gBAAP,CAAwB,YAAxB,EAAsC,UAAAC,CAAC;AAAA,eAAIhB,QAAQ,CAACO,IAAT,EAAJ;AAAA,OAAvC;AACH,KApBD;AAqBAU,IAAAA,MAAM,CAACF,gBAAP,CAAwB,QAAxB,EAAkC,UAACC,CAAD,EAAO;AACrC,UAAI,CAACX,OAAL,EAAc;AACVY,QAAAA,MAAM,CAACC,qBAAP,CAA6B,YAAM;AAC/B,wCAAiBlB,QAAjB,IACMA,QAAQ,CAACO,IAAT,EADN,GAEMP,QAAQ,CAACmB,KAAT,EAFN;AAGAd,UAAAA,OAAO,GAAG,KAAV;AACH,SALD;AAMAA,QAAAA,OAAO,GAAG,IAAV;AACH;AACJ,KAVD;AAWAY,IAAAA,MAAM,CAACF,gBAAP,CAAwB,UAAxB,EAAoC,UAACK,KAAD,EAAW;AAC3CpB,MAAAA,QAAQ,CAACqB,WAAT,GAAuB,CAAvB;AACArB,MAAAA,QAAQ,CAACO,IAAT;AACH,KAHD;AAIH;AA1DU,C","sourcesContent":["import './index.less';\nimport {isElementVisible} from '../../../../lib/utils/index';\nexport default {\n    template: require('./index.html'),\n    initData() {\n        return {\n            majorPrograms: {},\n            muted: false\n        };\n    },\n    videoClick() {\n        const cmd = this.data.get('majorPrograms').cmd;\n        this.fire('clickInvoke', cmd);\n    },\n    muteClick() { // 静音按钮\n        let videoRef = this.ref('video');\n        let muteStatus = this.data.get('muted');\n        videoRef.muted = !muteStatus;\n        this.data.set('muted', !muteStatus);\n    },\n    attached() {\n        let ticking = false;\n        let videoRef = this.ref('video');\n        let videoPlay = videoRef.play();\n        videoPlay.then((res) => {\n            // 可以自动播放\n            console.log(res);\n        }).catch((err) => {\n            /**\n             * 被weixin等限制\n             * 不允许自动播放\n             */\n            console.log(err);\n            // 兼容weixin自动播放\n            document.addEventListener(\n                'WeixinJSBridgeReady',\n                e => videoRef.play(),\n                false\n            );\n            // 选择静音后再播放\n            videoRef.muted = true;\n            videoRef.play();\n            // 在用户交互后调用.play()\n            window.addEventListener('touchstart', e => videoRef.play());\n        });\n        window.addEventListener('scroll', (e) => {\n            if (!ticking) {\n                window.requestAnimationFrame(() => {\n                    isElementVisible(videoRef)\n                        ? videoRef.play()\n                        : videoRef.pause();\n                    ticking = false;\n                });\n                ticking = true;\n            }\n        });\n        window.addEventListener('popstate', (event) => {\n            videoRef.currentTime = 0;\n            videoRef.play();\n        });\n    }\n};"]}]}