{"remainingRequest":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js??ref--1-2!/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/auc-log/node_modules/@baidu/ubc-report-sdk/dist/ubc-web-sdk.esm.js","dependencies":[{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/auc-log/node_modules/@baidu/ubc-report-sdk/dist/ubc-web-sdk.esm.js","mtime":1696919507713},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/san-hot-loader/index.js","mtime":1696919525187},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/cache-loader/dist/cjs.js","mtime":1696919513896},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js","mtime":1696919524615}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuYXNzaWduIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCIpOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7Cgp2YXIgX3RvQ29uc3VtYWJsZUFycmF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90b0NvbnN1bWFibGVBcnJheSIpKTsKCnZhciBfdHlwZW9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2YiKSk7CgovKioKICogQGZpbGUg5oyH5Luk57G7CiAqIEBhdXRob3Igd2FuZ2JpbmcxMSh3YW5nYmluZzExQGJhaWR1LmNvbSkKICogLy8gY29tbWFuZOWRveS7pOeahOiwg+eUqOaWueazle+8mnViYyhjb21tYW5kLCBbLi4uZmllbGRzXSwgW2ZpZWxkc09iamVjdF0pCiAqLwovLyBjb21tYW5kIOagh+ivhuespueahOato+WImeino+aekCBbdHJhY2tlck5hbWUuXVtwbHVnaW5OYW1lOl1tZXRob2ROYW1lCnZhciBjb21tYW5kUmVnZXggPSAvXig/OihcdyspXC4pPyg/OihcdyspXC4pPyhcdyspJC87Ci8qKgogKiDliJ3lp4vljJbkuIDkuKrlkb3ku6QKICoKICogQGNsYXNzIENvbW1hbmQKICogQHBhcmFtIHtBcnJheX0gYXJncyDnlKjmiLfovpPlhaXnmoTmiJbogIXlhoXpg6jnlJ/miJDnmoTkuI3mraPop4TnmoTmjIfku6Tlj4LmlbAKICoKICovCgovKiBlc2xpbnQtZGlzYWJsZSAqLwoKZnVuY3Rpb24gQ29tbWFuZChhcmdzKSB7CiAgLyogZXNsaW50LWVuYWJsZSAqLwogIHZhciByID0gY29tbWFuZFJlZ2V4LmV4ZWMoYXJnc1swXSk7CgogIGlmIChyICE9IG51bGwgJiYgci5sZW5ndGggPT09IDQpIHsKICAgIC8vIFRyYWNrZXLlkI3lrZfpu5jorqTkuLp0MAogICAgdGhpcy50cmFja2VyTmFtZSA9IHJbMV0gfHwgJ3QwJzsgLy8gcGx1Z2luTmFtZQoKICAgIHRoaXMucGx1Z2luTmFtZSA9IHJbMl0gfHwgJyc7IC8vIG1ldGhvZE5hbWUKCiAgICB0aGlzLm1ldGhvZE5hbWUgPSByWzNdOwogICAgdGhpcy5maWVsZHMgPSBbXS5zbGljZS5jYWxsKGFyZ3MsIDEpOwogICAgdGhpcy5pc0NyZWF0ZUNvbW1hbmQgPSAnaW5pdCcgPT09IHRoaXMubWV0aG9kTmFtZTsKICAgIHRoaXMuaXNDb25maWdDb21tYW5kID0gJ2NvbmZpZycgPT09IHRoaXMubWV0aG9kTmFtZTsKICAgIHRoaXMuaXNFdmVudENvbW1hbmQgPSAnZXZlbnQnID09PSB0aGlzLm1ldGhvZE5hbWUgfHwgJ3B2JyA9PT0gdGhpcy5tZXRob2ROYW1lOwogICAgdGhpcy5pc1RpbWluZ0NvbW1hbmQgPSAndGltaW5nJyA9PT0gdGhpcy5tZXRob2ROYW1lOyAvLyDlv4XpobvopoHmnInkuIDkuKrmlrnms5XlkI0KCiAgICBpZiAoIXRoaXMubWV0aG9kTmFtZSkgewogICAgICB0aHJvdyAnVUJDIFNESyBtZXRob2ROYW1lIGNhbiBub3QgYmUgZW1wdHkhJzsKICAgIH0gLy8g5aaC5p6c6KaB5Yib5bu65LiA5Liq5paw55qE6Lef6Liq5Zmo77yM5b+F6aG76KaB6KaB5pyJ5LiA5LiqSUTvvIxJROS4uuaVsOWtl+aIluiAheaVsOWtl+e7hOaIkOeahOWtl+espgoKCiAgICBpZiAodGhpcy5pc0NyZWF0ZUNvbW1hbmQpIHsKICAgICAgaWYgKCF0aGlzLmZpZWxkc1swXSkgewogICAgICAgIHRocm93ICdVQkMgU0RLIHNlcnZlcklkIGNhbiBub3QgYmUgZW1wdHkhJzsKICAgICAgfQogICAgfQogIH0gZWxzZSB7CiAgICB0aHJvdyAnVUJDIFNESyBlcnJvciBpbnB1dHMnOwogIH0KfQovKioKICogQGZpbGUg5bel5YW35pa55rOVCiAqIEBhdXRob3Igd2FuZ2JpbmcxMSh3YW5nYmluZzExQGJhaWR1LmNvbSkKICovCgoKdmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7CnZhciBJU19MSVRFX0JPWCA9IC8gKGxpdGV8aW5mbykgYmFpZHVib3hhcHBcLy9pLnRlc3QodWEpOwp2YXIgSVNfS0FORFVPRFVPX0JPWCA9IC8gbWlzc2lvbiBiYWlkdWJveGFwcFwvL2kudGVzdCh1YSk7IC8vIElTX0JPWCDmoIfor4bmmK/lkKbmiYvnmb7ln7rnoYDniYjlhoXvvIzkuI3og73mmK9MaXRl44CB5LiN5piv55yL5aSa5aSaCgp2YXIgSVNfQk9YID0gLyBiYWlkdWJveGFwcFwvL2kudGVzdCh1YSkgJiYgIUlTX0xJVEVfQk9YICYmICFJU19LQU5EVU9EVU9fQk9YOyAvLyDliKTmlq3lvZPliY3pobXpnaLnmoTnvZHnu5zljY/orq7mmK/lkKbkuLogaHR0cHMKCnZhciBpc0hUVFBTID0gZnVuY3Rpb24gaXNIVFRQUygpIHsKICByZXR1cm4gJ2h0dHBzOicgPT09IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sOwp9OyAvLyDov5nkuKrlh73mlbDnlKjkuo7lsIblhbbku5blh73mlbDnmoTovpPlhaXovazmjaLmiJDkuIDkuKrlr7nosaHvvIzov5nkuKrop4TliJnpgILnlKjkuo5VQkPmiYDmnInlr7nlpJbnmoTmjqXlj6NBUEkKLy8gdHJhbnNmb3JtSW5wdXQoWydhJywgJ2InLCAnYyddLCBbMSwgMiwgM10pOwovLyA9PT4ge2E6IDEsIGI6IDIsIGM6IDN9Ci8vIHRyYW5zZm9ybUlucHV0KFsnYScsICdiJywgJ2MnXSwgWzEsIDIsIHtjOiAzLCBkOiA0fV0pOwovLyA9PT4ge2E6IDEsIGI6IDIsIGM6IHsgYzogMywgZDogNH19CgoKdmFyIHRyYW5zZm9ybUlucHV0ID0gZnVuY3Rpb24gdHJhbnNmb3JtSW5wdXQocGFyYW1OYW1lcywgYXJncykgewogIGlmICghQXJyYXkuaXNBcnJheShwYXJhbU5hbWVzKSB8fCAhQXJyYXkuaXNBcnJheShhcmdzKSkgewogICAgcmV0dXJuIHt9OwogIH0KCiAgdmFyIGMgPSB7fTsKICB2YXIgZCA9IE1hdGgubWluKHBhcmFtTmFtZXMubGVuZ3RoICsgMSwgYXJncy5sZW5ndGgpOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IGQ7IGkrKykgewogICAgaWYgKCdvYmplY3QnID09PSAoMCwgX3R5cGVvZjIuZGVmYXVsdCkoYXJnc1tpXSkpIHsKICAgICAgY1twYXJhbU5hbWVzW2ldXSA9IHt9OwoKICAgICAgZm9yICh2YXIgZyBpbiBhcmdzW2ldKSB7CiAgICAgICAgaWYgKGFyZ3NbaV0uaGFzT3duUHJvcGVydHkoZykpIHsKICAgICAgICAgIGNbcGFyYW1OYW1lc1tpXV1bZ10gPSBhcmdzW2ldW2ddOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaSA8IHBhcmFtTmFtZXMubGVuZ3RoICYmIChjW3BhcmFtTmFtZXNbaV1dID0gYXJnc1tpXSk7CiAgICB9CiAgfQoKICByZXR1cm4gYzsKfTsKLyoqCiAqIOiOt+WPlnVybOS4reWItuWumuWPguaVsOeahOWAvAogKgogKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWUg5Y+C5pWw5ZCNCiAqIEBwYXJhbSAge3N0cmluZ30gdXJsIHVybOWcsOWdgAogKiBAcmV0dXJuIHtPYmplY3R9ICAgICAg5YC8CiAqLwoKCmZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1zKG5hbWUpIHsKICB2YXIgdXJsID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB3aW5kb3cubG9jYXRpb24uaHJlZjsKICB2YXIgcmVnID0gbmV3IFJlZ0V4cCgnKF58JiknICsgbmFtZSArICc9KFteJl0qKSgmfCQpJywgJ2knKTsKCiAgaWYgKHVybC5zcGxpdCgnPycpWzFdKSB7CiAgICB2YXIgciA9IHVybC5zcGxpdCgnPycpWzFdLm1hdGNoKHJlZyk7CiAgICByZXR1cm4gciAhPSBudWxsID8gZGVjb2RlVVJJQ29tcG9uZW50KHJbMl0pIDogbnVsbDsKICB9IGVsc2UgewogICAgcmV0dXJuIG51bGw7CiAgfQp9Ci8qKgogKiDlrZfnrKbkuLLljJZxdWVyeQogKgogKiBb5rOoXe+8mgogKiDpu5jorqTvvJrlpoLmnpxgdmFsdWVg5piv5pWw57uE77yM5YW2YHRvU3RyaW5nYOS8muiHquWKqOi9rOS4uumAl+WPt+WIhumalOeahOWtl+espuS4sgogKiDov5nph4zvvJrlpoLmnpwg5pivIEFycmF5IOWSjCBPYmplY3Qg5Y+C5pWwIOmDvei/m+ihjCBKU09OLnN0cmluZ2lmeSArIGVuY29kZVVSSUNvbXBvbmVudCDkuoYKICoKICogQHBhcmFtIHtPYmplY3R9IHF1ZXJ5IOafpeivouadoeS7tgogKiBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKCmZ1bmN0aW9uIHN0cmluZ2lmeSgpIHsKICB2YXIgcXVlcnkgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwoKICBpZiAoIXF1ZXJ5KSB7CiAgICByZXR1cm4gJyc7CiAgfQoKICB2YXIgc2VhcmNoID0gJyc7CgogIGZvciAodmFyIGtleSBpbiBxdWVyeSkgewogICAgaWYgKHF1ZXJ5Lmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgdmFyIHZhbHVlID0gcXVlcnlba2V5XTsKCiAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7CiAgICAgICAgdmFsdWUgPSAnJzsKICAgICAgfSBlbHNlIGlmICgoMCwgX3R5cGVvZjIuZGVmYXVsdCkodmFsdWUpID09PSAnb2JqZWN0JykgewogICAgICAgIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpOwogICAgICB9CgogICAgICBzZWFyY2ggKz0gJyYnICsgZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpOwogICAgfQogIH0KCiAgcmV0dXJuIHNlYXJjaC5zbGljZSgxKTsKfQovKioKICog5ZyodXJs5LiK5Yqg5oyH5a6a5Y+C5pWwCiAqCiAqIEBwYXJhbSAge3N0cmluZ30gdXJsICB1cmwKICogQHBhcmFtIHtPYmplY3R9IHF1ZXJ5IOWPguaVsOWvueixoQogKiBAZXhhbXBsZQogKiB7CiAqICAgIGE6IDEKICogfQogKiBAcmV0dXJuIHtzdHJpbmd9ICAgIOa3u+WKoOWPguaVsOWQjueahHVybAogKi8KCgpmdW5jdGlvbiByZW5kZXJVcmwoKSB7CiAgdmFyIHVybCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJyc7CiAgdmFyIHF1ZXJ5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICByZXR1cm4gdXJsICsgKH51cmwuaW5kZXhPZignPycpID8gJyYnIDogJz8nKSArIHN0cmluZ2lmeShxdWVyeSk7Cn0KLyoqCiAqIGlzT2JqZWN0CiAqCiAqIEBwYXJhbSB7Kn0gdmFsdWUgdmFsdWUKICogQHJldHVybiB7Ym9vbGVhbn0g5aaC5p6c5piv5a+56LGh5YiZ6L+U5ZueIHRydWUsIOWQpuWImSBmYWxzZQogKi8KCgpmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkgewogIC8vIEF2b2lkIGEgVjggSklUIGJ1ZyBpbiBDaHJvbWUgMTktMjAuCiAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuCiAgdmFyIHR5cGUgPSAoMCwgX3R5cGVvZjIuZGVmYXVsdCkodmFsdWUpOwogIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8ICEhdmFsdWUgJiYgdHlwZSA9PT0gJ29iamVjdCc7Cn0KLyoqCiAqIGlzQm9vbGVhbgogKgogKiBAcGFyYW0geyp9IHZhbHVlIHZhbHVlCiAqIEByZXR1cm4ge2Jvb2xlYW59IOWmguaenOaYr+W4g+WwlOexu+Wei+WImei/lOWbniB0cnVlLCDlkKbliJkgZmFsc2UKICovCgoKZnVuY3Rpb24gaXNCb29sZWFuKHZhbHVlKSB7CiAgcmV0dXJuIHZhbHVlID09PSB0cnVlIHx8IHZhbHVlID09PSBmYWxzZTsKfQovKioKICogaXNGdW5jdGlvbgogKgogKiBAcGFyYW0geyp9IHZhbHVlIHZhbHVlCiAqIEByZXR1cm4ge2Jvb2xlYW59CiAqLwoKCmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHsKICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nOwp9CgpmdW5jdGlvbiBsb2FkU2NyaXB0KHNyYykgewogIGlmIChzcmMpIHsKICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7CiAgICBzY3JpcHQuYXN5bmMgPSB0cnVlOwogICAgc2NyaXB0LnNyYyA9IHNyYzsKICAgIHZhciBsYXN0U2NyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOwogICAgbGFzdFNjci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzY3JpcHQsIGxhc3RTY3IpOwogIH0KfQoKZnVuY3Rpb24gbm9vcCgpIHt9Ci8qKgogKiBAZmlsZSBNZXRob2RRdWV1ZSDku7vliqHnrqHnkIbpmJ/liJcKICogQGF1dGhvciB3YW5nYmluZzExKHdhbmdiaW5nMTFAYmFpZHUuY29tKQogKi8KCgp2YXIgTWV0aG9kUXVldWUgPSB7CiAgY21kUXVldWU6IFtdCn07IC8vIOWIneWni+WMliBjbWRRdWV1ZSDkuLrnqbrpmJ/liJcKCk1ldGhvZFF1ZXVlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgTWV0aG9kUXVldWUuY21kUXVldWUgPSBbXTsKfTsgLy8g5omn6KGM6Zif5YiX5Lit55qE5omA5pyJ5ZG95LukCgoKTWV0aG9kUXVldWUucnVuID0gZnVuY3Rpb24gKGlucHV0c0xpc3QpIHsKICB2YXIgY21kcyA9IGlucHV0c0xpc3QubWFwKGZ1bmN0aW9uIChpbnB1dHMpIHsKICAgIHJldHVybiBNZXRob2RRdWV1ZS50b0NvbW1hbmRzLmFwcGx5KE1ldGhvZFF1ZXVlLCBbaW5wdXRzXSk7CiAgfSk7CiAgdmFyIHRtcENtZHMgPSBNZXRob2RRdWV1ZS5jbWRRdWV1ZS5jb25jYXQoY21kcyk7IC8vIOavj+asoeWwhiBNZXRob2RRdWV1ZS5jbWRRdWV1ZSDlkIjlubbliLAgdG1wQ21kcyDkuK3lkI7vvIzlsLHmuIXnqbpNZXRob2RRdWV1ZS5jbWRRdWV1ZeOAggoKICBNZXRob2RRdWV1ZS5jbWRRdWV1ZSA9IFtdOwoKICB3aGlsZSAodG1wQ21kcy5sZW5ndGggPiAwKSB7CiAgICBpZiAoTWV0aG9kUXVldWUucnVuQ29tbWFuZC5hcHBseSh0aGlzLCBbdG1wQ21kc1swXV0pKSB7CiAgICAgIC8vIOWmguaenOayoeacieaJp+ihjO+8jOWImeWGjeasoeWtmOi1t+adpQogICAgICBNZXRob2RRdWV1ZS5jbWRRdWV1ZS5wdXNoKHRtcENtZHNbMF0pOwogICAgfQoKICAgIHRtcENtZHMuc2hpZnQoKTsKICB9Cn07Ci8qKgogKiAg5qC55o2u5Y+C5pWw6L+b6KGM5aSE55CG77yM6L2s5o2i5oiQ6KeE6IyD55qE5oyH5Luk77yMCiAqCiAqICBAcGFyYW0ge0FycmF5fSBpbnB1dHMg55So5oi36L6T5YWl55qE5oyH5Luk5Y+C5pWwCiAqICBAcmV0dXJuIHtPYmplY3R9IOi/lOWbnuS4gOS4quinhOiMg+eahOaMh+S7pCBDb21tYW5kIOWunuS+iwogKgogKi8KCgpNZXRob2RRdWV1ZS50b0NvbW1hbmRzID0gZnVuY3Rpb24gKGlucHV0cykgewogIHZhciBjbWQgPSBuZXcgQ29tbWFuZChpbnB1dHMpOwogIHJldHVybiBjbWQ7Cn07IC8vIOaJp+ihjOWNleS4quWRveS7pAoKCk1ldGhvZFF1ZXVlLnJ1bkNvbW1hbmQgPSBmdW5jdGlvbiAoY21kKSB7CiAgLy8g5aaC5p6c5piv5Yib5bu6IFRyYWNrZXIg55qE5ZG95LukCiAgaWYgKGNtZC5pc0NyZWF0ZUNvbW1hbmQpIHsKICAgIC8vIOWIm+W7uuS4gOS4qui3n+i4quWZqAogICAgdGhpcy5jcmVhdGUuYXBwbHkodGhpcywgW2NtZC50cmFja2VyTmFtZV0uY29uY2F0KCgwLCBfdG9Db25zdW1hYmxlQXJyYXkyLmRlZmF1bHQpKGNtZC5maWVsZHMpKSk7CiAgfSAvLyDlpoLmnpzmmK/phY3nva4gVHJhY2tlciDnmoTlkb3ku6QKICBlbHNlIGlmIChjbWQuaXNDb25maWdDb21tYW5kKSB7CiAgICAgIHZhciB0cmFja2VyID0gdGhpcy5nZXRCeU5hbWUoY21kLnRyYWNrZXJOYW1lKTsKICAgICAgdmFyIGNvbmZpZ3MgPSBjbWQuZmllbGRzWzBdOwoKICAgICAgZm9yICh2YXIgaSBpbiBjb25maWdzKSB7CiAgICAgICAgaWYgKGNvbmZpZ3MuaGFzT3duUHJvcGVydHkoaSkpIHsKICAgICAgICAgIGlmIChpc09iamVjdChjb25maWdzW2ldKSkgewogICAgICAgICAgICB0cmFja2VyLnNldChpLCBPYmplY3QuYXNzaWduKHt9LCB0cmFja2VyLmdldChpKSwgY29uZmlnc1tpXSkpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdHJhY2tlci5zZXQoaSwgY29uZmlnc1tpXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9IC8vIOWmguaenOaYr+S6i+S7tuS4iuaKpeeahOWRveS7pAogICAgZWxzZSBpZiAoY21kLmlzRXZlbnRDb21tYW5kKSB7CiAgICAgICAgdmFyIF90cmFja2VyID0gdGhpcy5nZXRCeU5hbWUoY21kLnRyYWNrZXJOYW1lKTsKCiAgICAgICAgX3RyYWNrZXIuc2VuZC5jYWxsKF90cmFja2VyLCB7CiAgICAgICAgICB0eXBlOiAnZXZlbnQnLAogICAgICAgICAgZmllbGRzOiBjbWQuZmllbGRzCiAgICAgICAgfSk7CiAgICAgIH0gLy8g5aaC5p6c5piv5pe26ZW/5LiK5oql55qE5ZG95LukCiAgICAgIGVsc2UgaWYgKGNtZC5pc1RpbWluZ0NvbW1hbmQpIHsKICAgICAgICAgIHZhciBfdHJhY2tlcjIgPSB0aGlzLmdldEJ5TmFtZShjbWQudHJhY2tlck5hbWUpOwoKICAgICAgICAgIHZhciB0eXBlID0gY21kLmZpZWxkc1swXTsKICAgICAgICAgIHZhciBmaWVsZHMgPSBbXS5zbGljZS5jYWxsKGNtZC5maWVsZHMsIDEpOwoKICAgICAgICAgIGlmICh0eXBlID09PSAnc3RhcnQnKSB7CiAgICAgICAgICAgIF90cmFja2VyMi5yZWdlc3RUaW1pbmdSZXBvcnRvcihmaWVsZHMpOwogICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnZW5kJykgewogICAgICAgICAgICBfdHJhY2tlcjIuZW5kVGltaW5nUmVwb3J0b3IoZmllbGRzKTsKICAgICAgICAgIH0KICAgICAgICB9Cn07CgpNZXRob2RRdWV1ZS5pbml0KCk7Ci8qKgogKiBAZmlsZSBjb25maWcgU0RLIOWFqOWxgOmFjee9ruaWh+S7tgogKiBAYXV0aG9yIHdhbmdiaW5nMTEod2FuZ2JpbmcxMUBiYWlkdS5jb20pCiAqLwoKdmFyIHNlcnZlclVybHMgPSB7CiAgaHR0cDogJ2h0dHA6Ly9tLmJhaWR1LmNvbS90Y2JveD9hY3Rpb249cGJsb2cnLAogIGh0dHBzOiAnaHR0cHM6Ly9tYmQuYmFpZHUuY29tL3RjYm94P2FjdGlvbj1wYmxvZycKfTsgLy8gdjHnur/kuIrnmoTor7fmsYLlj5HpgIHlnLDlnYAKCnZhciBwYmxvZ1VybFByb3RvY29sID0gc2VydmVyVXJsc1tpc0hUVFBTKCkgPyAnaHR0cHMnIDogJ2h0dHAnXTsgLy8gdjHnur/kuIvmoKHpqoznmoTor7fmsYLlj5HpgIHlnLDlnYAKCnZhciB0ZXN0UGJsb2dVcmxQcm90b2NvbCA9ICdodHRwOi8vYmp5ei1tY28tc2VhcmNoYm94MjAxNjA5LW0xMnhpMy0wNDQuYmp5ei5iYWlkdS5jb206ODA4MC90Y2JveD9hY3Rpb249cGJsb2cnOyAvLyB2Mue6v+S4iuivt+axgueahOWPkemAgeWcsOWdgAoKdmFyIHp0Ym94VXJsUHJvdG9jb2wgPSAnaHR0cHM6Ly9tYmQuYmFpZHUuY29tL3p0Ym94P2FjdGlvbj16cGJsb2cnOyAvLyB2Mue6v+S4i+ivt+axgueahOWPkemAgeWcsOWdgAoKdmFyIHRlc3RadGJveFVybFByb3RvY29sID0gJ2h0dHA6Ly9ianl6LW1jby1zZWFyY2hib3gyMDE2MDktbTEyeGkzLTA0NC5ianl6LmJhaWR1LmNvbTo4MDgwL3p0Ym94P2FjdGlvbj16cGJsb2cnOyAvLyBleHBvcnQgY29uc3QgdGVzdFp0Ym94VXJsUHJvdG9jb2wgPSAnaHR0cDovL2NwMDEtZHF4LmVwYy5iYWlkdS5jb206ODA2Mi96dGJveD9hY3Rpb249enBibG9nJzsKLy8g55m+5bqm57uf6K6h55qEU0RL5Zyw5Z2ALCDnmb7luqbnu5/orqHkuI3mlK/mjIEgaHR0cCwg5aaC5p6c6K6+572uaHR0cOS8muiHquWKqOmHjeWumuWQkeWIsGh0dHBzCgp2YXIgYmFpZHVUb25nSmlTREtVcmwgPSAnaHR0cHM6Ly9obS5iYWlkdS5jb20vaG0uanMnOwovKioKICogQGZpbGUgc2VuZCDmlrnms5UKICogQGF1dGhvciB3YW5nYmluZzExKHdhbmdiaW5nMTFAYmFpZHUuY29tKQogKi8KCnZhciBjcmVhdGVJbWcgPSBmdW5jdGlvbiBjcmVhdGVJbWcoc3JjKSB7CiAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwogIGltZy53aWR0aCA9IDE7CiAgaW1nLmhlaWdodCA9IDE7CiAgaW1nLnNyYyA9IHNyYzsKICByZXR1cm4gaW1nOwp9OyAvLyDlm57osIPlh73mlbDnrYnlvoXml7bpl7QKCgp2YXIgY2FsbGJhY2tXYWl0aW5nVGltZSA9IDEwMDsKLyoqCiAqIOS9v+eUqOWbvueJh+adpeWPkeivt+axggogKgogKiBAcGFyYW0ge3N0cmluZ30gdXJsIOS4iuaKpeacjeWKoeWcsOWdgAogKiBAcGFyYW0ge09iamVjdH0gcGFyYW0g5LiK5oql55qE5pWw5o2uCiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIOWbnuiwg+WHveaVsAogKiBAcGFyYW0ge1RyYWNrZXJ9IHRyYWNrZXIg6Lef6Liq5Zmo5a6e5L6LCiAqLwoKZnVuY3Rpb24gaW1nUGluZyh1cmwsIHBhcmFtLCBjYWxsYmFjaywgdHJhY2tlcikgewogIC8vIOeUn+aIkFVSTAogIHVybCA9IHJlbmRlclVybCh1cmwsIHsKICAgIGRhdGE6IHBhcmFtCiAgfSk7CiAgdmFyIGltZyA9IGNyZWF0ZUltZyh1cmwpOwogIHZhciBpc0NhbGxiYWNrZWQgPSBmYWxzZTsgLy8g562J5b6FIDEwMCBtc++8jCAxMDBtc+WQjuWmguaenOWbnuiwg+WHveaVsOi/mOayoeacieaJp+ihjO+8jOWwseeri+WNs+aJp+ihjOWbnuiwgwoKICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgIGlmIChjYWxsYmFjayAmJiAhaXNDYWxsYmFja2VkKSB7CiAgICAgIGNhbGxiYWNrKHRyYWNrZXIpOwogICAgICBpc0NhbGxiYWNrZWQgPSB0cnVlOwogICAgfQogIH0sIGNhbGxiYWNrV2FpdGluZ1RpbWUpOwoKICBpbWcub25sb2FkID0gaW1nLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICBpbWcgPSBudWxsOyAvLyDkuIrmiqXmiJDlip/lkI7vvIzlpoLmnpzlm57osIPlh73mlbDov5jmsqHmnInmiafooYzvvIzlsLHmiafooYzlm57osIPlh73mlbAKCiAgICBpZiAoY2FsbGJhY2sgJiYgIWlzQ2FsbGJhY2tlZCkgewogICAgICBjYWxsYmFjayh0cmFja2VyKTsKICAgICAgaXNDYWxsYmFja2VkID0gdHJ1ZTsKICAgIH0KICB9Owp9Ci8qKgogKiDkvb/nlKhOYXZpZ2F0b3Iuc2VuZEJlYWNvbuadpeWPkeivt+axggogKgogKiBAcGFyYW0ge3N0cmluZ30gdXJsIOS4iuaKpeacjeWKoeWcsOWdgAogKiBAcGFyYW0ge09iamVjdH0gcGFyYW0g5LiK5oql55qE5pWw5o2uCiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIOWbnuiwg+WHveaVsAogKiBAcGFyYW0ge1RyYWNrZXJ9IHRyYWNrZXIg6Lef6Liq5Zmo5a6e5L6LCiAqLwoKCmZ1bmN0aW9uIGJlYWNvblNlbmQodXJsLCBwYXJhbSwgY2FsbGJhY2ssIHRyYWNrZXIpIHsKICAvLyDnlJ/miJBVUkwKICB1cmwgPSByZW5kZXJVcmwodXJsLCB7CiAgICBkYXRhOiBwYXJhbQogIH0pOwogIHdpbmRvdy5uYXZpZ2F0b3Iuc2VuZEJlYWNvbih1cmwpOwogIGNhbGxiYWNrKHRyYWNrZXIpOwp9CgpmdW5jdGlvbiBzbWFydFNlbmQodXJsLCBwYXJhbSkgewogIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbm9vcDsKICB2YXIgdXNlU2VuZEJlYWNvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogMDsKICB2YXIgdHJhY2tlciA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ID8gYXJndW1lbnRzWzRdIDogdW5kZWZpbmVkOwoKICAvLyDkuI7mlbDmja5SROayn+mAmu+8jOW+heaVsOaNrue7hOWNh+e6p+WQjuWPr+WQr+eUqC3lnKjlpb3nnIvlkozlhajmsJHnq69zZW5kQmVhY29u5peg5pWICiAgLy8gdXNlU2VuZEJlYWNvbuS4ujDvvIzkvb/nlKjlhajlsYDphY3nva7vvIx1c2VTZW5kQmVhY29u5Li6MeWQr+eUqFNlbmRCZWFjb27vvIx1c2VTZW5kQmVhY29u5Li6MuWFs+mXrVNlbmRCZWFjb24KICBpZiAodHlwZW9mIHdpbmRvdy5uYXZpZ2F0b3Iuc2VuZEJlYWNvbiA9PT0gJ2Z1bmN0aW9uJyAmJiAodHJhY2tlci5tb2RlbC51c2VTZW5kQmVhY29uICYmIHVzZVNlbmRCZWFjb24gPT09IDAgfHwgdXNlU2VuZEJlYWNvbiA9PT0gMSkpIHsKICAgIHJldHVybiBiZWFjb25TZW5kKHVybCwgcGFyYW0sIGNhbGxiYWNrLCB0cmFja2VyKTsKICB9CgogIHJldHVybiBpbWdQaW5nKHVybCwgcGFyYW0sIGNhbGxiYWNrLCB0cmFja2VyKTsKfQovKioKICogQGZpbGUgVHJhY2tlciDot5/ouKrnsbvvvIznm67liY3mmK/ljZXlrp7kvovvvIzku6XlkI7lj6/og73kvJrmmK/lpJrlrp7kvosKICogQGF1dGhvciB3YW5nYmluZzExKHdhbmdiaW5nMTFAYmFpZHUuY29tKQogKi8KCgp2YXIgZGVmYXVsdFZlcnNpb24gPSAnMS4wJzsgLy8g6buY6K6k55qE5Lqn5ZOB57q/LeaJi+eZvgoKdmFyIGRlZmF1bHRBcHBpZCA9ICcxJzsgLy8g6buY6K6k55qE5pyN5Yqh57G75Z6LLXdlYiDnq68KCnZhciBkZWZhdWx0Q2F0ZWlkID0gJzk5JzsgLy8g6buY6K6k55qE6Kem5Y+R57G75Z6LLem7mOiupAoKdmFyIGRlZmF1bHRBY3Rpb250eXBlID0gJzAnOyAvLyDpu5jorqTnmoTkuJrliqHmnaXmupAt6L+Q6JCl5rS75YqoCgp2YXIgZGVmYXVsdEZyb20gPSAnYWN0JzsgLy8g6buY6K6k55qE5pe26ZW/57uf6K6h6K+35rGC5Y+R6YCB6Ze06ZqUCgp2YXIgRGVmYXVsdER1cmF0aW9uID0gMzsgLy8gZXZlbnQg6L6T5YWl55qE5pWw57uE5qC85byPCgp2YXIgZXZlbnRBcmdzSW5wdXRQYXR0ZXJuID0gWyd0eXBlJywgJ3ZhbHVlJywgJ2V4dCddOwovKioKICog6Lef6Liq5Zmo57G7CiAqCiAqIEBjbGFzcyDot5/ouKrlmajnsbsKICogQHBhcmFtIHtPYmplY30gb3B0IOi3n+i4quWZqOeahOmFjee9rgogKi8KCi8qIGVzbGludC1kaXNhYmxlICovCgpmdW5jdGlvbiBUcmFja2VyKG9wdCkgewogIC8qIGVzbGludC1lbmFibGUgKi8KICAvLyDov5nph4zov5nmoLflpITnkIbvvIx0cmFja2VyLm1vZGVsIOS7jeeEtuS8muaatOmcsuWHuuadpeOAggogIHRoaXMubW9kZWwgPSB7fTsgLy8g6K6+6K6h5Z+65pys6YWN572uCgogIHNldEJhc2ljQ29uZmlnKHRoaXMubW9kZWwsIG9wdCk7IC8vIOWmguaenOiuvue9ruS6hueZvuW6pue7n+iuoe+8jOWImemcgOimgeWKoOi9veeZvuW6pue7n+iuoeS7o+eggQoKICBpZiAodGhpcy5nZXQoJ2lzQmFpZHVUb25nSmknKSkgewogICAgLy8g5Zyo5YWo5bGA5LiK5aOw5piO55m+5bqm57uf6K6h55qE5Li05pe25o6l5Y+jCiAgICB3aW5kb3cuX2htdCA9IHdpbmRvdy5faG10IHx8IFtdOwogICAgdmFyIHNyYyA9IGJhaWR1VG9uZ0ppU0RLVXJsICsgJz8nICsgdGhpcy5nZXQoJ2JhaWR1VG9uZ0ppSWQnKTsKICAgIGxvYWRTY3JpcHQoc3JjKTsKICB9IC8vIOWmguaenOiuvue9rum7mOiupOS4iuaKpemhtemdolBW57uf6K6hCgoKICBpZiAodGhpcy5nZXQoJ2F1dG9QdlRyYWNrJykpIHsKICAgIC8vIOi/m+ihjOmhtemdolBW5LiK5oqlCiAgICB0aGlzLnNlbmQoewogICAgICB0eXBlOiAnZXZlbnQnLAogICAgICBmaWVsZHM6IFsncGFnZUF1dG9QdiddCiAgICB9KTsKICB9IC8vIOWmguaenOiuvue9rum7mOiupOS4iuaKpemhtemdouaXtumVv+e7n+iuoQoKCiAgaWYgKHRoaXMuZ2V0KCdhdXRvVGltaW5nVHJhY2snKSkgewogICAgLy8g5rOo5YaM6aG16Z2i5pe26ZW/57uf6K6hCiAgICB0aGlzLnJlZ2VzdFRpbWluZ1JlcG9ydG9yKFsncGFnZUF1dG9UaW1pbmcnXSk7CiAgfQp9CgpUcmFja2VyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoZmllbGROYW1lLCBmaWVsZFZhbHVlKSB7CiAgdGhpcy5tb2RlbFtmaWVsZE5hbWVdID0gZmllbGRWYWx1ZTsKfTsKClRyYWNrZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChmaWVsZE5hbWUpIHsKICByZXR1cm4gdGhpcy5tb2RlbFtmaWVsZE5hbWVdOwp9OwovKioKICog6Lef6Liq5Zmo5Y+R6YCB5pWw5o2u55qE5pa55rOV44CCCiAqCiAqIEBwYXJhbSB7T2JqZWN0fSBvcHQg6L6T5YWl55qE5Y+C5pWwCiAqIEBwYXJhbSB7c3RyaW5nfSBvcHQudHlwZSBldmVudCB8IHRpbWluZwogKiBAcGFyYW0ge3N0cmluZ30gb3B0LmZpZWxkcyDljrvmjonnrKzkuIDkuKrlj4LmlbDlkI7liankvZnnmoTkvKDlhaXnmoTlj4LmlbDnu4TmiJDnmoTmlbDnu4QKICoKICovCgoKVHJhY2tlci5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uIChfcmVmKSB7CiAgdmFyIHR5cGUgPSBfcmVmLnR5cGUsCiAgICAgIGZpZWxkcyA9IF9yZWYuZmllbGRzOwogIC8vIOeUn+aIkOimgeWPkemAgeeahOaVsOaNrgogIHZhciBjYWxsYmFjazsKICB2YXIgc2VuZERhdGE7CiAgdmFyIG9wdDsKICB2YXIgdXNlU2VuZEJlYWNvbiA9IDA7CgogIGlmICh0eXBlID09PSAnZXZlbnQnKSB7CiAgICAvLyDlpoLmnpzkvKDlhaXlj4LmlbDkuLogWydldmVudCcsIHt9LCBmdW5jdGlvbigpIHt9XSDnmoTlvaLlvI8KICAgIGlmIChmaWVsZHMgJiYgaXNPYmplY3QoZmllbGRzWzBdKSkgewogICAgICBvcHQgPSBmaWVsZHNbMF07CgogICAgICBpZiAoaXNGdW5jdGlvbihmaWVsZHNbMV0pKSB7CiAgICAgICAgY2FsbGJhY2sgPSBmaWVsZHNbMV07CiAgICAgIH0KICAgIH0gLy8g5aaC5p6c5Lyg5YWl5Y+C5pWw5Li6IFsnZXZlbnQnLCAndHlwZSddCiAgICBlbHNlIHsKICAgICAgICBvcHQgPSB0cmFuc2Zvcm1JbnB1dChldmVudEFyZ3NJbnB1dFBhdHRlcm4sIGZpZWxkcyk7CiAgICAgIH0gLy8g5Y+R6YCB55qE5pWw5o2uCgoKICAgIHNlbmREYXRhID0gZ2VuZXJhdGVFdmVudERhdGEodGhpcy5tb2RlbCwgb3B0KTsgLy8gdXNlU2VuZEJlYWNvbgoKICAgIGlmIChvcHQudXNlU2VuZEJlYWNvbikgewogICAgICB1c2VTZW5kQmVhY29uID0gb3B0LnVzZVNlbmRCZWFjb247CiAgICB9IC8vIOWmguaenOmbhuaIkOS6hueZvuW6pue7n+iuoSwgaHR0cHM6Ly90b25namkuYmFpZHUuY29tL3dlYi9oZWxwL2FydGljbGU/aWQ9MjM2JnR5cGU9MAoKCiAgICBpZiAodGhpcy5nZXQoJ2lzQmFpZHVUb25nSmknKSkgewogICAgICB2YXIgX3JlZjIgPSBzZW5kRGF0YS5hY3Rpb25kYXRhLmNvbnRlbnQgfHwge30sCiAgICAgICAgICBwYWdlID0gX3JlZjIucGFnZSwKICAgICAgICAgIF90eXBlID0gX3JlZjIudHlwZSwKICAgICAgICAgIHZhbHVlID0gX3JlZjIudmFsdWU7CgogICAgICB3aW5kb3cuX2htdC5wdXNoKFsnX3RyYWNrRXZlbnQnLCBwYWdlLCBfdHlwZSwgdmFsdWVdKTsKICAgIH0KICB9IGVsc2UgaWYgKHR5cGUgPT09ICd0aW1pbmcnKSB7CiAgICBzZW5kRGF0YSA9IGdlbmVyYXRlRHVyYXRpb25EYXRhKHRoaXMubW9kZWwsIGZpZWxkcyk7CiAgfQoKICB2YXIgdXJsID0gdGhpcy5nZXQoJ3Rlc3RNb2RlJykgPyB0ZXN0UGJsb2dVcmxQcm90b2NvbCA6IHBibG9nVXJsUHJvdG9jb2w7IC8vIHYy6ZyA6KaB5re75Yqg6aG257qn5Y+C5pWw44CQYXBwbmFtZeOAkeOAkGZyb23jgJHjgJBjZnJvbeOAkeOAkHNtZnfjgJEKCiAgaWYgKHRoaXMubW9kZWwudmVyc2lvbiA9PT0gJzIuMCcpIHsKICAgIHVybCA9IHRoaXMuZ2V0KCd0ZXN0TW9kZScpID8gdGVzdFp0Ym94VXJsUHJvdG9jb2wgOiB6dGJveFVybFByb3RvY29sOwogICAgdXJsID0gdGhpcy5tb2RlbC50ZXN0VXJsIHx8IHVybDsKICAgIHVybCA9IHJlbmRlclVybCh1cmwsIHRoaXMubW9kZWwucXVlcnlQYXJhbXMpOwogIH0gLy8g5Y+R6YCB6K+35rGCCgoKICBzbWFydFNlbmQuYXBwbHkodGhpcywgW3VybCwgc2VuZERhdGEsIGNhbGxiYWNrLCB1c2VTZW5kQmVhY29uLCB0aGlzXSk7Cn07Ci8qKgogKiDms6jlhozkuIDkuKrml7bplb/kuIrmiqXlmagKICoKICogQHBhcmFtIHtBcnJheX0gZmllbGRzIOWOu+aOieS4gOS4quWQjuWJqeS9meeahOS8oOWFpeeahOWPguaVsAogKi8KCgpUcmFja2VyLnByb3RvdHlwZS5yZWdlc3RUaW1pbmdSZXBvcnRvciA9IGZ1bmN0aW9uICgpIHsKICB2YXIgX3RoaXMgPSB0aGlzOwoKICB2YXIgZmllbGRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTsKCiAgLy8g5aaC5p6c5rKh5pyJIHRpbWluZyBJRCDlsLHot5Hlh7rlvILluLgKICBpZiAoIXRoaXMuZ2V0KCd0aW1pbmdJZCcpKSB7CiAgICB0aHJvdyAndGltaW5nIElEIGlzIHJlcXVpcmVkISc7CiAgfQoKICB2YXIgdGltaW5nVGFza3MgPSB0aGlzLmdldCgndGltaW5nVGFza3MnKTsKICB2YXIgZHVyYXRpb24gPSB0aGlzLmdldCgnZHVyYXRpb24nKTsKICBmaWVsZHMgPSB0cmFuc2Zvcm1JbnB1dChldmVudEFyZ3NJbnB1dFBhdHRlcm4sIGZpZWxkcyk7CiAgdmFyIGlzRXhpc3QgPSB0aW1pbmdUYXNrcy5maW5kKGZ1bmN0aW9uICh0YXNrKSB7CiAgICByZXR1cm4gdGFzay5ldmVudE5hbWUgPT09IGZpZWxkcy50eXBlOwogIH0pOyAvLyDms6jlhozml7bplb/ngrnml7bvvIzliqDlhaVzdGFydHRpbWUKCiAgZmllbGRzLnN0YXJ0dGltZSA9IERhdGUubm93KCk7IC8vIOWmguaenOS4jeWtmOWcqOWwseWFiOazqOWGjAoKICBpZiAoIWlzRXhpc3QpIHsKICAgIC8vIC8vIOWPkemAgeesrOS4gOasoeaXtumVv+S4iuaKpeS/oeaBrwogICAgdGhpcy5zZW5kKHsKICAgICAgdHlwZTogJ3RpbWluZycsCiAgICAgIGZpZWxkczogZmllbGRzCiAgICB9KTsKICAgIHZhciB0aW1pbmdJbnRldmFsSWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNlbmQoewogICAgICAgIHR5cGU6ICd0aW1pbmcnLAogICAgICAgIGZpZWxkczogZmllbGRzCiAgICAgIH0pOwogICAgfSwgZHVyYXRpb24gKiAxMDAwKTsgLy8g5piv5biC5Zy6CgogICAgdGltaW5nVGFza3MucHVzaCh7CiAgICAgIHRpbWluZ0ludGV2YWxJZDogdGltaW5nSW50ZXZhbElkLAogICAgICBpc1JlcG9ydGluZzogdHJ1ZSwKICAgICAgZXZlbnROYW1lOiBmaWVsZHMudHlwZSwKICAgICAgZmllbGRzOiBmaWVsZHMKICAgIH0pOwogIH0KfTsKLyoqCiAqIOe7iOatouaJgOacieaXtumVv+S4iuaKpeWZqAogKi8KCgpUcmFja2VyLnByb3RvdHlwZS5zdG9wQWxsVGltaW5nUmVwb3J0b3IgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHRpbWluZ1Rhc2tzID0gdGhpcy5nZXQoJ3RpbWluZ1Rhc2tzJyk7CiAgdGltaW5nVGFza3MuZm9yRWFjaChmdW5jdGlvbiAodGltaW5nVGFzaykgewogICAgdGltaW5nVGFzay5pc1JlcG9ydGluZyA9IGZhbHNlOwogICAgY2xlYXJJbnRlcnZhbCh0aW1pbmdUYXNrLnRpbWluZ0ludGV2YWxJZCk7CiAgfSk7Cn07Ci8qKgogKiDph43lkK/miYDmnInml7bplb/kuIrmiqXlmagKICovCgoKVHJhY2tlci5wcm90b3R5cGUuc3RhcnRBbGxUaW1pbmdSZXBvcnRvciA9IGZ1bmN0aW9uICgpIHsKICB2YXIgX3RoaXMyID0gdGhpczsKCiAgdmFyIHRpbWluZ1Rhc2tzID0gdGhpcy5nZXQoJ3RpbWluZ1Rhc2tzJyk7CiAgdmFyIGR1cmF0aW9uID0gdGhpcy5nZXQoJ2R1cmF0aW9uJyk7CiAgdGltaW5nVGFza3MuZm9yRWFjaChmdW5jdGlvbiAodGltaW5nVGFzaykgewogICAgdGltaW5nVGFzay5pc1JlcG9ydGluZyA9IHRydWU7IC8vIOmHjeWQr+aXtuabtOaWsHN0YXJ0dGltZQoKICAgIHRpbWluZ1Rhc2suZmllbGRzLnN0YXJ0dGltZSA9IERhdGUubm93KCk7CgogICAgX3RoaXMyLnNlbmQoewogICAgICB0eXBlOiAndGltaW5nJywKICAgICAgZmllbGRzOiB0aW1pbmdUYXNrLmZpZWxkcwogICAgfSk7CgogICAgdGltaW5nVGFzay50aW1pbmdJbnRldmFsSWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzMi5zZW5kKHsKICAgICAgICB0eXBlOiAndGltaW5nJywKICAgICAgICBmaWVsZHM6IHRpbWluZ1Rhc2suZmllbGRzCiAgICAgIH0pOwogICAgfSwgZHVyYXRpb24gKiAxMDAwKTsKICB9KTsKfTsKLyoqCiAqIOe7k+adn+S4gOS4quaXtumVv+S4iuaKpeWZqAogKgogKiBAcGFyYW0ge0FycmF5fSBmaWVsZHMg5Y675o6J5LiA5Liq5ZCO5Ymp5L2Z55qE5Lyg5YWl55qE5Y+C5pWwCiAqLwoKClRyYWNrZXIucHJvdG90eXBlLmVuZFRpbWluZ1JlcG9ydG9yID0gZnVuY3Rpb24gKGZpZWxkcykgewogIHZhciBfdGhpczMgPSB0aGlzOwoKICBmaWVsZHMgPSB0cmFuc2Zvcm1JbnB1dChldmVudEFyZ3NJbnB1dFBhdHRlcm4sIGZpZWxkcyk7CiAgdmFyIHRpbWluZ1Rhc2tzID0gdGhpcy5nZXQoJ3RpbWluZ1Rhc2tzJyk7CiAgdmFyIG5ld1RpbWluZ1Rhc2tzID0gW107CiAgdGltaW5nVGFza3MuZm9yRWFjaChmdW5jdGlvbiAodGltaW5nVGFzaykgewogICAgdmFyIHRpbWluZ0ludGV2YWxJZCA9IHRpbWluZ1Rhc2sudGltaW5nSW50ZXZhbElkLAogICAgICAgIGV2ZW50TmFtZSA9IHRpbWluZ1Rhc2suZXZlbnROYW1lOwoKICAgIGlmIChldmVudE5hbWUgPT09IGZpZWxkcy50eXBlKSB7CiAgICAgIGNsZWFySW50ZXJ2YWwodGltaW5nSW50ZXZhbElkKTsKICAgIH0gZWxzZSB7CiAgICAgIG5ld1RpbWluZ1Rhc2tzLnB1c2godGltaW5nVGFzayk7CiAgICB9CgogICAgX3RoaXMzLnNldCgndGltaW5nVGFza3MnLCBuZXdUaW1pbmdUYXNrcyk7CiAgfSk7Cn07IC8vIOWIoOmZpOaJgOacieaXtumVv+S4iuaKpeWZqAoKClRyYWNrZXIucHJvdG90eXBlLnJlbW92ZUFsbFRpbWluZ1JlcG9ydG9yID0gZnVuY3Rpb24gKCkgewogIHZhciB0aW1pbmdUYXNrcyA9IHRoaXMuZ2V0KCd0aW1pbmdUYXNrcycpOwogIHRpbWluZ1Rhc2tzLmZvckVhY2goZnVuY3Rpb24gKHRpbWluZ1Rhc2spIHsKICAgIGNsZWFySW50ZXJ2YWwodGltaW5nVGFzay50aW1pbmdJbnRldmFsSWQpOwogIH0pOwogIHRpbWluZ1Rhc2tzID0gW107Cn07Ci8qKgogKiDngrnlh7vmlbDmja7nmoTkuIrmiqXlj4LmlbDnlJ/miJDlmagKICoKICogQHBhcmFtIHtPYmplY3R9IG1vZGVsIHRyYWNrZXIubW9kZWwg5a2Y5pS+IHRyYWNrZXIg55qE5YWs5YWx5L+h5oGvCiAqIEBwYXJhbSB7T2JqZWN0fSBvcHQg5LqL5Lu25LiK5oql5Lyg5YWl55qE6Ieq5a6a5LmJ5Y+C5pWwCiAqIEBwYXJhbSB7c3RyaW5nfSBvcHQudHlwZSDkuovku7blkI3np7AKICogQHBhcmFtIHtzdHJpbmd9IG9wdC52YWx1ZSDkuovku7blnLrmma8KICogQHBhcmFtIHtPYmplY3R9IG9wdC5leHQg5LqL5Lu25omp5bGV5a2X5q61CiAqIEByZXR1cm4ge09iamVjdH0g6KaB5LiK5oql55qE5LqL5Lu25pWw5o2u5a+56LGhCiAqLwoKCmZ1bmN0aW9uIGdlbmVyYXRlRXZlbnREYXRhKG1vZGVsLCBvcHQpIHsKICB2YXIgZGF0YSA9IHsKICAgIGNhdGVpZDogbW9kZWwuY2F0ZWlkLAogICAgYWN0aW9uZGF0YTogewogICAgICAvLyDpobnnm67kuovku7bllK/kuIDmoIfor4bvvIxzZXJ2ZXJfaWQKICAgICAgaWQ6IG1vZGVsLnRyYWNrZXJJZCwKICAgICAgLy8g6Z2e5rWB57G75Z6LCiAgICAgIHR5cGU6ICcwJywKICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLAogICAgICBjb250ZW50OiB7CiAgICAgICAgLy8g6aG16Z2i5qCH6K+GLCBwYWdlIOWtl+aute+8jOWPr+S7peiiqyBvcHQg6KaG55uWCiAgICAgICAgcGFnZTogb3B0LnBhZ2UgfHwgbW9kZWwucGFnZSwKICAgICAgICAvLyDotYTmupDmnaXmupAKICAgICAgICBzb3VyY2U6IG1vZGVsLnNvdXJjZSwKICAgICAgICAvLyDkuJrliqHmnaXmupAKICAgICAgICBmcm9tOiBtb2RlbC5mcm9tLAogICAgICAgIC8vIOWklumDqOS8oOWFpS3kuovku7blkI3np7AKICAgICAgICB0eXBlOiBvcHQudHlwZSwKICAgICAgICAvLyDlpJbpg6jkvKDlhaUt5Zy65pmv5L+h5oGvCiAgICAgICAgdmFsdWU6IG9wdC52YWx1ZSwKICAgICAgICAvLyDlpJbpg6jkvKDlhaUt5omp5bGV5a2X5q61CiAgICAgICAgZXh0OiBvcHQuZXh0CiAgICAgIH0KICAgIH0KICB9OyAvLyB2MSDmnInvvIx2MuayoeacieeahOWPguaVsAoKICBpZiAobW9kZWwudmVyc2lvbiA9PT0gJzEuMCcpIHsKICAgIC8vIGFi5YiG57uE5L+h5oGvCiAgICBkYXRhLmFjdGlvbmRhdGEuYWJ0ZXN0ID0gbW9kZWwuYWJ0ZXN0OyAvLyDmmK/lkKbmiYvnmb7nq6/lhoUKCiAgICBkYXRhLmFjdGlvbmRhdGEuaW5Cb3ggPSBtb2RlbC5pbkJveDsgLy8g572R57uc54q25oCBCgogICAgZGF0YS5hY3Rpb25kYXRhLm5ldHdvcmsgPSBtb2RlbC5uZXR3b3JrOwogICAgZGF0YS5hcHBpZCA9IG1vZGVsLmFwcGlkOwogICAgZGF0YS5hY3Rpb250eXBlID0gbW9kZWwuYWN0aW9udHlwZTsKICB9CgogIHJldHVybiBkYXRhOwp9Ci8qKgogKiDml7bplb/mlbDmja7nmoTkuIrmiqXlj4LmlbDnlJ/miJDlmagKICoKICogQHBhcmFtIHtPYmplY3R9IG1vZGVsIHRyYWNrZXIubW9kZWwg5a2Y5pS+IHRyYWNrZXIg55qE5YWs5YWx5L+h5oGvCiAqIEBwYXJhbSB7T2JqZWN0fSBvcHQg5pe26ZW/5LiK5oql5Lyg5YWl55qE6Ieq5a6a5LmJ5Y+C5pWwCiAqIEBwYXJhbSB7c3RyaW5nfSBvcHQudHlwZSDkuovku7blkI3np7AKICogQHBhcmFtIHtzdHJpbmd9IG9wdC52YWx1ZSDkuovku7blnLrmma8KICogQHBhcmFtIHtzdHJpbmd9IG9wdC5leHQg6aKd5aSW5Y+C5pWwCiAqIEBwYXJhbSB7c3RyaW5nfSBvcHQuc3RhcnR0aW1lIOaXtumVv+S4iuaKpeW8gOWni+aXtumXtAogKiBAcmV0dXJuIHtPYmplY3R9IOimgeS4iuaKpeeahOaXtumVv+aVsOaNruWvueixoQogKi8KCgpmdW5jdGlvbiBnZW5lcmF0ZUR1cmF0aW9uRGF0YShtb2RlbCwgb3B0KSB7CiAgdmFyIGRhdGEgPSB7CiAgICBjYXRlaWQ6IG1vZGVsLmNhdGVpZCwKICAgIGFjdGlvbmRhdGE6IHsKICAgICAgLy8g6aG555uu5pe26ZW/5ZSv5LiA5qCH6K+G77yMc2VydmVyX2lkCiAgICAgIGlkOiBtb2RlbC50aW1pbmdJZCwKICAgICAgLy8g5rWB57G75Z6LCiAgICAgIHR5cGU6ICcxJywKICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLAogICAgICAvLyDlv4Pot7PngrnlvIDlp4vml7bpl7QKICAgICAgc3RhcnR0aW1lOiBvcHQuc3RhcnR0aW1lLAogICAgICBjb250ZW50OiB7CiAgICAgICAgZHVyYXRpb246IG1vZGVsLmR1cmF0aW9uLAogICAgICAgIG9wdGlvbjogewogICAgICAgICAgLy8g6aG16Z2i5qCH6K+GCiAgICAgICAgICBwYWdlOiBtb2RlbC5wYWdlLAogICAgICAgICAgLy8g6LWE5rqQ5p2l5rqQCiAgICAgICAgICBzb3VyY2U6IG1vZGVsLnNvdXJjZSwKICAgICAgICAgIC8vIOS4muWKoeadpea6kAogICAgICAgICAgZnJvbTogbW9kZWwuZnJvbSwKICAgICAgICAgIC8vIOWklumDqOS8oOWFpS3kuovku7blkI3np7AKICAgICAgICAgIHR5cGU6IG9wdC50eXBlLAogICAgICAgICAgLy8g5aSW6YOo5Lyg5YWlLeWcuuaZr+S/oeaBrwogICAgICAgICAgdmFsdWU6IG9wdC52YWx1ZSwKICAgICAgICAgIC8vIOWklumDqOS8oOWFpS3mianlsZXlrZfmrrUKICAgICAgICAgIGV4dDogb3B0LmV4dAogICAgICAgIH0KICAgICAgfQogICAgfQogIH07IC8vIHYxIOacie+8jHYy5rKh5pyJ55qE5Y+C5pWwCgogIGlmIChtb2RlbC52ZXJzaW9uID09PSAnMS4wJykgewogICAgLy8gYWLliIbnu4Tkv6Hmga8KICAgIGRhdGEuYWN0aW9uZGF0YS5hYnRlc3QgPSBtb2RlbC5hYnRlc3Q7IC8vIOaYr+WQpuaJi+eZvuerr+WGhQoKICAgIGRhdGEuYWN0aW9uZGF0YS5pbkJveCA9IG1vZGVsLmluQm94OyAvLyDnvZHnu5znirbmgIEKCiAgICBkYXRhLmFjdGlvbmRhdGEubmV0d29yayA9IG1vZGVsLm5ldHdvcms7CiAgICBkYXRhLmFwcGlkID0gbW9kZWwuYXBwaWQ7CiAgICBkYXRhLmFjdGlvbnR5cGUgPSBtb2RlbC5hY3Rpb250eXBlOwogIH0KCiAgcmV0dXJuIGRhdGE7Cn0KLyoqCiAqIOWIneWni+WMlumFjee9riBUcmFja2VyCiAqCiAqIEBwYXJhbSB7T2JqZWN0fSBtb2RlbCB0cmFja2VyLm1vZGVsIOWtmOaUviB0cmFja2Vy55qE5YWs5YWx5L+h5oGvCiAqIEBwYXJhbSB7T2JqZWN0fSBvcHQg5Yid5aeL5YyW6Lef6Liq5Zmo55qE5Z+65pys5Y+C5pWwCiAqIEBwYXJhbSB7c3RyaW5nfSBvcHQudHJhY2tlck5hbWUg6Lef6Liq5Zmo55qE5ZCN56ewCiAqIEBwYXJhbSB7c3RyaW5nfSBvcHQudHJhY2tlcklkIOi3n+i4quWZqOeahElECiAqIEBwYXJhbSB7c3RyaW5nfSBvcHQudGltaW5nSWQg6Lef6Liq5Zmo55qE5ZCN56ewCiAqLwoKCmZ1bmN0aW9uIHNldEJhc2ljQ29uZmlnKG1vZGVsLCBvcHQpIHsKICAvLyDot5/ouKrlmajlkI3np7AKICBtb2RlbC50cmFja2VyTmFtZSA9IG9wdC50cmFja2VyTmFtZTsgLy8g6Lef6Liq5ZmoSUQKCiAgbW9kZWwudHJhY2tlcklkID0gb3B0LnRyYWNrZXJJZCB8fCAnJzsgLy8g6Lef6Liq5Zmo5pe26ZW/SUQKCiAgbW9kZWwudGltaW5nSWQgPSBvcHQuY29uZmlnICYmIG9wdC5jb25maWcudGltaW5nSWQgfHwgJyc7IC8vIOaYr+WQpuWPr+S7peS9v+eUqCBzZW5kQmVhbkFQSQoKICBtb2RlbC51c2VTZW5kQmVhY29uID0gb3B0LmNvbmZpZyAmJiBvcHQuY29uZmlnLnVzZVNlbmRCZWFjb24gfHwgZmFsc2U7IC8vIOm7mOiupOeahHNka+eJiOacrC12MgoKICBtb2RlbC52ZXJzaW9uID0gb3B0LmNvbmZpZyAmJiBvcHQuY29uZmlnLnZlcnNpb24gfHwgZGVmYXVsdFZlcnNpb247IC8vIOaYr+WQpuaYr+a1i+ivleaooeW8jwoKICBpZiAob3B0LmNvbmZpZyAmJiBpc0Jvb2xlYW4ob3B0LmNvbmZpZy50ZXN0TW9kZSkpIHsKICAgIG1vZGVsLnRlc3RNb2RlID0gb3B0LmNvbmZpZy50ZXN0TW9kZTsKICB9IGVsc2UgewogICAgbW9kZWwudGVzdE1vZGUgPSBmYWxzZTsKICB9IC8vIOa1i+ivleWPkemAgeWcsOWdgC12MgoKCiAgbW9kZWwudGVzdFVybCA9IG9wdC5jb25maWcgJiYgb3B0LmNvbmZpZy50ZXN0VXJsIHx8ICcnOyAvLyDmmK/lkKbpu5jorqTkuIrmiqVQVgoKICBpZiAob3B0LmNvbmZpZyAmJiBpc0Jvb2xlYW4ob3B0LmNvbmZpZy5hdXRvUHZUcmFjaykpIHsKICAgIG1vZGVsLmF1dG9QdlRyYWNrID0gb3B0LmNvbmZpZy5hdXRvUHZUcmFjazsKICB9IGVsc2UgewogICAgbW9kZWwuYXV0b1B2VHJhY2sgPSBmYWxzZTsKICB9IC8vIOaYr+WQpum7mOiupOS4iuaKpemhtemdouaXtumVvwoKCiAgaWYgKG9wdC5jb25maWcgJiYgaXNCb29sZWFuKG9wdC5jb25maWcuYXV0b1RpbWluZ1RyYWNrKSkgewogICAgbW9kZWwuYXV0b1RpbWluZ1RyYWNrID0gb3B0LmNvbmZpZy5hdXRvVGltaW5nVHJhY2s7CiAgfSBlbHNlIHsKICAgIG1vZGVsLmF1dG9UaW1pbmdUcmFjayA9IGZhbHNlOwogIH0gLy8g6buY6K6k55qE5Lqn5ZOB57q/5ZCNLXYyCgoKICBtb2RlbC5xdWVyeVBhcmFtcyA9IG9wdC5jb25maWcgJiYgb3B0LmNvbmZpZy5xdWVyeVBhcmFtcyB8fCB7fTsgLy8g5aaC5p6cIHZlcnNpb24gPSAyLjDvvIzliJnlop7liqDlj4LmlbAgdgoKICBpZiAobW9kZWwudmVyc2lvbikgewogICAgbW9kZWwucXVlcnlQYXJhbXMudiA9IG1vZGVsLnZlcnNpb247CiAgfSAvLyDpu5jorqTnmoTkuqflk4Hnur9JRC3miYvnmb4KCgogIG1vZGVsLmFwcGlkID0gb3B0LmNvbmZpZyAmJiBvcHQuY29uZmlnLmFwcGlkIHx8IGRlZmF1bHRBcHBpZDsgLy8g6buY6K6k55qE5pyN5Yqh57G75Z6LLXdlYiDnq68KCiAgbW9kZWwuY2F0ZWlkID0gb3B0LmNvbmZpZyAmJiBvcHQuY29uZmlnLmNhdGVpZCB8fCBkZWZhdWx0Q2F0ZWlkOyAvLyDpu5jorqTnmoTop6blj5Hnsbvlnost6buY6K6kCgogIG1vZGVsLmFjdGlvbnR5cGUgPSBvcHQuY29uZmlnICYmIG9wdC5jb25maWcuYWN0aW9udHlwZSB8fCBkZWZhdWx0QWN0aW9udHlwZTsgLy8g6buY6K6k55qE5Lia5Yqh5p2l5rqQLei/kOiQpea0u+WKqAoKICBtb2RlbC5mcm9tID0gb3B0LmNvbmZpZyAmJiBvcHQuY29uZmlnLmZyb20gfHwgZGVmYXVsdEZyb207IC8vIOm7mOiupOeahOaXtumVv+e7n+iuoeivt+axguWPkemAgemXtOmalAoKICBtb2RlbC5kdXJhdGlvbiA9IG9wdC5jb25maWcgJiYgb3B0LmNvbmZpZy5kdXJhdGlvbiB8fCBEZWZhdWx0RHVyYXRpb247IC8vIOm7mOiupOeahOa4oOmBk+S/oeaBrwoKICBtb2RlbC5zb3VyY2UgPSBvcHQuY29uZmlnICYmIG9wdC5jb25maWcuc291cmNlIHx8IGdldFF1ZXJ5UGFyYW1zKCdpZGZyb20nKSB8fCAnJzsgLy8g5piv5ZCm5omL55m+56uv5YaFLOWQjue7reaJqeWxleWIsOWkmuerr+WPr+iDveS8muWvueivpeWtl+auteWQq+S5iei/m+ihjOWPmOabtO+8jOebruWJjeS7u+eEtuagh+ivhuaYr+WQpuaJi+eZvuerr+WGheOAggoKICBtb2RlbC5pbkJveCA9IElTX0JPWCA/ICcxJyA6ICcwJzsKICBtb2RlbC5hYnRlc3QgPSBvcHQuY29uZmlnICYmIG9wdC5jb25maWcuYWJ0ZXN0IHx8ICcnOyAvLyDnvZHnu5zkv6Hmga8KCiAgbW9kZWwubmV0d29yayA9IG9wdC5jb25maWcgJiYgb3B0LmNvbmZpZy5uZXR3b3JrIHx8ICcnOyAvLyDpobXpnaLmoIfnpLrvvIzpu5jorqQgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lCgogIG1vZGVsLnBhZ2UgPSBvcHQuY29uZmlnICYmIG9wdC5jb25maWcucGFnZSB8fCB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7IC8vIOaYr+WQpumbhuaIkOS6hueZvuW6pue7n+iuoQoKICBtb2RlbC5iYWlkdVRvbmdKaUlkID0gb3B0LmNvbmZpZyAmJiBvcHQuY29uZmlnLmJhaWR1VG9uZ0ppSWQ7CiAgbW9kZWwuaXNCYWlkdVRvbmdKaSA9ICEhKG9wdC5jb25maWcgJiYgb3B0LmNvbmZpZy5iYWlkdVRvbmdKaUlkKTsgLy8g5pe26ZW/5Lu75Yqh566h55CG5ZmoCgogIG1vZGVsLnRpbWluZ1Rhc2tzID0gW107Cn0KLyoqCiAqIEBmaWxlIHNlbmQg5pa55rOVCiAqIEBhdXRob3Igd2FuZ2JpbmcxMSh3YW5nYmluZzExQGJhaWR1LmNvbSkKICovCi8vIFNldCB0aGUgbmFtZSBvZiB0aGUgaGlkZGVuIHByb3BlcnR5IGFuZCB0aGUgY2hhbmdlIGV2ZW50IGZvciB2aXNpYmlsaXR5CgoKdmFyIGhpZGRlbiwgdmlzaWJpbGl0eUNoYW5nZTsKCmlmICh0eXBlb2YgZG9jdW1lbnQuaGlkZGVuICE9PSAndW5kZWZpbmVkJykgewogIC8vIE9wZXJhIDEyLjEwIGFuZCBGaXJlZm94IDE4IGFuZCBsYXRlciBzdXBwb3J0CiAgaGlkZGVuID0gJ2hpZGRlbic7CiAgdmlzaWJpbGl0eUNoYW5nZSA9ICd2aXNpYmlsaXR5Y2hhbmdlJzsKfSBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnQubXNIaWRkZW4gIT09ICd1bmRlZmluZWQnKSB7CiAgaGlkZGVuID0gJ21zSGlkZGVuJzsKICB2aXNpYmlsaXR5Q2hhbmdlID0gJ21zdmlzaWJpbGl0eWNoYW5nZSc7Cn0gZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50LndlYmtpdEhpZGRlbiAhPT0gJ3VuZGVmaW5lZCcpIHsKICBoaWRkZW4gPSAnd2Via2l0SGlkZGVuJzsKICB2aXNpYmlsaXR5Q2hhbmdlID0gJ3dlYmtpdHZpc2liaWxpdHljaGFuZ2UnOwp9IGVsc2UgaWYgKHR5cGVvZiBkb2N1bWVudC5iYWlkdWJveGFwcHZpc2liaWxpdHljaGFuZ2UgIT09ICd1bmRlZmluZWQnKSB7CiAgaGlkZGVuID0gJ3dlYmtpdEhpZGRlbic7CiAgdmlzaWJpbGl0eUNoYW5nZSA9ICd3ZWJraXR2aXNpYmlsaXR5Y2hhbmdlJzsKfQoKZnVuY3Rpb24gcmVnZXN0UGFnZVZpc2liaWxpdHlFdmVudChVQkMpIHsKICB2YXIgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UoKSB7CiAgICB2YXIgdHJhY2tlcnMgPSBVQkMuZ2V0QWxsKCk7CiAgICB0cmFja2Vycy5mb3JFYWNoKGZ1bmN0aW9uICh0cmFja2VyKSB7CiAgICAgIHZhciB0aW1pbmdUYXNrcyA9IHRyYWNrZXIuZ2V0KCd0aW1pbmdUYXNrcycpOwoKICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRpbWluZ1Rhc2tzKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGRvY3VtZW50W2hpZGRlbl0pIHsKICAgICAgICB0cmFja2VyLnN0b3BBbGxUaW1pbmdSZXBvcnRvcigpOwogICAgICB9IGVsc2UgewogICAgICAgIHRyYWNrZXIuc3RhcnRBbGxUaW1pbmdSZXBvcnRvcigpOwogICAgICB9CiAgICB9KTsKICB9OwoKICBpZiAodHlwZW9mIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgPT09ICd1bmRlZmluZWQnIHx8IGhpZGRlbiA9PT0gdW5kZWZpbmVkKSB7CiAgICByZXR1cm47CiAgfSAvLyBIYW5kbGUgcGFnZSB2aXNpYmlsaXR5IGNoYW5nZQoKCiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih2aXNpYmlsaXR5Q2hhbmdlLCBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlLCBmYWxzZSk7Cn0KLyoqCiAqIEBmaWxlIOS4u+aWh+S7tgogKiBAYXV0aG9yIHdhbmdiaW5nMTEod2FuZ2JpbmcxMUBiYWlkdS5jb20pCiAqLwoKCnZhciBVQkNSZXBvcnRPYmplY3QgPSAndWJjJzsKdmFyIFVCQ3RyYWNrZXJzID0gW107CnZhciBVQkN0cmFja2VyTWFwID0ge307IC8vCgp2YXIgdHJhY2tlckNyZWF0ZU1hcEZpZWxkcyA9IFsndHJhY2tlck5hbWUnLCAndHJhY2tlcklkJywgJ2NvbmZpZyddOwovKioKICogdWJjIOS4iuaKpeS4u+exuywg5pq06Zyy57uZ5aSW6YOo55qE5o6l5Y+jCiAqCiAqIEBwYXJhbSB7Li4uYW55fSAgYXJncyDnlKjmiLfovpPlhaXnmoQgdWJjIOWRveS7pOOAguWmgiB1YmMoJ2V2ZW50JywgJ2xvZ2luQnRuQ2xpY2snLCAnaGVhZCcpCiAqIEBjbGFzcwogKgogKi8KCi8qIGVzbGludC1kaXNhYmxlICovCgpmdW5jdGlvbiBVQkMoKSB7CiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogIH0KCiAgLyogZXNsaW50LWVuYWJsZSAqLwogIE1ldGhvZFF1ZXVlLnJ1bi5jYWxsKHdpbmRvd1tVQkNSZXBvcnRPYmplY3RdLCBbYXJnc10pOwp9Ci8qKgogKiDliJvlu7rkuIDkuKrot5/ouKrlmagKICoKICogQHBhcmFtICB7Li4uYW55fSBhcmdzIFt0cmFja2VyTmFtZSwgdHJhY2tlcklkLCBjb25maWddLCBjb25maWflj6/ku6XkuLrnqboKICogQHJldHVybiB7VHJhY2tlcn0g6L+U5Zue5LiA5Liq6Lef6Liq5ZmoCiAqLwoKClVCQy5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7CiAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7CiAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07CiAgfQoKICB2YXIgb3B0cyA9IHRyYW5zZm9ybUlucHV0KHRyYWNrZXJDcmVhdGVNYXBGaWVsZHMsIFtdLnNsaWNlLmNhbGwoYXJncykpOwogIHZhciB0cmFja2VyTmFtZSA9IG9wdHMudHJhY2tlck5hbWU7IC8vIOmYsuatoumHjeWkjeWIm+W7ugoKICBpZiAoVUJDdHJhY2tlck1hcFt0cmFja2VyTmFtZV0pIHsKICAgIHJldHVybiBVQkN0cmFja2VyTWFwW3RyYWNrZXJOYW1lXTsKICB9IC8vIOWmguaenOi3n+i4quWZqOeahElE55u45ZCM77yM5bCx5oqb5Ye65byC5bi4CgoKICB2YXIgc2FtZVRyYWNrZXIgPSBVQkN0cmFja2Vycy5maW5kKGZ1bmN0aW9uICh0cmFja2VyKSB7CiAgICByZXR1cm4gdHJhY2tlci5nZXQoJ3RyYWNrZXJJZCcpID09PSBvcHRzLnRyYWNrZXJJZDsKICB9KTsKCiAgaWYgKHNhbWVUcmFja2VyKSB7CiAgICB0aHJvdyAnbXVsdGkgdHJhY2tlciBzZXJ2ZXJJZCBjYW4gbm90IGJlIHNhbWUnOwogIH0KCiAgdmFyIHRyYWNrZXIgPSBuZXcgVHJhY2tlcihvcHRzKTsKICBVQkN0cmFja2VyTWFwW3RyYWNrZXJOYW1lXSA9IHRyYWNrZXI7CiAgVUJDdHJhY2tlcnMucHVzaCh0cmFja2VyKTsKICByZXR1cm4gdHJhY2tlcjsKfTsgLy8g5Yig6Zmk5LiA5Liq6Lef6Liq5ZmoCgoKVUJDLnJlbW92ZSA9IGZ1bmN0aW9uICh0cmFja2VyTmFtZSkgewogIHZhciBsZW5ndGggPSBVQkN0cmFja2Vycy5sZW5ndGg7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgIGlmIChVQkN0cmFja2Vyc1tpXVt0cmFja2VyTmFtZV0gPT09IHRyYWNrZXJOYW1lKSB7CiAgICAgIFVCQ3RyYWNrZXJzLnNwbGljZShpLCAxKTsKICAgICAgVUJDdHJhY2tlck1hcFt0cmFja2VyTmFtZV0gPSBudWxsOwogICAgICBicmVhazsKICAgIH0KICB9Cn07IC8vIOS4u+WFpeWPo++8jOWmguaenOaYr+mAmui/hyBTREsg5o6l5YWl55qE77yM6KaB5a+5IFNESyDkuIvovb3lrozmr5XkuYvliY3lsLHms6jlhaXnmoTlkb3ku6Tov5vooYzlpITnkIYKCgpVQkMubWFpbiA9IGZ1bmN0aW9uICgpIHsKICAvLyDpobXpnaLliJ3lp4vljJbml7bvvIxwdXNo5YiwIHViYyDpmJ/liJfph4zpnaLnmoTlkb3ku6QKICB2YXIgdG1wVUJDID0gd2luZG93W1VCQ1JlcG9ydE9iamVjdF07CiAgdmFyIHRtcFVCQ1F1ZXVlID0gdG1wVUJDICYmIHRtcFVCQy5xOyAvLyDlpoLmnpx3aW5kb3cudWJj5Li6VUJD77yM5YiZ55u05o6l5L2/55Sod2luZG93LnViYwoKICBpZiAodG1wVUJDICYmIHR5cGVvZiB0bXBVQkMuZ2V0QWxsID09PSAnZnVuY3Rpb24nKSB7CiAgICBVQkMgPSB3aW5kb3dbVUJDUmVwb3J0T2JqZWN0XTsKICB9IC8vIOWmguaenOaciSBVQkMg5Yid5aeL5YyW5LmL5YmN5a2Y5pS+55qE5ZG95LukCgoKICBpZiAoQXJyYXkuaXNBcnJheSh0bXBVQkNRdWV1ZSkpIHsKICAgIE1ldGhvZFF1ZXVlLnJ1bi5hcHBseShVQkMsIFt0bXBVQkNRdWV1ZV0pOwogICAgdG1wVUJDLnEgPSBbXTsKICB9CgogIFVCQy5zdGFydFRpbWUgPSB0bXBVQkMgJiYgdG1wVUJDLmwgfHwgMSAqIG5ldyBEYXRlKCk7CiAgVUJDLmxvYWRlZCA9IHRydWU7CiAgd2luZG93W1VCQ1JlcG9ydE9iamVjdF0gPSBVQkM7Cn07Ci8qKgogKiDpgJrov4flkI3np7Dojrflj5bot5/ouKrlmagKICoKICogQHBhcmFtIHtzdHJpbmd9IHRyYWNrZXJOYW1lICDot5/ouKrlmajlkI3np7AKICogQHJldHVybiB7VHJhY2tlcn0g6L+U5Zue5LiA5Liq6Lef6Liq5ZmoCiAqLwoKClVCQy5nZXRCeU5hbWUgPSBmdW5jdGlvbiAodHJhY2tlck5hbWUpIHsKICByZXR1cm4gVUJDdHJhY2tlck1hcFt0cmFja2VyTmFtZV07Cn07Ci8qKgogKiDojrflj5bmiYDmnInnmoTot5/ouKrlmagKICoKICogQHJldHVybiB7QXJyYXl9fSDov5Tlm57ot5/ouKrlmajliJfooagKICovCgoKVUJDLmdldEFsbCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gVUJDdHJhY2tlcnMuc2xpY2UoKTsKfTsKClVCQy5tYWluKCk7CnJlZ2VzdFBhZ2VWaXNpYmlsaXR5RXZlbnQoVUJDKTsKdmFyIHViYyA9IFVCQzsKdmFyIF9kZWZhdWx0ID0gdWJjOwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"sources":["/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/@baidu/auc-log/node_modules/@baidu/ubc-report-sdk/dist/ubc-web-sdk.esm.js"],"names":["commandRegex","Command","args","r","exec","length","trackerName","pluginName","methodName","fields","slice","call","isCreateCommand","isConfigCommand","isEventCommand","isTimingCommand","ua","window","navigator","userAgent","IS_LITE_BOX","test","IS_KANDUODUO_BOX","IS_BOX","isHTTPS","document","location","protocol","transformInput","paramNames","Array","isArray","c","d","Math","min","i","g","hasOwnProperty","getQueryParams","name","url","href","reg","RegExp","split","match","decodeURIComponent","stringify","query","search","key","value","JSON","encodeURIComponent","renderUrl","indexOf","isObject","type","isBoolean","isFunction","loadScript","src","script","createElement","async","lastScr","getElementsByTagName","parentNode","insertBefore","noop","MethodQueue","cmdQueue","init","run","inputsList","cmds","map","inputs","toCommands","apply","tmpCmds","concat","runCommand","push","shift","cmd","create","tracker","getByName","configs","set","Object","assign","get","send","regestTimingReportor","endTimingReportor","serverUrls","http","https","pblogUrlProtocol","testPblogUrlProtocol","ztboxUrlProtocol","testZtboxUrlProtocol","baiduTongJiSDKUrl","createImg","img","width","height","callbackWaitingTime","imgPing","param","callback","data","isCallbacked","setTimeout","onload","onerror","beaconSend","sendBeacon","smartSend","useSendBeacon","model","defaultVersion","defaultAppid","defaultCateid","defaultActiontype","defaultFrom","DefaultDuration","eventArgsInputPattern","Tracker","opt","setBasicConfig","_hmt","prototype","fieldName","fieldValue","sendData","generateEventData","actiondata","content","page","generateDurationData","version","testUrl","queryParams","timingTasks","duration","isExist","find","task","eventName","starttime","Date","now","timingIntevalId","setInterval","isReporting","stopAllTimingReportor","forEach","timingTask","clearInterval","startAllTimingReportor","newTimingTasks","removeAllTimingReportor","cateid","id","trackerId","timestamp","source","from","ext","abtest","inBox","network","appid","actiontype","timingId","option","config","testMode","autoPvTrack","autoTimingTrack","v","hostname","pathname","baiduTongJiId","isBaiduTongJi","hidden","visibilityChange","msHidden","webkitHidden","baiduboxappvisibilitychange","regestPageVisibilityEvent","UBC","handleVisibilityChange","trackers","getAll","addEventListener","undefined","UBCReportObject","UBCtrackers","UBCtrackerMap","trackerCreateMapFields","opts","sameTracker","remove","splice","main","tmpUBC","tmpUBCQueue","q","startTime","l","loaded","ubc"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,IAAMA,YAAY,GAAG,iCAArB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;AACrB;AACA,MAAIC,CAAC,GAAGH,YAAY,CAACI,IAAb,CAAkBF,IAAI,CAAC,CAAD,CAAtB,CAAR;;AAEA,MAAIC,CAAC,IAAI,IAAL,IAAaA,CAAC,CAACE,MAAF,KAAa,CAA9B,EAAiC;AAC/B;AACA,SAAKC,WAAL,GAAmBH,CAAC,CAAC,CAAD,CAAD,IAAQ,IAA3B,CAF+B,CAEE;;AAEjC,SAAKI,UAAL,GAAkBJ,CAAC,CAAC,CAAD,CAAD,IAAQ,EAA1B,CAJ+B,CAID;;AAE9B,SAAKK,UAAL,GAAkBL,CAAC,CAAC,CAAD,CAAnB;AACA,SAAKM,MAAL,GAAc,GAAGC,KAAH,CAASC,IAAT,CAAcT,IAAd,EAAoB,CAApB,CAAd;AACA,SAAKU,eAAL,GAAuB,WAAW,KAAKJ,UAAvC;AACA,SAAKK,eAAL,GAAuB,aAAa,KAAKL,UAAzC;AACA,SAAKM,cAAL,GAAsB,YAAY,KAAKN,UAAjB,IAA+B,SAAS,KAAKA,UAAnE;AACA,SAAKO,eAAL,GAAuB,aAAa,KAAKP,UAAzC,CAX+B,CAWsB;;AAErD,QAAI,CAAC,KAAKA,UAAV,EAAsB;AACpB,YAAM,sCAAN;AACD,KAf8B,CAe7B;;;AAGF,QAAI,KAAKI,eAAT,EAA0B;AACxB,UAAI,CAAC,KAAKH,MAAL,CAAY,CAAZ,CAAL,EAAqB;AACnB,cAAM,oCAAN;AACD;AACF;AACF,GAvBD,MAuBO;AACL,UAAM,sBAAN;AACD;AACF;AAED;AACA;AACA;AACA;;;AACA,IAAMO,EAAE,GAAGC,MAAM,CAACC,SAAP,CAAiBC,SAA5B;AACA,IAAMC,WAAW,GAAG,8BAA8BC,IAA9B,CAAmCL,EAAnC,CAApB;AACA,IAAMM,gBAAgB,GAAG,0BAA0BD,IAA1B,CAA+BL,EAA/B,CAAzB,C,CAA6D;;AAE7D,IAAMO,MAAM,GAAG,kBAAkBF,IAAlB,CAAuBL,EAAvB,KAA8B,CAACI,WAA/B,IAA8C,CAACE,gBAA9D,C,CAAgF;;AAEhF,IAAME,OAAO,GAAG,SAAVA,OAAU,GAAY;AAC1B,SAAO,aAAaC,QAAQ,CAACC,QAAT,CAAkBC,QAAtC;AACD,CAFD,C,CAEG;AACH;AACA;AACA;AACA;;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAUC,UAAV,EAAsB3B,IAAtB,EAA4B;AACjD,MAAI,CAAC4B,KAAK,CAACC,OAAN,CAAcF,UAAd,CAAD,IAA8B,CAACC,KAAK,CAACC,OAAN,CAAc7B,IAAd,CAAnC,EAAwD;AACtD,WAAO,EAAP;AACD;;AAED,MAAI8B,CAAC,GAAG,EAAR;AACA,MAAIC,CAAC,GAAGC,IAAI,CAACC,GAAL,CAASN,UAAU,CAACxB,MAAX,GAAoB,CAA7B,EAAgCH,IAAI,CAACG,MAArC,CAAR;;AAEA,OAAK,IAAI+B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,CAApB,EAAuBG,CAAC,EAAxB,EAA4B;AAC1B,QAAI,mCAAoBlC,IAAI,CAACkC,CAAD,CAAxB,CAAJ,EAAiC;AAC/BJ,MAAAA,CAAC,CAACH,UAAU,CAACO,CAAD,CAAX,CAAD,GAAmB,EAAnB;;AAEA,WAAK,IAAIC,CAAT,IAAcnC,IAAI,CAACkC,CAAD,CAAlB,EAAuB;AACrB,YAAIlC,IAAI,CAACkC,CAAD,CAAJ,CAAQE,cAAR,CAAuBD,CAAvB,CAAJ,EAA+B;AAC7BL,UAAAA,CAAC,CAACH,UAAU,CAACO,CAAD,CAAX,CAAD,CAAiBC,CAAjB,IAAsBnC,IAAI,CAACkC,CAAD,CAAJ,CAAQC,CAAR,CAAtB;AACD;AACF;AACF,KARD,MAQO;AACLD,MAAAA,CAAC,GAAGP,UAAU,CAACxB,MAAf,KAA0B2B,CAAC,CAACH,UAAU,CAACO,CAAD,CAAX,CAAD,GAAmBlC,IAAI,CAACkC,CAAD,CAAjD;AACD;AACF;;AAED,SAAOJ,CAAP;AACD,CAvBD;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAASO,cAAT,CAAwBC,IAAxB,EAA0D;AAAA,MAA5BC,GAA4B,uEAAtBxB,MAAM,CAACS,QAAP,CAAgBgB,IAAM;AACxD,MAAIC,GAAG,GAAG,IAAIC,MAAJ,CAAW,UAAUJ,IAAV,GAAiB,eAA5B,EAA6C,GAA7C,CAAV;;AAEA,MAAIC,GAAG,CAACI,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAJ,EAAuB;AACrB,QAAI1C,CAAC,GAAGsC,GAAG,CAACI,KAAJ,CAAU,GAAV,EAAe,CAAf,EAAkBC,KAAlB,CAAwBH,GAAxB,CAAR;AACA,WAAOxC,CAAC,IAAI,IAAL,GAAY4C,kBAAkB,CAAC5C,CAAC,CAAC,CAAD,CAAF,CAA9B,GAAuC,IAA9C;AACD,GAHD,MAGO;AACL,WAAO,IAAP;AACD;AACF;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAAS6C,SAAT,GAA+B;AAAA,MAAZC,KAAY,uEAAJ,EAAI;;AAC7B,MAAI,CAACA,KAAL,EAAY;AACV,WAAO,EAAP;AACD;;AAED,MAAIC,MAAM,GAAG,EAAb;;AAEA,OAAK,IAAIC,GAAT,IAAgBF,KAAhB,EAAuB;AACrB,QAAIA,KAAK,CAACX,cAAN,CAAqBa,GAArB,CAAJ,EAA+B;AAC7B,UAAIC,KAAK,GAAGH,KAAK,CAACE,GAAD,CAAjB;;AAEA,UAAIC,KAAK,IAAI,IAAb,EAAmB;AACjBA,QAAAA,KAAK,GAAG,EAAR;AACD,OAFD,MAEO,IAAI,sBAAOA,KAAP,MAAiB,QAArB,EAA+B;AACpCA,QAAAA,KAAK,GAAGC,IAAI,CAACL,SAAL,CAAeI,KAAf,CAAR;AACD;;AAEDF,MAAAA,MAAM,IAAI,MAAMI,kBAAkB,CAACH,GAAD,CAAxB,GAAgC,GAAhC,GAAsCG,kBAAkB,CAACF,KAAD,CAAlE;AACD;AACF;;AAED,SAAOF,MAAM,CAACxC,KAAP,CAAa,CAAb,CAAP;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAAS6C,SAAT,GAAyC;AAAA,MAAtBd,GAAsB,uEAAhB,EAAgB;AAAA,MAAZQ,KAAY,uEAAJ,EAAI;AACvC,SAAOR,GAAG,IAAI,CAACA,GAAG,CAACe,OAAJ,CAAY,GAAZ,CAAD,GAAoB,GAApB,GAA0B,GAA9B,CAAH,GAAwCR,SAAS,CAACC,KAAD,CAAxD;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAASQ,QAAT,CAAkBL,KAAlB,EAAyB;AACvB;AACA;AACA,MAAIM,IAAI,yBAAUN,KAAV,CAAR;AACA,SAAOM,IAAI,KAAK,UAAT,IAAuB,CAAC,CAACN,KAAF,IAAWM,IAAI,KAAK,QAAlD;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAASC,SAAT,CAAmBP,KAAnB,EAA0B;AACxB,SAAOA,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAnC;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAASQ,UAAT,CAAoBR,KAApB,EAA2B;AACzB,SAAO,OAAOA,KAAP,KAAiB,UAAxB;AACD;;AACD,SAASS,UAAT,CAAoBC,GAApB,EAAyB;AACvB,MAAIA,GAAJ,EAAS;AACP,QAAIC,MAAM,GAAGtC,QAAQ,CAACuC,aAAT,CAAuB,QAAvB,CAAb;AACAD,IAAAA,MAAM,CAACL,IAAP,GAAc,iBAAd;AACAK,IAAAA,MAAM,CAACE,KAAP,GAAe,IAAf;AACAF,IAAAA,MAAM,CAACD,GAAP,GAAaA,GAAb;AACA,QAAII,OAAO,GAAGzC,QAAQ,CAAC0C,oBAAT,CAA8B,QAA9B,EAAwC,CAAxC,CAAd;AACAD,IAAAA,OAAO,CAACE,UAAR,CAAmBC,YAAnB,CAAgCN,MAAhC,EAAwCG,OAAxC;AACD;AACF;;AACD,SAASI,IAAT,GAAgB,CAAE;AAElB;AACA;AACA;AACA;;;AACA,IAAIC,WAAW,GAAG;AAChBC,EAAAA,QAAQ,EAAE;AADM,CAAlB,C,CAEG;;AAEHD,WAAW,CAACE,IAAZ,GAAmB,YAAY;AAC7BF,EAAAA,WAAW,CAACC,QAAZ,GAAuB,EAAvB;AACD,CAFD,C,CAEG;;;AAGHD,WAAW,CAACG,GAAZ,GAAkB,UAAUC,UAAV,EAAsB;AACtC,MAAIC,IAAI,GAAGD,UAAU,CAACE,GAAX,CAAe,UAAUC,MAAV,EAAkB;AAC1C,WAAOP,WAAW,CAACQ,UAAZ,CAAuBC,KAAvB,CAA6BT,WAA7B,EAA0C,CAACO,MAAD,CAA1C,CAAP;AACD,GAFU,CAAX;AAGA,MAAIG,OAAO,GAAGV,WAAW,CAACC,QAAZ,CAAqBU,MAArB,CAA4BN,IAA5B,CAAd,CAJsC,CAIW;;AAEjDL,EAAAA,WAAW,CAACC,QAAZ,GAAuB,EAAvB;;AAEA,SAAOS,OAAO,CAAC5E,MAAR,GAAiB,CAAxB,EAA2B;AACzB,QAAIkE,WAAW,CAACY,UAAZ,CAAuBH,KAAvB,CAA6B,IAA7B,EAAmC,CAACC,OAAO,CAAC,CAAD,CAAR,CAAnC,CAAJ,EAAsD;AACpD;AACAV,MAAAA,WAAW,CAACC,QAAZ,CAAqBY,IAArB,CAA0BH,OAAO,CAAC,CAAD,CAAjC;AACD;;AAEDA,IAAAA,OAAO,CAACI,KAAR;AACD;AACF,CAhBD;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGAd,WAAW,CAACQ,UAAZ,GAAyB,UAAUD,MAAV,EAAkB;AACzC,MAAIQ,GAAG,GAAG,IAAIrF,OAAJ,CAAY6E,MAAZ,CAAV;AACA,SAAOQ,GAAP;AACD,CAHD,C,CAGG;;;AAGHf,WAAW,CAACY,UAAZ,GAAyB,UAAUG,GAAV,EAAe;AACtC;AACA,MAAIA,GAAG,CAAC1E,eAAR,EAAyB;AACvB;AACA,SAAK2E,MAAL,cAAYD,GAAG,CAAChF,WAAhB,0CAAgCgF,GAAG,CAAC7E,MAApC;AACD,GAHD,CAGE;AAHF,OAIK,IAAI6E,GAAG,CAACzE,eAAR,EAAyB;AAC1B,UAAI2E,OAAO,GAAG,KAAKC,SAAL,CAAeH,GAAG,CAAChF,WAAnB,CAAd;AACA,UAAIoF,OAAO,GAAGJ,GAAG,CAAC7E,MAAJ,CAAW,CAAX,CAAd;;AAEA,WAAK,IAAI2B,CAAT,IAAcsD,OAAd,EAAuB;AACrB,YAAIA,OAAO,CAACpD,cAAR,CAAuBF,CAAvB,CAAJ,EAA+B;AAC7B,cAAIqB,QAAQ,CAACiC,OAAO,CAACtD,CAAD,CAAR,CAAZ,EAA0B;AACxBoD,YAAAA,OAAO,CAACG,GAAR,CAAYvD,CAAZ,EAAewD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBL,OAAO,CAACM,GAAR,CAAY1D,CAAZ,CAAlB,EAAkCsD,OAAO,CAACtD,CAAD,CAAzC,CAAf;AACD,WAFD,MAEO;AACLoD,YAAAA,OAAO,CAACG,GAAR,CAAYvD,CAAZ,EAAesD,OAAO,CAACtD,CAAD,CAAtB;AACD;AACF;AACF;AACF,KAbE,CAaD;AAbC,SAcE,IAAIkD,GAAG,CAACxE,cAAR,EAAwB;AACzB,YAAI0E,QAAO,GAAG,KAAKC,SAAL,CAAeH,GAAG,CAAChF,WAAnB,CAAd;;AACAkF,QAAAA,QAAO,CAACO,IAAR,CAAapF,IAAb,CAAkB6E,QAAlB,EAA2B;AACzB9B,UAAAA,IAAI,EAAE,OADmB;AAEzBjD,UAAAA,MAAM,EAAE6E,GAAG,CAAC7E;AAFa,SAA3B;AAID,OANE,CAMD;AANC,WAOE,IAAI6E,GAAG,CAACvE,eAAR,EAAyB;AAC1B,cAAIyE,SAAO,GAAG,KAAKC,SAAL,CAAeH,GAAG,CAAChF,WAAnB,CAAd;;AACA,cAAIoD,IAAI,GAAG4B,GAAG,CAAC7E,MAAJ,CAAW,CAAX,CAAX;AACA,cAAIA,MAAM,GAAG,GAAGC,KAAH,CAASC,IAAT,CAAc2E,GAAG,CAAC7E,MAAlB,EAA0B,CAA1B,CAAb;;AAEA,cAAIiD,IAAI,KAAK,OAAb,EAAsB;AACpB8B,YAAAA,SAAO,CAACQ,oBAAR,CAA6BvF,MAA7B;AACD,WAFD,MAEO,IAAIiD,IAAI,KAAK,KAAb,EAAoB;AACzB8B,YAAAA,SAAO,CAACS,iBAAR,CAA0BxF,MAA1B;AACD;AACF;AACR,CAtCD;;AAwCA8D,WAAW,CAACE,IAAZ;AAEA;AACA;AACA;AACA;;AAEA,IAAMyB,UAAU,GAAG;AACjBC,EAAAA,IAAI,EAAE,uCADW;AAEjBC,EAAAA,KAAK,EAAE;AAFU,CAAnB,C,CAGG;;AAEH,IAAMC,gBAAgB,GAAGH,UAAU,CAAC1E,OAAO,KAAK,OAAL,GAAe,MAAvB,CAAnC,C,CAAmE;;AAEnE,IAAM8E,oBAAoB,GAAG,mFAA7B,C,CAAkH;;AAElH,IAAMC,gBAAgB,GAAG,2CAAzB,C,CAAsE;;AAEtE,IAAMC,oBAAoB,GAAG,oFAA7B,C,CAAmH;AACnH;;AAEA,IAAMC,iBAAiB,GAAG,4BAA1B;AAEA;AACA;AACA;AACA;;AAEA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAAU5C,GAAV,EAAe;AAC/B,MAAI6C,GAAG,GAAGlF,QAAQ,CAACuC,aAAT,CAAuB,KAAvB,CAAV;AACA2C,EAAAA,GAAG,CAACC,KAAJ,GAAY,CAAZ;AACAD,EAAAA,GAAG,CAACE,MAAJ,GAAa,CAAb;AACAF,EAAAA,GAAG,CAAC7C,GAAJ,GAAUA,GAAV;AACA,SAAO6C,GAAP;AACD,CAND,C,CAMG;;;AAGH,IAAMG,mBAAmB,GAAG,GAA5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASC,OAAT,CAAiBtE,GAAjB,EAAsBuE,KAAtB,EAA6BC,QAA7B,EAAuCzB,OAAvC,EAAgD;AAC9C;AACA/C,EAAAA,GAAG,GAAGc,SAAS,CAACd,GAAD,EAAM;AACnByE,IAAAA,IAAI,EAAEF;AADa,GAAN,CAAf;AAGA,MAAIL,GAAG,GAAGD,SAAS,CAACjE,GAAD,CAAnB;AACA,MAAI0E,YAAY,GAAG,KAAnB,CAN8C,CAMpB;;AAE1BC,EAAAA,UAAU,CAAC,YAAY;AACrB,QAAIH,QAAQ,IAAI,CAACE,YAAjB,EAA+B;AAC7BF,MAAAA,QAAQ,CAACzB,OAAD,CAAR;AACA2B,MAAAA,YAAY,GAAG,IAAf;AACD;AACF,GALS,EAKPL,mBALO,CAAV;;AAOAH,EAAAA,GAAG,CAACU,MAAJ,GAAaV,GAAG,CAACW,OAAJ,GAAc,YAAY;AACrCX,IAAAA,GAAG,GAAG,IAAN,CADqC,CACzB;;AAEZ,QAAIM,QAAQ,IAAI,CAACE,YAAjB,EAA+B;AAC7BF,MAAAA,QAAQ,CAACzB,OAAD,CAAR;AACA2B,MAAAA,YAAY,GAAG,IAAf;AACD;AACF,GAPD;AAQD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASI,UAAT,CAAoB9E,GAApB,EAAyBuE,KAAzB,EAAgCC,QAAhC,EAA0CzB,OAA1C,EAAmD;AACjD;AACA/C,EAAAA,GAAG,GAAGc,SAAS,CAACd,GAAD,EAAM;AACnByE,IAAAA,IAAI,EAAEF;AADa,GAAN,CAAf;AAGA/F,EAAAA,MAAM,CAACC,SAAP,CAAiBsG,UAAjB,CAA4B/E,GAA5B;AACAwE,EAAAA,QAAQ,CAACzB,OAAD,CAAR;AACD;;AAED,SAASiC,SAAT,CAAmBhF,GAAnB,EAAwBuE,KAAxB,EAA4E;AAAA,MAA7CC,QAA6C,uEAAlC3C,IAAkC;AAAA,MAA5BoD,aAA4B,uEAAZ,CAAY;AAAA,MAATlC,OAAS;;AAC1E;AACA;AACA,MAAI,OAAOvE,MAAM,CAACC,SAAP,CAAiBsG,UAAxB,KAAuC,UAAvC,KAAsDhC,OAAO,CAACmC,KAAR,CAAcD,aAAd,IAA+BA,aAAa,KAAK,CAAjD,IAAsDA,aAAa,KAAK,CAA9H,CAAJ,EAAsI;AACpI,WAAOH,UAAU,CAAC9E,GAAD,EAAMuE,KAAN,EAAaC,QAAb,EAAuBzB,OAAvB,CAAjB;AACD;;AAED,SAAOuB,OAAO,CAACtE,GAAD,EAAMuE,KAAN,EAAaC,QAAb,EAAuBzB,OAAvB,CAAd;AACD;AAED;AACA;AACA;AACA;;;AAEA,IAAMoC,cAAc,GAAG,KAAvB,C,CAA8B;;AAE9B,IAAMC,YAAY,GAAG,GAArB,C,CAA0B;;AAE1B,IAAMC,aAAa,GAAG,IAAtB,C,CAA4B;;AAE5B,IAAMC,iBAAiB,GAAG,GAA1B,C,CAA+B;;AAE/B,IAAMC,WAAW,GAAG,KAApB,C,CAA2B;;AAE3B,IAAMC,eAAe,GAAG,CAAxB,C,CAA2B;;AAE3B,IAAMC,qBAAqB,GAAG,CAAC,MAAD,EAAS,OAAT,EAAkB,KAAlB,CAA9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,SAASC,OAAT,CAAiBC,GAAjB,EAAsB;AACpB;AACA;AACA,OAAKT,KAAL,GAAa,EAAb,CAHoB,CAGH;;AAEjBU,EAAAA,cAAc,CAAC,KAAKV,KAAN,EAAaS,GAAb,CAAd,CALoB,CAKa;;AAEjC,MAAI,KAAKtC,GAAL,CAAS,eAAT,CAAJ,EAA+B;AAC7B;AACA7E,IAAAA,MAAM,CAACqH,IAAP,GAAcrH,MAAM,CAACqH,IAAP,IAAe,EAA7B;AACA,QAAIxE,GAAG,GAAG2C,iBAAiB,GAAG,GAApB,GAA0B,KAAKX,GAAL,CAAS,eAAT,CAApC;AACAjC,IAAAA,UAAU,CAACC,GAAD,CAAV;AACD,GAZmB,CAYlB;;;AAGF,MAAI,KAAKgC,GAAL,CAAS,aAAT,CAAJ,EAA6B;AAC3B;AACA,SAAKC,IAAL,CAAU;AACRrC,MAAAA,IAAI,EAAE,OADE;AAERjD,MAAAA,MAAM,EAAE,CAAC,YAAD;AAFA,KAAV;AAID,GArBmB,CAqBlB;;;AAGF,MAAI,KAAKqF,GAAL,CAAS,iBAAT,CAAJ,EAAiC;AAC/B;AACA,SAAKE,oBAAL,CAA0B,CAAC,gBAAD,CAA1B;AACD;AACF;;AAEDmC,OAAO,CAACI,SAAR,CAAkB5C,GAAlB,GAAwB,UAAU6C,SAAV,EAAqBC,UAArB,EAAiC;AACvD,OAAKd,KAAL,CAAWa,SAAX,IAAwBC,UAAxB;AACD,CAFD;;AAIAN,OAAO,CAACI,SAAR,CAAkBzC,GAAlB,GAAwB,UAAU0C,SAAV,EAAqB;AAC3C,SAAO,KAAKb,KAAL,CAAWa,SAAX,CAAP;AACD,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGAL,OAAO,CAACI,SAAR,CAAkBxC,IAAlB,GAAyB,gBAGtB;AAAA,MAFDrC,IAEC,QAFDA,IAEC;AAAA,MADDjD,MACC,QADDA,MACC;AACD;AACA,MAAIwG,QAAJ;AACA,MAAIyB,QAAJ;AACA,MAAIN,GAAJ;AACA,MAAIV,aAAa,GAAG,CAApB;;AAEA,MAAIhE,IAAI,KAAK,OAAb,EAAsB;AACpB;AACA,QAAIjD,MAAM,IAAIgD,QAAQ,CAAChD,MAAM,CAAC,CAAD,CAAP,CAAtB,EAAmC;AACjC2H,MAAAA,GAAG,GAAG3H,MAAM,CAAC,CAAD,CAAZ;;AAEA,UAAImD,UAAU,CAACnD,MAAM,CAAC,CAAD,CAAP,CAAd,EAA2B;AACzBwG,QAAAA,QAAQ,GAAGxG,MAAM,CAAC,CAAD,CAAjB;AACD;AACF,KAND,CAME;AANF,SAOK;AACD2H,QAAAA,GAAG,GAAGxG,cAAc,CAACsG,qBAAD,EAAwBzH,MAAxB,CAApB;AACD,OAXiB,CAWhB;;;AAGJiI,IAAAA,QAAQ,GAAGC,iBAAiB,CAAC,KAAKhB,KAAN,EAAaS,GAAb,CAA5B,CAdoB,CAc2B;;AAE/C,QAAIA,GAAG,CAACV,aAAR,EAAuB;AACrBA,MAAAA,aAAa,GAAGU,GAAG,CAACV,aAApB;AACD,KAlBmB,CAkBlB;;;AAGF,QAAI,KAAK5B,GAAL,CAAS,eAAT,CAAJ,EAA+B;AAAA,kBAKzB4C,QAAQ,CAACE,UAAT,CAAoBC,OAApB,IAA+B,EALN;AAAA,UAE3BC,IAF2B,SAE3BA,IAF2B;AAAA,UAG3BpF,KAH2B,SAG3BA,IAH2B;AAAA,UAI3BN,KAJ2B,SAI3BA,KAJ2B;;AAO7BnC,MAAAA,MAAM,CAACqH,IAAP,CAAYlD,IAAZ,CAAiB,CAAC,aAAD,EAAgB0D,IAAhB,EAAsBpF,KAAtB,EAA4BN,KAA5B,CAAjB;AACD;AACF,GA9BD,MA8BO,IAAIM,IAAI,KAAK,QAAb,EAAuB;AAC5BgF,IAAAA,QAAQ,GAAGK,oBAAoB,CAAC,KAAKpB,KAAN,EAAalH,MAAb,CAA/B;AACD;;AAED,MAAIgC,GAAG,GAAG,KAAKqD,GAAL,CAAS,UAAT,IAAuBQ,oBAAvB,GAA8CD,gBAAxD,CAzCC,CAyCyE;;AAE1E,MAAI,KAAKsB,KAAL,CAAWqB,OAAX,KAAuB,KAA3B,EAAkC;AAChCvG,IAAAA,GAAG,GAAG,KAAKqD,GAAL,CAAS,UAAT,IAAuBU,oBAAvB,GAA8CD,gBAApD;AACA9D,IAAAA,GAAG,GAAG,KAAKkF,KAAL,CAAWsB,OAAX,IAAsBxG,GAA5B;AACAA,IAAAA,GAAG,GAAGc,SAAS,CAACd,GAAD,EAAM,KAAKkF,KAAL,CAAWuB,WAAjB,CAAf;AACD,GA/CA,CA+CC;;;AAGFzB,EAAAA,SAAS,CAACzC,KAAV,CAAgB,IAAhB,EAAsB,CAACvC,GAAD,EAAMiG,QAAN,EAAgBzB,QAAhB,EAA0BS,aAA1B,EAAyC,IAAzC,CAAtB;AACD,CAtDD;AAuDA;AACA;AACA;AACA;AACA;;;AAGAS,OAAO,CAACI,SAAR,CAAkBvC,oBAAlB,GAAyC,YAAuB;AAAA;;AAAA,MAAbvF,MAAa,uEAAJ,EAAI;;AAC9D;AACA,MAAI,CAAC,KAAKqF,GAAL,CAAS,UAAT,CAAL,EAA2B;AACzB,UAAM,wBAAN;AACD;;AAED,MAAIqD,WAAW,GAAG,KAAKrD,GAAL,CAAS,aAAT,CAAlB;AACA,MAAIsD,QAAQ,GAAG,KAAKtD,GAAL,CAAS,UAAT,CAAf;AACArF,EAAAA,MAAM,GAAGmB,cAAc,CAACsG,qBAAD,EAAwBzH,MAAxB,CAAvB;AACA,MAAI4I,OAAO,GAAGF,WAAW,CAACG,IAAZ,CAAiB,UAAAC,IAAI;AAAA,WAAIA,IAAI,CAACC,SAAL,KAAmB/I,MAAM,CAACiD,IAA9B;AAAA,GAArB,CAAd,CAT8D,CASU;;AAExEjD,EAAAA,MAAM,CAACgJ,SAAP,GAAmBC,IAAI,CAACC,GAAL,EAAnB,CAX8D,CAW/B;;AAE/B,MAAI,CAACN,OAAL,EAAc;AACZ;AACA,SAAKtD,IAAL,CAAU;AACRrC,MAAAA,IAAI,EAAE,QADE;AAERjD,MAAAA,MAAM,EAANA;AAFQ,KAAV;AAIA,QAAImJ,eAAe,GAAGC,WAAW,CAAC,YAAM;AACtC,MAAA,KAAI,CAAC9D,IAAL,CAAU;AACRrC,QAAAA,IAAI,EAAE,QADE;AAERjD,QAAAA,MAAM,EAANA;AAFQ,OAAV;AAID,KALgC,EAK9B2I,QAAQ,GAAG,IALmB,CAAjC,CANY,CAWS;;AAErBD,IAAAA,WAAW,CAAC/D,IAAZ,CAAiB;AACfwE,MAAAA,eAAe,EAAfA,eADe;AAEfE,MAAAA,WAAW,EAAE,IAFE;AAGfN,MAAAA,SAAS,EAAE/I,MAAM,CAACiD,IAHH;AAIfjD,MAAAA,MAAM,EAANA;AAJe,KAAjB;AAMD;AACF,CAjCD;AAkCA;AACA;AACA;;;AAGA0H,OAAO,CAACI,SAAR,CAAkBwB,qBAAlB,GAA0C,YAAY;AACpD,MAAIZ,WAAW,GAAG,KAAKrD,GAAL,CAAS,aAAT,CAAlB;AACAqD,EAAAA,WAAW,CAACa,OAAZ,CAAoB,UAAUC,UAAV,EAAsB;AACxCA,IAAAA,UAAU,CAACH,WAAX,GAAyB,KAAzB;AACAI,IAAAA,aAAa,CAACD,UAAU,CAACL,eAAZ,CAAb;AACD,GAHD;AAID,CAND;AAOA;AACA;AACA;;;AAGAzB,OAAO,CAACI,SAAR,CAAkB4B,sBAAlB,GAA2C,YAAY;AAAA;;AACrD,MAAIhB,WAAW,GAAG,KAAKrD,GAAL,CAAS,aAAT,CAAlB;AACA,MAAIsD,QAAQ,GAAG,KAAKtD,GAAL,CAAS,UAAT,CAAf;AACAqD,EAAAA,WAAW,CAACa,OAAZ,CAAoB,UAAAC,UAAU,EAAI;AAChCA,IAAAA,UAAU,CAACH,WAAX,GAAyB,IAAzB,CADgC,CACD;;AAE/BG,IAAAA,UAAU,CAACxJ,MAAX,CAAkBgJ,SAAlB,GAA8BC,IAAI,CAACC,GAAL,EAA9B;;AACA,IAAA,MAAI,CAAC5D,IAAL,CAAU;AACRrC,MAAAA,IAAI,EAAE,QADE;AAERjD,MAAAA,MAAM,EAAEwJ,UAAU,CAACxJ;AAFX,KAAV;;AAIAwJ,IAAAA,UAAU,CAACL,eAAX,GAA6BC,WAAW,CAAC,YAAM;AAC7C,MAAA,MAAI,CAAC9D,IAAL,CAAU;AACRrC,QAAAA,IAAI,EAAE,QADE;AAERjD,QAAAA,MAAM,EAAEwJ,UAAU,CAACxJ;AAFX,OAAV;AAID,KALuC,EAKrC2I,QAAQ,GAAG,IAL0B,CAAxC;AAMD,GAdD;AAeD,CAlBD;AAmBA;AACA;AACA;AACA;AACA;;;AAGAjB,OAAO,CAACI,SAAR,CAAkBtC,iBAAlB,GAAsC,UAAUxF,MAAV,EAAkB;AAAA;;AACtDA,EAAAA,MAAM,GAAGmB,cAAc,CAACsG,qBAAD,EAAwBzH,MAAxB,CAAvB;AACA,MAAI0I,WAAW,GAAG,KAAKrD,GAAL,CAAS,aAAT,CAAlB;AACA,MAAIsE,cAAc,GAAG,EAArB;AACAjB,EAAAA,WAAW,CAACa,OAAZ,CAAoB,UAAAC,UAAU,EAAI;AAAA,QAE9BL,eAF8B,GAI5BK,UAJ4B,CAE9BL,eAF8B;AAAA,QAG9BJ,SAH8B,GAI5BS,UAJ4B,CAG9BT,SAH8B;;AAMhC,QAAIA,SAAS,KAAK/I,MAAM,CAACiD,IAAzB,EAA+B;AAC7BwG,MAAAA,aAAa,CAACN,eAAD,CAAb;AACD,KAFD,MAEO;AACLQ,MAAAA,cAAc,CAAChF,IAAf,CAAoB6E,UAApB;AACD;;AAED,IAAA,MAAI,CAACtE,GAAL,CAAS,aAAT,EAAwByE,cAAxB;AACD,GAbD;AAcD,CAlBD,C,CAkBG;;;AAGHjC,OAAO,CAACI,SAAR,CAAkB8B,uBAAlB,GAA4C,YAAY;AACtD,MAAIlB,WAAW,GAAG,KAAKrD,GAAL,CAAS,aAAT,CAAlB;AACAqD,EAAAA,WAAW,CAACa,OAAZ,CAAoB,UAAAC,UAAU,EAAI;AAChCC,IAAAA,aAAa,CAACD,UAAU,CAACL,eAAZ,CAAb;AACD,GAFD;AAGAT,EAAAA,WAAW,GAAG,EAAd;AACD,CAND;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASR,iBAAT,CAA2BhB,KAA3B,EAAkCS,GAAlC,EAAuC;AACrC,MAAIlB,IAAI,GAAG;AACToD,IAAAA,MAAM,EAAE3C,KAAK,CAAC2C,MADL;AAET1B,IAAAA,UAAU,EAAE;AACV;AACA2B,MAAAA,EAAE,EAAE5C,KAAK,CAAC6C,SAFA;AAGV;AACA9G,MAAAA,IAAI,EAAE,GAJI;AAKV+G,MAAAA,SAAS,EAAEf,IAAI,CAACC,GAAL,EALD;AAMVd,MAAAA,OAAO,EAAE;AACP;AACAC,QAAAA,IAAI,EAAEV,GAAG,CAACU,IAAJ,IAAYnB,KAAK,CAACmB,IAFjB;AAGP;AACA4B,QAAAA,MAAM,EAAE/C,KAAK,CAAC+C,MAJP;AAKP;AACAC,QAAAA,IAAI,EAAEhD,KAAK,CAACgD,IANL;AAOP;AACAjH,QAAAA,IAAI,EAAE0E,GAAG,CAAC1E,IARH;AASP;AACAN,QAAAA,KAAK,EAAEgF,GAAG,CAAChF,KAVJ;AAWP;AACAwH,QAAAA,GAAG,EAAExC,GAAG,CAACwC;AAZF;AANC;AAFH,GAAX,CADqC,CAwBlC;;AAEH,MAAIjD,KAAK,CAACqB,OAAN,KAAkB,KAAtB,EAA6B;AAC3B;AACA9B,IAAAA,IAAI,CAAC0B,UAAL,CAAgBiC,MAAhB,GAAyBlD,KAAK,CAACkD,MAA/B,CAF2B,CAEY;;AAEvC3D,IAAAA,IAAI,CAAC0B,UAAL,CAAgBkC,KAAhB,GAAwBnD,KAAK,CAACmD,KAA9B,CAJ2B,CAIU;;AAErC5D,IAAAA,IAAI,CAAC0B,UAAL,CAAgBmC,OAAhB,GAA0BpD,KAAK,CAACoD,OAAhC;AACA7D,IAAAA,IAAI,CAAC8D,KAAL,GAAarD,KAAK,CAACqD,KAAnB;AACA9D,IAAAA,IAAI,CAAC+D,UAAL,GAAkBtD,KAAK,CAACsD,UAAxB;AACD;;AAED,SAAO/D,IAAP;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAAS6B,oBAAT,CAA8BpB,KAA9B,EAAqCS,GAArC,EAA0C;AACxC,MAAIlB,IAAI,GAAG;AACToD,IAAAA,MAAM,EAAE3C,KAAK,CAAC2C,MADL;AAET1B,IAAAA,UAAU,EAAE;AACV;AACA2B,MAAAA,EAAE,EAAE5C,KAAK,CAACuD,QAFA;AAGV;AACAxH,MAAAA,IAAI,EAAE,GAJI;AAKV+G,MAAAA,SAAS,EAAEf,IAAI,CAACC,GAAL,EALD;AAMV;AACAF,MAAAA,SAAS,EAAErB,GAAG,CAACqB,SAPL;AAQVZ,MAAAA,OAAO,EAAE;AACPO,QAAAA,QAAQ,EAAEzB,KAAK,CAACyB,QADT;AAEP+B,QAAAA,MAAM,EAAE;AACN;AACArC,UAAAA,IAAI,EAAEnB,KAAK,CAACmB,IAFN;AAGN;AACA4B,UAAAA,MAAM,EAAE/C,KAAK,CAAC+C,MAJR;AAKN;AACAC,UAAAA,IAAI,EAAEhD,KAAK,CAACgD,IANN;AAON;AACAjH,UAAAA,IAAI,EAAE0E,GAAG,CAAC1E,IARJ;AASN;AACAN,UAAAA,KAAK,EAAEgF,GAAG,CAAChF,KAVL;AAWN;AACAwH,UAAAA,GAAG,EAAExC,GAAG,CAACwC;AAZH;AAFD;AARC;AAFH,GAAX,CADwC,CA6BrC;;AAEH,MAAIjD,KAAK,CAACqB,OAAN,KAAkB,KAAtB,EAA6B;AAC3B;AACA9B,IAAAA,IAAI,CAAC0B,UAAL,CAAgBiC,MAAhB,GAAyBlD,KAAK,CAACkD,MAA/B,CAF2B,CAEY;;AAEvC3D,IAAAA,IAAI,CAAC0B,UAAL,CAAgBkC,KAAhB,GAAwBnD,KAAK,CAACmD,KAA9B,CAJ2B,CAIU;;AAErC5D,IAAAA,IAAI,CAAC0B,UAAL,CAAgBmC,OAAhB,GAA0BpD,KAAK,CAACoD,OAAhC;AACA7D,IAAAA,IAAI,CAAC8D,KAAL,GAAarD,KAAK,CAACqD,KAAnB;AACA9D,IAAAA,IAAI,CAAC+D,UAAL,GAAkBtD,KAAK,CAACsD,UAAxB;AACD;;AAED,SAAO/D,IAAP;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASmB,cAAT,CAAwBV,KAAxB,EAA+BS,GAA/B,EAAoC;AAClC;AACAT,EAAAA,KAAK,CAACrH,WAAN,GAAoB8H,GAAG,CAAC9H,WAAxB,CAFkC,CAEG;;AAErCqH,EAAAA,KAAK,CAAC6C,SAAN,GAAkBpC,GAAG,CAACoC,SAAJ,IAAiB,EAAnC,CAJkC,CAIK;;AAEvC7C,EAAAA,KAAK,CAACuD,QAAN,GAAiB9C,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAWF,QAAzB,IAAqC,EAAtD,CANkC,CAMwB;;AAE1DvD,EAAAA,KAAK,CAACD,aAAN,GAAsBU,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAW1D,aAAzB,IAA0C,KAAhE,CARkC,CAQqC;;AAEvEC,EAAAA,KAAK,CAACqB,OAAN,GAAgBZ,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAWpC,OAAzB,IAAoCpB,cAApD,CAVkC,CAUkC;;AAEpE,MAAIQ,GAAG,CAACgD,MAAJ,IAAczH,SAAS,CAACyE,GAAG,CAACgD,MAAJ,CAAWC,QAAZ,CAA3B,EAAkD;AAChD1D,IAAAA,KAAK,CAAC0D,QAAN,GAAiBjD,GAAG,CAACgD,MAAJ,CAAWC,QAA5B;AACD,GAFD,MAEO;AACL1D,IAAAA,KAAK,CAAC0D,QAAN,GAAiB,KAAjB;AACD,GAhBiC,CAgBhC;;;AAGF1D,EAAAA,KAAK,CAACsB,OAAN,GAAgBb,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAWnC,OAAzB,IAAoC,EAApD,CAnBkC,CAmBsB;;AAExD,MAAIb,GAAG,CAACgD,MAAJ,IAAczH,SAAS,CAACyE,GAAG,CAACgD,MAAJ,CAAWE,WAAZ,CAA3B,EAAqD;AACnD3D,IAAAA,KAAK,CAAC2D,WAAN,GAAoBlD,GAAG,CAACgD,MAAJ,CAAWE,WAA/B;AACD,GAFD,MAEO;AACL3D,IAAAA,KAAK,CAAC2D,WAAN,GAAoB,KAApB;AACD,GAzBiC,CAyBhC;;;AAGF,MAAIlD,GAAG,CAACgD,MAAJ,IAAczH,SAAS,CAACyE,GAAG,CAACgD,MAAJ,CAAWG,eAAZ,CAA3B,EAAyD;AACvD5D,IAAAA,KAAK,CAAC4D,eAAN,GAAwBnD,GAAG,CAACgD,MAAJ,CAAWG,eAAnC;AACD,GAFD,MAEO;AACL5D,IAAAA,KAAK,CAAC4D,eAAN,GAAwB,KAAxB;AACD,GAhCiC,CAgChC;;;AAGF5D,EAAAA,KAAK,CAACuB,WAAN,GAAoBd,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAWlC,WAAzB,IAAwC,EAA5D,CAnCkC,CAmC8B;;AAEhE,MAAIvB,KAAK,CAACqB,OAAV,EAAmB;AACjBrB,IAAAA,KAAK,CAACuB,WAAN,CAAkBsC,CAAlB,GAAsB7D,KAAK,CAACqB,OAA5B;AACD,GAvCiC,CAuChC;;;AAGFrB,EAAAA,KAAK,CAACqD,KAAN,GAAc5C,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAWJ,KAAzB,IAAkCnD,YAAhD,CA1CkC,CA0C4B;;AAE9DF,EAAAA,KAAK,CAAC2C,MAAN,GAAelC,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAWd,MAAzB,IAAmCxC,aAAlD,CA5CkC,CA4C+B;;AAEjEH,EAAAA,KAAK,CAACsD,UAAN,GAAmB7C,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAWH,UAAzB,IAAuClD,iBAA1D,CA9CkC,CA8C2C;;AAE7EJ,EAAAA,KAAK,CAACgD,IAAN,GAAavC,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAWT,IAAzB,IAAiC3C,WAA9C,CAhDkC,CAgDyB;;AAE3DL,EAAAA,KAAK,CAACyB,QAAN,GAAiBhB,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAWhC,QAAzB,IAAqCnB,eAAtD,CAlDkC,CAkDqC;;AAEvEN,EAAAA,KAAK,CAAC+C,MAAN,GAAetC,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAWV,MAAzB,IAAmCnI,cAAc,CAAC,QAAD,CAAjD,IAA+D,EAA9E,CApDkC,CAoDgD;;AAElFoF,EAAAA,KAAK,CAACmD,KAAN,GAAcvJ,MAAM,GAAG,GAAH,GAAS,GAA7B;AACAoG,EAAAA,KAAK,CAACkD,MAAN,GAAezC,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAWP,MAAzB,IAAmC,EAAlD,CAvDkC,CAuDoB;;AAEtDlD,EAAAA,KAAK,CAACoD,OAAN,GAAgB3C,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAWL,OAAzB,IAAoC,EAApD,CAzDkC,CAyDsB;;AAExDpD,EAAAA,KAAK,CAACmB,IAAN,GAAaV,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAWtC,IAAzB,IAAiC7H,MAAM,CAACS,QAAP,CAAgB+J,QAAhB,GAA2BxK,MAAM,CAACS,QAAP,CAAgBgK,QAAzF,CA3DkC,CA2DiE;;AAEnG/D,EAAAA,KAAK,CAACgE,aAAN,GAAsBvD,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAWO,aAA/C;AACAhE,EAAAA,KAAK,CAACiE,aAAN,GAAsB,CAAC,EAAExD,GAAG,CAACgD,MAAJ,IAAchD,GAAG,CAACgD,MAAJ,CAAWO,aAA3B,CAAvB,CA9DkC,CA8DgC;;AAElEhE,EAAAA,KAAK,CAACwB,WAAN,GAAoB,EAApB;AACD;AAED;AACA;AACA;AACA;AACA;;;AACA,IAAI0C,MAAJ,EAAYC,gBAAZ;;AAEA,IAAI,OAAOrK,QAAQ,CAACoK,MAAhB,KAA2B,WAA/B,EAA4C;AAC1C;AACAA,EAAAA,MAAM,GAAG,QAAT;AACAC,EAAAA,gBAAgB,GAAG,kBAAnB;AACD,CAJD,MAIO,IAAI,OAAOrK,QAAQ,CAACsK,QAAhB,KAA6B,WAAjC,EAA8C;AACnDF,EAAAA,MAAM,GAAG,UAAT;AACAC,EAAAA,gBAAgB,GAAG,oBAAnB;AACD,CAHM,MAGA,IAAI,OAAOrK,QAAQ,CAACuK,YAAhB,KAAiC,WAArC,EAAkD;AACvDH,EAAAA,MAAM,GAAG,cAAT;AACAC,EAAAA,gBAAgB,GAAG,wBAAnB;AACD,CAHM,MAGA,IAAI,OAAOrK,QAAQ,CAACwK,2BAAhB,KAAgD,WAApD,EAAiE;AACtEJ,EAAAA,MAAM,GAAG,cAAT;AACAC,EAAAA,gBAAgB,GAAG,wBAAnB;AACD;;AAED,SAASI,yBAAT,CAAmCC,GAAnC,EAAwC;AACtC,MAAIC,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAY;AACvC,QAAIC,QAAQ,GAAGF,GAAG,CAACG,MAAJ,EAAf;AACAD,IAAAA,QAAQ,CAACrC,OAAT,CAAiB,UAAAxE,OAAO,EAAI;AAC1B,UAAI2D,WAAW,GAAG3D,OAAO,CAACM,GAAR,CAAY,aAAZ,CAAlB;;AAEA,UAAI,CAAChE,KAAK,CAACC,OAAN,CAAcoH,WAAd,CAAL,EAAiC;AAC/B;AACD;;AAED,UAAI1H,QAAQ,CAACoK,MAAD,CAAZ,EAAsB;AACpBrG,QAAAA,OAAO,CAACuE,qBAAR;AACD,OAFD,MAEO;AACLvE,QAAAA,OAAO,CAAC2E,sBAAR;AACD;AACF,KAZD;AAaD,GAfD;;AAiBA,MAAI,OAAO1I,QAAQ,CAAC8K,gBAAhB,KAAqC,WAArC,IAAoDV,MAAM,KAAKW,SAAnE,EAA8E;AAC5E;AACD,GApBqC,CAoBpC;;;AAGF/K,EAAAA,QAAQ,CAAC8K,gBAAT,CAA0BT,gBAA1B,EAA4CM,sBAA5C,EAAoE,KAApE;AACD;AAED;AACA;AACA;AACA;;;AACA,IAAIK,eAAe,GAAG,KAAtB;AACA,IAAIC,WAAW,GAAG,EAAlB;AACA,IAAIC,aAAa,GAAG,EAApB,C,CAAwB;;AAExB,IAAIC,sBAAsB,GAAG,CAAC,aAAD,EAAgB,WAAhB,EAA6B,QAA7B,CAA7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,SAAST,GAAT,GAAsB;AAAA,oCAANjM,IAAM;AAANA,IAAAA,IAAM;AAAA;;AACpB;AACAqE,EAAAA,WAAW,CAACG,GAAZ,CAAgB/D,IAAhB,CAAqBM,MAAM,CAACwL,eAAD,CAA3B,EAA8C,CAACvM,IAAD,CAA9C;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;;AAGAiM,GAAG,CAAC5G,MAAJ,GAAa,YAAmB;AAAA,qCAANrF,IAAM;AAANA,IAAAA,IAAM;AAAA;;AAC9B,MAAI2M,IAAI,GAAGjL,cAAc,CAACgL,sBAAD,EAAyB,GAAGlM,KAAH,CAASC,IAAT,CAAcT,IAAd,CAAzB,CAAzB;AACA,MAAII,WAAW,GAAGuM,IAAI,CAACvM,WAAvB,CAF8B,CAEM;;AAEpC,MAAIqM,aAAa,CAACrM,WAAD,CAAjB,EAAgC;AAC9B,WAAOqM,aAAa,CAACrM,WAAD,CAApB;AACD,GAN6B,CAM5B;;;AAGF,MAAIwM,WAAW,GAAGJ,WAAW,CAACpD,IAAZ,CAAiB,UAAA9D,OAAO,EAAI;AAC5C,WAAOA,OAAO,CAACM,GAAR,CAAY,WAAZ,MAA6B+G,IAAI,CAACrC,SAAzC;AACD,GAFiB,CAAlB;;AAIA,MAAIsC,WAAJ,EAAiB;AACf,UAAM,wCAAN;AACD;;AAED,MAAItH,OAAO,GAAG,IAAI2C,OAAJ,CAAY0E,IAAZ,CAAd;AACAF,EAAAA,aAAa,CAACrM,WAAD,CAAb,GAA6BkF,OAA7B;AACAkH,EAAAA,WAAW,CAACtH,IAAZ,CAAiBI,OAAjB;AACA,SAAOA,OAAP;AACD,CArBD,C,CAqBG;;;AAGH2G,GAAG,CAACY,MAAJ,GAAa,UAAUzM,WAAV,EAAuB;AAClC,MAAID,MAAM,GAAGqM,WAAW,CAACrM,MAAzB;;AAEA,OAAK,IAAI+B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG/B,MAApB,EAA4B+B,CAAC,EAA7B,EAAiC;AAC/B,QAAIsK,WAAW,CAACtK,CAAD,CAAX,CAAe9B,WAAf,MAAgCA,WAApC,EAAiD;AAC/CoM,MAAAA,WAAW,CAACM,MAAZ,CAAmB5K,CAAnB,EAAsB,CAAtB;AACAuK,MAAAA,aAAa,CAACrM,WAAD,CAAb,GAA6B,IAA7B;AACA;AACD;AACF;AACF,CAVD,C,CAUG;;;AAGH6L,GAAG,CAACc,IAAJ,GAAW,YAAY;AACrB;AACA,MAAIC,MAAM,GAAGjM,MAAM,CAACwL,eAAD,CAAnB;AACA,MAAIU,WAAW,GAAGD,MAAM,IAAIA,MAAM,CAACE,CAAnC,CAHqB,CAGiB;;AAEtC,MAAIF,MAAM,IAAI,OAAOA,MAAM,CAACZ,MAAd,KAAyB,UAAvC,EAAmD;AACjDH,IAAAA,GAAG,GAAGlL,MAAM,CAACwL,eAAD,CAAZ;AACD,GAPoB,CAOnB;;;AAGF,MAAI3K,KAAK,CAACC,OAAN,CAAcoL,WAAd,CAAJ,EAAgC;AAC9B5I,IAAAA,WAAW,CAACG,GAAZ,CAAgBM,KAAhB,CAAsBmH,GAAtB,EAA2B,CAACgB,WAAD,CAA3B;AACAD,IAAAA,MAAM,CAACE,CAAP,GAAW,EAAX;AACD;;AAEDjB,EAAAA,GAAG,CAACkB,SAAJ,GAAgBH,MAAM,IAAIA,MAAM,CAACI,CAAjB,IAAsB,IAAI,IAAI5D,IAAJ,EAA1C;AACAyC,EAAAA,GAAG,CAACoB,MAAJ,GAAa,IAAb;AACAtM,EAAAA,MAAM,CAACwL,eAAD,CAAN,GAA0BN,GAA1B;AACD,CAlBD;AAmBA;AACA;AACA;AACA;AACA;AACA;;;AAGAA,GAAG,CAAC1G,SAAJ,GAAgB,UAAUnF,WAAV,EAAuB;AACrC,SAAOqM,aAAa,CAACrM,WAAD,CAApB;AACD,CAFD;AAGA;AACA;AACA;AACA;AACA;;;AAGA6L,GAAG,CAACG,MAAJ,GAAa,YAAY;AACvB,SAAOI,WAAW,CAAChM,KAAZ,EAAP;AACD,CAFD;;AAIAyL,GAAG,CAACc,IAAJ;AACAf,yBAAyB,CAACC,GAAD,CAAzB;AACA,IAAIqB,GAAG,GAAGrB,GAAV;eAEeqB,G","sourcesContent":["/**\n * @file 指令类\n * @author wangbing11(wangbing11@baidu.com)\n * // command命令的调用方法：ubc(command, [...fields], [fieldsObject])\n */\n// command 标识符的正则解析 [trackerName.][pluginName:]methodName\nconst commandRegex = /^(?:(\\w+)\\.)?(?:(\\w+)\\.)?(\\w+)$/;\n/**\n * 初始化一个命令\n *\n * @class Command\n * @param {Array} args 用户输入的或者内部生成的不正规的指令参数\n *\n */\n\n/* eslint-disable */\n\nfunction Command(args) {\n  /* eslint-enable */\n  let r = commandRegex.exec(args[0]);\n\n  if (r != null && r.length === 4) {\n    // Tracker名字默认为t0\n    this.trackerName = r[1] || 't0'; // pluginName\n\n    this.pluginName = r[2] || ''; // methodName\n\n    this.methodName = r[3];\n    this.fields = [].slice.call(args, 1);\n    this.isCreateCommand = 'init' === this.methodName;\n    this.isConfigCommand = 'config' === this.methodName;\n    this.isEventCommand = 'event' === this.methodName || 'pv' === this.methodName;\n    this.isTimingCommand = 'timing' === this.methodName; // 必须要有一个方法名\n\n    if (!this.methodName) {\n      throw 'UBC SDK methodName can not be empty!';\n    } // 如果要创建一个新的跟踪器，必须要要有一个ID，ID为数字或者数字组成的字符\n\n\n    if (this.isCreateCommand) {\n      if (!this.fields[0]) {\n        throw 'UBC SDK serverId can not be empty!';\n      }\n    }\n  } else {\n    throw 'UBC SDK error inputs';\n  }\n}\n\n/**\n * @file 工具方法\n * @author wangbing11(wangbing11@baidu.com)\n */\nconst ua = window.navigator.userAgent;\nconst IS_LITE_BOX = / (lite|info) baiduboxapp\\//i.test(ua);\nconst IS_KANDUODUO_BOX = / mission baiduboxapp\\//i.test(ua); // IS_BOX 标识是否手百基础版内，不能是Lite、不是看多多\n\nconst IS_BOX = / baiduboxapp\\//i.test(ua) && !IS_LITE_BOX && !IS_KANDUODUO_BOX; // 判断当前页面的网络协议是否为 https\n\nconst isHTTPS = function () {\n  return 'https:' === document.location.protocol;\n}; // 这个函数用于将其他函数的输入转换成一个对象，这个规则适用于UBC所有对外的接口API\n// transformInput(['a', 'b', 'c'], [1, 2, 3]);\n// ==> {a: 1, b: 2, c: 3}\n// transformInput(['a', 'b', 'c'], [1, 2, {c: 3, d: 4}]);\n// ==> {a: 1, b: 2, c: { c: 3, d: 4}}\n\nconst transformInput = function (paramNames, args) {\n  if (!Array.isArray(paramNames) || !Array.isArray(args)) {\n    return {};\n  }\n\n  let c = {};\n  let d = Math.min(paramNames.length + 1, args.length);\n\n  for (let i = 0; i < d; i++) {\n    if ('object' === typeof args[i]) {\n      c[paramNames[i]] = {};\n\n      for (let g in args[i]) {\n        if (args[i].hasOwnProperty(g)) {\n          c[paramNames[i]][g] = args[i][g];\n        }\n      }\n    } else {\n      i < paramNames.length && (c[paramNames[i]] = args[i]);\n    }\n  }\n\n  return c;\n};\n/**\n * 获取url中制定参数的值\n *\n * @param  {string} name 参数名\n * @param  {string} url url地址\n * @return {Object}      值\n */\n\nfunction getQueryParams(name, url = window.location.href) {\n  let reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');\n\n  if (url.split('?')[1]) {\n    let r = url.split('?')[1].match(reg);\n    return r != null ? decodeURIComponent(r[2]) : null;\n  } else {\n    return null;\n  }\n}\n/**\n * 字符串化query\n *\n * [注]：\n * 默认：如果`value`是数组，其`toString`会自动转为逗号分隔的字符串\n * 这里：如果 是 Array 和 Object 参数 都进行 JSON.stringify + encodeURIComponent 了\n *\n * @param {Object} query 查询条件\n * @return {string}\n */\n\nfunction stringify(query = {}) {\n  if (!query) {\n    return '';\n  }\n\n  let search = '';\n\n  for (let key in query) {\n    if (query.hasOwnProperty(key)) {\n      let value = query[key];\n\n      if (value == null) {\n        value = '';\n      } else if (typeof value === 'object') {\n        value = JSON.stringify(value);\n      }\n\n      search += '&' + encodeURIComponent(key) + '=' + encodeURIComponent(value);\n    }\n  }\n\n  return search.slice(1);\n}\n/**\n * 在url上加指定参数\n *\n * @param  {string} url  url\n * @param {Object} query 参数对象\n * @example\n * {\n *    a: 1\n * }\n * @return {string}    添加参数后的url\n */\n\nfunction renderUrl(url = '', query = {}) {\n  return url + (~url.indexOf('?') ? '&' : '?') + stringify(query);\n}\n/**\n * isObject\n *\n * @param {*} value value\n * @return {boolean} 如果是对象则返回 true, 否则 false\n */\n\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  let type = typeof value;\n  return type === 'function' || !!value && type === 'object';\n}\n/**\n * isBoolean\n *\n * @param {*} value value\n * @return {boolean} 如果是布尔类型则返回 true, 否则 false\n */\n\nfunction isBoolean(value) {\n  return value === true || value === false;\n}\n/**\n * isFunction\n *\n * @param {*} value value\n * @return {boolean}\n */\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\nfunction loadScript(src) {\n  if (src) {\n    let script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.async = true;\n    script.src = src;\n    let lastScr = document.getElementsByTagName('script')[0];\n    lastScr.parentNode.insertBefore(script, lastScr);\n  }\n}\nfunction noop() {}\n\n/**\n * @file MethodQueue 任务管理队列\n * @author wangbing11(wangbing11@baidu.com)\n */\nlet MethodQueue = {\n  cmdQueue: []\n}; // 初始化 cmdQueue 为空队列\n\nMethodQueue.init = function () {\n  MethodQueue.cmdQueue = [];\n}; // 执行队列中的所有命令\n\n\nMethodQueue.run = function (inputsList) {\n  let cmds = inputsList.map(function (inputs) {\n    return MethodQueue.toCommands.apply(MethodQueue, [inputs]);\n  });\n  let tmpCmds = MethodQueue.cmdQueue.concat(cmds); // 每次将 MethodQueue.cmdQueue 合并到 tmpCmds 中后，就清空MethodQueue.cmdQueue。\n\n  MethodQueue.cmdQueue = [];\n\n  while (tmpCmds.length > 0) {\n    if (MethodQueue.runCommand.apply(this, [tmpCmds[0]])) {\n      // 如果没有执行，则再次存起来\n      MethodQueue.cmdQueue.push(tmpCmds[0]);\n    }\n\n    tmpCmds.shift();\n  }\n};\n/**\n *  根据参数进行处理，转换成规范的指令，\n *\n *  @param {Array} inputs 用户输入的指令参数\n *  @return {Object} 返回一个规范的指令 Command 实例\n *\n */\n\n\nMethodQueue.toCommands = function (inputs) {\n  let cmd = new Command(inputs);\n  return cmd;\n}; // 执行单个命令\n\n\nMethodQueue.runCommand = function (cmd) {\n  // 如果是创建 Tracker 的命令\n  if (cmd.isCreateCommand) {\n    // 创建一个跟踪器\n    this.create(cmd.trackerName, ...cmd.fields);\n  } // 如果是配置 Tracker 的命令\n  else if (cmd.isConfigCommand) {\n      let tracker = this.getByName(cmd.trackerName);\n      let configs = cmd.fields[0];\n\n      for (let i in configs) {\n        if (configs.hasOwnProperty(i)) {\n          if (isObject(configs[i])) {\n            tracker.set(i, Object.assign({}, tracker.get(i), configs[i]));\n          } else {\n            tracker.set(i, configs[i]);\n          }\n        }\n      }\n    } // 如果是事件上报的命令\n    else if (cmd.isEventCommand) {\n        let tracker = this.getByName(cmd.trackerName);\n        tracker.send.call(tracker, {\n          type: 'event',\n          fields: cmd.fields\n        });\n      } // 如果是时长上报的命令\n      else if (cmd.isTimingCommand) {\n          let tracker = this.getByName(cmd.trackerName);\n          let type = cmd.fields[0];\n          let fields = [].slice.call(cmd.fields, 1);\n\n          if (type === 'start') {\n            tracker.regestTimingReportor(fields);\n          } else if (type === 'end') {\n            tracker.endTimingReportor(fields);\n          }\n        }\n};\n\nMethodQueue.init();\n\n/**\n * @file config SDK 全局配置文件\n * @author wangbing11(wangbing11@baidu.com)\n */\n\nconst serverUrls = {\n  http: 'http://m.baidu.com/tcbox?action=pblog',\n  https: 'https://mbd.baidu.com/tcbox?action=pblog'\n}; // v1线上的请求发送地址\n\nconst pblogUrlProtocol = serverUrls[isHTTPS() ? 'https' : 'http']; // v1线下校验的请求发送地址\n\nconst testPblogUrlProtocol = 'http://bjyz-mco-searchbox201609-m12xi3-044.bjyz.baidu.com:8080/tcbox?action=pblog'; // v2线上请求的发送地址\n\nconst ztboxUrlProtocol = 'https://mbd.baidu.com/ztbox?action=zpblog'; // v2线下请求的发送地址\n\nconst testZtboxUrlProtocol = 'http://bjyz-mco-searchbox201609-m12xi3-044.bjyz.baidu.com:8080/ztbox?action=zpblog'; // export const testZtboxUrlProtocol = 'http://cp01-dqx.epc.baidu.com:8062/ztbox?action=zpblog';\n// 百度统计的SDK地址, 百度统计不支持 http, 如果设置http会自动重定向到https\n\nconst baiduTongJiSDKUrl = 'https://hm.baidu.com/hm.js';\n\n/**\n * @file send 方法\n * @author wangbing11(wangbing11@baidu.com)\n */\n\nconst createImg = function (src) {\n  let img = document.createElement('img');\n  img.width = 1;\n  img.height = 1;\n  img.src = src;\n  return img;\n}; // 回调函数等待时间\n\n\nconst callbackWaitingTime = 100;\n/**\n * 使用图片来发请求\n *\n * @param {string} url 上报服务地址\n * @param {Object} param 上报的数据\n * @param {Function} callback 回调函数\n * @param {Tracker} tracker 跟踪器实例\n */\n\nfunction imgPing(url, param, callback, tracker) {\n  // 生成URL\n  url = renderUrl(url, {\n    data: param\n  });\n  let img = createImg(url);\n  let isCallbacked = false; // 等待 100 ms， 100ms后如果回调函数还没有执行，就立即执行回调\n\n  setTimeout(function () {\n    if (callback && !isCallbacked) {\n      callback(tracker);\n      isCallbacked = true;\n    }\n  }, callbackWaitingTime);\n\n  img.onload = img.onerror = function () {\n    img = null; // 上报成功后，如果回调函数还没有执行，就执行回调函数\n\n    if (callback && !isCallbacked) {\n      callback(tracker);\n      isCallbacked = true;\n    }\n  };\n}\n/**\n * 使用Navigator.sendBeacon来发请求\n *\n * @param {string} url 上报服务地址\n * @param {Object} param 上报的数据\n * @param {Function} callback 回调函数\n * @param {Tracker} tracker 跟踪器实例\n */\n\n\nfunction beaconSend(url, param, callback, tracker) {\n  // 生成URL\n  url = renderUrl(url, {\n    data: param\n  });\n  window.navigator.sendBeacon(url);\n  callback(tracker);\n}\n\nfunction smartSend(url, param, callback = noop, useSendBeacon = 0, tracker) {\n  // 与数据RD沟通，待数据组升级后可启用-在好看和全民端sendBeacon无效\n  // useSendBeacon为0，使用全局配置，useSendBeacon为1启用SendBeacon，useSendBeacon为2关闭SendBeacon\n  if (typeof window.navigator.sendBeacon === 'function' && (tracker.model.useSendBeacon && useSendBeacon === 0 || useSendBeacon === 1)) {\n    return beaconSend(url, param, callback, tracker);\n  }\n\n  return imgPing(url, param, callback, tracker);\n}\n\n/**\n * @file Tracker 跟踪类，目前是单实例，以后可能会是多实例\n * @author wangbing11(wangbing11@baidu.com)\n */\n\nconst defaultVersion = '1.0'; // 默认的产品线-手百\n\nconst defaultAppid = '1'; // 默认的服务类型-web 端\n\nconst defaultCateid = '99'; // 默认的触发类型-默认\n\nconst defaultActiontype = '0'; // 默认的业务来源-运营活动\n\nconst defaultFrom = 'act'; // 默认的时长统计请求发送间隔\n\nconst DefaultDuration = 3; // event 输入的数组格式\n\nconst eventArgsInputPattern = ['type', 'value', 'ext'];\n/**\n * 跟踪器类\n *\n * @class 跟踪器类\n * @param {Objec} opt 跟踪器的配置\n */\n\n/* eslint-disable */\n\nfunction Tracker(opt) {\n  /* eslint-enable */\n  // 这里这样处理，tracker.model 仍然会暴露出来。\n  this.model = {}; // 设计基本配置\n\n  setBasicConfig(this.model, opt); // 如果设置了百度统计，则需要加载百度统计代码\n\n  if (this.get('isBaiduTongJi')) {\n    // 在全局上声明百度统计的临时接口\n    window._hmt = window._hmt || [];\n    let src = baiduTongJiSDKUrl + '?' + this.get('baiduTongJiId');\n    loadScript(src);\n  } // 如果设置默认上报页面PV统计\n\n\n  if (this.get('autoPvTrack')) {\n    // 进行页面PV上报\n    this.send({\n      type: 'event',\n      fields: ['pageAutoPv']\n    });\n  } // 如果设置默认上报页面时长统计\n\n\n  if (this.get('autoTimingTrack')) {\n    // 注册页面时长统计\n    this.regestTimingReportor(['pageAutoTiming']);\n  }\n}\n\nTracker.prototype.set = function (fieldName, fieldValue) {\n  this.model[fieldName] = fieldValue;\n};\n\nTracker.prototype.get = function (fieldName) {\n  return this.model[fieldName];\n};\n/**\n * 跟踪器发送数据的方法。\n *\n * @param {Object} opt 输入的参数\n * @param {string} opt.type event | timing\n * @param {string} opt.fields 去掉第一个参数后剩余的传入的参数组成的数组\n *\n */\n\n\nTracker.prototype.send = function ({\n  type,\n  fields\n}) {\n  // 生成要发送的数据\n  let callback;\n  let sendData;\n  let opt;\n  let useSendBeacon = 0;\n\n  if (type === 'event') {\n    // 如果传入参数为 ['event', {}, function() {}] 的形式\n    if (fields && isObject(fields[0])) {\n      opt = fields[0];\n\n      if (isFunction(fields[1])) {\n        callback = fields[1];\n      }\n    } // 如果传入参数为 ['event', 'type']\n    else {\n        opt = transformInput(eventArgsInputPattern, fields);\n      } // 发送的数据\n\n\n    sendData = generateEventData(this.model, opt); // useSendBeacon\n\n    if (opt.useSendBeacon) {\n      useSendBeacon = opt.useSendBeacon;\n    } // 如果集成了百度统计, https://tongji.baidu.com/web/help/article?id=236&type=0\n\n\n    if (this.get('isBaiduTongJi')) {\n      let {\n        page,\n        type,\n        value\n      } = sendData.actiondata.content || {};\n\n      window._hmt.push(['_trackEvent', page, type, value]);\n    }\n  } else if (type === 'timing') {\n    sendData = generateDurationData(this.model, fields);\n  }\n\n  let url = this.get('testMode') ? testPblogUrlProtocol : pblogUrlProtocol; // v2需要添加顶级参数【appname】【from】【cfrom】【smfw】\n\n  if (this.model.version === '2.0') {\n    url = this.get('testMode') ? testZtboxUrlProtocol : ztboxUrlProtocol;\n    url = this.model.testUrl || url;\n    url = renderUrl(url, this.model.queryParams);\n  } // 发送请求\n\n\n  smartSend.apply(this, [url, sendData, callback, useSendBeacon, this]);\n};\n/**\n * 注册一个时长上报器\n *\n * @param {Array} fields 去掉一个后剩余的传入的参数\n */\n\n\nTracker.prototype.regestTimingReportor = function (fields = []) {\n  // 如果没有 timing ID 就跑出异常\n  if (!this.get('timingId')) {\n    throw 'timing ID is required!';\n  }\n\n  let timingTasks = this.get('timingTasks');\n  let duration = this.get('duration');\n  fields = transformInput(eventArgsInputPattern, fields);\n  let isExist = timingTasks.find(task => task.eventName === fields.type); // 注册时长点时，加入starttime\n\n  fields.starttime = Date.now(); // 如果不存在就先注册\n\n  if (!isExist) {\n    // // 发送第一次时长上报信息\n    this.send({\n      type: 'timing',\n      fields\n    });\n    let timingIntevalId = setInterval(() => {\n      this.send({\n        type: 'timing',\n        fields\n      });\n    }, duration * 1000); // 是市场\n\n    timingTasks.push({\n      timingIntevalId,\n      isReporting: true,\n      eventName: fields.type,\n      fields\n    });\n  }\n};\n/**\n * 终止所有时长上报器\n */\n\n\nTracker.prototype.stopAllTimingReportor = function () {\n  let timingTasks = this.get('timingTasks');\n  timingTasks.forEach(function (timingTask) {\n    timingTask.isReporting = false;\n    clearInterval(timingTask.timingIntevalId);\n  });\n};\n/**\n * 重启所有时长上报器\n */\n\n\nTracker.prototype.startAllTimingReportor = function () {\n  let timingTasks = this.get('timingTasks');\n  let duration = this.get('duration');\n  timingTasks.forEach(timingTask => {\n    timingTask.isReporting = true; // 重启时更新starttime\n\n    timingTask.fields.starttime = Date.now();\n    this.send({\n      type: 'timing',\n      fields: timingTask.fields\n    });\n    timingTask.timingIntevalId = setInterval(() => {\n      this.send({\n        type: 'timing',\n        fields: timingTask.fields\n      });\n    }, duration * 1000);\n  });\n};\n/**\n * 结束一个时长上报器\n *\n * @param {Array} fields 去掉一个后剩余的传入的参数\n */\n\n\nTracker.prototype.endTimingReportor = function (fields) {\n  fields = transformInput(eventArgsInputPattern, fields);\n  let timingTasks = this.get('timingTasks');\n  let newTimingTasks = [];\n  timingTasks.forEach(timingTask => {\n    let {\n      timingIntevalId,\n      eventName\n    } = timingTask;\n\n    if (eventName === fields.type) {\n      clearInterval(timingIntevalId);\n    } else {\n      newTimingTasks.push(timingTask);\n    }\n\n    this.set('timingTasks', newTimingTasks);\n  });\n}; // 删除所有时长上报器\n\n\nTracker.prototype.removeAllTimingReportor = function () {\n  let timingTasks = this.get('timingTasks');\n  timingTasks.forEach(timingTask => {\n    clearInterval(timingTask.timingIntevalId);\n  });\n  timingTasks = [];\n};\n/**\n * 点击数据的上报参数生成器\n *\n * @param {Object} model tracker.model 存放 tracker 的公共信息\n * @param {Object} opt 事件上报传入的自定义参数\n * @param {string} opt.type 事件名称\n * @param {string} opt.value 事件场景\n * @param {Object} opt.ext 事件扩展字段\n * @return {Object} 要上报的事件数据对象\n */\n\n\nfunction generateEventData(model, opt) {\n  let data = {\n    cateid: model.cateid,\n    actiondata: {\n      // 项目事件唯一标识，server_id\n      id: model.trackerId,\n      // 非流类型\n      type: '0',\n      timestamp: Date.now(),\n      content: {\n        // 页面标识, page 字段，可以被 opt 覆盖\n        page: opt.page || model.page,\n        // 资源来源\n        source: model.source,\n        // 业务来源\n        from: model.from,\n        // 外部传入-事件名称\n        type: opt.type,\n        // 外部传入-场景信息\n        value: opt.value,\n        // 外部传入-扩展字段\n        ext: opt.ext\n      }\n    }\n  }; // v1 有，v2没有的参数\n\n  if (model.version === '1.0') {\n    // ab分组信息\n    data.actiondata.abtest = model.abtest; // 是否手百端内\n\n    data.actiondata.inBox = model.inBox; // 网络状态\n\n    data.actiondata.network = model.network;\n    data.appid = model.appid;\n    data.actiontype = model.actiontype;\n  }\n\n  return data;\n}\n/**\n * 时长数据的上报参数生成器\n *\n * @param {Object} model tracker.model 存放 tracker 的公共信息\n * @param {Object} opt 时长上报传入的自定义参数\n * @param {string} opt.type 事件名称\n * @param {string} opt.value 事件场景\n * @param {string} opt.ext 额外参数\n * @param {string} opt.starttime 时长上报开始时间\n * @return {Object} 要上报的时长数据对象\n */\n\n\nfunction generateDurationData(model, opt) {\n  let data = {\n    cateid: model.cateid,\n    actiondata: {\n      // 项目时长唯一标识，server_id\n      id: model.timingId,\n      // 流类型\n      type: '1',\n      timestamp: Date.now(),\n      // 心跳点开始时间\n      starttime: opt.starttime,\n      content: {\n        duration: model.duration,\n        option: {\n          // 页面标识\n          page: model.page,\n          // 资源来源\n          source: model.source,\n          // 业务来源\n          from: model.from,\n          // 外部传入-事件名称\n          type: opt.type,\n          // 外部传入-场景信息\n          value: opt.value,\n          // 外部传入-扩展字段\n          ext: opt.ext\n        }\n      }\n    }\n  }; // v1 有，v2没有的参数\n\n  if (model.version === '1.0') {\n    // ab分组信息\n    data.actiondata.abtest = model.abtest; // 是否手百端内\n\n    data.actiondata.inBox = model.inBox; // 网络状态\n\n    data.actiondata.network = model.network;\n    data.appid = model.appid;\n    data.actiontype = model.actiontype;\n  }\n\n  return data;\n}\n/**\n * 初始化配置 Tracker\n *\n * @param {Object} model tracker.model 存放 tracker的公共信息\n * @param {Object} opt 初始化跟踪器的基本参数\n * @param {string} opt.trackerName 跟踪器的名称\n * @param {string} opt.trackerId 跟踪器的ID\n * @param {string} opt.timingId 跟踪器的名称\n */\n\n\nfunction setBasicConfig(model, opt) {\n  // 跟踪器名称\n  model.trackerName = opt.trackerName; // 跟踪器ID\n\n  model.trackerId = opt.trackerId || ''; // 跟踪器时长ID\n\n  model.timingId = opt.config && opt.config.timingId || ''; // 是否可以使用 sendBeanAPI\n\n  model.useSendBeacon = opt.config && opt.config.useSendBeacon || false; // 默认的sdk版本-v2\n\n  model.version = opt.config && opt.config.version || defaultVersion; // 是否是测试模式\n\n  if (opt.config && isBoolean(opt.config.testMode)) {\n    model.testMode = opt.config.testMode;\n  } else {\n    model.testMode = false;\n  } // 测试发送地址-v2\n\n\n  model.testUrl = opt.config && opt.config.testUrl || ''; // 是否默认上报PV\n\n  if (opt.config && isBoolean(opt.config.autoPvTrack)) {\n    model.autoPvTrack = opt.config.autoPvTrack;\n  } else {\n    model.autoPvTrack = false;\n  } // 是否默认上报页面时长\n\n\n  if (opt.config && isBoolean(opt.config.autoTimingTrack)) {\n    model.autoTimingTrack = opt.config.autoTimingTrack;\n  } else {\n    model.autoTimingTrack = false;\n  } // 默认的产品线名-v2\n\n\n  model.queryParams = opt.config && opt.config.queryParams || {}; // 如果 version = 2.0，则增加参数 v\n\n  if (model.version) {\n    model.queryParams.v = model.version;\n  } // 默认的产品线ID-手百\n\n\n  model.appid = opt.config && opt.config.appid || defaultAppid; // 默认的服务类型-web 端\n\n  model.cateid = opt.config && opt.config.cateid || defaultCateid; // 默认的触发类型-默认\n\n  model.actiontype = opt.config && opt.config.actiontype || defaultActiontype; // 默认的业务来源-运营活动\n\n  model.from = opt.config && opt.config.from || defaultFrom; // 默认的时长统计请求发送间隔\n\n  model.duration = opt.config && opt.config.duration || DefaultDuration; // 默认的渠道信息\n\n  model.source = opt.config && opt.config.source || getQueryParams('idfrom') || ''; // 是否手百端内,后续扩展到多端可能会对该字段含义进行变更，目前任然标识是否手百端内。\n\n  model.inBox = IS_BOX ? '1' : '0';\n  model.abtest = opt.config && opt.config.abtest || ''; // 网络信息\n\n  model.network = opt.config && opt.config.network || ''; // 页面标示，默认 window.location.hostname + window.location.pathname\n\n  model.page = opt.config && opt.config.page || window.location.hostname + window.location.pathname; // 是否集成了百度统计\n\n  model.baiduTongJiId = opt.config && opt.config.baiduTongJiId;\n  model.isBaiduTongJi = !!(opt.config && opt.config.baiduTongJiId); // 时长任务管理器\n\n  model.timingTasks = [];\n}\n\n/**\n * @file send 方法\n * @author wangbing11(wangbing11@baidu.com)\n */\n// Set the name of the hidden property and the change event for visibility\nlet hidden, visibilityChange;\n\nif (typeof document.hidden !== 'undefined') {\n  // Opera 12.10 and Firefox 18 and later support\n  hidden = 'hidden';\n  visibilityChange = 'visibilitychange';\n} else if (typeof document.msHidden !== 'undefined') {\n  hidden = 'msHidden';\n  visibilityChange = 'msvisibilitychange';\n} else if (typeof document.webkitHidden !== 'undefined') {\n  hidden = 'webkitHidden';\n  visibilityChange = 'webkitvisibilitychange';\n} else if (typeof document.baiduboxappvisibilitychange !== 'undefined') {\n  hidden = 'webkitHidden';\n  visibilityChange = 'webkitvisibilitychange';\n}\n\nfunction regestPageVisibilityEvent(UBC) {\n  let handleVisibilityChange = function () {\n    let trackers = UBC.getAll();\n    trackers.forEach(tracker => {\n      let timingTasks = tracker.get('timingTasks');\n\n      if (!Array.isArray(timingTasks)) {\n        return;\n      }\n\n      if (document[hidden]) {\n        tracker.stopAllTimingReportor();\n      } else {\n        tracker.startAllTimingReportor();\n      }\n    });\n  };\n\n  if (typeof document.addEventListener === 'undefined' || hidden === undefined) {\n    return;\n  } // Handle page visibility change\n\n\n  document.addEventListener(visibilityChange, handleVisibilityChange, false);\n}\n\n/**\n * @file 主文件\n * @author wangbing11(wangbing11@baidu.com)\n */\nlet UBCReportObject = 'ubc';\nlet UBCtrackers = [];\nlet UBCtrackerMap = {}; //\n\nlet trackerCreateMapFields = ['trackerName', 'trackerId', 'config'];\n/**\n * ubc 上报主类, 暴露给外部的接口\n *\n * @param {...any}  args 用户输入的 ubc 命令。如 ubc('event', 'loginBtnClick', 'head')\n * @class\n *\n */\n\n/* eslint-disable */\n\nfunction UBC(...args) {\n  /* eslint-enable */\n  MethodQueue.run.call(window[UBCReportObject], [args]);\n}\n/**\n * 创建一个跟踪器\n *\n * @param  {...any} args [trackerName, trackerId, config], config可以为空\n * @return {Tracker} 返回一个跟踪器\n */\n\n\nUBC.create = function (...args) {\n  let opts = transformInput(trackerCreateMapFields, [].slice.call(args));\n  let trackerName = opts.trackerName; // 防止重复创建\n\n  if (UBCtrackerMap[trackerName]) {\n    return UBCtrackerMap[trackerName];\n  } // 如果跟踪器的ID相同，就抛出异常\n\n\n  let sameTracker = UBCtrackers.find(tracker => {\n    return tracker.get('trackerId') === opts.trackerId;\n  });\n\n  if (sameTracker) {\n    throw 'multi tracker serverId can not be same';\n  }\n\n  let tracker = new Tracker(opts);\n  UBCtrackerMap[trackerName] = tracker;\n  UBCtrackers.push(tracker);\n  return tracker;\n}; // 删除一个跟踪器\n\n\nUBC.remove = function (trackerName) {\n  let length = UBCtrackers.length;\n\n  for (let i = 0; i < length; i++) {\n    if (UBCtrackers[i][trackerName] === trackerName) {\n      UBCtrackers.splice(i, 1);\n      UBCtrackerMap[trackerName] = null;\n      break;\n    }\n  }\n}; // 主入口，如果是通过 SDK 接入的，要对 SDK 下载完毕之前就注入的命令进行处理\n\n\nUBC.main = function () {\n  // 页面初始化时，push到 ubc 队列里面的命令\n  let tmpUBC = window[UBCReportObject];\n  let tmpUBCQueue = tmpUBC && tmpUBC.q; // 如果window.ubc为UBC，则直接使用window.ubc\n\n  if (tmpUBC && typeof tmpUBC.getAll === 'function') {\n    UBC = window[UBCReportObject];\n  } // 如果有 UBC 初始化之前存放的命令\n\n\n  if (Array.isArray(tmpUBCQueue)) {\n    MethodQueue.run.apply(UBC, [tmpUBCQueue]);\n    tmpUBC.q = [];\n  }\n\n  UBC.startTime = tmpUBC && tmpUBC.l || 1 * new Date();\n  UBC.loaded = true;\n  window[UBCReportObject] = UBC;\n};\n/**\n * 通过名称获取跟踪器\n *\n * @param {string} trackerName  跟踪器名称\n * @return {Tracker} 返回一个跟踪器\n */\n\n\nUBC.getByName = function (trackerName) {\n  return UBCtrackerMap[trackerName];\n};\n/**\n * 获取所有的跟踪器\n *\n * @return {Array}} 返回跟踪器列表\n */\n\n\nUBC.getAll = function () {\n  return UBCtrackers.slice();\n};\n\nUBC.main();\nregestPageVisibilityEvent(UBC);\nlet ubc = UBC;\n\nexport default ubc;\n"]}]}