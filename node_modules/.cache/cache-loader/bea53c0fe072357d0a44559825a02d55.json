{"remainingRequest":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js??ref--1-2!/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/src/pages/kangyi/containers/app.js","dependencies":[{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/src/pages/kangyi/containers/app.js","mtime":1695633995747},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/san-hot-loader/index.js","mtime":1696919525187},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/cache-loader/dist/cjs.js","mtime":1696919513896},{"path":"/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/node_modules/babel-loader/lib/index.js","mtime":1696919524615}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5hc3NpZ24iKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWZsZWN0LmNvbnN0cnVjdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSk7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpKTsKCnZhciBfaW5oZXJpdHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIikpOwoKdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIikpOwoKdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZ2V0UHJvdG90eXBlT2YiKSk7Cgp2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2xpYW9odWFueXUvcHJvamVjdHMvYmFpZHUtd29yay9iYWlkdS9mZWVkMy9tdWx0aS1wYWdlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSIpKTsKCnZhciBfc2FuID0gcmVxdWlyZSgic2FuIik7Cgp2YXIgX3ViY1JlcG9ydFNkayA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQGJhaWR1L3ViYy1yZXBvcnQtc2RrIikpOwoKdmFyIF9heGlvcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiYXhpb3MiKSk7Cgp2YXIgX2VudiA9IHJlcXVpcmUoIkBiYWlkdS9hdWMtYmFzZS9lbnYiKTsKCnZhciBfYXBwTW9kdWxlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2FwcC5tb2R1bGUubGVzcyIpKTsKCnZhciBfdHJhbnMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vdHJhbnMuanMiKSk7Cgp2YXIgX3N1cnJvdW5kRXBpZCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi4vY29tcG9uZW50cy9zdXJyb3VuZEVwaWQiKSk7Cgp2YXIgX2ludm9rZVNjaGVtZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi4vdXRpbHMvaW52b2tlU2NoZW1lIikpOwoKdmFyIF9lYWNoSXRlbSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9lYWNoLWl0ZW0iKSk7Cgp2YXIgX3NweUNsaWVudCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgic3B5LWNsaWVudC9kaXN0L3NweS1jbGllbnQubWluIikpOwoKdmFyIF92ZXJzaW9uX2NvbXBhcmUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBiYWlkdS94Ym94L3ZlcnNpb25fY29tcGFyZSIpKTsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yLmRlZmF1bHQpKHRoaXMsIHJlc3VsdCk7IH07IH0KCmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09ICJmdW5jdGlvbiIpIHJldHVybiB0cnVlOyB0cnkgeyBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFJlZmxlY3QuY29uc3RydWN0KERhdGUsIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfQoKLy8gY29uc3QgYWFhID0gcmVxdWlyZSgnLi9tb2NrLmpzb24nKTsKdmFyIEVhY2hJdGVtID0gKDAsIF9lYWNoSXRlbS5kZWZhdWx0KSgpOyAvLyDliIbkuqvmlofmoYgKCnZhciBzaGFyZVRleHQgPSBbJ+WFqOWbveeWq+aDheWunuaXtui/vei4qicsICfmjozmj6HmnKzlnLDnlqvmg4XmnIDmlrDliqjmgIEnLCAn5YWz5rOo5Zu95aSW55ar5oOF5Yqo5oCBJ107IC8vIOmhtemdouagh+ivhgoKdmFyIHBhZ2VTaWduID0gWydkb21lc3RpYycsICdsb2NhbCcsICdvdmVyc2VhcyddOyAvLyB3aWRnZXTkuK3pl7TpobUKCnZhciB3aWRnZXRTaGFyZSA9IHsKICBpb3M6ICdodHRwczovL21vdGlvbi5iYWlkdS5jb20vYWN0aXZpdHkvd2lkZ2V0L2lvcycsCiAgYW5kcm9pZDogJ2h0dHBzOi8vbWJkLmJhaWR1LmNvbS9iYWlkdWFwcC93aWRnZXQvYW5kcm9pZCcKfTsKCnZhciBBcHAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICAoMCwgX2luaGVyaXRzMi5kZWZhdWx0KShBcHAsIF9Db21wb25lbnQpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEFwcCk7CgogIGZ1bmN0aW9uIEFwcCgpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syLmRlZmF1bHQpKHRoaXMsIEFwcCk7CiAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KShBcHAsIFt7CiAgICBrZXk6ICJzaG93RGV0YWlsIiwKCiAgICAvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovCgogICAgLyogZXNsaW50LWVuYWJsZSBtYXgtbGVuICovCiAgICAvLyDmn6XnnIvmlbDmja7or6bmg4XnmoTngrnlh7sKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93RGV0YWlsKCkgewogICAgICB2YXIgdG9wVGFiU2VsZWN0ZWRJZCA9IHRoaXMuZGF0YS5nZXQoJ3RvcFRhYlNlbGVjdGVkSWQnKTsKICAgICAgdmFyIHNjaGVtZUhlYWQgPSAnYmFpZHVib3hhcHA6Ly92MS9icm93c2VyL29wZW4/dXJsPSc7CiAgICAgIHZhciBza2lwVXJsID0gdGhpcy5kYXRhLmdldCgnY3VycmVudFNlbGVjdERhdGEnKS5saW5rOwoKICAgICAgaWYgKHNraXBVcmwpIHsKICAgICAgICB2YXIgY291cG9uVXJsID0gc2NoZW1lSGVhZCArIGVuY29kZVVSSUNvbXBvbmVudChza2lwVXJsKTsKICAgICAgICAoMCwgX2ludm9rZVNjaGVtZS5kZWZhdWx0KShjb3Vwb25VcmwpOwogICAgICB9IC8vIOeCueWHu+aJk+eCuQoKCiAgICAgICgwLCBfdWJjUmVwb3J0U2RrLmRlZmF1bHQpKCdldmVudCcsIHsKICAgICAgICBwYWdlOiBwYWdlU2lnblt0b3BUYWJTZWxlY3RlZElkXSwKICAgICAgICB0eXBlOiAnY2xrJywKICAgICAgICB2YWx1ZTogJ3Nob3cgZGV0YWlsJwogICAgICB9KTsKICAgIH0gLy8g5oqX55arIHdpZGdldCBidXR0b24g55qE54K55Ye7CgogIH0sIHsKICAgIGtleTogImthbmd5aVdpZGdldEJ1dHRvbkNsaWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBrYW5neWlXaWRnZXRCdXR0b25DbGljaygpIHsKICAgICAgdmFyIHdpZGdldCA9IHRoaXMuZGF0YS5nZXQoJ2RhdGEud2lkZ2V0JykgfHwge307CiAgICAgIHZhciBfd2lkZ2V0JHdpZGdldF9jbWQgPSB3aWRnZXQud2lkZ2V0X2NtZCwKICAgICAgICAgIHdpZGdldF9jbWQgPSBfd2lkZ2V0JHdpZGdldF9jbWQgPT09IHZvaWQgMCA/ICcnIDogX3dpZGdldCR3aWRnZXRfY21kOwogICAgICAoMCwgX2ludm9rZVNjaGVtZS5kZWZhdWx0KSh3aWRnZXRfY21kKTsgLy8g54K55Ye75omT54K5CgogICAgICAoMCwgX3ViY1JlcG9ydFNkay5kZWZhdWx0KSgnZXZlbnQnLCB7CiAgICAgICAgcGFnZTogJ3dpZGdldCcsCiAgICAgICAgdHlwZTogJ2NsaycsCiAgICAgICAgc291cmNlOiAnZmVlZGt5JwogICAgICB9KTsKICAgIH0gLy8g5YiG5Lqr55qE54K55Ye7CgogIH0sIHsKICAgIGtleTogInNoYXJlQ2xpY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNoYXJlQ2xpY2soKSB7CiAgICAgIHZhciB0b3BUYWJTZWxlY3RlZElkID0gdGhpcy5kYXRhLmdldCgndG9wVGFiU2VsZWN0ZWRJZCcpOwogICAgICB2YXIgc2hhcmVJbmZvID0gewogICAgICAgIHRpdGxlOiBzaGFyZVRleHRbdG9wVGFiU2VsZWN0ZWRJZF0sCiAgICAgICAgdXJsOiAnJywKICAgICAgICBpbWFnZTogJycKICAgICAgfTsKICAgICAgdmFyIHNraXBVcmwgPSB0aGlzLmRhdGEuZ2V0KCdjdXJyZW50U2VsZWN0RGF0YScpLmxpbms7CiAgICAgIHNoYXJlSW5mby51cmwgPSBza2lwVXJsIHx8ICcnOwogICAgICB3aW5kb3cuUmVhY3ROYXRpdmVXZWJWaWV3ICYmIHdpbmRvdy5SZWFjdE5hdGl2ZVdlYlZpZXcucG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoc2hhcmVJbmZvKSk7IC8vIOeCueWHu+aJk+eCuQoKICAgICAgKDAsIF91YmNSZXBvcnRTZGsuZGVmYXVsdCkoJ2V2ZW50JywgewogICAgICAgIHBhZ2U6IHBhZ2VTaWduW3RvcFRhYlNlbGVjdGVkSWRdLAogICAgICAgIHR5cGU6ICdjbGsnLAogICAgICAgIHZhbHVlOiAnc2hhcmUnCiAgICAgIH0pOwogICAgfSAvLyDngrnlh7vpobbpg6hiYXIKCiAgfSwgewogICAga2V5OiAidG9wQmFyQ2xpY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRvcEJhckNsaWNrKGluZGV4KSB7CiAgICAgIHRoaXMuZGF0YS5zZXQoJ3RvcFRhYlNlbGVjdGVkSWQnLCBpbmRleCk7CiAgICAgIHZhciBsb2dQYWdlQXJyID0gdGhpcy5kYXRhLmdldCgnbG9nUGFnZUFycicpOwogICAgICBsb2dQYWdlQXJyW2luZGV4XSAmJiAoMCwgX3ViY1JlcG9ydFNkay5kZWZhdWx0KSgnZXZlbnQnLCB7CiAgICAgICAgdHlwZTogJ2Rpc3BsYXknLAogICAgICAgIHBhZ2U6IGxvZ1BhZ2VBcnJbaW5kZXhdCiAgICAgIH0pOwogICAgICBsb2dQYWdlQXJyW2luZGV4XSA9ICcnOwogICAgICB0aGlzLmRhdGEuc2V0KCdsb2dQYWdlQXJyJywgbG9nUGFnZUFycik7CiAgICAgIHRoaXMubmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIC8vIOWKoOS4gOS4i+W7tuaXtu+8jOS4jeeEtueul+WHuuadpeeahOmrmOW6puaYr+S4iuS4gOS4qnRhYueahAogICAgICAgIHZhciBoZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwQ29udGFpbicpLnNjcm9sbEhlaWdodDsgLy8g6L+Z6YeM5YeP5LiA5piv5Zug5Li6aW9z5bqV6YOo5Y+R546w5Lya5pyJMXB455qE57q/CgogICAgICAgIHdpbmRvdy5SZWFjdE5hdGl2ZVdlYlZpZXcgJiYgd2luZG93LlJlYWN0TmF0aXZlV2ViVmlldy5wb3N0TWVzc2FnZShoZWlnaHQgLSAxKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaW5pdExvZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdExvZygpIHsKICAgICAgKDAsIF91YmNSZXBvcnRTZGsuZGVmYXVsdCkoJ2luaXQnLCAnMjk4OCcsIHsKICAgICAgICB0aW1pbmdJZDogJzExNjU2JywKICAgICAgICBwYWdlOiAnaG9tZScsCiAgICAgICAgLy8g5Y+v5Lul5b+955WlCiAgICAgICAgZnJvbTogJ2ZlZWQnLAogICAgICAgIGF1dG9QdlRyYWNrOiB0cnVlLAogICAgICAgIHNvdXJjZTogJ2ZlZWQnCiAgICAgIH0pOyAvLyB1YmMoJ3RpbWluZycsICdzdGFydCcpOwogICAgfQogIH0sIHsKICAgIGtleTogImluaXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdGVkKCkgewogICAgICB0aGlzLmluaXRMb2coKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgICAvLyDliJvlu7rml7bku451cmzkuIror7vlj5bkuLvpopjlubborr7nva5odG1s55qE5qC35byPCiAgICAgIHZhciBwYXJhbXNGcm9tVXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICAgIHZhciB0aGVtZUluZGV4ID0gcGFyYW1zRnJvbVVybC5pbmRleE9mKCcmdGhlbWU9Jyk7CiAgICAgIHZhciBwYXJhbVN0YXJ0ID0gcGFyYW1zRnJvbVVybC5pbmRleE9mKCc/Jyk7CiAgICAgIHZhciBwYXJhbUVuZCA9IHBhcmFtc0Zyb21VcmwuaW5kZXhPZignJnRpbWVTdGFtcCcpID09PSAtMSA/IHBhcmFtc0Zyb21VcmwubGVuZ3RoIDogcGFyYW1zRnJvbVVybC5pbmRleE9mKCcmdGltZVN0YW1wJyk7IC8vIOS4uuS6huS/ruWkjXJjLXZpZXfkuIvnlqvmg4XljaHliLfmlrDkuI3lsZXnpLrnmoTpl67popjlnKh1cmzmnIDlkI7liqDkuobml7bpl7TmiLPvvIzlr7zoh7R0aGVtZeiOt+WPluWHuumUme+8jOaWsOWinnBhcmFtRW5k5L+u5aSN6K+l6Zeu6aKYCgogICAgICB2YXIgdGhlbWUgPSBwYXJhbXNGcm9tVXJsLnNsaWNlKHRoZW1lSW5kZXggKyAxLCBwYXJhbUVuZCkuc3BsaXQoJz0nKVsxXTsKICAgICAgdmFyICRyb290ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXTsKICAgICAgJHJvb3QuY2xhc3NMaXN0LmFkZCh0aGVtZSk7CiAgICAgIHRoaXMuZGF0YS5zZXQoJ3RoZW1lJywgdGhlbWUpOyAvLyDorr7nva7lrZfkvZMKCiAgICAgIGlmICgvaXBob25lfGlwYWR8aXBvZHxpb3MvaWcudGVzdChwYXJhbXNGcm9tVXJsKSkgewogICAgICAgICRyb290LmNsYXNzTGlzdC5hZGQoJ2lwaG9uZScpOwogICAgICB9IGVsc2UgewogICAgICAgICRyb290LmNsYXNzTGlzdC5hZGQoJ2FuZHJvaWQnKTsKICAgICAgfSAvLyDlj5HpgIHor7fmsYIKCgogICAgICB2YXIgcmVxdWVzdFN0ciA9IHBhcmFtc0Zyb21Vcmwuc2xpY2UocGFyYW1TdGFydCArIDEsIHRoZW1lSW5kZXgpOwogICAgICB2YXIgcmVxdWVzdFBhcmFtcyA9IHt9OwoKICAgICAgaWYgKHJlcXVlc3RTdHIuaW5kZXhPZignJicpICE9PSAtMSkgewogICAgICAgIHJlcXVlc3RTdHIuc3BsaXQoJyYnKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnNwbGl0IHx8IGl0ZW0uc3BsaXQoJz0nKS5sZW5ndGggIT09IDIpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBrZXkgPSBpdGVtLnNwbGl0KCc9JylbMF07CiAgICAgICAgICB2YXIgdmFsID0gaXRlbS5zcGxpdCgnPScpWzFdOwogICAgICAgICAgcmVxdWVzdFBhcmFtc1trZXldID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbCk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5kYXRhLnNldCgncmVxdWVzdFBhcmFtcycsIHJlcXVlc3RQYXJhbXMpOwogICAgICAgIHRoaXMuZGF0YS5zZXQoJ3BhcnRpYWxEYXRhJywgcmVxdWVzdFBhcmFtcy5wYXJ0aWFsRGF0YSk7CiAgICAgIH0KCiAgICAgIGlmICh3aW5kb3cuc29ydHNEYXRhLmVycm9yICE9PSAwKSB7CiAgICAgICAgd2luZG93LlJlYWN0TmF0aXZlV2ViVmlldyAmJiB3aW5kb3cuUmVhY3ROYXRpdmVXZWJWaWV3LnBvc3RNZXNzYWdlKDApOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZGF0YS5zZXQoJ2ZlZWQnLCAoMCwgX3RyYW5zLmRlZmF1bHQpKHdpbmRvdy5zb3J0c0RhdGEpKTsKICAgICAgfSAvLyB0aGlzLmRhdGEuc2V0KCdmZWVkJywgdHJhbnMoYWFhKSk7CgogICAgfQogIH0sIHsKICAgIGtleTogImF0dGFjaGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhdHRhY2hlZCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHdpbmRvdy5TUCAmJiB3aW5kb3cuU1AubWFyaygnYXR0YWNoZWQnKTsKICAgICAgdGhpcy5wZXJmTG9nKCk7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHNwYWNlID0gX2Vudi5lbnYuaXNJT1MgPyAxNSA6IDEyOwogICAgICAgIHZhciBuZXdBcHBXaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCAtIHNwYWNlICogMjsKCiAgICAgICAgaWYgKF90aGlzLmRhdGEuZ2V0KCdhcHBXaWR0aCcpID09PSBuZXdBcHBXaWR0aCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMuZGF0YS5zZXQoJ2FwcFdpZHRoJywgbmV3QXBwV2lkdGgpOwogICAgICB9KTsgLy8gaU9TCgogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKCFlLmRhdGEgfHwgdHlwZW9mIGUuZGF0YSAhPT0gJ3N0cmluZycgfHwgdHlwZW9mIGUuZGF0YSA9PT0gJ3N0cmluZycgJiYgZS5kYXRhLmluZGV4T2YoJ0hOJykgPT09IC0xKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgZGF0YUZyb21ITiA9IEpTT04ucGFyc2UoZS5kYXRhKTsKCiAgICAgICAgaWYgKGRhdGFGcm9tSE4uZnJvbSAhPT0gJ0hOJykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGRhdGFGcm9tSE4ub3BlcmF0ZSA9PT0gJ3JlZnJlc2gnKSB7CiAgICAgICAgICAvLyDpopHpgZPliLfmlrAKICAgICAgICAgIGlmICghZGF0YUZyb21ITi5wYXJhbVRvSDUgfHwgZGF0YUZyb21ITi5wYXJhbVRvSDUuaW5kZXhPZignJicpID09PSAtMSkgewogICAgICAgICAgICBfdGhpcy5zZW5kUmVxdWVzdCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIG5ld1JlcXVlc3RQYXJhbXMgPSB7fTsgLy8g5aaC5p6c5pS25Yiw5LqGcGFyYW1Ub0g15Y+C5pWw77yM6YKj5LmI6K+05piO5a6a5L2N5L+h5oGv5pyJ5Y+Y77yM6K+35rGC5Y+C5pWw5pS555So5paw55qE5a6a5L2N5L+h5oGvCgogICAgICAgICAgICBkYXRhRnJvbUhOLnBhcmFtVG9INS5zcGxpdCgnJicpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnNwbGl0IHx8IGl0ZW0uc3BsaXQoJz0nKS5sZW5ndGggIT09IDIpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHZhciBrZXkgPSBpdGVtLnNwbGl0KCc9JylbMF07CiAgICAgICAgICAgICAgdmFyIHZhbCA9IGl0ZW0uc3BsaXQoJz0nKVsxXTsKICAgICAgICAgICAgICBuZXdSZXF1ZXN0UGFyYW1zW2tleV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpcy5zZW5kUmVxdWVzdChuZXdSZXF1ZXN0UGFyYW1zKTsKCiAgICAgICAgICAgIF90aGlzLmRhdGEuc2V0KCdyZXF1ZXN0UGFyYW1zJywgbmV3UmVxdWVzdFBhcmFtcyk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChkYXRhRnJvbUhOLnRoZW1lKSB7CiAgICAgICAgICAvLyDpopHpgZPmlLnlj5jkuLvpopgKICAgICAgICAgIHZhciB0aGVtZSA9ICJrYW5neWktIi5jb25jYXQoZGF0YUZyb21ITi50aGVtZSk7CgogICAgICAgICAgdmFyIElTX0lPUyA9IF90aGlzLmRhdGEuZ2V0KCdJU19JT1MnKTsKCiAgICAgICAgICB2YXIgJHJvb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaHRtbCcpWzBdOwogICAgICAgICAgJHJvb3QuY2xhc3NOYW1lID0gIiIuY29uY2F0KHRoZW1lLCAiICIpLmNvbmNhdChJU19JT1MgPyAnaXBob25lJyA6ICdhbmRyb2lkJyk7CgogICAgICAgICAgX3RoaXMuZGF0YS5zZXQoJ3RoZW1lJywgdGhlbWUpOwogICAgICAgIH0gZWxzZSBpZiAoZGF0YUZyb21ITi5pbmRleCkgewogICAgICAgICAgdmFyIGluZGV4ID0gZGF0YUZyb21ITi5pbmRleDsKCiAgICAgICAgICBpZiAoK2luZGV4ICE9PSAwKSB7CiAgICAgICAgICAgIF90aGlzLmRhdGEuc2V0KCd0b3BUYWJTZWxlY3RlZElkJywgK2luZGV4KTsKCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwQ29udGFpbicpLnNjcm9sbEhlaWdodDsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaGVpZ2h0JywgaGVpZ2h0KTsKICAgICAgICAgICAgICB3aW5kb3cuUmVhY3ROYXRpdmVXZWJWaWV3ICYmIHdpbmRvdy5SZWFjdE5hdGl2ZVdlYlZpZXcucG9zdE1lc3NhZ2UoaGVpZ2h0KTsKICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOyAvLyBhbmRyb2lkCgogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgZGF0YUZyb21ITiA9IEpTT04ucGFyc2UoZS5kYXRhKTsKCiAgICAgICAgaWYgKGRhdGFGcm9tSE4uZnJvbSAhPT0gJ0hOJykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGRhdGFGcm9tSE4ub3BlcmF0ZSA9PT0gJ3JlZnJlc2gnKSB7CiAgICAgICAgICAvLyDpopHpgZPliLfmlrAKICAgICAgICAgIGlmICghZGF0YUZyb21ITi5wYXJhbVRvSDUgfHwgZGF0YUZyb21ITi5wYXJhbVRvSDUuaW5kZXhPZignJicpID09PSAtMSkgewogICAgICAgICAgICBfdGhpcy5zZW5kUmVxdWVzdCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIG5ld1JlcXVlc3RQYXJhbXMgPSB7fTsgLy8g5aaC5p6c5pS25Yiw5LqGcGFyYW1Ub0g15Y+C5pWw77yM6YKj5LmI6K+05piO5a6a5L2N5L+h5oGv5pyJ5Y+Y77yM6K+35rGC5Y+C5pWw5pS555So5paw55qE5a6a5L2N5L+h5oGvCgogICAgICAgICAgICBkYXRhRnJvbUhOLnBhcmFtVG9INS5zcGxpdCgnJicpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnNwbGl0IHx8IGl0ZW0uc3BsaXQoJz0nKS5sZW5ndGggIT09IDIpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHZhciBrZXkgPSBpdGVtLnNwbGl0KCc9JylbMF07CiAgICAgICAgICAgICAgdmFyIHZhbCA9IGl0ZW0uc3BsaXQoJz0nKVsxXTsKICAgICAgICAgICAgICBuZXdSZXF1ZXN0UGFyYW1zW2tleV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpcy5zZW5kUmVxdWVzdChuZXdSZXF1ZXN0UGFyYW1zKTsKCiAgICAgICAgICAgIF90aGlzLmRhdGEuc2V0KCdyZXF1ZXN0UGFyYW1zJywgbmV3UmVxdWVzdFBhcmFtcyk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChkYXRhRnJvbUhOLnRoZW1lKSB7CiAgICAgICAgICAvLyDpopHpgZPmlLnlj5jkuLvpopgKICAgICAgICAgIHZhciB0aGVtZSA9ICJrYW5neWktIi5jb25jYXQoZGF0YUZyb21ITi50aGVtZSk7CgogICAgICAgICAgdmFyIElTX0lPUyA9IF90aGlzLmRhdGEuZ2V0KCdJU19JT1MnKTsKCiAgICAgICAgICB2YXIgJHJvb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaHRtbCcpWzBdOwogICAgICAgICAgJHJvb3QuY2xhc3NOYW1lID0gIiIuY29uY2F0KHRoZW1lLCAiICIpLmNvbmNhdChJU19JT1MgPyAnaXBob25lJyA6ICdhbmRyb2lkJyk7CgogICAgICAgICAgX3RoaXMuZGF0YS5zZXQoJ3RoZW1lJywgdGhlbWUpOwogICAgICAgIH0gZWxzZSBpZiAoZGF0YUZyb21ITi5pbmRleCkgewogICAgICAgICAgdmFyIGluZGV4ID0gZGF0YUZyb21ITi5pbmRleDsKCiAgICAgICAgICBpZiAoK2luZGV4ICE9PSAwKSB7CiAgICAgICAgICAgIF90aGlzLmRhdGEuc2V0KCd0b3BUYWJTZWxlY3RlZElkJywgK2luZGV4KTsKCiAgICAgICAgICAgIF90aGlzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcENvbnRhaW4nKS5zY3JvbGxIZWlnaHQ7CiAgICAgICAgICAgICAgd2luZG93LlJlYWN0TmF0aXZlV2ViVmlldyAmJiB3aW5kb3cuUmVhY3ROYXRpdmVXZWJWaWV3LnBvc3RNZXNzYWdlKGhlaWdodCAtIDEpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGRhdGFGcm9tSE4udmlzaWJsZSkgewogICAgICAgICAgaWYgKGRhdGFGcm9tSE4udmlzaWJsZSA9PT0gJ2ZhbHNlJykgewogICAgICAgICAgICAoMCwgX3ViY1JlcG9ydFNkay5kZWZhdWx0KSgndGltaW5nJywgJ2VuZCcpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgKDAsIF91YmNSZXBvcnRTZGsuZGVmYXVsdCkoJ3RpbWluZycsICdzdGFydCcpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7IC8vIOiuvue9rndlYnZpZXfpq5jluqYKCiAgICAgIHRoaXMubmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHZhciByZXF1ZXN0UGFyYW1zID0gX3RoaXMuZGF0YS5nZXQoJ3JlcXVlc3RQYXJhbXMnKTsKCiAgICAgICAgdmFyIGhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHBDb250YWluJykuc2Nyb2xsSGVpZ2h0OwogICAgICAgIHdpbmRvdy5SZWFjdE5hdGl2ZVdlYlZpZXcgJiYgd2luZG93LlJlYWN0TmF0aXZlV2ViVmlldy5wb3N0TWVzc2FnZShoZWlnaHQpOyAvLyDpppbmrKHov5vlhaXml7bpobXpnaLlsZXnpLrmiZPngrkKCiAgICAgICAgaWYgKHJlcXVlc3RQYXJhbXMudGFiVmlzaWJsZSA9PT0gJ3RydWUnKSB7CiAgICAgICAgICB2YXIgbG9nUGFnZUFyciA9IF90aGlzLmRhdGEuZ2V0KCdsb2dQYWdlQXJyJyk7CgogICAgICAgICAgdmFyIHRvcFRhYlNlbGVjdGVkSWQgPSBfdGhpcy5kYXRhLmdldCgndG9wVGFiU2VsZWN0ZWRJZCcpOwoKICAgICAgICAgIGxvZ1BhZ2VBcnJbdG9wVGFiU2VsZWN0ZWRJZF0gJiYgKDAsIF91YmNSZXBvcnRTZGsuZGVmYXVsdCkoJ2V2ZW50JywgewogICAgICAgICAgICB0eXBlOiAnZGlzcGxheScsCiAgICAgICAgICAgIHBhZ2U6IGxvZ1BhZ2VBcnJbdG9wVGFiU2VsZWN0ZWRJZF0KICAgICAgICAgIH0pOyAvLyDlho3miZPkuIDkuKrmipfnlqt3aWRnZXTnmoTlsZXnjrDngrkKCiAgICAgICAgICBfdGhpcy5yZWYoJ3dpZGdldCcpICYmICgwLCBfdWJjUmVwb3J0U2RrLmRlZmF1bHQpKCdldmVudCcsIHsKICAgICAgICAgICAgdHlwZTogJ2Rpc3BsYXknLAogICAgICAgICAgICBwYWdlOiAnd2lkZ2V0JywKICAgICAgICAgICAgc291cmNlOiAnZmVlZGt5JwogICAgICAgICAgfSk7IC8vIOmhtemdouW3suaJk+eCueWQju+8jGxvZ1BhZ2VBcnLliKDpmaTor6XpobXpnaLvvIzpmLLmraLlsZXnpLrmiZPngrnph43lpI0KCiAgICAgICAgICBsb2dQYWdlQXJyW3RvcFRhYlNlbGVjdGVkSWRdID0gJyc7CgogICAgICAgICAgX3RoaXMuZGF0YS5zZXQoJ2xvZ1BhZ2VBcnInLCBsb2dQYWdlQXJyKTsgLy8g5pe26ZW/5omT54K5CgoKICAgICAgICAgICgwLCBfdWJjUmVwb3J0U2RrLmRlZmF1bHQpKCd0aW1pbmcnLCAnc3RhcnQnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInBlcmZMb2ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHBlcmZMb2coKSB7CiAgICAgIHZhciBzcHkgPSBuZXcgX3NweUNsaWVudC5kZWZhdWx0KHsKICAgICAgICBwaWQ6ICcxMF8xMzMnLAogICAgICAgIHNhbXBsZTogMQogICAgICB9KTsKICAgICAgdmFyIGRpbSA9IHsKICAgICAgICBvczogX2Vudi5lbnYuaXNBbmRyb2lkID8gJ2FuZHJvaWQnIDogX2Vudi5lbnYuaXNJT1MgPyAnaW9zJyA6ICdvdGhlcicsCiAgICAgICAgYXBwVmVyc2lvbjogX2Vudi5lbnYuYm94VmVyc2lvbgogICAgICB9OwoKICAgICAgdmFyIHNlbmRQZXJmID0gZnVuY3Rpb24gc2VuZFBlcmYoaW5mbykgewogICAgICAgIHNweS5zZW5kUGVyZih7CiAgICAgICAgICBpbmZvOiBpbmZvLAogICAgICAgICAgZ3JvdXA6ICdrYW5neWlfcGVyZicsCiAgICAgICAgICBkaW06IGRpbQogICAgICAgIH0pOwogICAgICB9OyAvLyBsY3AKCgogICAgICBzcHkubGlzdGVuTENQKHNlbmRQZXJmKTsgLy8gZmlkCgogICAgICBzcHkubGlzdGVuRklEKHNlbmRQZXJmKTsgLy8gdHRpCgogICAgICBzcHkubGlzdGVuVFRJKHNlbmRQZXJmKTsgLy8gc3B555qE5bi46KeE5Y+C5pWwCgogICAgICBzcHkubGlzdGVuVGltaW5nKGZ1bmN0aW9uIChtZXRyaWMpIHsKICAgICAgICB2YXIgY3VzdG9tUGVyZiA9IHt9OwogICAgICAgIHZhciBtYXJrcyA9IHdpbmRvdy5TUC5kYXRhLm1hcmtzOwoKICAgICAgICBmb3IgKHZhciBpIGluIG1hcmtzKSB7CiAgICAgICAgICBjdXN0b21QZXJmW2ldID0gd2luZG93LlNQLmNhbChpKTsKICAgICAgICB9CgogICAgICAgIHNlbmRQZXJmKE9iamVjdC5hc3NpZ24oe30sIG1ldHJpYywgY3VzdG9tUGVyZikpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZW5kUmVxdWVzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZFJlcXVlc3QocXVlcnkpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgcmVxdWVzdFBhcmFtcyA9IHF1ZXJ5IHx8IHRoaXMuZGF0YS5nZXQoJ3JlcXVlc3RQYXJhbXMnKTsKCiAgICAgIF9heGlvcy5kZWZhdWx0LmdldCgnL25ld3NwYWdlL2RhdGEvZXBpZGVtaWMnLCB7CiAgICAgICAgcGFyYW1zOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHJlcXVlc3RQYXJhbXMpLCB7fSwgewogICAgICAgICAgX2Zvcm1hdDogJ2pzb24nCiAgICAgICAgfSkKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YTsKCiAgICAgICAgICB2YXIgdG9wVGFiU2VsZWN0ZWRJZCA9IF90aGlzMi5kYXRhLmdldCgndG9wVGFiU2VsZWN0ZWRJZCcpOwoKICAgICAgICAgIHZhciBuZXdGZWVkID0gKDAsIF90cmFucy5kZWZhdWx0KShkYXRhKTsKCiAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbmV3RmVlZC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgaW5kZXggPT09IHRvcFRhYlNlbGVjdGVkSWQgPyBuZXdGZWVkW2luZGV4XS5pc19kZWZhdWx0ID0gMSA6IG5ld0ZlZWRbaW5kZXhdLmlzX2RlZmF1bHQgPSAwOwogICAgICAgICAgfQogICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqLwoKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoIXRvcFRhYlNlbGVjdGVkSWQpIHsKICAgICAgICAgICAgICAvLyDlm73lhoXnlqvmg4XkuIvnrKzkuozkuKrkuLrln47luILnlqvmg4XpgJ/miqUKICAgICAgICAgICAgICB2YXIgZGlzdHJpYnV0aW9uSW5kZXggPSAxOwoKICAgICAgICAgICAgICBpZiAobmV3RmVlZFswXSAmJiBuZXdGZWVkWzBdLmNvbXBvbmVudCAmJiBuZXdGZWVkWzBdLmNvbXBvbmVudFtkaXN0cmlidXRpb25JbmRleF0gJiYgbmV3RmVlZFswXS5jb21wb25lbnRbZGlzdHJpYnV0aW9uSW5kZXhdLmtleSA9PT0gJ2RvbWVzdGljRGlzdHJpYnV0aW9uJykgewogICAgICAgICAgICAgICAgbmV3RmVlZFswXS5jb21wb25lbnRbZGlzdHJpYnV0aW9uSW5kZXhdLnJlcG9ydFRhYmxlSGFzU2hvdyA9IF90aGlzMi5kYXRhLmdldCgncmVwb3J0VGFibGVIYXNTaG93Jyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlKSB7Ly8gZXJyb3IKICAgICAgICAgIH0KICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgbWF4LWxlbiAqLwoKCiAgICAgICAgICBfdGhpczIuZGF0YS5zZXQoJ2ZlZWQnLCBuZXdGZWVkKTsKCiAgICAgICAgICBfdGhpczIubmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcENvbnRhaW4nKS5zY3JvbGxIZWlnaHQ7CiAgICAgICAgICAgIHdpbmRvdy5SZWFjdE5hdGl2ZVdlYlZpZXcgJiYgd2luZG93LlJlYWN0TmF0aXZlV2ViVmlldy5wb3N0TWVzc2FnZShoZWlnaHQgLSAxKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgfQogIH0sIHsKICAgIGtleTogImluaXREYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0RGF0YSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBJU19JT1M6IF9lbnYuZW52LmlzSU9TLAogICAgICAgIHN0eWxlczogX2FwcE1vZHVsZS5kZWZhdWx0LAogICAgICAgIGZlZWQ6IFtdLAogICAgICAgIHRoZW1lOiAna2FuZ3lpLWxpZ2h0JywKICAgICAgICB0aW1lSW5mbzogJycsCiAgICAgICAgbG9nUGFnZUFycjogWydkb21lc3RpYycsICdsb2NhbCcsICdvdmVyc2VhcyddLAogICAgICAgIHJlcXVlc3RQYXJhbXM6IHt9LAogICAgICAgIHJlcG9ydFRhYmxlSGFzU2hvdzogZmFsc2UKICAgICAgfTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEFwcDsKfShfc2FuLkNvbXBvbmVudCk7CgpleHBvcnRzLmRlZmF1bHQgPSBBcHA7CigwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKEFwcCwgImNvbXBvbmVudHMiLCB7CiAgJ2VhY2gtaXRlbSc6IEVhY2hJdGVtLAogICdzdXJyb3VuZCc6IF9zdXJyb3VuZEVwaWQuZGVmYXVsdAp9KTsKKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkoQXBwLCAidGVtcGxhdGUiLCAiXG4gICAgICAgIDxkaXYgaWQ9XCJhcHBDb250YWluXCIgY2xhc3M9XCJ7e3N0eWxlc1snYXBwJ119fVwiPlxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDAge3twYXJ0aWFsRGF0YSA/IDAgOiBJU19JT1MgPyAnMTVweCcgOiAnMTJweCd9fTtcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwie3tzdHlsZXNbJ2FwcC1jb250YWluZXInXX19XCJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJ7e3BhcnRpYWxEYXRhID8gJ2JvcmRlci1yYWRpdXM6IDBweDsnIDogJyd9fVwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHMtaWY9XCJ7eyFwYXJ0aWFsRGF0YSAmJiB3aWRnZXR9fVwiIHMtcmVmPVwid2lkZ2V0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwie3tzdHlsZXNbJ2FwcC1jb250YWluZXItd2lkZ2V0J119fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCh7e3dpZGdldEJhY2tncm91bmR9fSlcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwie3tzdHlsZXNbJ2FwcC1jb250YWluZXItd2lkZ2V0LXRpdGxlJ119fVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7d2lkZ2V0LndpZGdldF90aXRsZX19XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ7e3N0eWxlc1snYXBwLWNvbnRhaW5lci13aWRnZXQtYnV0dG9uJ119fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb24tY2xpY2s9XCJrYW5neWlXaWRnZXRCdXR0b25DbGlja1wiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoe3t3aWRnZXRCdXR0b25CYWNrZ3JvdW5kfX0pXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7d2lkZ2V0LmJ1dHRvbl90ZXh0fX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgcy1pZj1cInt7IXBhcnRpYWxEYXRhfX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJ7e3N0eWxlc1snYXBwLWNvbnRhaW5lci1hbGx0YWJzJ119fSB7e3dpZGdldCA/IHN0eWxlc1snaGFzLXdpZGdldCddIDogJyd9fVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInt7c3R5bGVzWydhcHAtY29udGFpbmVyLXRhYkl0ZW0nXX19XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLWZvcj1cIml0ZW0sIGluZGV4IGluIHRvcFRpdGxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbi1jbGljaz1cInRvcEJhckNsaWNrKGluZGV4KVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJ7e2luZGV4ID09PSB0b3BUYWJTZWxlY3RlZElkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc3R5bGVzWydhcHAtY29udGFpbmVyLXRhYkl0ZW0tYWN0aXZlJ10gOiBzdHlsZXNbJ2FwcC1jb250YWluZXItdGFiSXRlbSddfX1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57e2l0ZW19fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZWFjaC1pdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMtZm9yPVwiZmVlZCwgaW5kZXggaW4gY3VycmVudFNlbGVjdERhdGEuY29tcG9uZW50XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVlZD1cInt7ZmVlZH19XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg9XCJ7e2luZGV4fX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92aW5jZT1cInt7Y3VycmVudFNlbGVjdERhdGEucHJvdmluY2UgfHwgJyd9fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVJbmZvPVwie3tjdXJyZW50U2VsZWN0RGF0YS51cGRhdGVfdGltZSB8fCAnJ319XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU9XCJ7e3RoZW1lfX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3BUYWJTZWxlY3RlZElkPVwie3t0b3BUYWJTZWxlY3RlZElkfX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJUeXBlPVwie3tjdXJyZW50U2VsZWN0RGF0YS50YWJfdHlwZX19XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiVGl0bGU9XCJ7e2N1cnJlbnRTZWxlY3REYXRhLnRhYl90aXRsZX19XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZXJUYWxvc1RhYj1cInt7cGFydGlhbERhdGF9fVwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzLWlmPVwie3shcGFydGlhbERhdGF9fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInt7c3R5bGVzWydhcHAtb3BlcmF0ZSddfX1cIiBzdHlsZT1cInt7dG9wVGFiU2VsZWN0ZWRJZCAhPT0gMCA/ICdtYXJnaW4tdG9wOiAuMzEyNXJlbSc6ICcnfX1cIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwie3tzdHlsZXNbJ2FwcC1vcGVyYXRlLWRldGFpbCddfX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uLWNsaWNrPVwic2hvd0RldGFpbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwie3tkZXRhaWxJY29ufX1cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7dG9wVGFiU2VsZWN0ZWRJZCA9PT0gMCA/ICdcdTY3RTVcdTc3MEJcdTY1NzBcdTYzNkVcdThCRTZcdTYwQzUnIDogJ1x1NjdFNVx1NzcwQicgKyB0b3BUaXRsZVt0b3BUYWJTZWxlY3RlZElkXX19XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ7e3N0eWxlc1snYXBwLW9wZXJhdGUtc2hhcmUnXX19XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbi1jbGljaz1cInNoYXJlQ2xpY2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cInt7c2hhcmVJY29ufX1cIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3t0b3BUYWJTZWxlY3RlZElkID09PSAwID8gJ1x1NTIwNlx1NEVBQlx1NUI5RVx1NjVGNlx1NzVBQlx1NjBDNScgOiAnXHU1MjA2XHU0RUFCJyArIHRvcFRpdGxlW3RvcFRhYlNlbGVjdGVkSWRdfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBzLWlmPVwie3shcGFydGlhbERhdGF9fVwiIGNsYXNzPVwie3tzdHlsZXNbJ2FwcC1ncmFkaWVudCddfX1cIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgIik7CigwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKEFwcCwgImZpbHRlciIsIHt9KTsKKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkoQXBwLCAibWVzc2FnZXMiLCB7CiAgJ3JlcG9ydDpyZXBvcnRUYWJsZUhhc1Nob3cnOiBmdW5jdGlvbiByZXBvcnRSZXBvcnRUYWJsZUhhc1Nob3coKSB7CiAgICB0aGlzLmRhdGEuc2V0KCdyZXBvcnRUYWJsZUhhc1Nob3cnLCB0cnVlKTsKICB9Cn0pOwooMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KShBcHAsICJjb21wdXRlZCIsIHsKICB0b3BUaXRsZTogZnVuY3Rpb24gdG9wVGl0bGUoKSB7CiAgICB2YXIgZmVlZCA9IHRoaXMuZGF0YS5nZXQoJ2ZlZWQnKTsKICAgIHJldHVybiBmZWVkICYmIGZlZWQubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICByZXR1cm4gaXRlbS50b3BUaXRsZSB8fCAnJzsKICAgIH0pOwogIH0sCiAgdG9wVGFiU2VsZWN0ZWRJZDogZnVuY3Rpb24gdG9wVGFiU2VsZWN0ZWRJZCgpIHsKICAgIHZhciBmZWVkID0gdGhpcy5kYXRhLmdldCgnZmVlZCcpOwogICAgdmFyIGRlZmF1bHRJbmRleCA9IDA7CgogICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGZlZWQubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIGlmIChmZWVkW2luZGV4XS5pc19kZWZhdWx0ICYmICtmZWVkW2luZGV4XS5pc19kZWZhdWx0ID09PSAxKSB7CiAgICAgICAgZGVmYXVsdEluZGV4ID0gaW5kZXg7CiAgICAgICAgcmV0dXJuIGRlZmF1bHRJbmRleDsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBkZWZhdWx0SW5kZXg7CiAgfSwKICBhcHBXaWR0aDogZnVuY3Rpb24gYXBwV2lkdGgoKSB7CiAgICB2YXIgc3BhY2UgPSBfZW52LmVudi5pc0lPUyA/IDE1IDogMTI7CiAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIC0gc3BhY2UgKiAyOwogIH0sCiAgd2lkZ2V0OiBmdW5jdGlvbiB3aWRnZXQoKSB7CiAgICB2YXIgX2VudiR1YSA9IF9lbnYuZW52LnVhLAogICAgICAgIHVhID0gX2VudiR1YSA9PT0gdm9pZCAwID8gJycgOiBfZW52JHVhLAogICAgICAgIGlzQW5kcm9pZCA9IF9lbnYuZW52LmlzQW5kcm9pZDsKCiAgICB2YXIgX3RoaXMkZGF0YSRnZXQgPSB0aGlzLmRhdGEuZ2V0KCdyZXF1ZXN0UGFyYW1zJyksCiAgICAgICAgX3RoaXMkZGF0YSRnZXQkYmRfdmVyID0gX3RoaXMkZGF0YSRnZXQuYmRfdmVyc2lvbiwKICAgICAgICBiZF92ZXJzaW9uID0gX3RoaXMkZGF0YSRnZXQkYmRfdmVyID09PSB2b2lkIDAgPyAnJyA6IF90aGlzJGRhdGEkZ2V0JGJkX3ZlcjsKCiAgICBpZiAoaXNBbmRyb2lkICYmICgwLCBfdmVyc2lvbl9jb21wYXJlLmRlZmF1bHQpKGJkX3ZlcnNpb24sICcxMy4xMCcpID49IDApIHsKICAgICAgcmV0dXJuIHRoaXMuZGF0YS5nZXQoJ2RhdGEud2lkZ2V0JykgfHwge307CiAgICB9CgogICAgcmV0dXJuICcnOwogIH0sCiAgd2lkZ2V0QmFja2dyb3VuZDogZnVuY3Rpb24gd2lkZ2V0QmFja2dyb3VuZCgpIHsKICAgIHZhciB3aWRnZXQgPSB0aGlzLmRhdGEuZ2V0KCdkYXRhLndpZGdldCcpIHx8IHt9OwogICAgdmFyIHRoZW1lID0gdGhpcy5kYXRhLmdldCgndGhlbWUnKTsKCiAgICBzd2l0Y2ggKHRoZW1lKSB7CiAgICAgIGNhc2UgJ2thbmd5aS1kYXJrJzoKICAgICAgICByZXR1cm4gd2lkZ2V0LmJhY2tncm91bmRfZGFyazsKCiAgICAgIGNhc2UgJ2thbmd5aS1uaWdodCc6CiAgICAgICAgcmV0dXJuIHdpZGdldC5iYWNrZ3JvdW5kX25pZ2h0OwoKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gd2lkZ2V0LmJhY2tncm91bmQ7CiAgICB9CiAgfSwKICB3aWRnZXRCdXR0b25CYWNrZ3JvdW5kOiBmdW5jdGlvbiB3aWRnZXRCdXR0b25CYWNrZ3JvdW5kKCkgewogICAgdmFyIHdpZGdldCA9IHRoaXMuZGF0YS5nZXQoJ2RhdGEud2lkZ2V0JykgfHwge307CiAgICB2YXIgdGhlbWUgPSB0aGlzLmRhdGEuZ2V0KCd0aGVtZScpOwoKICAgIHN3aXRjaCAodGhlbWUpIHsKICAgICAgY2FzZSAna2FuZ3lpLWRhcmsnOgogICAgICAgIHJldHVybiB3aWRnZXQuYnV0dG9uX2ljb25fZGFyazsKCiAgICAgIGNhc2UgJ2thbmd5aS1uaWdodCc6CiAgICAgICAgcmV0dXJuIHdpZGdldC5idXR0b25faWNvbl9uaWdodDsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIHdpZGdldC5idXR0b25faWNvbjsKICAgIH0KICB9LAogIGRldGFpbEljb246IGZ1bmN0aW9uIGRldGFpbEljb24oKSB7CiAgICB2YXIgdGhlbWUgPSB0aGlzLmRhdGEuZ2V0KCd0aGVtZScpOwoKICAgIHN3aXRjaCAodGhlbWUpIHsKICAgICAgY2FzZSAna2FuZ3lpLWxpZ2h0JzoKICAgICAgICByZXR1cm4gcmVxdWlyZSgnLi4vYXNzZXRzL2RldGFpbC5wbmcnKTsKCiAgICAgIGNhc2UgJ2thbmd5aS1uaWdodCc6CiAgICAgICAgcmV0dXJuIHJlcXVpcmUoJy4uL2Fzc2V0cy9kZXRhaWxfbmlnaHQucG5nJyk7CgogICAgICBjYXNlICdrYW5neWktZGFyayc6CiAgICAgICAgcmV0dXJuIHJlcXVpcmUoJy4uL2Fzc2V0cy9kZXRhaWxfZGFyay5wbmcnKTsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIHJlcXVpcmUoJy4uL2Fzc2V0cy9kZXRhaWwucG5nJyk7CiAgICB9CiAgfSwKICBzaGFyZUljb246IGZ1bmN0aW9uIHNoYXJlSWNvbigpIHsKICAgIHZhciB0aGVtZSA9IHRoaXMuZGF0YS5nZXQoJ3RoZW1lJyk7CgogICAgc3dpdGNoICh0aGVtZSkgewogICAgICBjYXNlICdrYW5neWktbGlnaHQnOgogICAgICAgIHJldHVybiByZXF1aXJlKCcuLi9hc3NldHMvc2hhcmUucG5nJyk7CgogICAgICBjYXNlICdrYW5neWktbmlnaHQnOgogICAgICAgIHJldHVybiByZXF1aXJlKCcuLi9hc3NldHMvc2hhcmVfbmlnaHQucG5nJyk7CgogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiByZXF1aXJlKCcuLi9hc3NldHMvc2hhcmUucG5nJyk7CiAgICB9CiAgfSwKICBjdXJyZW50U2VsZWN0RGF0YTogZnVuY3Rpb24gY3VycmVudFNlbGVjdERhdGEoKSB7CiAgICB2YXIgdG9wVGFiU2VsZWN0ZWRJZCA9IHRoaXMuZGF0YS5nZXQoJ3RvcFRhYlNlbGVjdGVkSWQnKTsKICAgIHZhciBmZWVkID0gdGhpcy5kYXRhLmdldCgnZmVlZCcpOwogICAgdmFyIGZlZWRMZW4gPSBmZWVkLmxlbmd0aDsKCiAgICBpZiAoZmVlZExlbiA+IDApIHsKICAgICAgaWYgKHRvcFRhYlNlbGVjdGVkSWQgPj0gZmVlZExlbikgewogICAgICAgIHRvcFRhYlNlbGVjdGVkSWQgPSAwOwogICAgICB9CgogICAgICByZXR1cm4gZmVlZFt0b3BUYWJTZWxlY3RlZElkXTsKICAgIH0KCiAgICByZXR1cm4gbnVsbDsKICB9Cn0pOwoKaWYgKG1vZHVsZS5ob3QpIHsKICB2YXIgX19IT1RfQVBJX18gPSByZXF1aXJlKCcvVXNlcnMvbGlhb2h1YW55dS9wcm9qZWN0cy9iYWlkdS13b3JrL2JhaWR1L2ZlZWQzL211bHRpLXBhZ2VzL25vZGVfbW9kdWxlcy9zYW4taG90LWxvYWRlci9saWIvcnVudGltZS9jb21wb25lbnQtY2xpZW50LWFwaS5qcycpOwoKICB2YXIgX19IT1RfVVRJTFNfXyA9IHJlcXVpcmUoJy9Vc2Vycy9saWFvaHVhbnl1L3Byb2plY3RzL2JhaWR1LXdvcmsvYmFpZHUvZmVlZDMvbXVsdGktcGFnZXMvbm9kZV9tb2R1bGVzL3Nhbi1ob3QtbG9hZGVyL2xpYi9ydW50aW1lL3V0aWxzLmpzJyk7CgogIHZhciBfX1NBTl9DT01QT05FTlRfXyA9IF9fSE9UX1VUSUxTX18uZ2V0RXhwb3J0cyhtb2R1bGUpOwoKICBpZiAoX19TQU5fQ09NUE9ORU5UX18udGVtcGxhdGUgfHwgX19TQU5fQ09NUE9ORU5UX18ucHJvdG90eXBlLnRlbXBsYXRlKSB7CiAgICBtb2R1bGUuaG90LmFjY2VwdCgpOwoKICAgIF9fSE9UX0FQSV9fLmluc3RhbGwocmVxdWlyZSgnc2FuJykpOwoKICAgIHZhciBfX0hNUl9JRF9fID0gJzQ5NTE2MzlkJzsKCiAgICBpZiAoIW1vZHVsZS5ob3QuZGF0YSkgewogICAgICBfX0hPVF9BUElfXy5jcmVhdGVSZWNvcmQoX19ITVJfSURfXywgX19TQU5fQ09NUE9ORU5UX18pOwogICAgfSBlbHNlIHsKICAgICAgX19IT1RfQVBJX18uaG90UmVsb2FkKF9fSE1SX0lEX18sIF9fU0FOX0NPTVBPTkVOVF9fKTsKICAgIH0KICB9Cn0="},{"version":3,"sources":["/Users/liaohuanyu/projects/baidu-work/baidu/feed3/multi-pages/src/pages/kangyi/containers/app.js"],"names":["EachItem","shareText","pageSign","widgetShare","ios","android","App","topTabSelectedId","data","get","schemeHead","skipUrl","link","couponUrl","encodeURIComponent","page","type","value","widget","widget_cmd","source","shareInfo","title","url","image","window","ReactNativeWebView","postMessage","JSON","stringify","index","set","logPageArr","nextTick","height","document","getElementById","scrollHeight","timingId","from","autoPvTrack","initLog","paramsFromUrl","location","href","themeIndex","indexOf","paramStart","paramEnd","length","theme","slice","split","$root","getElementsByTagName","classList","add","test","requestStr","requestParams","forEach","item","key","val","decodeURIComponent","partialData","sortsData","error","SP","mark","perfLog","addEventListener","space","env","isIOS","newAppWidth","documentElement","clientWidth","e","dataFromHN","parse","operate","paramToH5","sendRequest","newRequestParams","IS_IOS","className","setTimeout","console","log","visible","tabVisible","ref","spy","SpyClient","pid","sample","dim","os","isAndroid","appVersion","boxVersion","sendPerf","info","group","listenLCP","listenFID","listenTTI","listenTiming","metric","customPerf","marks","i","cal","Object","assign","query","axios","params","_format","then","res","status","newFeed","is_default","distributionIndex","component","reportTableHasShow","catch","styles","feed","timeInfo","Component","SurroundEpid","topTitle","map","defaultIndex","appWidth","ua","bd_version","widgetBackground","background_dark","background_night","background","widgetButtonBackground","button_icon_dark","button_icon_night","button_icon","detailIcon","require","shareIcon","currentSelectData","feedLen","module","hot","__HOT_API__","__HOT_UTILS__","__SAN_COMPONENT__","getExports","template","prototype","accept","install","__HMR_ID__","createRecord","hotReload"],"mappings":"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","sourcesContent":["/**\n * @file 容器组件\n * @author leizhihao <leizhihao@baidu.com>\n */\n/* eslint-disable fecs-camelcase */\nimport {Component} from 'san';\nimport ubc from '@baidu/ubc-report-sdk';\nimport axios from 'axios';\nimport {env} from '@baidu/auc-base/env';\nimport styles from './app.module.less';\nimport trans from './trans.js';\nimport SurroundEpid from '../components/surroundEpid';\nimport invokeScheme from '../utils/invokeScheme';\nimport channelize from './each-item';\nimport SpyClient from 'spy-client/dist/spy-client.min';\nimport versionCompare from '@baidu/xbox/version_compare';\n// const aaa = require('./mock.json');\nconst EachItem = channelize();\n// 分享文案\nconst shareText = ['全国疫情实时追踪', '掌握本地疫情最新动态', '关注国外疫情动态'];\n// 页面标识\nconst pageSign = ['domestic', 'local', 'overseas'];\n// widget中间页\nconst widgetShare = {\n    ios: 'https://motion.baidu.com/activity/widget/ios',\n    android: 'https://mbd.baidu.com/baiduapp/widget/android'\n};\nexport default class App extends Component {\n\n    static components = {\n        'each-item': EachItem,\n        'surround': SurroundEpid\n    };\n    /* eslint-disable max-len */\n    static template = `\n        <div id=\"appContain\" class=\"{{styles['app']}}\">\n            <div style=\"padding: 0 {{partialData ? 0 : IS_IOS ? '15px' : '12px'}};\">\n                <div class=\"{{styles['app-container']}}\"\n                    style=\"{{partialData ? 'border-radius: 0px;' : ''}}\">\n                    <div s-if=\"{{!partialData && widget}}\" s-ref=\"widget\"\n                        class=\"{{styles['app-container-widget']}}\"\n                        style=\"background-image: url({{widgetBackground}})\"\n                    >\n                        <div class=\"{{styles['app-container-widget-title']}}\">\n                            {{widget.widget_title}}\n                        </div>\n                        <div class=\"{{styles['app-container-widget-button']}}\"\n                            on-click=\"kangyiWidgetButtonClick\"\n                        >\n                            <span style=\"background-image: url({{widgetButtonBackground}})\">\n                                {{widget.button_text}}\n                            </span>\n                        </div>\n                    </div>\n                    <div s-if=\"{{!partialData}}\"\n                        class=\"{{styles['app-container-alltabs']}} {{widget ? styles['has-widget'] : ''}}\">\n                        <div class=\"{{styles['app-container-tabItem']}}\"\n                            s-for=\"item, index in topTitle\"\n                            on-click=\"topBarClick(index)\"\n                            class=\"{{index === topTabSelectedId\n                                ? styles['app-container-tabItem-active'] : styles['app-container-tabItem']}}\">\n                            <span>{{item}}</span>\n                        </div>\n                    </div>\n                    <div class=\"\">\n                        <div>\n                            <each-item\n                                s-for=\"feed, index in currentSelectData.component\"\n                                feed=\"{{feed}}\"\n                                index=\"{{index}}\"\n                                province=\"{{currentSelectData.province || ''}}\"\n                                timeInfo=\"{{currentSelectData.update_time || ''}}\"\n                                theme=\"{{theme}}\"\n                                topTabSelectedId=\"{{topTabSelectedId}}\"\n                                tabType=\"{{currentSelectData.tab_type}}\"\n                                tabTitle=\"{{currentSelectData.tab_title}}\"\n                                underTalosTab=\"{{partialData}}\"/>\n                        </div>\n                    </div>\n                    <div s-if=\"{{!partialData}}\"\n                        class=\"{{styles['app-operate']}}\" style=\"{{topTabSelectedId !== 0 ? 'margin-top: .3125rem': ''}}\"\n                    >\n                        <div class=\"{{styles['app-operate-detail']}}\"\n                            on-click=\"showDetail\">\n                            <img src=\"{{detailIcon}}\" />\n                            {{topTabSelectedId === 0 ? '查看数据详情' : '查看' + topTitle[topTabSelectedId]}}\n                        </div>\n                        <div class=\"{{styles['app-operate-share']}}\"\n                            on-click=\"shareClick\">\n                            <img src=\"{{shareIcon}}\"/>\n                            {{topTabSelectedId === 0 ? '分享实时疫情' : '分享' + topTitle[topTabSelectedId]}}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div s-if=\"{{!partialData}}\" class=\"{{styles['app-gradient']}}\"></div>\n        </div>\n    `;\n    /* eslint-enable max-len */\n\n    static filter = {\n    }\n    static messages = {\n        'report:reportTableHasShow'() {\n            this.data.set('reportTableHasShow', true);\n        }\n    }\n    static computed = {\n        topTitle() {\n            const feed = this.data.get('feed');\n            return feed && feed.map((item, index) => {\n                return item.topTitle || '';\n            });\n        },\n        topTabSelectedId() {\n            const feed = this.data.get('feed');\n            let defaultIndex = 0;\n            for (let index = 0; index < feed.length; index++) {\n                if (feed[index].is_default && +feed[index].is_default === 1) {\n                    defaultIndex = index;\n                    return defaultIndex;\n                }\n            }\n            return defaultIndex;\n        },\n        appWidth() {\n            let space = env.isIOS ? 15 : 12;\n            return document.documentElement.clientWidth - space * 2;\n        },\n        widget() {\n            const {ua = '', isAndroid} = env;\n            const {bd_version = ''} = this.data.get('requestParams');\n            if (\n                isAndroid && versionCompare(bd_version, '13.10') >= 0\n            ) {\n                return this.data.get('data.widget') || {};\n            }\n            return '';\n        },\n        widgetBackground() {\n            const widget = this.data.get('data.widget') || {};\n            const theme = this.data.get('theme');\n            switch (theme) {\n                case 'kangyi-dark':\n                    return widget.background_dark;\n                case 'kangyi-night':\n                    return widget.background_night;\n                default:\n                    return widget.background;\n            }\n        },\n        widgetButtonBackground() {\n            const widget = this.data.get('data.widget') || {};\n            const theme = this.data.get('theme');\n            switch (theme) {\n                case 'kangyi-dark':\n                    return widget.button_icon_dark;\n                case 'kangyi-night':\n                    return widget.button_icon_night;\n                default:\n                    return widget.button_icon;\n            }\n        },\n        detailIcon() {\n            const theme = this.data.get('theme');\n            switch (theme) {\n                case 'kangyi-light':\n                    return require('../assets/detail.png');\n                case 'kangyi-night':\n                    return require('../assets/detail_night.png');\n                case 'kangyi-dark':\n                    return require('../assets/detail_dark.png');\n                default:\n                    return require('../assets/detail.png');\n            }\n        },\n        shareIcon() {\n            const theme = this.data.get('theme');\n            switch (theme) {\n                case 'kangyi-light':\n                    return require('../assets/share.png');\n                case 'kangyi-night':\n                    return require('../assets/share_night.png');\n                default:\n                    return require('../assets/share.png');\n            }\n        },\n        currentSelectData() {\n            let topTabSelectedId = this.data.get('topTabSelectedId');\n            const feed = this.data.get('feed');\n            const feedLen = feed.length;\n            if (feedLen > 0) {\n                if (topTabSelectedId >= feedLen) {\n                    topTabSelectedId = 0;\n                }\n                return feed[topTabSelectedId];\n            }\n            return null;\n        }\n    };\n\n    // 查看数据详情的点击\n    showDetail() {\n        const topTabSelectedId = this.data.get('topTabSelectedId');\n        let schemeHead = 'baiduboxapp://v1/browser/open?url=';\n        let skipUrl = this.data.get('currentSelectData').link;\n        if (skipUrl) {\n            let couponUrl = schemeHead + encodeURIComponent(skipUrl);\n            invokeScheme(couponUrl);\n        }\n        // 点击打点\n        ubc('event', {\n            page: pageSign[topTabSelectedId],\n            type: 'clk',\n            value: 'show detail'\n        });\n    }\n\n    // 抗疫 widget button 的点击\n    kangyiWidgetButtonClick() {\n        const widget = this.data.get('data.widget') || {};\n        const {widget_cmd = ''} = widget;\n\n        invokeScheme(widget_cmd);\n\n        // 点击打点\n        ubc('event', {\n            page: 'widget',\n            type: 'clk',\n            source: 'feedky'\n        });\n    }\n\n    // 分享的点击\n    shareClick() {\n        const topTabSelectedId = this.data.get('topTabSelectedId');\n        let shareInfo = {\n            title: shareText[topTabSelectedId],\n            url: '',\n            image: ''\n        };\n        let skipUrl = this.data.get('currentSelectData').link;\n        shareInfo.url = skipUrl || '';\n        window.ReactNativeWebView && window.ReactNativeWebView.postMessage(JSON.stringify(shareInfo));\n        // 点击打点\n        ubc('event', {\n            page: pageSign[topTabSelectedId],\n            type: 'clk',\n            value: 'share'\n        });\n    }\n\n    // 点击顶部bar\n    topBarClick(index) {\n        this.data.set('topTabSelectedId', index);\n        let logPageArr = this.data.get('logPageArr');\n        logPageArr[index] && ubc('event', {\n            type: 'display',\n            page: logPageArr[index]\n        });\n        logPageArr[index] = '';\n        this.data.set('logPageArr', logPageArr);\n        this.nextTick(() => {\n            // 加一下延时，不然算出来的高度是上一个tab的\n            let height = document.getElementById('appContain').scrollHeight;\n            // 这里减一是因为ios底部发现会有1px的线\n            window.ReactNativeWebView && window.ReactNativeWebView.postMessage(height - 1);\n        });\n    }\n\n    initLog() {\n        ubc('init', '2988', {\n            timingId: '11656',\n            page: 'home', // 可以忽略\n            from: 'feed',\n            autoPvTrack: true,\n            source: 'feed'\n        });\n        // ubc('timing', 'start');\n    }\n\n    inited() {\n        this.initLog();\n    }\n    created() {\n        // 创建时从url上读取主题并设置html的样式\n        let paramsFromUrl = window.location.href;\n        let themeIndex = paramsFromUrl.indexOf('&theme=');\n        let paramStart = paramsFromUrl.indexOf('?');\n        let paramEnd = paramsFromUrl.indexOf('&timeStamp') === -1\n            ? paramsFromUrl.length : paramsFromUrl.indexOf('&timeStamp');\n        // 为了修复rc-view下疫情卡刷新不展示的问题在url最后加了时间戳，导致theme获取出错，新增paramEnd修复该问题\n        let theme = paramsFromUrl.slice(themeIndex + 1, paramEnd).split('=')[1];\n        const $root = document.getElementsByTagName('html')[0];\n        $root.classList.add(theme);\n        this.data.set('theme', theme);\n        // 设置字体\n        if (/iphone|ipad|ipod|ios/ig.test(paramsFromUrl)) {\n            $root.classList.add('iphone');\n        } else {\n            $root.classList.add('android');\n        }\n        // 发送请求\n        let requestStr = paramsFromUrl.slice(paramStart + 1, themeIndex);\n        let requestParams = {};\n        if (requestStr.indexOf('&') !== -1) {\n            requestStr.split('&').forEach((item, index) => {\n                if (!item || !item.split || item.split('=').length !== 2) {\n                    return;\n                }\n                let key = item.split('=')[0];\n                let val = item.split('=')[1];\n                requestParams[key] = decodeURIComponent(val);\n            });\n\n            this.data.set('requestParams', requestParams);\n            this.data.set('partialData', requestParams.partialData);\n        }\n        if (window.sortsData.error !== 0) {\n            window.ReactNativeWebView && window.ReactNativeWebView.postMessage(0);\n        } else {\n            this.data.set('feed', trans(window.sortsData));\n        }\n        // this.data.set('feed', trans(aaa));\n    }\n\n    attached() {\n        window.SP && window.SP.mark('attached');\n        this.perfLog();\n        window.addEventListener('resize', () => {\n            let space = env.isIOS ? 15 : 12;\n            let newAppWidth = document.documentElement.clientWidth - space * 2;\n            if (this.data.get('appWidth') === newAppWidth) {\n                return;\n            }\n            this.data.set('appWidth', newAppWidth);\n        });\n        // iOS\n        window.addEventListener('message', e => {\n            if (!e.data || typeof e.data !== 'string' || typeof e.data === 'string' && e.data.indexOf('HN') === -1) {\n                return;\n            }\n            let dataFromHN = JSON.parse(e.data);\n            if (dataFromHN.from !== 'HN') {\n                return;\n            }\n            if (dataFromHN.operate === 'refresh') {\n                // 频道刷新\n                if (!dataFromHN.paramToH5 || dataFromHN.paramToH5.indexOf('&') === -1) {\n                    this.sendRequest();\n                } else {\n                    let newRequestParams = {};\n                    // 如果收到了paramToH5参数，那么说明定位信息有变，请求参数改用新的定位信息\n                    dataFromHN.paramToH5.split('&').forEach((item, index) => {\n                        if (!item || !item.split || item.split('=').length !== 2) {\n                            return;\n                        }\n                        let key = item.split('=')[0];\n                        let val = item.split('=')[1];\n                        newRequestParams[key] = decodeURIComponent(val);\n                    });\n                    this.sendRequest(newRequestParams);\n                    this.data.set('requestParams', newRequestParams);\n                }\n            } else if (dataFromHN.theme) {\n                // 频道改变主题\n                const theme = `kangyi-${dataFromHN.theme}`;\n                const IS_IOS = this.data.get('IS_IOS');\n                const $root = document.getElementsByTagName('html')[0];\n                $root.className = `${theme} ${IS_IOS ? 'iphone' : 'android'}`;\n                this.data.set('theme', theme);\n            } else if(dataFromHN.index) {\n                const index = dataFromHN.index;\n                if (+index !== 0) {\n                    this.data.set('topTabSelectedId', +index);\n                    setTimeout(() => {\n                        let height = document.getElementById('appContain').scrollHeight;\n                        console.log('height',height);\n                        window.ReactNativeWebView && window.ReactNativeWebView.postMessage(height);\n                    }, 300)\n                }\n            }\n        });\n        // android\n        document.addEventListener('message', e => {\n            let dataFromHN = JSON.parse(e.data);\n            if (dataFromHN.from !== 'HN') {\n                return;\n            }\n            if (dataFromHN.operate === 'refresh') {\n                // 频道刷新\n                if (!dataFromHN.paramToH5 || dataFromHN.paramToH5.indexOf('&') === -1) {\n                    this.sendRequest();\n                } else {\n                    let newRequestParams = {};\n                    // 如果收到了paramToH5参数，那么说明定位信息有变，请求参数改用新的定位信息\n                    dataFromHN.paramToH5.split('&').forEach((item, index) => {\n                        if (!item || !item.split || item.split('=').length !== 2) {\n                            return;\n                        }\n                        let key = item.split('=')[0];\n                        let val = item.split('=')[1];\n                        newRequestParams[key] = decodeURIComponent(val);\n                    });\n                    this.sendRequest(newRequestParams);\n                    this.data.set('requestParams', newRequestParams);\n                }\n            } else if (dataFromHN.theme) {\n                // 频道改变主题\n                const theme = `kangyi-${dataFromHN.theme}`;\n                const IS_IOS = this.data.get('IS_IOS');\n                const $root = document.getElementsByTagName('html')[0];\n                $root.className = `${theme} ${IS_IOS ? 'iphone' : 'android'}`;\n                this.data.set('theme', theme);\n            } else if(dataFromHN.index) {\n                const index = dataFromHN.index;\n                if (+index !== 0) {\n                    this.data.set('topTabSelectedId', +index);\n                    this.nextTick(() => {\n                        let height = document.getElementById('appContain').scrollHeight;\n                        window.ReactNativeWebView && window.ReactNativeWebView.postMessage(height - 1);\n                    });\n                }\n            } else if (dataFromHN.visible) {\n                if (dataFromHN.visible === 'false') {\n                    ubc('timing', 'end');\n                } else {\n                    ubc('timing', 'start');\n                }\n            }\n        });\n        // 设置webview高度\n        this.nextTick(() => {\n            const requestParams = this.data.get('requestParams');\n            let height = document.getElementById('appContain').scrollHeight;\n            window.ReactNativeWebView && window.ReactNativeWebView.postMessage(height);\n            // 首次进入时页面展示打点\n            if (requestParams.tabVisible === 'true') {\n                let logPageArr = this.data.get('logPageArr');\n                const topTabSelectedId = this.data.get('topTabSelectedId');\n                logPageArr[topTabSelectedId] && ubc('event', {\n                    type: 'display',\n                    page: logPageArr[topTabSelectedId]\n                });\n                // 再打一个抗疫widget的展现点\n                this.ref('widget') && ubc('event', {\n                    type: 'display',\n                    page: 'widget',\n                    source: 'feedky'\n                });\n                // 页面已打点后，logPageArr删除该页面，防止展示打点重复\n                logPageArr[topTabSelectedId] = '';\n                this.data.set('logPageArr', logPageArr);\n                // 时长打点\n                ubc('timing', 'start');\n            }\n        });\n    }\n    perfLog() {\n        const spy = new SpyClient({\n            pid: '10_133',\n            sample: 1\n        });\n        const dim = {\n            os: env.isAndroid ? 'android' : env.isIOS ? 'ios' : 'other',\n            appVersion: env.boxVersion\n        };\n        const sendPerf = info => {\n            spy.sendPerf({\n                info: info,\n                group: 'kangyi_perf',\n                dim\n            });\n        };\n        // lcp\n        spy.listenLCP(sendPerf);\n        // fid\n        spy.listenFID(sendPerf);\n        // tti\n        spy.listenTTI(sendPerf);\n\n        // spy的常规参数\n        spy.listenTiming(metric => {\n            let customPerf = {};\n            const marks = window.SP.data.marks;\n            for (let i in marks) {\n                customPerf[i] = window.SP.cal(i);\n            }\n            sendPerf(Object.assign({}, metric, customPerf));\n        });\n    }\n\n    sendRequest(query) {\n        let requestParams = query || this.data.get('requestParams');\n        axios.get('/newspage/data/epidemic', {\n            params: {\n                ...requestParams,\n                _format: 'json'\n            }\n        }).then(res => {\n            if (res.status === 200) {\n                const data = res.data;\n                const topTabSelectedId = this.data.get('topTabSelectedId');\n                let newFeed = trans(data);\n                for (let index = 0; index < newFeed.length; index++) {\n                    index === topTabSelectedId ? (newFeed[index].is_default = 1) : (newFeed[index].is_default = 0);\n                }\n                /* eslint-disable max-len */\n                try {\n                    if (!topTabSelectedId) {\n                        // 国内疫情下第二个为城市疫情速报\n                        let distributionIndex = 1;\n                        if (newFeed[0]\n                            && newFeed[0].component\n                            && newFeed[0].component[distributionIndex]\n                            && newFeed[0].component[distributionIndex].key === 'domesticDistribution') {\n                            newFeed[0].component[distributionIndex].reportTableHasShow = this.data.get('reportTableHasShow');\n                        }\n                    }\n                } catch (e) {\n                    // error\n                }\n                /* eslint-enable max-len */\n                this.data.set('feed', newFeed);\n                this.nextTick(() => {\n                    let height = document.getElementById('appContain').scrollHeight;\n                    window.ReactNativeWebView && window.ReactNativeWebView.postMessage(height - 1);\n                });\n            }\n        }).catch(() => {\n        });\n    }\n\n    initData() {\n        return {\n            IS_IOS: env.isIOS,\n            styles,\n            feed: [],\n            theme: 'kangyi-light',\n            timeInfo: '',\n            logPageArr: ['domestic', 'local', 'overseas'],\n            requestParams: {\n            },\n            reportTableHasShow: false\n        };\n    }\n}\n\n"]}]}