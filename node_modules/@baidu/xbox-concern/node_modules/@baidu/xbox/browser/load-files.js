/**
 * @file Created on Tue Nov 27 2018
 * @module browser
 * @author wangyongqing <wangyongqing01@baidu.com>
 */

import loadFile from './load-file';

/**
 * 加载多个文件
 * @function loadfiles
 * @param {string[]} paths - The file paths
 * @param {Function} callbackFn - The callback function
 */
export default function loadFiles(paths, callbackFn, args) {
    // listify paths
    paths = paths.push ? paths : [paths];

    let numWaiting = paths.length;
    let len = numWaiting;
    let pathsNotFound = [];

    // define callback function
    const fn = (error, path) => {
        if (error) {
            pathsNotFound.push(path);
        }

        numWaiting--;
        if (!numWaiting) {
            callbackFn(pathsNotFound);
        }
    };

    // load scripts
    for (let i = 0; i < len; i++) {
        loadFile(paths[i], fn, args);
    }
}
