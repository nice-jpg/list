# 组件派发事件规范

## 事件的定义

新增 `@baidu/mo-actions`，用于将组件派发事件名称统一声明为常量定义在这个包中\
同时定义清楚所传参数的类型定义。

每个 action 需要注释写明含义，变量名称和取值都要保证唯一不重复，命名和取值风格尽量一致\
每个 payload 的命名应在 action 变量名称后添加 `_PAYLOAD`，方便开发者使用。

推荐取值：`动:宾:副`

示例用法：

```ts
// 1. 在 mo-actions/index.ts 文件中定义 action 和 payload

/**
 * action: 推荐语点击事件
 */
export const CLICK_PREORDER = 'click:preorder';

/**
 * payload: 推荐语点击事件参数
 */
export interface CLICK_PREORDER_PAYLOAD {
    /**
     * 推荐语在全文中的TTS阅读进度, 主要用于阅读段落切换，该字段未定义时，表明该段落跳过TTS阅读，即不可点击交互和高亮文字
     */
    index?: number;

    /**
     * 推荐语内容-text, 转载自作者-name
     */
    type: 'text' | 'name';
}

// 2. 在某个组件中使用 some-component.ts
import {CLICK_PREORDER} from '@baidu/mo-actions';
import type {CLICK_PREORDER_PAYLOAD} from '@baidu/mo-actions';

...
    someMethod() {
        this.eventDispatch<CLICK_PREORDER_PAYLOAD>(CLICK_PREORDER, 'payload');
    }
...

// 在某个 action 定义中使用 some-action.ts
import {CLICK_PREORDER} from '@baidu/mo-actions';
import type {CLICK_PREORDER_PAYLOAD} from '@baidu/mo-actions';

const actionList = {
    [CLICK_PREORDER](payload: CLICK_PREORDER_PAYLOAD, {dispatch, getState}) {
        // your action code
    }
};

// then store add this action
```

> 说明：每个组件都可能依赖 `@baidu/mo-actions` 这个包，但是我们不必为每个组件都声明依赖，作为隐式的依赖即可，只需要在框架代码中安装所需版本即可，
> 这样可以实现依赖版本一致的目的，并且不会因为频繁的更新或升级这个包带来麻烦。
