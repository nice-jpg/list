"use strict";
/**
 * @file 日期格式化
 * @author wangyongqing <wangyongqing01@baidu.com>
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.dateFormat = void 0;
var type_1 = require("./type");
var type_error_1 = require("./type-error");
/**
 * 日期格式化
 *
 * @param date date 对象
 * @param [pattern = 'yyyy-MM-dd'] 字符串
 * @return 处理后的字符串
 * @example
 * var date = new Date();
 * dateFormat(date, " yyyy年M月d日\n yyyy-MM-dd\n MM-dd-yy\n yyyy-MM-dd hh:mm:ss")
 * 返回：2018年11月10日\n 2018-01-01\n 01-01-18\n 2018-11-12 12:01:02
 */
function dateFormat(date, pattern) {
    if (pattern === void 0) { pattern = 'yyyy-MM-dd'; }
    if (!(0, type_1.isType)(date, 'date')) {
        throw (0, type_error_1.typeError)('date', 'Date', date);
    }
    var conf = {
        y: date.getFullYear().toString(),
        M: date.getMonth() + 1,
        d: date.getDate(),
        h: date.getHours(),
        m: date.getMinutes(),
        s: date.getSeconds(), // second
    };
    Object.entries(conf).forEach(function (_a) {
        var key = _a[0], val = _a[1];
        var regex = new RegExp("(" + key + "+)", key === 'y' ? 'gi' : 'g');
        pattern = pattern.replace(regex, function (match) {
            if (key === 'y') {
                return val.slice(Math.max(0, val.length - match.length));
            }
            return val < 10 && match.length > 1 ? "0" + val : val;
        });
    });
    return pattern;
}
exports.dateFormat = dateFormat;
