/**
 * @file 解析 url
 * @author wangyongqing <wangyongqing01@baidu.com>
 */

import {query2json} from './query2json';

/**
 * 解析 url，返回 url 和 query
 *
 * @param input 需要解析的地址
 * @param [parseQueryString = false] 是否解析 query 为 object
 * @return 返回 {url, query} 对象
 * @example
 * parseUrl('http://baidu.com?abc=1', true);
 *  {
 *      url: 'http://baidu.com',
 *      query: {
 *          abc: 1
 *      }
 *  }
 * parseUrl('http://baidu.com?abc=1')
 *  {
 *      url: 'http://baidu.com',
 *      query: 'abc=1'
 *  }
 */
export function parseUrl(input: string, parseQueryString = false) {
    const [url, query = ''] = input.split('?');
    return {
        url,
        query: parseQueryString ? query2json(query) : query,
    };
}
