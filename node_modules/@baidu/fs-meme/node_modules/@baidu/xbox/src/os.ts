/**
 * 这里是精简版本的 is
 * @module os
 * @file Created on Mon Nov 26 2018
 * @author wangyongqing <wangyongqing01@baidu.com>
 */

import {UA} from './ua';

/**
 * 是否是安卓
 *
 * @param ua 默认是 userAgent
 * @return 判断结果
 */
export function isAndroid(ua = UA) {
    return /(Android);?[\s/]+([\d.]+)?/.test(ua);
}

/**
 * 是否是ios
 *
 * @param ua 默认是 userAgent
 * @return 判断结果
 */
export function isIOS(ua = UA) {
    return /(iPhone|iPod|iPad)/.test(ua);
}

/**
 * 获取系统名称
 *
 * @param ua 默认是 userAgent
 * @return ios/android/unknown
 */
export function getOSName(ua = UA) {
    return isIOS(ua) ? 'ios' : isAndroid(ua) ? 'android' : 'unknown';
}

/**
 * 获取系统版本
 *
 * @param ua 默认是浏览器 userAgent
 * @return 系统版本
 */
export function getOSVersion(ua = UA) {
    const android = /(Android);?\s+([\d.]+)?/.exec(ua);
    if (android) {
        return android[2];
    }
    const iphone = /(iPhone\sOS)\s([\d_]+)/.exec(ua);
    if (iphone) {
        return iphone[2].replace(/_/g, '.');
    }
    return '0';
}
