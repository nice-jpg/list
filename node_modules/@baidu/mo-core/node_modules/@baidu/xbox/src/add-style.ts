/**
 * @file Created on Mon Dec 03 2018
 * @author wangyongqing <wangyongqing01@baidu.com>
 */

let doc: Document | null = null;
let parentNode: Element | null = null;

/**
 * 给页面添加CSS样式
 *
 * @param url CSS链接或者是CSS样式
 */
export function addStyle(url: string) {
    if (!doc) {
        doc = document;
        parentNode = doc.head || doc.body || doc.getElementsByTagName('script')[0] || {};
    }

    if (/.+\.css$/.test(url)) {
        const link = doc.createElement('link');
        link.type = 'text/css';
        link.rel = 'stylesheet';
        link.href = url;
        parentNode?.appendChild(link);
    }
    else {
        const style = doc.createElement('style');
        style.type = 'text/css';
        // style.innerHTML = url; // innerHTML 触发安全检查问题
        style.innerText = url;
        parentNode?.appendChild(style);
    }
}
