/**
 * @file send 方法
 * @author wangbing11(wangbing11@baidu.com)
 */

// Set the name of the hidden property and the change event for visibility


export function regestPageVisibilityEvent(handler) {
    try {
        let hidden;
        let visibilityChange;
        if (typeof document.hidden !== 'undefined') { // Opera 12.10 and Firefox 18 and later support
            hidden = 'hidden';
            visibilityChange = 'visibilitychange';
        }
        else if (typeof document.msHidden !== 'undefined') {
            hidden = 'msHidden';
            visibilityChange = 'msvisibilitychange';
        }
        else if (typeof document.webkitHidden !== 'undefined') {
            hidden = 'webkitHidden';
            visibilityChange = 'webkitvisibilitychange';
        }
        else if (typeof document.baiduboxappvisibilitychange !== 'undefined') {
            hidden = 'webkitHidden';
            visibilityChange = 'webkitvisibilitychange';
        }

        let handleVisibilityChange = function () {
            handler(!!document[hidden]);
        };

        if (typeof document.addEventListener === 'undefined' || hidden === undefined) {
            return;
        }
        // Handle page visibility change
        document.addEventListener(visibilityChange, handleVisibilityChange, false);
    } catch (e) {

    }
}
