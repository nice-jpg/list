# spy-log


## 介绍
spy平台的日志采集模块，提供一系列方便的api供使用

## 命令行使用

安装
```
npm install @baidu/spy --save --registry=http://registry.npm.baidu-int.com
```


## API

使用

初始化
```javascript
const Spy = require('@baidu/spy');
const spy = new Spy({
    pid: '1_1000', // 必须
    lid: '', // 可选，页面的logid
    sample: 1 // 可选，默认为1, 全局抽样，取值：[0-1], 所有发送接口都受到该抽样，单个发送接口的sample配置会覆盖该抽样。
});
```

发送性能日志
```javascript
// 发送性能日志
spy.sendPerf({
    // 可选, 分组，默认common，用户自定义
    group: 'test',
    // 必须, 指标信息，每个字段为一个指标，由用户自定义，这里的fisrtScreen、whiteScreen等都是业务自己定义，后续会在平台上配置好，平台会从该字段取对应指标信息。
    // 这些指标需要你自行计算好时间再发送，不能带单位
    info: {
        fisrtScreen: 1200,
        whiteScreen: 600
    },
    // 可选，维度信息，每个字段为一个维度，由用户自定义，这里的netType、pageType都是业务自己定义，后续会在平台上配置好，平台会从该字段取对应维度信息。
    dim: {
        os: 'ios',
        netType: 'wifi'
    }
});
```

更多使用，请看spy平台 [spy.baidu.com](spy.baidu.com)
