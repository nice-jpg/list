"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

/**
 * @file onVisibilitychange
 * @author zhangtingting12 <zhangtingting12@baidu.com>
 */

/**
 * 视图可见状态切换
 * @param {object} 页面可见回调，及不可见回调
 */
var _default = function _default(_ref) {
  var showCb = _ref.showCb,
      hiddenCb = _ref.hiddenCb,
      show = _ref.show,
      hidden = _ref.hidden,
      hide = _ref.hide;
  showCb = showCb || show;
  hiddenCb = hiddenCb || hidden || hide;
  var state = '';
  var visibilityChange = '';

  if (typeof document.visibilityState !== 'undefined') {
    state = 'visibilityState';
    visibilityChange = 'visibilitychange';
  } else if (typeof document.webkitVisibilityState !== 'undefined') {
    state = 'webkitVisibilityState';
    visibilityChange = 'webkitvisibilitychange';
  }

  if (!visibilityChange) {
    /* eslint-disable no-console */
    console.log('browser donot supports the Page Visibility API.');
    /* eslint-enable no-console */

    return;
  } // safari 7 和其他现代浏览器生效 android 4.4及以上生效


  document.addEventListener(visibilityChange, function () {
    if (document[state] === 'visible') {
      showCb && showCb();
    } else {
      hiddenCb && hiddenCb();
    }
  }, false);
};

exports.default = _default;