/**
 * @file 复制文本内容
 * @author jiangxiaoli(jiangxiaoli01@baidu.com)
 */
import {isIOS, isAndroid} from '../../browser/detect';
import version_compare from '../../version_compare';
import getBoxVersion from '../../get-box-version';
import isMatrix from '../../is-matrix';
import {COMMAND_NOT_EXIST} from '../const';
import {invokeApp} from '../ios';
import {prompt} from '../android';

export default data => {
    const version = getBoxVersion();
    const other = isMatrix();
    if (isAndroid() && (version_compare(version, '8.0') >= 0 || other)) {
        prompt('Bdbox_android_utils', 'copy', [data, '__cmt_copyRn']);
        return Promise.resolve();
    }
    // IOS下判断能否使用端能力
    if (isIOS() && (version_compare(version, '5.4') >= 0 || other)) {
        invokeApp('copy', {
            text: data,
            minver: '7.5.0.0'
        }, '__cmt_copyRn');
        return Promise.resolve();
    }
    return Promise.reject(COMMAND_NOT_EXIST);
};
