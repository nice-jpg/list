"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _register = _interopRequireDefault(require("../register"));

var _index = require("./index");

var _version_compare = _interopRequireDefault(require("@baidu/xbox/es5/version_compare"));

var _getBoxVersion = _interopRequireDefault(require("@baidu/xbox/es5/get-box-version"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * @file 获取是否支持 webp
 * @module data
 * @author wangyongqing <wangyongqing01@baidu.com>
 */
var boxVersion = (0, _getBoxVersion.default)();
(0, _register.default)('feed/getIsWebp', {
  v: 10,
  hasCB: true,
  versionRange: ['9.0.5'],
  notSupport: ['ios'],
  notSupportFrame: ['search'],
  androidliteVersionRange: ['3.6'],
  iosinfoVersionRange: ['1.3.1.10'],
  iosmissionVersionRange: ['1.0'],
  androidmissionVersionRange: ['1.0'],
  filter: function filter() {
    return {
      module: 'feed',
      action: 'isWebp'
    };
  },
  thunk: function thunk(res) {
    if ((0, _version_compare.default)(boxVersion, '9.2') >= 0 || !!res.status) {
      var data;

      if (res.status === '0') {
        data = res.data.result;
      } else {
        data = {};
      }

      return {
        status: res.status,
        data: data,
        message: res.message
      };
    }

    return {
      status: 0,
      data: res.result
    };
  }
});
/**
 * getIsWebp
 * @function getIsWebp
 */

var _default = function _default() {
  return (0, _index.get)({
    name: 'feed-isWebp'
  });
};

exports.default = _default;