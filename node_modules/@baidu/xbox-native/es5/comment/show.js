"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _detect = require("../detect");

var _utils = require("../utils");

var _android = require("../android");

var _ios = require("../ios");

var _const = require("../const");

var _stringify = _interopRequireDefault(require("../stringify"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * @file 调起评论面板
 * @module comment
 * @author wangyongqing <wangyongqing01@baidu.com>
 */
var version = (0, _detect.getBoxVersion)();
var isLiteOrInfo = (0, _detect.isBox)('lite') || (0, _detect.isBox)('info') || (0, _detect.isBox)('mission');
/**
 * 显示评论面板
 * @function show
 * @param {object} params - 显示评论面板参数对象，data 部分
 * @return {Promise}
 */

var _default = function _default(params) {
  if ((0, _detect.isBox)() && (0, _detect.version_compare)(version, '8.0') >= 0 || isLiteOrInfo) {
    if (params && (0, _utils.isPlainObject)(params)) {
      if ((0, _detect.version_compare)(version, '8.2') < 0 || isLiteOrInfo) {
        delete params.rename;
      }

      if ((0, _detect.version_compare)(version, '8.5') < 0 || isLiteOrInfo) {
        delete params.placeholder;
      }

      if ((0, _detect.isAndroid)()) {
        (0, _android.prompt)('Bdbox_android_comment', 'showCommentBox', [(0, _stringify.default)(params), '']);
      } else {
        (0, _ios.invokeApp)('comment', {
          action: 'showCommentBox',
          params: (0, _stringify.default)(params, true),
          minver: '8.0.0.0'
        }, '');
      }

      return Promise.resolve();
    }
  }

  return Promise.reject(_const.COMMAND_NOT_EXIST);
};

exports.default = _default;