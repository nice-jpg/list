/**
 * @file Created on 2018-12-4
 * @module data
 * @author panming <panming@baidu.com>
 */

import register from '../register';
import {get} from './index';
import {getParams} from '../utils';
register('feed/getContextInfo', {
    androidlite: {
        versionRange: ['2.2.2'],
        supportFrame: ['hybrid']
    },
    androidinfo: {
        versionRange: ['1.0'],
        supportFrame: ['hybrid']
    },
    iosinfo: {
        versionRange: ['1.1']
    },
    androidmission: {
        versionRange: ['1.0']
    },
    iosmission: {
        versionRange: ['1.0']
    },
    ios: {
        versionRange: ['7.3'],
        supportFrame: ['h5', 'hybrid'],
        filter() {
            return {
                module: 'feed',
                action: 'getContextInfo'
            };
        },
        thunk(res) {
            return {
                status: res.errno === '1' ? 0 : res.errno,
                message: res.errmsg || '',
                data: res.data
            };
        }
    },
    android: {
        versionRange: ['7.3'],
        supportFrame: ['hybrid'],
        filter() {
            return {
                module: 'Bdbox_android_feed',
                action: 'getContextInfo'
            };
        },
        thunk(res) {
            return {
                status: res.errno === '1' ? 0 : res.errno,
                message: res.errmsg,
                data: res.data
            };
        }
    }
});
/**
 * 获取 getFavorInfo
 * @function getFavorInfo
 */
export default (data = {}) => get(getParams('feed-contextInfo', data));
