/**
 * @file 矩阵调起任务toast
 * @module view
 * @author zhangtingting12 <zhangtingting12@baidu.com>
 */

import {COMMAND_NOT_EXIST} from '../const';
import getBoxName from '@baidu/xbox/get-box-name';
import {invokeP} from '../invoke';
import {version_compare, getBoxVersion, isMaybeBox} from '../detect';

/**
 * @function appTab
 * @param {object} params - 调起参数，{item:home,upgrade=1,taskId=}
 * @return {Promise} promise - Promise
 */
export default (params = {}, schemaHead = 'baiduboxlite') => {
    const boxname = getBoxName();
    const version = getBoxVersion(boxname);
    const cpVersion = params.taskId ? '3.9' : '3.3';
    if (isMaybeBox('lite,info') && version_compare(version, cpVersion) >= 0) {
        return invokeP('v34/appTab/select', params, schemaHead);
    }
    return Promise.reject(COMMAND_NOT_EXIST);
};

