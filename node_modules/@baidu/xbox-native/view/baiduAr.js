/**
 * @file 
 * @author panming <panming@baidu.com>
 */
import {isBox, isAndroid} from '../detect';
import stringify from '../stringify';
import invoke from '../ios/index';
import {prompt} from '../android/index';

export default (arValue) => {
    if (isBox()) {
        if (isAndroid()) {
            const intent = ['intent:widgetid://com.baidu.searchbox/-1#Intent;'
                + 'action=com.baidu.searchbox.action.ar_invoke;'
                + 'category=android.intent.category.LAUNCHER;'
                + 'component=com.baidu.searchbox/.CodeScannerActivity;'
                + 'launchFlags=0x10000000;S.arValue='
                + stringify(arValue)+ ';end'
            ];
            prompt('Bdbox_android_send_intent', 'send', intent);
            return Promise.resolve();

        } else {
            let cmd = 'baiduboxapp://imagesearch?action=ar_invoke&arValue=' + stringify(arValue);
            invoke(cmd);
            return Promise.resolve();
        }
    }
    return Promise.reject({
        errCode: 902,
        errMsg: '手百外无法调用端能力'
    });
};
