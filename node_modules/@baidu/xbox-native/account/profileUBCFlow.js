/**
 * @file 个人主页时长统计 界面
 * @module account
 * @author panming <panming@baidu.com>
 */

import {invokeP} from '../invoke';
import {isAndroid, version_compare, getBoxVersion, isMaybeBox} from '../detect';
import stringify from '../stringify';
import {COMMAND_NOT_EXIST} from '../const';

/**
 * @function profileUBCFlow
 * @param {object} options - 调起参数，{uk:xxx}
 * @param {number} upgrade - 低版本是否强制升级，默认是**强制**
 * @return {Promise} promise - Promise
 */
export default (options, upgrade = 1) => {
    const version = getBoxVersion();
    if ((version_compare(version, '9.1') >= 0 && isAndroid()) || isMaybeBox('info,mission,baiduboxvision')) {
        return invokeP('v11/account/profile/ubcflow', {
            params: stringify(options, true),
            upgrade
        });
    }
    return Promise.reject(COMMAND_NOT_EXIST);
};
