/**
 * @file 给端传数据
 * @module event
 * @author panming <panming@baidu.com>
 */

import {version_compare, getBoxVersion, isMatrix} from '../detect';
import {invokeP} from '../invoke';
import stringify from '../stringify';
import {COMMAND_NOT_EXIST} from '../const';

/**
 * 给端传数据
 * @function notify
 * @param {object} params
 * @return {Promise}
 */
export default params => {
    const version = getBoxVersion();
    if (version_compare(version, '10.0') >= 0 || isMatrix()) {
        return invokeP('v16/feed/eventNotify', {
            params: stringify(params, true)
        });
    }
    return Promise.reject(COMMAND_NOT_EXIST);
};
