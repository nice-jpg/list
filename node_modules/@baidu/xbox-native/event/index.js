/**
 * @file event
 * @author wangyongqing01@baidu.com
 */
import event from 'boxjs/dist/components/event/index';
import {isPlainObject} from '@baidu/xbox/is';

export const {fire, on, off} = event;
export default event;

export const paramsFilter = (data, encode = true) => {
    if (data.name === 'tts') {
        data.action = 'com.baidu.channel.tts.statuschange';
    } else {
        data.action = 'com.baidu.channel.' + data.name;
    }
    delete data.name;

    if (encode) {
        for (let key in data) {
            if (isPlainObject(data[key])) {
                data[key] = JSON.stringify(data[key]);
            }
        }
    }

    return data;
};
