/**
 * @file Created on 2018-12-03
 * @module hybrid
 * @author panming <panming@baidu.com>
 */
import {isIOS, isAndroid, version_compare, getBoxVersion} from '../detect';
import {invokeP} from '../invoke';
import stringify from '../stringify';
import {COMMAND_NOT_EXIST} from '../const';

/**
 * jsStartPoint
 * @function jsStartPoint
 * @param {object} [data={}] - ubc 参数
 */
export default (params, upgrade = 0) => {
    const version = getBoxVersion();
    if (version_compare(version, '10.1') >= 0 && isIOS()) {
        return invokeP('v17/feed/jsStartPoint', {
            params: stringify(params, true),
            upgrade
        });
    } else if (version_compare(version, '11.0') >= 0 && isAndroid()) {
        return invokeP('v36/hybrid/jsStartPoint', {
            params: stringify(params, true),
            upgrade
        });
    }
    return Promise.reject(COMMAND_NOT_EXIST);
};
