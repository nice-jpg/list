/**
 * @file 评论低版底部bar端能力
 * @author jiangxiaoli(jiangxiaoli01@baidu.com)
 * @param {Object} data - 发送端的数据
 */

import version_compare from '../../version_compare';
import getBoxVersion from '../../get-box-version';
import isMatrix from '../../is-matrix';
import {COMMAND_NOT_EXIST} from '../const';
import {isAndroid, isIOS} from '../../browser/detect';
import {invokeApp} from '../ios';
import {prompt} from '../android';

export default data => {
    const version = getBoxVersion();
    const other = isMatrix();
    if (isAndroid() && (version_compare(version, '7.7') >= 0 || other)) {
        prompt(
            'Bdbox_android_utils',
            'setToolBarIcons',
            [JSON.stringify(data)]
        );
        return Promise.resolve();
    }
    if (isIOS() && (version_compare(version, '7.7') >= 0 || other)) {
        invokeApp('utils', {
            action: 'setToolBarIcons',
            params: JSON.stringify(data),
            minver: '7.7'
        }, '');
        return Promise.resolve();
    }
    return Promise.reject(COMMAND_NOT_EXIST);
};
