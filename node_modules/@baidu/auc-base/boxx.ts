/**
 * @file boxx
 * @author gaohong(gaohong01@baidu.com)
 */

// 引入 boxx sdk
import boxx from '@baidu/boxx';
import {env} from './env';
// 引入业务对应的兜底描述表， 仅在低版本引入
import versionCompare from '@baidu/xbox/version_compare';
if (!env.isSSR) {
    // 注入兜底描述表
    const useAppDescpiton = Math.random() <= 0.05 && versionCompare(env.boxVersion, '13.0.0') >= 0;
    if(!useAppDescpiton) {
        import('@baidu/boxx/dist/feedDescription').then(feedDescription => {
            boxx.setDefaultDescription(feedDescription);
        })
    }
    // 错误监控
    boxx.on('error', function (err) {
        console.log(err);
    });
}
export default boxx;