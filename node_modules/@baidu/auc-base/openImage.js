/**
 * @file 打开图片查看器
 * @author gaohong <gaohong01@baidu.com>
 */

import {env} from '@baidu/auc-base/env';
import boxx from '@baidu/auc-base/boxx';
import versionCompare from '@baidu/xbox/version_compare';
import {invokeP} from '@baidu/xbox/na/invoke';

export const openImage = ({nid = '', imageList = [], index = 0}) => {
    if ((env.isBaiduApp && versionCompare(env.boxVersion, '11.13')) >= 0 || env.isBoxSeries) {
        invokeP('v19/utils/previewImage', {
            params: encodeURIComponent(JSON.stringify({
                urls: imageList,
                current: imageList[index]
            }))
        });
    } else {
        boxx.call('album.image.open', {
            type: '0',
            url: imageList,
            index: index,
            source: 'feed_topic'
        });
    }
};