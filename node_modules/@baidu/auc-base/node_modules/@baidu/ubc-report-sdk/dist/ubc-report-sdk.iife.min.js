!function(){"use strict";function e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function t(t){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?e(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,p(a.key),a)}}function o(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t,i){return(t=p(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var s=function(){try{return window.navigator.userAgent}catch(e){return""}},u=function(){try{return document.location}catch(e){return{href:"",protocol:"https:",origin:"",pathname:""}}};function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+(~e.indexOf("?")?"&":"?")+function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)return"";var t="";for(var a in e)if(e.hasOwnProperty(a)){var n=e[a];null==n?n="":"object"===i(n)&&(n=JSON.stringify(n)),t+="&"+encodeURIComponent(a)+"="+encodeURIComponent(n)}return t.slice(1)}(t)}function l(e){var t=i(e);return"function"===t||!!e&&"object"===t}var c=function(e){for(var t,i=u().href,a=new RegExp("[\\?&]([^\\?&\\=\\/]+)=([^\\?\\&\\=\\/]*)","g"),n={};null!==(t=a.exec(i));)n[t[1]]=t[2];return e?n[e]:n},m=function(e,t){var i={};return Object.keys(t).forEach((function(e){t[e]&&(i[e]=t[e])})),0===Object.keys(i).length?e:d(e,i)},h=function(e){var t=document.cookie||"";return decodeURIComponent(t.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||""},g=function e(i,a){return l(i)&&l(a)?Object.keys(t(t({},i),a)).reduce((function(t,n){return t[n]=e(i[n],a[n]),t}),Array.isArray(i)?[]:{}):void 0===a?i:a},f={UBC_URL:(["http:","https:"].includes(u().protocol)?u().protocol:"https:")+"//h2tcbox.baidu.com/ztbox",TEST_UBC_URL:"http://bjyz-mco-searchbox201609-m12xi3-044.bjyz.baidu.com:8080/ztbox",DEFAULT_LOG_DATA:{cateid:"99",actiondata:{id:"0",type:"0",timestamp:0,content:{page:"-",type:"-",value:"-",source:"default",from:"act",ext:{apptype:"-"}}}},DEFAULT_QUERY:{action:"zpblog",v:"2.0",appname:"baiduboxapp",from:"",cfrom:"",smfw:""}},v={UBC_URL:u().protocol+"//h2tcbox.baidu.com/ztbox",TEST_UBC_URL:"http://bjyz-mco-searchbox201609-m12xi3-044.bjyz.baidu.com:8080/ztbox",DEFAULT_LOG_DATA:{cateid:"101",data:[]},DEFAULT_QUERY:{action:"mpblog",v:"2.0",appname:"baiduboxapp",from:"",cfrom:"",smfw:"",sid:"",sn:""}},b=function(e){var t=document.createElement("img");return t.width=1,t.height=1,t.src=e,t},y=100;function w(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.useXhr?function(e,t){var i="post"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).sendMethod?"POST":"GET";return e="POST"===i?e:d(e,{data:t}),new Promise((function(a,n){var o=new XMLHttpRequest;o.addEventListener("loadend",(function(){200===o.status?a():n()})),o.open(i,e),o.withCredentials=!0,"POST"===i?(o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send("data="+encodeURIComponent(JSON.stringify(t)))):o.send()}))}(e,t,i):"function"==typeof window.navigator.sendBeacon&&i.useSendBeacon?function(e,t,i){return new Promise((function(a,n){("post"===i.sendMethod?window.navigator.sendBeacon(d(e,{data:t})):window.navigator.sendBeacon(e,"data="+encodeURIComponent(JSON.stringify(t))))?a():n()}))}(e,t,i):function(e,t){return new Promise((function(i,a){e=d(e,{data:t});var n=b(e),o=!1;setTimeout((function(){o||(i(),o=!0)}),y),n.onload=n.onerror=function(){n=null,o||(i(),o=!0)}}))}(e,t)}var L=[{appname:"baiduboxmission",reg:/\bmission\sbaiduboxapp\b/i,appid:"10006"},{appname:"baiduboxlite",reg:/\b(?:lite|info) baiduboxapp\b/i,appid:"10001"},{appname:"baiduboxapp",reg:/\bbaiduboxapp\b/i,appid:"1"},{appname:"tieba",reg:/\btieba\b/i,appid:"11001"},{appname:"haokan",reg:/\bhaokan\b/i,appid:"11000"},{appname:"quanmin",reg:/\bbdminivideo\b/i,appid:"12022"},{appname:"bdmap",reg:/\bbaidumap_/i,appid:"11006"},{appname:"wangpan",reg:/\bnetdisk;/i,appid:"12018"},{appname:"askmybaby",reg:/\bmybaby\//i,appid:"12019"},{appname:"xifan",reg:/\bbdxifan\//i,appid:"12006"},{appid:"12031",appname:"sowhat"},{appid:"12010",appname:"lemon",reg:/lemonapp/i},{appid:"12015",appname:"baijiahao"},{appid:"12012",appname:"fanle"},{appid:"12013",appname:"zhaocaimao"},{appid:"12014",appname:"gamenow"},{appid:"12016",appname:"iqiyi"},{appid:"12017",appname:"baike"},{appid:"12023",appname:"flow"},{appid:"12026",appname:"dutaxi"},{appid:"12011",appname:"youjia"},{appid:"12020",appname:"feedsunion"},{appid:"12021",appname:"album"},{appid:"12024",appname:"webgame"},{appid:"12027",appname:"hmi_passenger"},{appid:"12028",appname:"bdwenku"},{appid:"12029",appname:"fanyi"},{appid:"12030",appname:"iknow"},{appid:"12025",appname:"duxiaoxiao"},{appid:"12032",appname:"baiduhanyu"},{appid:"12034",appname:"exp"},{appid:"12036",appname:"demo"},{appid:"12037",appname:"baiduyuedu"},{appid:"12038",appname:"cdm"},{appid:"12040",appname:"weiba"},{appid:"12041",appname:"baiduboxvision"},{appid:"12042",appname:"hiphop"},{appid:"12043",appname:"robobus-panel"},{appid:"12044",appname:"wenkustudent"},{appid:"12045",appname:"pc_live"},{appid:"12049",appname:"yunshangbaidu"},{appid:"12050",appname:"baiduwenku_pc"},{appid:"12051",appname:"yinci"},{appid:"12052",appname:"novel"},{appid:"12054",appname:"yoopu"},{appid:"12057",appname:"yinbo"},{appid:"12062",appname:"aiqicha"},{appid:"12066",appname:"Bamboo_Health"},{appid:"12067",appname:"Bamboo_Health_Dr"},{appid:"12073",appname:"superduer"},{appid:"12074",appname:"baidujiankangapp"},{appid:"12075",appname:"bdcrm_aifanfan"},{appid:"12077",appname:"muzhidoctor"},{appid:"12079",appname:"apollogo"},{appid:"12080",appname:"lvlin"},{appid:"12083",appname:"aipurchase"},{appid:"12088",appname:"BaiDuCarLife"},{appid:"12090",appname:"baidujiankangtt"},{appid:"12092",appname:"infoflow",reg:/\bbaiduhi/i},{appid:"12094",appname:"hmi_driver"},{appid:"12095",appname:"vr_expo"},{appid:"12096",appname:"content_ecommerce"},{appid:"12097",appname:"play_control"},{appid:"12098",appname:"aipurchaser"},{appid:"12101",appname:"ditutaojin"},{appid:"12102",appname:"hp_location"},{appid:"12106",appname:"chatroom"},{appid:"12107",appname:"gaia"},{appid:"12108",appname:"ubi"},{appid:"12109",appname:"yiju"},{appid:"12111",appname:"bml"},{appid:"12112",appname:"aihome"},{appid:"12113",appname:"aihome_children"},{appid:"12114",appname:"mobsecurity"},{appid:"12117",appname:"tomas"},{appid:"12118",appname:"baidu_flutter"},{appid:"12120",appname:"wepod"},{appid:"12121",appname:"yy"},{appid:"12122",appname:"kidedu"},{appid:"12123",appname:"wangpan_faster"},{appid:"12124",appname:"wepod_mobile"},{appid:"12125",appname:"baidu_vr_classroom_launcher"},{appid:"12407",appname:"bdhkvideo"}],_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={appname:"other",appid:"12133"};if(e){var i=L.find((function(t){return e===t.appname}));return i||t}var a=s(),n=L.find((function(e){return e.reg?e.reg.test(a):-1!==a.search(e.appname)}));return n||t},T=function(){function e(t){var i=t.logFn,n=void 0===i?function(){}:i;a(this,e),this.logFn=n,this.logArray=[],this.mergeNumMax=5,this.mergeInterval=5,this.timeId=null}return o(e,[{key:"set",value:function(e){var t=e.mergeNumMax,i=e.mergeInterval;t&&(this.mergeNumMax=t),i&&(this.mergeInterval=i)}},{key:"add",value:function(e){var t=this;this.logArray.push(e),1===this.logArray.length?this.timeId=setTimeout((function(){t.clearAll()}),1e3*this.mergeInterval):this.logArray.length>=this.mergeNumMax&&this.clearAll()}},{key:"clearAll",value:function(){this.logArray.length>0&&(this.logFn(this.logArray),this.logArray=[]),this.timeId&&(clearTimeout(this.timeId),this.timeId=null)}}]),e}(),I=function(){function e(t){var i=t.ifHeartbeatTime,n=void 0===i||i,o=t.duration,r=void 0===o?3:o,p=t.logFn,s=void 0===p?function(){}:p;a(this,e),this.starttime=Date.now(),this.ifHeartbeatTime=n,this.logFn=s,this.intervalId=null,this.duration=r,this.flag="STOP"}return o(e,[{key:"sendLog",value:function(){if(this.ifHeartbeatTime)this.logFn({starttime:this.starttime,duration:this.duration});else{var e=Date.now();this.logFn({starttime:this.starttime,duration:(e-this.starttime)/1e3,endtime:e})}}},{key:"start",value:function(){var e=this;"RUNNING"!==this.flag&&(this.flag="RUNNING",this.starttime=Date.now(),this.ifHeartbeatTime&&(this.sendLog(),this.intervalId=setInterval((function(){e.sendLog()}),1e3*this.duration)))}},{key:"stop",value:function(){"RUNNING"===this.flag&&(this.ifHeartbeatTime?(this.sendLog(),clearInterval(this.intervalId),this.intervalId=null):this.sendLog(),this.flag="STOP")}},{key:"autoStop",value:function(){"RUNNING"===this.flag&&(this.stop(),this.flag="AUTO_STOP")}}]),e}(),k=5,U=!1,O="",D=null;function x(e){U||S();var t=Date.now();if(!D[O])if(D.length>=k){var i=Object.keys(D).reduce((function(e,t){return"length"!==D[t]&&D[t].time<=e.time?{time:D[t].time,path:t}:e}),{time:t,path:""}).path;delete D[i]}else D.length++;D[O]={list:e,time:t},localStorage.setItem("RETRY_LOG_LIST",JSON.stringify(D))}function S(){var e;U||(U=!0,O=u().origin+u().pathname);try{D=JSON.parse(localStorage.getItem("RETRY_LOG_LIST"))||{length:0}}catch(e){D={length:0}}return(null===(e=D[O])||void 0===e?void 0:e.list)||[]}var M=function(){function e(t){var i=t.logFn,n=void 0===i?function(){}:i;a(this,e),this.logFn=n,this.retryLogList=this._getInitErrLogs(),this.retryTimesMax=3,this.retryLogListMax=5,this._retryIntervalTimer=null}return o(e,[{key:"_getInitErrLogs",value:function(){var e=this,i=S();return new Map(i.map((function(i){return[i[0],t(t({},i[1]),{},{failTimes:1,sendCountDown:e._getDelayTime(i.failTimes)})]})))}},{key:"_getDelayTime",value:function(e){return{0:1,1:1,2:5}[e]||10+Math.floor(5*Math.random()+1)}},{key:"active",value:function(){var e=this;!this._retryIntervalTimer&&this.retryLogList.size>0&&(this._retryIntervalTimer=setInterval((function(){e._retryIntervalTimerHandler()}),1e3))}},{key:"addLog",value:function(e){var t=e.url,i=e.loggerData,a=e.loggerId;if(this.retryLogList.set(a,{url:t,loggerData:i,loggerId:a,failTimes:1,sendCountDown:this._getDelayTime(1)}),this.retryLogList.size>this.retryLogListMax){var n=this.retryLogList.keys().next().value;this.retryLogList.delete(n)}this.active(),x(Array.from(this.retryLogList))}},{key:"removeLog",value:function(e){e&&this.retryLogList.delete(e)&&(0===this.retryLogList.size?(U||S(),D[O]&&(delete D[O],D.length--),localStorage.setItem("RETRY_LOG_LIST",JSON.stringify(D))):x(this.retryLogList))}},{key:"updateLog",value:function(e){if(e){var t=this.retryLogList.get(e);if(t){var i=t.failTimes;i+1>this.retryTimesMax?this.removeLog(e):(t.failTimes=i+1,t.sendCountDown=this._getDelayTime(t.failTimes))}}}},{key:"_retryIntervalTimerHandler",value:function(){var e=this;this.retryLogList.forEach((function(t){t.sendCountDown<0||(0==+t.sendCountDown?(t.sendCountDown=-1,e._sendLog(t)):t.sendCountDown=t.sendCountDown-1)})),0===this.retryLogList.size&&(clearInterval(this._retryIntervalTimer),this._retryIntervalTimer=null)}},{key:"_sendLog",value:function(e){var t=this;this.logFn(e.url,e.loggerData).then((function(){t.removeLog(e.loggerId)})).catch((function(){t.updateLog(e.loggerId)}))}}]),e}(),P=function e(t){function i(e,t){return e>>>t|e<<32-t}for(var a,n,o=Math.pow(2,32),r="length",p="",s=[],u=8*t[r],d=e.h=e.h||[],l=e.k=e.k||[],c=l[r],m={},h=2;c<64;h++)if(!m[h]){for(a=0;a<313;a+=h)m[a]=h;d[c]=Math.pow(h,.5)*o|0,l[c++]=Math.pow(h,1/3)*o|0}for(t+="";t[r]%64-56;)t+="\0";for(a=0;a<t[r];a++){if((n=t.charCodeAt(a))>>8)return;s[a>>2]|=n<<(3-a)%4*8}for(s[s[r]]=u/o|0,s[s[r]]=u,n=0;n<s[r];){var g=s.slice(n,n+=16),f=d;for(d=d.slice(0,8),a=0;a<64;a++){var v=g[a-15],b=g[a-2],y=d[0],w=d[4],L=d[7]+(i(w,6)^i(w,11)^i(w,25))+(w&d[5]^~w&d[6])+l[a]+(g[a]=a<16?g[a]:g[a-16]+(i(v,7)^i(v,18)^v>>>3)+g[a-7]+(i(b,17)^i(b,19)^b>>>10)|0);(d=[L+((i(y,2)^i(y,13)^i(y,22))+(y&d[1]^y&d[2]^d[1]&d[2]))|0].concat(d))[4]=d[4]+L|0}for(a=0;a<8;a++)d[a]=d[a]+f[a]|0}for(a=0;a<8;a++)for(n=3;n+1;n--){var _=d[a]>>8*n&255;p+=(_<16?0:"")+_.toString(16)}return p};var E=1,A=((new Date).getTime()+Math.floor(1e8*Math.random()+1)).toString(16).slice(8);function j(e){var t="_"+A+E++;return window[t]=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.apply(window,[].slice.call(t,0))},t}var R={status:101,message:"该版本不支持此端能力"};function C(){return new Promise((function(e,t){var i=s(),a=/baiduboxapp\/([\d+.]+)/.exec(i);(function(e,t){for(var i=e.toString().split("."),a=t.toString().split("."),n=Math.max(i.length,a.length),o=0;o<n;o++){if(i[o]&&!a[o]&&parseInt(i[o],10)>0||parseInt(i[o],10)>parseInt(a[o],10))return 1;if(a[o]&&!i[o]&&parseInt(a[o],10)>0||parseInt(i[o],10)<parseInt(a[o],10))return-1}return 0})(a&&a[1]||"0","12.20.0.0")<0?t(R):function(e){var t=document.createElement("iframe");t.style.display="none",t.src=e;var i=document.body;i.appendChild(t),setTimeout((function(){i.removeChild(t),t=null}),0)}("baiduboxapp://app/isBeta?callback=".concat(j((function(i){if(0==+(i=JSON.parse(i)).status)e(i.data);else{var a={status:i.status,message:i.message};t(a)}}))))}))}var N=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.ubcParams={},this.logInited=!1,this.options={},this.timerMap=new Map,this.mergeLogger=null,this.retryLogger=null,this.isBeta=!1,this._initUbcParams(),this.set(Object.assign({duration:3,ifHeartbeatTime:!0,testMode:!1,useSendBeacon:!1,useXhr:!1,sendMethod:"get",apptype:_().appid},t)),this._registerPageVisibility(),this._registerBeta()}return o(e,[{key:"_initUbcParams",value:function(){this.ubcParams={},this.ubcDefaultLogData=f.DEFAULT_LOG_DATA,this.ubcParams=g(this.ubcParams,this.ubcDefaultLogData)}},{key:"_initCookie",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).testMode&&(document.cookie="bd_logap_verify=1;domain=.baidu.com;path=/")}},{key:"_initUbcUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.queryParams||{};this.isBeta&&(i=t({beta:1},i)),e.testMode&&(i=t({debug:1},i)),this.ubcUrl=m(e.testMode&&e.testUrl?e.testUrl:f.UBC_URL,g(f.DEFAULT_QUERY,i)),this.ubcMergeUrl=m(e.testMode&&e.testUrl?e.testUrl:v.UBC_URL,g(v.DEFAULT_QUERY,i))}},{key:"set",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t(t({},this.options),i),this._initCookie(this.options),this._initUbcUrl(this.options),this.ubcParams=g(this.ubcParams,{actiondata:{id:this.options.serverId,content:{source:this.options.source||this.options.idfrom||c("source")||c("idfrom"),page:this.options.page,from:this.options.from,type:this.options.type,ext:t({apptype:this.options.apptype},this.options.ext)}}}),+this.options.serverId&&(this.logInited=!0),this.mergeLogger||(this.mergeLogger=new T({logFn:function(t){return e._sendMerge(t,{useXhr:!0,sendMethod:"post"})}})),this.options.logMergeOpt&&this.mergeLogger.set(this.options.logMergeOpt),this.options.logErrRetry&&!this.retryLogger&&(this.retryLogger=new M({logFn:function(e,t){return t.actiondata.metadata.uploadTimeStamp=Date.now(),w(e,t,{useXhr:!0})}}))}},{key:"_send",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},o=Date.now(),r=h("BAIDUID");if(r&&this.options.logErrRetry){n=g(this.ubcParams,{actiondata:{timestamp:o,content:i}});var p=P(r+JSON.stringify(n));return n.actiondata.metadata={md5:p,uploadTimeStamp:o},w(this.ubcUrl,n,t(t({},a),{},{useXhr:!0})).then((function(t){return e.retryLogger.active(),t})).catch((function(t){return e.retryLogger.addLog({url:e.ubcUrl,loggerData:n,loggerId:p}),Promise.reject(t)}))}return n=g(this.ubcParams,{actiondata:{timestamp:o,content:i}}),w(this.ubcUrl,n,a)}},{key:"_sendMerge",value:function(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Date.now(),o=this.ubcParams.actiondata,r=i.map((function(e){return g(o,{timestamp:n,content:e})}));return e=t(t({},v.DEFAULT_LOG_DATA),{},{data:r}),w(this.ubcMergeUrl,e,a)}},{key:"_sendFlow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this._getFlowData(e,t);return w(this.ubcUrl,a,i)}},{key:"send",value:function(){var e,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(!this.logInited)throw"UBC SDK serverId can not be empty!";return n=t({useSendBeacon:this.options.useSendBeacon,useXhr:this.options.useXhr,options:this.options.sendMethod},n),null!==(e=this.options)&&void 0!==e&&null!==(i=e.logMergeOpt)&&void 0!==i&&i.ifAutoMerge?(this.mergeLogger.add(a),Promise.resolve()):this._send(a,n)}},{key:"sendMergeLog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.logInited)throw"UBC SDK serverId can not be empty!";return this.mergeLogger.add(e),Promise.resolve()}},{key:"_getFlowData",value:function(e,t){var i,a,n={},o=t.starttime,r=t.duration,p=t.endtime,s=Date.now();return n=g(this.ubcParams,{actiondata:{content:"-"}}),n=g(n,{actiondata:{timestamp:s,starttime:o,endtime:p,type:1,content:{duration:r,option:g(null===(i=this.ubcParams)||void 0===i||null===(a=i.actiondata)||void 0===a?void 0:a.content,e)}}})}},{key:"startTimingLog",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=this.timerMap.get(i);o||(o=new I(t(t({ifHeartbeatTime:this.options.ifHeartbeatTime,duration:this.options.duration},n),{},{logFn:function(i){e._sendFlow(a,i,t({useSendBeacon:e.options.useSendBeacon},n))}})),this.timerMap.set(i,o)),"RUNNING"!==o.flag?o.start():console.warn("timeLogger[".concat(i,"] is running"))}},{key:"pauseTimingLog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=this.timerMap.get(e);t&&t.stop()}},{key:"stopTimingLog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=this.timerMap.get(e);t&&(t.stop(),this.timerMap.delete(e))}},{key:"_registerPageVisibility",value:function(){var e=this;!function(e){try{var t,i;if(void 0!==document.hidden?(t="hidden",i="visibilitychange"):void 0!==document.msHidden?(t="msHidden",i="msvisibilitychange"):(void 0!==document.webkitHidden||void 0!==document.baiduboxappvisibilitychange)&&(t="webkitHidden",i="webkitvisibilitychange"),void 0===document.addEventListener||void 0===t)return;document.addEventListener(i,(function(){e(!!document[t])}),!1)}catch(e){}}((function(t){t?(e.timerMap.forEach((function(e){e&&"RUNNING"===e.flag&&e.autoStop()})),e.mergeLogger&&e.mergeLogger.clearAll()):e.timerMap.forEach((function(e){e&&"AUTO_STOP"===e.flag&&e.start()}))}))}},{key:"getVersion",value:function(){return"3.3.3"}},{key:"_registerBeta",value:function(){var e,t,i,a=this;e=s(),t=/ (lite|info) baiduboxapp\//i.test(e),i=/ mission baiduboxapp\//i.test(e),!/ baiduboxapp\//i.test(e)||t||i||function(){var e=s();return/swan/i.test(e)}()||C().then((function(e){null!=e&&e.isBeta&&(a.isBeta=!0,a.set())})).catch((function(){}))}}]),e}(),B=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global `this`")}();B.ubcLogger=new N,B.UbcLogger=N}();
