export default class PlaybackRate {
    constructor(api, pluginOptions) {
        this.api = api;
        this.pluginOptions = pluginOptions;
    }
    /**
    * 播放倍速
    */
    get() {
        const isIOS = this.api.getBoxTools().isIOS;
        if (this.api.getMode() === 'na' && isIOS()) {
            return this.api.getPlayerOption('playbackRate');
        }
        const video = this.api.getVideoInstance();
        return video ? video.playbackRate : '';
    }
    set(rate) {
        const {isIOS, invokeP} = this.api.getBoxTools();
        if (this.api.getMode() === 'na' && isIOS()) {
            const containerId = this.api.getPlayerOption('containerId');
            invokeP('video/slrPlaybackRate', {
                    params: {
                        containerId,
                        playbackRate: rate
                    }
                }) // 内核未初始化
                .then(res => (
                    !this.api.getPlayerController('playerKernelInit')
                    && this.api.setPlayerOption('playbackRate', res.playbackRate)
                ));
            return;
        }
        const video = this.api.getVideoInstance();
        video && (video.playbackRate = rate);
        this.api.setPlayerOption('playbackRate', rate);
    }
}
