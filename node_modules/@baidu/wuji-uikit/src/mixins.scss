/**
 * @file common mixins && functions
 * @author wuji
 */

// 根据屏幕密度添加样式 1.5/2/3
@mixin set-media($dpr) {
    $media-1: '(-webkit-min-device-pixel-ratio: 1.2), (-webkit-max-device-pixel-ratio: 1.5), (min-resolution: 1.2dppx), (max-resolution: 1.5dppx)';
    $media-2: '(-webkit-min-device-pixel-ratio: 2), (min-resolution: 2dppx)';
    $media-3: '(-webkit-min-device-pixel-ratio: 3), (min-resolution: 3dppx)';

    @if $dpr == 1.5 {
        @media #{$media-1} {
            @content;
        }
    }

    @if $dpr == 2 {
        @media #{$media-2} {
            @content;
        }
    }

    @if $dpr == 3 {
        @media #{$media-3} {
            @content;
        }
    }
}

// 获取共生编码或业务编码的属性值
@function get-value($code, $map, $map-biz) {
    @if map-has-key($map, $code) {
        @return map-get($map, $code);
    }

    @if map-has-key($map-biz, $code) {
        @return map-get($map, map-get($map-biz, $code));
    }

    @warn "【编码错误】#{$code} 既不是共生编码，也不是业务编码";

    @return null;
}

// 数值类型属性添加单位
@function add-unit($value, $dpr: $dpr, $unit: $unit) {
    @if $value == null or $value == 0 {
        @return 0;
    }
    // 处理全圆角0.5H的情况
    @if $value == '0.5H' {
        $value: 900;
    }
    // list类型遍历每一项添加单位
    @if (length($value) > 1) {
        $result: null;

        @each $var in $value {
            $result: $result add-unit($var, $dpr, $unit);
        }
        // @debug $result;
        @return $result;
    }

    @else {
        @return $value * $dpr / $uikit-dpr * $unit;
    }
}
