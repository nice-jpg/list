"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _version_compare = _interopRequireDefault(require("../../version_compare"));

var _getBoxVersion = _interopRequireDefault(require("../../get-box-version"));

var _isMatrix = _interopRequireDefault(require("../../is-matrix"));

var _stringify = _interopRequireDefault(require("../../stringify"));

var _is = require("../../is");

var _detect = require("../../browser/detect");

var _android = require("../android");

var _ios = require("../ios");

var _const = require("../const");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * @file 调起评论面板
 * @module comment
 * @author wangyongqing <wangyongqing01@baidu.com>
 */
var version = (0, _getBoxVersion.default)();
var isLiteOrInfo = (0, _isMatrix.default)();
/**
 * 显示评论面板
 * @function show
 * @param {Object} params - 显示评论面板参数对象，data 部分
 * @return {Promise}
 */

var _default = function _default(params) {
  if ((0, _detect.isBox)() && (0, _version_compare.default)(version, '8.0') >= 0 || isLiteOrInfo) {
    if (params && (0, _is.isPlainObject)(params)) {
      if ((0, _version_compare.default)(version, '8.2') < 0 || isLiteOrInfo) {
        delete params.rename;
      }

      if ((0, _version_compare.default)(version, '8.5') < 0 || isLiteOrInfo) {
        delete params.placeholder;
      }

      if ((0, _detect.isAndroid)()) {
        (0, _android.prompt)('Bdbox_android_comment', 'showCommentBox', [(0, _stringify.default)(params), '']);
      } else {
        (0, _ios.invokeApp)('comment', {
          action: 'showCommentBox',
          params: (0, _stringify.default)(params, true),
          minver: '8.0.0.0'
        }, '', 'baiduboxapp');
      }

      return Promise.resolve();
    }
  }

  return Promise.reject(_const.COMMAND_NOT_EXIST);
};

exports.default = _default;