/**
 * @file 评论sdk定制分享
 * @author jiangxiaoli(jiangxiaoli01@baidu.com)
 */
import {isAndroid} from '../../browser/detect';
import version_compare from '../../version_compare';
import getBoxVersion from '../../get-box-version';
import isMatrix from '../../is-matrix';
import {COMMAND_NOT_EXIST} from '../const';
import {invokeApp} from '../ios';
import {prompt} from '../android';

export default data => {
    const version = getBoxVersion();
    if (version_compare(version, '5.3.5') >= 0 || isMatrix()) {
        if (isAndroid()) {
            prompt(
                'Bdbox_android_utils',
                'callShare',
                [JSON.stringify(data), 'android_share_scuucess', 'android_share_fail']
            );
        } else {
            invokeApp('callShare', {
                options: encodeURIComponent(JSON.stringify(data))
            });
        }
        return Promise.resolve();
    }
    return Promise.reject(COMMAND_NOT_EXIST);
};
