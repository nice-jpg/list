/**
 * @file 老的底部评论调端能力
 * @author jiangxiaoli(jiangxiaoli01@baidu.com)
 * @param {callName} callback - 回调函数
 */
import version_compare from '../../version_compare';
import getBoxVersion from '../../get-box-version';
import isMatrix from '../../is-matrix';
import {COMMAND_NOT_EXIST} from '../const';
import {isAndroid, isIOS} from '../../browser/detect';
import {invokeApp} from '../ios';
import {prompt} from '../android';

export default callName => {
    const version = getBoxVersion();
    const other = isMatrix();
    if (isIOS() && (version_compare(version, '8.2.3') >= 0 || other)) {
        invokeApp('utils', {
            action: 'getToolBarIcons',
            minver: '8.2.3'
        }, callName);
        return Promise.resolve();
    }
    else if (isAndroid() && (version_compare(version, '8.3') >= 0 || other)) {
        prompt(
            'Bdbox_android_utils',
            'getToolBarIcons',
            [callName]
        );
        return Promise.resolve();
    }
    return Promise.reject(COMMAND_NOT_EXIST);
};
