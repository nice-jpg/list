/**
 * @file 组件 collapse 折叠面板
 * @author baozhixin <baozhixin@baidu.com>
 */

import './style/index.less';
import {Component, DataTypes} from 'san';
import Item from './item';

const prefixCls = 's-collapse';

export default class Collapse extends Component {
    // eslint-disable-next-line
    static template = /*html*/ `
        <div class="${prefixCls}">
            <slot/>
        </div>
    `;

    static dataTypes = {
        accordion: DataTypes.bool,
        value: DataTypes.oneOfType([
            DataTypes.string,
            DataTypes.array
        ])
    };

    initData() {
        return {
            accordion: false,
            value: []
        };
    }

    switch(name, expanded) {
        const {accordion, value} = this.data.get();
        if (!accordion) {
            name = expanded
                ? value.concat(name)
                : value.filter(activeName => activeName !== name);
        }
        this.data.set('value', name);
        this.fire('change', name);
    }
}

Collapse.Item = Item;
