/**
 * @file 组件 toast 反馈提示
 * @author baozhixin <baozhixin@baidu.com>
 */

import './style/index.less';
import Toast from './toast';

let instance = null;

export default function toast(options = {}) {
    if (instance) {
        instance.dispose();
    }

    if (typeof options === 'string') {
        options = {
            text: options
        };
    }

    instance = new Toast({data: options});
    instance.attach(document.body);

    return instance;
}

toast.Component = Toast;

toast.loading = options => {
    if (typeof options === 'string') {
        options = {
            text: options
        };
    }

    let data = {
        ...options,
        loading: true
    };

    return toast(data);
};
