"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.raf = raf;
exports.caf = caf;

/**
 * @file raf, caf - requestAnimationFrame, cancelAnimationFrame polyfill
 * @author baozhixin <baozhixin@baidu.com>
 */
var root = typeof window === 'undefined' ? global : window;
var requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame;
var cancelAnimationFrame = window.cancelAnimationFrame || window.webkitCancelAnimationFrame;

if (!requestAnimationFrame) {
  var fps = 60; // 设置为60帧

  var everyTime = 1000 / fps;
  var lastTime = 0;
  /* eslint-disable space-before-function-paren */

  requestAnimationFrame = function requestAnimationFrame(callback) {
    var currTime = Date.now();
    var delay = Math.max(0, everyTime - currTime + lastTime);
    var id = setTimeout(callback, delay);
    lastTime = currTime + delay;
    return id;
  };

  cancelAnimationFrame = function cancelAnimationFrame(id) {
    clearTimeout(id);
  };
}

function raf(callback) {
  return requestAnimationFrame.call(root, callback);
}

function caf(id) {
  id && cancelAnimationFrame.call(root, id);
}