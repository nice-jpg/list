/**
 * @file 组件样式 无极-敏捷评估-星级评分
 * @author baozhixin <baozhixin@baidu.com>
 */

@import (reference) '../../style/index.less';

@prefix-cls: w-qes;

.@{prefix-cls} {
    // 容器
    &-wrap {
        .wuji-py(M_H_X005);
        .wuji-line(L_X01, bottom, CAM_X417);
    }

    // 两侧间距
    &-spacing {
        .wuji-mx(M_W_X010);
    }

    // 标题
    &-title {
        height: 1.1em;
        text-align: center;
        .wuji-font-one-line(T_X04);
        .wuji-color(CAM_X791);
        .ellipsis();
    }

    // 评分区域
    &-score {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        .wuji-mt(M_H_X005);
    }

    // 评分元素
    &-score-item {
        .wuji-mr(M_W_X008);
        .wuji-fill(CAM_X794);

        &.active {
            .wuji-fill(CAM_X370);
        }

        &.ipos5 {
            margin-right: 0;
        }
    }

    // 底部短文本
    &-stext {
        text-align: center;
        .wuji-mt(M_H_X005);
        .wuji-font-one-line(T_X06);
        .wuji-color(CAM_X793);
    }

    // 烟花动效元素
    &-fireworks {
        position: absolute;
        pointer-events: none;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 624pr;
        height: 96pr;

        .fire,
        .fire-bind {
            position: absolute;
        }

        .fire-bind {
            top: (96pr / 2);
        }

        .fire1,
        .fire8 {
            top: 21pr;
            right: -57pr;
            transform: scale(.9);

            .spark {
                width: 5pr;
            }
        }

        .fire2 {
            top: -21pr;
            right: 105pr;
            transform: scale(.7);
        }

        .fire3 {
            top: 15pr;
            right: 276pr;
            transform: scale(.65);
        }

        .fire4 {
            top: 99pr;
            left: 258pr;
            transform: scale(.6);
        }

        .fire5 {
            top: 60pr;
            left: -33pr;
            transform: scale(.67);
        }

        .fire6 {
            top: -15pr;
            left: 123pr;
            transform: scale(.6);
        }

        .fire7 {
            top: 105pr;
            right: 135pr;
            transform: scale(.5);
        }

        .for4 {
            right: (96pr / 2) + 96 + 36;
        }

        .for5 {
            right: (96pr /2);
        }

        .for4 .spark,
        .for5 .spark {
            &:nth-child(1) {
                transform: rotate(55deg);
            }
            &:nth-child(2) {
                transform: rotate(-55deg);
            }
        }

        .spark {
            position: absolute;
            top: 0;
            width: 6pr;
            height: 12pr;
            margin-left: -1px;
            opacity: 0;
            will-change: opacity, height;
            transform-origin: 50% 0;

            &:nth-child(1) {
                transform: rotate(45deg);
            }
            &:nth-child(2) {
                transform: rotate(45deg * 7);
            }
            &:nth-child(3) {
                transform: rotate(45deg * 3);
            }
            &:nth-child(4) {
                transform: rotate(45deg * 5);
            }
            // &:nth-child(5) {
            //     transform: rotate();
            // }
            &:nth-child(6) {
                transform: rotate(45deg * 2);
            }
            &:nth-child(7) {
                transform: rotate(45deg * 4);
            }
            &:nth-child(8) {
                transform: rotate(45deg * 6);
            }
        }

        .line {
            position: absolute;
            width: 100%;
            height: 100%;
            will-change: transform, height;
            transform-origin: top center;
            .wuji-radius(J_X03);
            .wuji-fill(CAM_X370);
        }
    }

    // 动画属性
    &-score.animate {
        .active {
            animation: aniZoom .35s 1 ease-in-out;
        }

        .ipos2 {
            animation-delay: .1s;
        }

        .ipos3 {
            animation-delay: .2s;
        }

        .ipos4 {
            animation-delay: .3s;
        }

        .ipos5 {
            animation-delay: .4s;
        }

        .spark {
            animation: aniFade .8s linear;
        }

        .line {
            animation: aniBoom .8s ease-in-out;
        }

        .fire2 {
            .spark,
            .line {
                animation-delay: .2s;
            }
        }

        .fire3,
        .fire4 {
            .spark,
            .line {
                animation-delay: .3s;
            }
        }

        .fire5 {
            .spark,
            .line {
                animation-delay: .4s;
            }
        }

        .fire6 {
            .spark,
            .line {
                animation-delay: .5s;
            }
        }

        .fire7 {
            .spark,
            .line {
                animation-delay: .7s;
            }
        }

        .fire8 {
            .spark,
            .line {
                animation-delay: .4s;
                animation-duration: .4s;
            }
            .line {
                animation-name: aniBoom2;
            }
        }
    }
}

@keyframes aniZoom {
    0% {
        transform: scale(1);
    }
    30% {
        transform: scale(1.1);
    }
    100% {
        transform: scale(1);
    }
}

@keyframes aniFade {
    0% {
        opacity: 0;
    }
    70% {
        opacity: 1;
    }
    100% {
        opacity: 0;
    }
}

@keyframes aniBoom {
    0% {
        transform: translateY(0);
        height: 0;
    }
    30% {
        transform: translateY(2px);
    }
    70% {
        height: 100%;
    }
    100% {
        transform: translateY(15px);
        height: 0;
    }
}

@keyframes aniBoom2 {
    0% {
        transform: translateY(0);
        height: 0;
    }
    50% {
        // transform: translateY(1px);
        height: 3px;
    }
    100% {
        transform: translateY(7px);
        height: 0;
    }
}
