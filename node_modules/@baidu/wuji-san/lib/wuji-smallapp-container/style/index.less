/**
 * @file 组件样式 小程序
 * @author raowenjuan <raowenjuan@baidu.com>
 */

@import (reference) '../../style/index.less';

@prefix-cls: w-smallapp-container;

// 容器和各级字段
.@{prefix-cls} {
    .wuji-py(F_M_H_X002);

    .img-txt-wrapper {
        .wuji-px(F_M_W_X047);
        display: flex;
    }

    .img-left {
        .wuji-mr(F_M_W_X021);
        flex-shrink: 0;
        width: 364pr;
    }

    .txt-right {
        display: flex;
        flex-direction: column;
        flex-grow: 1;
    }

    .w-title {
        margin-bottom: -12pr;
        margin-top: -15pr;
    }

    .w-widget {
        .wuji-mt(M_H_X003);
        .wuji-mx(F_M_W_X047);
    }

    .tabContainer + .w-widget .w-widget-items {
        margin-top: -18pr;
    }

    .detailContainer {
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .gridContainer {
        display: flex;
        align-items: flex-end;

        .list2d {
            flex-grow: 1;
        }
        // overflow: visible;
    }

    .level1,
    .level2 {
        .wuji-mt(M_H_X003);
        // margin-top: 24pr; // 无极规范没有24，使用27

        .oneLine,
        .twoLine {
            .wuji-font-nos(T_X06, M_T_X001);
            .wuji-color(CAM_X793); // FC104
        }
    }

    .level3,
    .level4 {
        .wuji-mt(M_H_X003);
        // margin-top: 24pr; // 无极规范没有24，使用27

        .oneLine,
        .twoLine,
        .triLine {
            .wuji-font-nos(T_X08, M_T_X001);
            .wuji-color(CAM_X793); // -
        }
    }

    .level3 {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        // overflow: hidden;
        margin-top: 0;

        .priceText {
            .wuji-font-nos(T_X01, M_T_X008);
            .wuji-color(CAM_X370); // -
        }

        .oneLine,
        .twoLine {
            &:last-child {
                flex: 1;
            }
        }

        .w-col {
            flex-shrink: 0;
        }
    }

    // 图片扩展信息
    .imgExtContainer {
        width: 100%;
        height: 100%;
    }

    // 各级元素
    .lineWrap,
    .lineInList {
        display: flex;
        align-items: center;
    }

    .lineInList {
        .wuji-mt(M_H_X002);

        &:first-child {
            margin-top: 0;
        }
    }

    .imgIcon {
        display: block;
        height: 42pr;
        min-width: 42pr;
        max-width: 249pr;
    }

    .levelButton {
        flex-shrink: 0;
        width: 213pr;
        height: 84pr;
    }

    .buttonBuy {
        width: 100%;
    }

    // 进度条
    .progress {
        position: relative;
        width: 100%;
        height: 18pr;

        &Container {
            display: flex;
            align-items: center;
            .wuji-color(CAM_X486); // -
        }

        .line,
        .track {
            position: absolute;
            height: 100%;
            fill: currentColor;
            .wuji-border-radius(J_X06);
        }

        .line {
            width: 0;
        }

        .track {
            opacity: 0.2;
            width: 100%;
        }

        .text {
            .wuji-ml(M_W_X003);
            flex-shrink: 0;
            color: currentColor;
        }
    }

    // 元素间距
    .imgIcon,
    .itemGap {
        .wuji-mr(M_W_X002);
    }

    // 标签集
    .tagWrap {
        display: flex;
        flex-wrap: wrap;
    }

    .tagItem {
        .wuji-px(M_W_X011);
        .wuji-line(L_X01, around, @radius: J_X06);
        height: 48pr;
        font-size: 30pr;
        line-height: 48pr;
        color: #666;

        &::after {
            border-color: currentColor;
        }
    }

    // 文字截断
    .oneLine {
        .line-clamp(1);
    }

    .twoLine {
        .line-clamp(2);
    }

    .triLine {
        .line-clamp(3);
    }

    // 短竖线
    .vline {
        .wuji-line(L_X01, left, CAM_X792); // -
        .wuji-mx(M_W_X003);
        height: 33pr;
    }

    // 底部tab
    .tabContainer {
        display: flex;
        align-items: center;
        .wuji-my(F_M_H_X002);
        .wuji-mx(F_M_W_X047);

        .tabItem {
            .wuji-mr(M_W_X003); // 业务编码未知
            .wuji-border-radius(J_X15);
            .wuji-background(CAM_X404); // GC12
            .wuji-color(CAM_X791); // GC2
            .wuji-font-one-line(T_X06);
            flex: 1;
            height: 84pr;
            line-height: 84pr;
            text-align: center;

            &:active {
                opacity: 0.2;
            }

            &:last-child {
                margin-right: 0;
            }
        }
    }

    // 标签、tag等间距
    .couponTag,
    .tagItem,
    .level3 .oneLine,
    .level4 .oneLine {
        flex-shrink: 0;
        .wuji-mr(M_W_X005);

        &:last-child {
            margin-right: 0;
        }
    }

    // 胶囊样式
    .imgIconWrap {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .bigIcon {
        width: 84pr;
        height: 84pr;
    }

    .capsule {
        position: absolute;
        .wuji-right(M_W_X003);
        .wuji-bottom(M_H_X002);
    }

    .capsuleIcon {
        // margin-top: 15pr;wuji:margin/padding
        .wuji-mt(M_H_X012);
        width: 30pr;
        height: 30pr;
    }

    // 直播样式
    .videoWrap {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100%;

        .labelWrap {
            .wuji-padding(M_W_X002);
        }

        .videoText {
            flex: 1;
            display: flex;
            align-items: flex-end;
            justify-content: flex-end;
            background-image: linear-gradient(to top, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 72pr);
            .wuji-padding(M_W_X002);
            .wuji-font-one-line(T_X13);
            .wuji-color(CAM_X780); // -
        }
    }

    // 直播动效图标
    .liveIcon {
        display: block;
        width: 100%;
        height: 100%;
        color: inherit;
        stroke: none;
        fill: currentColor;

        .line {
            animation: liveWave 0.68s linear infinite;
        }

        .line1 {
            animation-delay: -0.34s;
        }

        .line2 {
            animation-delay: 0.17s;
        }
    }

    @keyframes liveWave {
        0% {
            height: 30%;
            transform: translateY(35%);
        }

        25% {
            height: 70%;
            transform: translateY(15%);
        }

        50% {
            height: 100%;
            transform: translateY(0);
        }

        75% {
            height: 70%;
            transform: translateY(15%);
        }

        100% {
            height: 30%;
            transform: translateY(35%);
        }
    }
}
