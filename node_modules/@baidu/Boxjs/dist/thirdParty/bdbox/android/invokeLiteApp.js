
var $ = require('@baidu/Boxjs/dist/utils/_bdboxWrapper')
/* eslint-disable */
/**
 * @namespace Bdbox.android
 */
/**
 * @memberOf Bdbox.android
 * @name invokeApp
 * @function
 * @param  {String} name android提供的命名空间
 * @param  {String} func android命名空间下的方法名
 * @param  {Array} args 接受参数
 * @return {Object}      返回对象格式的json
 * @requires common:bdbox/utils/version_compare
 * @requires common:bdbox/utils/getVersion
 * @version  $Id: invokeApp.js 286328 2016-03-14 08:32:28Z wangyongqing01 $
 */
function invokeApp (name, func, args) {
  if (args && !$.isArray(args)) {
    args = Array.prototype.slice.call(arguments, 0).slice(2)
  }
  if (!$.$isLiteBox() || !$.$isAndroid()) {
    return {
      error: 201
    }
  }
  var back = execCaller(name, func, args)

  back = back ? JSON.parse(back) : {}
  back.__from = 'liteApp'
  return back
}

function execCaller (nameSpace, funcName, funcArgs) {
  // 保证要有[]
  var caller = {
    obj: nameSpace,
    func: funcName,
    args: funcArgs ? funcArgs : []
  }
  try {
    return window.prompt('BdboxApp:' + JSON.stringify(caller))
  } catch (e) {
    return {
      error: 201
    }
  }
}
return invokeApp
