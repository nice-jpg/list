
var $ = require('@baidu/Boxjs/dist/utils/_bdboxWrapper')
/**
 * 自定义post表单请求
 * @memberOf Bdbox.utils
 * @namespace Bdbox.utils.postForm
 * @name postForm
 * @author pengkuan
 */
var postForm = {
    /**
     * 创建form表单
     * @params {Object} obj {url:"", params: {key:value}}
     */
    createForm: function(obj) {
        var form = document.createElement("form");

        form.id = "searchbox_temp_form";
        form.name = "searchbox_temp_form";
        form.method = "post";
        form.action = obj.url;

        var ipt;

        for (var key in obj.params) {
            ipt = document.createElement("input");
            ipt.type = "hidden";
            ipt.name = key;
            ipt.value = obj.params[key];
            form.appendChild(ipt);
        }

        return form;
    },

    /**
     * 删除可能重复创建的form表单
     */
    deleteForm: function() {
        var form = document.getElementById("searchbox_temp_form");
        if (form) {
            document.body.removeChild(form);
        }
    },

    /**
     * 发post请求
     * @params {Object} obj {url:"", params: {key:value}}
     */
    post: function(obj) {
        this.deleteForm();
        var form = this.createForm(obj);
        document.body.appendChild(form);
        form.submit();
        this.deleteForm();
    }
};

return postForm;
