
var $ = require('@baidu/Boxjs/dist/utils/_bdboxWrapper')
/* eslint-disable */
/**
 * 调起钱包
 * @memberOf Bdbox.client
 * @name wallet
 */
var getVersion = require('../utils/getVersion'),
    version_compare = require('../utils/version_compare'),
    A_NAMESPACE = "Bdbox_android_utils",
    ios_invokeApp = require('../ios/invokeApp'),
    android_invokeApp =  require('../android/invokeApp');

var self = function(options) {
    if (version_compare(getVersion(), "5.3") < 0) {
        return;
    }

    if (!(options && typeof options === "object")) {
        return;
    }

    if ($.$isIOS()) {
        /**
         * mode=0代表先进入钱包页面再打开钱包功能
         * mode=1代表直接打开钱包功能
         * type的值0-充值，1-转账，2-绑定银行卡，3-我的交易，4-安全中心
        */

        var type = options.type,
            mode = options.mode;

        ios_invokeApp("wallet", {
            type: type,
            mode: mode,
            minver: "5.3.0.0"
        });
    } else {
        /**
         * 安卓6.0以及以上版本调起钱包需要serviceId
         * serviceId=1代表话费充值
         * serviceId=2代表转账
         * serviceId=32代表账户余额
         * serviceId=4代表我的银行卡
         * serviceId=64代表我的优惠券
         * serviceId=16代表我的交易
         * serviceId=8代表支付安全
         ********************************************
         * 安卓5.3~5.5版本调起钱包需要invokeType
         * invokeType=phone_charge代表话费充值
         * invokeType=bank_card_transfer代表转账
         * 其余的接口需要的时候找CRD..........
        */

        var serviceId = options.serviceId,
            invokeType = options.invokeType,
            intent = "",
            min_v = "";

        if (version_compare(getVersion(), "6.0") >= 0) {
            intent = "intent:#Intent;action=com.baidu.searchbox.wallet.action.WALLET_VIEW;l.service_id=" + serviceId + ";end";
            min_v = "16785664";
        } else {
            intent = "intent:#Intent;action=com.baidu.searchbox.action.HOME;S.invoke_type=" + invokeType;
            min_v = "16783629";
        }

        var opt = {
                intent: intent,
                "class": "",
                min_v: min_v,
                mode: 0
            };
        android_invokeApp(A_NAMESPACE, "command", [JSON.stringify(opt)]);
    }
};

return self;
