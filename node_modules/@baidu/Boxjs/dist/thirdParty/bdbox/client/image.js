
var $ = require('@baidu/Boxjs/dist/utils/_bdboxWrapper')
/* eslint-disable */
/**
 * 调起美图浏览框架；
 * @memberOf Bdbox.client
 * @name image
 *
 */
var getVersion = require('../utils/getVersion'),
  version_compare = require('../utils/version_compare'),
  A_NAMESPACE = 'Bdbox_android_utils',
  ios_invokeApp = require('../ios/invokeApp'),
  android_invokeApp = require('../android/invokeApp')

var self = function (options) {
  var defalutOpt = {
      callback: '',
      url: [],
      type: '0',
      index: '0',
      source: ''
    },
    attr

  for (attr in defalutOpt) {
    if (!options.hasOwnProperty(attr)) {
      options[attr] = defalutOpt[attr]
    }
  }

  var _options = JSON.parse(JSON.stringify(options))
  delete _options.callback

    /* 6.0版本支持js调起美图浏览框架 */
  if (version_compare(getVersion(), '6.0') >= 0) {
    var opt = JSON.stringify(_options)
    if ($.$isIOS()) {
      ios_invokeApp('utils', {
        'action': 'image',
        'params': encodeURIComponent(opt),
        'minver': '6.0.0.0'
      }, options.callback)
    } else {
      android_invokeApp(A_NAMESPACE, 'image', [opt, options.callback])
    }
  }
}
return self
