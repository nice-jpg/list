
var $ = require('@baidu/Boxjs/dist/utils/_bdboxWrapper')
/* eslint-disable */
/**
 * 通过客户端设置cookie；
 * @memberOf Bdbox.client
 * @name setcookie
 * @
 */
var getVersion = require('../utils/getVersion'),
  version_compare = require('../utils/version_compare'),
  A_NAMESPACE = 'Bdbox_android_utils',
  ios_invokeApp = require('../ios/invokeApp'),
  android_invokeApp = require('../android/invokeApp')

var self = function (options) {
  var defalutOpt = {
      name: '',
      value: '',
      domain: location.hostname,
      url: location.hostname,
      expires: 0,
      'max-age': 0,
      path: '/'
    },
    attr

  for (attr in defalutOpt) {
    if (!options.hasOwnProperty(attr)) {
      options[attr] = defalutOpt[attr]
    }
  }

  if (!options.name || !options.value || version_compare(getVersion(), '6.1') < 0) {
    return
  }

  for (attr in options) {
    options[attr] = (options[attr]).toString()
  }
  options = JSON.stringify(options)

  if ($.$isIOS()) {
    ios_invokeApp('utils', {
      'action': 'setCookie',
      'options': encodeURIComponent(options),
      'minver': '6.1.0.0'
    }, '')
  } else {
    android_invokeApp(A_NAMESPACE, 'setcookie', [options, ''])
  }
}
return self
