/**
 * @file
 * @author renzhonghua
 */

/**
 * @api {Version 1.0} Boxjs.log(data) 日志统计(log)
 * @apiDescription 日志统计
 * @apiVersion 0.1.0
 * @apiName Boxjs.log
 * @apiGroup Log
 *
 * @apiParam {String} name 必填，日志名称
 * @apiParam {Object} data 必填，log配置
 *
 *
 * @apiSuccess (成功) {Object} result 返回值
 *
 * @apiSuccessExample 成功then:
 * {}
 *
 *
 * @apiError (失败) {String} errCode 错误码
 * @apiError (失败) {String} errMsg 错误信息
 * @apiErrorExample 失败:
 *     {
 *          'errCode': 102,
 *          'errMsg': "参数错误"
 *     }
 *
 *
 * @apiExample {js} 示例:
 *  Boxjs.log({
 *      name: 'ubcReport',
 *      data: {
 *          actionId:'123',
 *          min_v:'16789504',
 *          value:'上报字符串'
 *      }
 *  })
 *  .then(function (result) {
 *      console.log(result);
 *  })
 *  .catch(function (e) {
 *      console.log(e.errCode);
 *      console.log(e.errMsg);
 *  })
 *  .finally(function () {
 *
 *  });
 *
 *
 *
 * @apiExample {js} 具体业务示例:
 * 1、【feed】H5页面调用端UBC上报统计数据(ubcReport)
 * 2、onPerformanceFlowEvent(performanceFlowEvent)
 * 3、reliableLog(reliableLog)
 * 4、落地页分段时长统计appear(durationAppear)
 * 5、落地页分段时长统计disappear(durationDisappear)
 * 6、feedReport(feedReport)
 * 7、ubcEvent [HTML-Native](  name: )
 * 8、ubcFlow [HTML-Native](ubcFlow)
 * 9、ispeedRNLog log地址：http://ispeed.baidu.com/rnlog/[HTML-Native](logToIspeed)
 *
 * 1、【feed】H5页面调用端UBC上报统计数据
 * {@link http://invoker.baidu.com/invokers?id=56fa3bd329c7a9e44394f913}
 * 支持平台：ios、安卓、lite
 * ios手百版本：7.3
 * 安卓手百版本：7.3
 * lite手百版本：0
 * ios支持框架：search、h5、hybrid、video、tags
 * 安卓支持框架：search、h5、hybrid、video、tags
 * lite支持框架：search、h5、hybrid、video、tags
 *
 *     Boxjs.log({
 *         name: 'ubcReport',
 *         data: {
 *             actionId:'123',
 *             min_v:'16789504',
 *             value:'上报字符串'
 *         }
 *     })
 *     .then(function (result) {
 *         console.log(result);
 *     })
 *     .catch(function (e) {
 *         console.log(e.errCode);
 *         console.log(e.errMsg);
 *     })
 *     .finally(function () {
 *
 *     });
 *
 *
 *
 *
 * 2、onPerformanceFlowEvent
 * {@link http://invoker.baidu.com/invokers?id=584f6f455a6289a04a43fa7a}
 * 支持平台：ios、安卓、lite
 * ios手百版本：7.2
 * 安卓手百版本：7.2
 * lite手百版本：0
 * ios支持框架：search、h5、hybrid、video、tags
 * 安卓支持框架：search、h5、hybrid、video、tags
 * lite支持框架：search、h5、hybrid、video、tags
 *
 *     Boxjs.log({
 *         name: 'performanceFlowEvent',
 *         data: {
 *             actionId: 'end',
 *             value: Date.now(),
 *             operation:'end'
 *         }
 *     })
 *     .then(function (result) {
 *         console.log(result);
 *     })
 *     .catch(function (e) {
 *         console.log(e.errCode);
 *         console.log(e.errMsg);
 *     })
 *     .finally(function () {
 *
 *     });
 *
 * 3、reliableLog
 * {@link }
 * 支持平台：ios、安卓、lite
 * ios手百版本：8.2
 * 安卓手百版本：8.2
 * lite手百版本：0
 * ios支持框架：search、h5、hybrid、video、tags
 * 安卓支持框架：search、h5、hybrid、video、tags
 * lite支持框架：search、h5、hybrid、video、tags
 *
 *     Boxjs.log({
 *         name: 'reliableLog',
 *         data: {
 *             description: '测试失败',
 *             message: '可能失败了',
 *             type:'sdfs'
 *         }
 *     })
 *     .then(function (result) {
 *         console.log(result);
 *     })
 *     .catch(function (e) {
 *         console.log(e.errCode);
 *         console.log(e.errMsg);
 *     })
 *     .finally(function () {
 *
 *     });
 *
 *
 * 4、落地页分段时长统计appear
 * {@link http://wiki.baidu.com/pages/viewpage.action?pageId=305137439}
 * 支持平台：ios、安卓、lite
 * ios手百版本：8.3
 * 安卓手百版本：8.3
 * lite手百版本：0
 * ios支持框架：search、h5、hybrid、video、tags
 * 安卓支持框架：search、h5、hybrid、video、tags
 * lite支持框架：search、h5、hybrid、video、tags
 *
 *     Boxjs.log({
 *         name: 'durationAppear',
 *         data: {
 *             key: 'comment_feednews'
 *         }
 *     })
 *     .then(function (result) {
 *         console.log(result);
 *     })
 *     .catch(function (e) {
 *         console.log(e.errCode);
 *         console.log(e.errMsg);
 *     })
 *     .finally(function () {
 *
 *     });
 *
 *
 * 5、落地页分段时长统计disappear
 * {@link http://wiki.baidu.com/pages/viewpage.action?pageId=305137439}
 * 支持平台：ios、安卓、lite
 * ios手百版本：8.3
 * 安卓手百版本：8.3
 * lite手百版本：0
 * ios支持框架：search、h5、hybrid、video、tags
 * 安卓支持框架：search、h5、hybrid、video、tags
 * lite支持框架：search、h5、hybrid、video、tags
 *
 *     Boxjs.log({
 *         name: 'durationDisappear',
 *         data: {
 *             key: 'comment_feednews'
 *         }
 *     })
 *     .then(function (result) {
 *         console.log(result);
 *     })
 *     .catch(function (e) {
 *         console.log(e.errCode);
 *         console.log(e.errMsg);
 *     })
 *     .finally(function () {
 *
 *     });
 *
 *
 * 6、feedReport
 * {@link }
 * 支持平台：ios、安卓、lite
 * ios手百版本：8.3
 * 安卓手百版本：8.3
 * lite手百版本：0
 * ios支持框架：search、h5、hybrid、video、tags
 * 安卓支持框架：search、h5、hybrid、video、tags
 * lite支持框架：search、h5、hybrid、video、tags
 *
 *     Boxjs.log({
 *         name: 'feedReport',
 *         data: {
 *             channel: 32598,
 *             nid: 'news_3483613491784375451',
 *             tpl: 'bjh',
 *             tab_id: '1'
 *         }
 *     })
 *     .then(function (result) {
 *         console.log(result);
 *     })
 *     .catch(function (e) {
 *         console.log(e.errCode);
 *         console.log(e.errMsg);
 *     })
 *     .finally(function () {
 *
 *     });
 *
 * 7、ubcEvent [HTML-Native]
 * {@link http://talos.baidu.com/document/talos/baidu-invoke/list/#api-Ubc-event}
 * 支持平台：iOS、安卓
 *   let options = {
 *       name: 'ubcEvent',
 *       data: {
 *           actionId: 'hnDemo',
 *           value: {
 *               channelId: 'hnDemoChannel',
 *               test: 'hnTest'
 *           }
 *       }
 *   };
 * Boxjs.log(options).then(result => {
 *           console.log('success', result);
 *           alert('app.js success: ' + JSON.stringify(result));
 *       }).catch((errCode, errMsg) => {
 *           console.log('err', errCode, errMsg);
 *           alert('app.js err: ' + JSON.stringify(errCode, errMsg));
 *       });
 *
 * 8、ubcFlow [HTML-Native]
 * {@link http://talos.baidu.com/document/talos/baidu-invoke/list/#api-Ubc-flow}
 * 支持平台：iOS、安卓
 * let options = {
 *   name: 'ubcFlow',
 *   data: {
 *       actionId: 'ubcID',
 *       status: 'start',
 *       value: {
 *           channelId: 'channelId',
 *           test: 'test'
 *       },
 *       subChannel: {
 *           status: 'start',
 *           subChannelId: 'subChannelId',
 *           value: {
 *               test: 'test'
 *           },
 *       },
 *       addEvent: {
 *           id: '当前event的id',
 *           content: 'event描述信息'
 *       }
 *   }
 * };
 * Boxjs.log(options).then(result => {
 *           console.log('success', result);
 *           alert('app.js success: ' + JSON.stringify(result));
 *       }).catch((errCode, errMsg) => {
 *           console.log('err', errCode, errMsg);
 *           alert('app.js err: ' + JSON.stringify(errCode, errMsg));
 *       });
 *
 *
 * 7、ispeedRNLog log地址：http://ispeed.baidu.com/rnlog/[HTML-Native]
 * {@link http://talos.baidu.com/document/talos/baidu-invoke/list/#api-Utils-uploadJSConsoleData}
 * 支持平台：iOS、安卓
 * let options = {
 *   name: 'logToIspeed',
 *   data: {
 *       bundleId: 'box.rnplugin.feedhn',
 *       componentName: 'Novel'
 *   }
 * };
 * Boxjs.log(options).then(result => {
 *           console.log('success', result);
 *           alert('app.js success: ' + JSON.stringify(result));
 *       }).catch((errCode, errMsg) => {
 *           console.log('err', errCode, errMsg);
 *           alert('app.js err: ' + JSON.stringify(errCode, errMsg));
 *       });
 */
var invoke = require('../../core/invoke');
var logMap = {
    durationDisappear: 'ubc/duration/disappear',
    durationAppear: 'ubc/duration/appear',
    reliableLog: 'utils/onReliableLog',
    performanceFlowEvent: 'utils/onPerformanceFlowEvent',
    ubcReport: 'utils/ubcReport',
    feedReport: 'feed/report',
    channelStatistics: 'channelStatistics/action'
};
return function (obj) {
    var action = logMap[obj.name] || obj.name;
    return invoke(action, obj.data, obj.abtest);
};