/**
* @file
* @author renzhonghua
*/

var invoke = require('../../core/invoke');

function paramsHandle(obj, type) {
    var action = 'datachannel/' + type;
    var data = obj.data || {};
    data.name = obj.name;
    
    return invoke(action, data, obj.abtest);
}

return {
    fire: function (obj) {
        /* istanbul ignore next */
        return paramsHandle(obj, 'sendbroadcast');
    },
    on: function (obj) {
        return paramsHandle(obj, 'register');
    },
    off: function (obj) {
        return paramsHandle(obj, 'unregister');
    }
};