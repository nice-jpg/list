"use strict";
/**
 * @file 对传入url query 部分转成json格式
 * @author wangyongqing <wangyongqing01@baidu.com>
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.query2json = void 0;
var decode_uri_component_1 = require("./decode-uri-component");
/**
 * 对传入url query 部分转成json格式
 *
 * @param url 待处理的url
 * @param [safe = true] 是否启用安全 decode 模式，默认 true
 * @return 返回处理后的 json
 */
function query2json(url, safe) {
    if (safe === void 0) { safe = true; }
    var locse = url.split('?');
    var search = locse[1] ? locse[1] : locse[0];
    var pairs = search.split('&');
    var result = {};
    pairs.forEach(function (item) {
        var pair = item.split('=');
        if (pair[0].length > 0) {
            var resultPair = '';
            try {
                resultPair = (safe ? (0, decode_uri_component_1.decodeUriComponent)(pair[1]) : decodeURIComponent(pair[1])) || '';
            }
            catch (e) {
                console.info(e);
            }
            result[pair[0]] = resultPair;
        }
    });
    return result;
}
exports.query2json = query2json;
