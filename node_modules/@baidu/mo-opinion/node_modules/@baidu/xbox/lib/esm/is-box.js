/**
 * @file Created on Thu Nov 15 2018
 * @author wangyongqing <wangyongqing01@baidu.com>
 */
import { UA } from './ua';
/**
 * 是否是手百产品，支持矩阵产品
 *
 * @param [subName=''] 手百矩阵产品标识，取值如：''|lite|pro|info|mission
 * @param ua 传入的 userAgent，如果不传则取 navigator.userAgent
 * @return 是否是手百判断结果
 * @example
 * isBox()
 * isBox('lite')
 * isBox('pro', 'fdafafdafaf pro baiduboxapp')
 */
export function isBox(subName = '', ua = UA) {
    if (subName === 'main') {
        subName = '';
    }
    // baiduboxapp: 框的常规UA
    // biduboxapp:  个别网站会触发内核的风控策略(比如域名以le.com结尾)，UA会被替换
    const reg = / (baiduboxapp|biduboxapp)\//i;
    if (!reg.test(ua)) {
        // 框外
        return false;
    }
    const matchRes = reg.exec(ua);
    const sign = matchRes[1];
    if (!~ua.indexOf(`${subName} ${sign}`)) {
        // 具体的 app ：主线 / lite / info / pro 等
        return false;
    }
    return true;
}
