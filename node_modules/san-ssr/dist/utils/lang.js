"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.functionString = exports.getMember = exports.isValidIdentifier = void 0;
function isValidIdentifier(str) {
    return !!/^[a-zA-Z_$][\w$]*$/.exec(str);
}
exports.isValidIdentifier = isValidIdentifier;
function getMember(clazz, property, defaultValue) {
    if (clazz[property])
        return clazz[property];
    if (clazz.prototype && clazz.prototype[property]) {
        return clazz.prototype[property];
    }
    return defaultValue;
}
exports.getMember = getMember;
function functionString(fn) {
    let str = fn.toString();
    if (!/^\s*function(\s|\()/.test(str) && /^\s*\w+\s*\([^)]*\)\s*{/.test(str)) { // es6 method syntax: foo(){}
        str = 'function ' + str;
    }
    /**
     * 去除函数外缩进。例如：
     *
     * Input:
     * function() {
     *         console.log(1)
     *         return 1
     *     }
     *
     * Output:
     * function() {
     *     console.log(1)
     *     return 1
     * }
     */
    const lines = str.split('\n');
    const firstLine = lines.shift();
    const minIndent = lines.reduce((min, line) => Math.min(min, /^\s*/.exec(line)[0].length), Infinity);
    return [firstLine, ...lines.map(line => line.slice(minIndent))].join('\n');
}
exports.functionString = functionString;
//# sourceMappingURL=lang.js.map